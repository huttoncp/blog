<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.3.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Dr. Craig P. Hutton">

  
  
  
    
  
  <meta name="description" content="1 TL;DR2 Introduction2.1 “long” data, “wide” data, and “tidy” data3 pivot_longer()4 pivot_wider()5 unite()6 separate()7 Navigation8 Notes1 TL;DRIn the 5th post of the Scientist’s Guide to R series we explore using the tidyr package to reshape data. You’ll learn all about splitting and combining columns and how to do wide to long or long to wide transformations.">

  
  <link rel="alternate" hreflang="en-us" href="/post/2020-01-25-asgr-2-1-data-transformation-part-2/">

  


  

  

  

  

  

  

  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

  

  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700|Roboto:400,400italic,700|Roboto+Mono">
  

  
  
  
  <link rel="stylesheet" href="/css/academic.min.dd3b7994ab53a1ddaf2421ab58c1587f.css">

  

  
  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-140167948-1', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  
  

  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/post/2020-01-25-asgr-2-1-data-transformation-part-2/">

  
  
  
  
    
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@huttoncp">
  <meta property="twitter:creator" content="@huttoncp">
  
  <meta property="og:site_name" content="Craig Hutton, PhD">
  <meta property="og:url" content="/post/2020-01-25-asgr-2-1-data-transformation-part-2/">
  <meta property="og:title" content="A Scientist&#39;s Guide to R: Step 2.1 Data Transformation - part 2 | Craig Hutton, PhD">
  <meta property="og:description" content="1 TL;DR2 Introduction2.1 “long” data, “wide” data, and “tidy” data3 pivot_longer()4 pivot_wider()5 unite()6 separate()7 Navigation8 Notes1 TL;DRIn the 5th post of the Scientist’s Guide to R series we explore using the tidyr package to reshape data. You’ll learn all about splitting and combining columns and how to do wide to long or long to wide transformations."><meta property="og:image" content="/post/2020-01-25-asgr-2-1-data-transformation-part-2/featured.png">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2020-01-25T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2020-01-25T00:00:00&#43;00:00">
  

  

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
  window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#2962ff",
          "text": "#fff"
        },
        "button": {
          "background": "#fff",
          "text": "#2962ff"
        }
      },
      "theme": "classic",
      "content": {
        "message": "This website uses cookies to ensure you get the best experience on our website.",
        "dismiss": "Got it!",
        "link": "Learn more",
        "href": "/privacy/"
      }
    })});
</script>


  

  <title>A Scientist&#39;s Guide to R: Step 2.1 Data Transformation - part 2 | Craig Hutton, PhD</title>

</head>
<body id="top" data-spy="scroll" data-target="#TableOfContents" data-offset="71" >
  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" role="textbox" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/"><img src="/img/Picture1.png" alt="Craig Hutton, PhD"></a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav mr-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#skills">
            
            <span>Skills</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#experience">
            
            <span>Experience</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#publications">
            
            <span>Publications</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#accomplishments">
            
            <span>Awards</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        

      
      </ul>
      <ul class="navbar-nav ml-auto">
      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  













<div class="article-header d-xl-none">
  <div class="featured-image" style="background-image: url('/post/2020-01-25-asgr-2-1-data-transformation-part-2/featured_hu3922ef13c9d2627cf512baf19fc48074_35544_800x0_resize_lanczos_2.png');"></div>
  
</div>


<div class="container-fluid split-header d-none d-xl-block">
  <div class="row">
    <div class="col-6">
      <div class="split-header-content">
        <h1 itemprop="name">A Scientist&#39;s Guide to R: Step 2.1 Data Transformation - part 2</h1>

        

        



<meta content="2020-01-25 00:00:00 &#43;0000 UTC" itemprop="datePublished">
<meta content="2020-01-25 00:00:00 &#43;0000 UTC" itemprop="dateModified">

<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    <time>Jan 25, 2020</time>
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    33 min read
  </span>
  

  
  
  <span class="middot-divider"></span>
  <a href="/post/2020-01-25-asgr-2-1-data-transformation-part-2/#disqus_thread"></a>
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder"></i>
    <a href="/categories/r/">R</a>, <a href="/categories/reproducible-research/">Reproducible Research</a>, <a href="/categories/data-cleaning-and-transformation/">Data Cleaning and Transformation</a></span>
  

  

</div>


        















        
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=A%20Scientist%27s%20Guide%20to%20R%3a%20Step%202.1%20Data%20Transformation%20-%20part%202&amp;url=%2fpost%2f2020-01-25-asgr-2-1-data-transformation-part-2%2f"
         target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2fpost%2f2020-01-25-asgr-2-1-data-transformation-part-2%2f"
         target="_blank" rel="noopener">
        <i class="fab fa-facebook-f"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fpost%2f2020-01-25-asgr-2-1-data-transformation-part-2%2f&amp;title=A%20Scientist%27s%20Guide%20to%20R%3a%20Step%202.1%20Data%20Transformation%20-%20part%202"
         target="_blank" rel="noopener">
        <i class="fab fa-linkedin-in"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2fpost%2f2020-01-25-asgr-2-1-data-transformation-part-2%2f&amp;title=A%20Scientist%27s%20Guide%20to%20R%3a%20Step%202.1%20Data%20Transformation%20-%20part%202"
         target="_blank" rel="noopener">
        <i class="fab fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=A%20Scientist%27s%20Guide%20to%20R%3a%20Step%202.1%20Data%20Transformation%20-%20part%202&amp;body=%2fpost%2f2020-01-25-asgr-2-1-data-transformation-part-2%2f">
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


      </div>
    </div>
    <div class="col-6">
      <div class="split-header-image">
        <img src="/post/2020-01-25-asgr-2-1-data-transformation-part-2/featured_hu3922ef13c9d2627cf512baf19fc48074_35544_680x500_fill_q90_lanczos_smart1_2.png" itemprop="image" alt="">
        
      </div>
    </div>
  </div>
</div>

<div class="article-container d-xl-none">
  <h1 itemprop="name">A Scientist&#39;s Guide to R: Step 2.1 Data Transformation - part 2</h1>

  

  



<meta content="2020-01-25 00:00:00 &#43;0000 UTC" itemprop="datePublished">
<meta content="2020-01-25 00:00:00 &#43;0000 UTC" itemprop="dateModified">

<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    <time>Jan 25, 2020</time>
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    33 min read
  </span>
  

  
  
  <span class="middot-divider"></span>
  <a href="/post/2020-01-25-asgr-2-1-data-transformation-part-2/#disqus_thread"></a>
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder"></i>
    <a href="/categories/r/">R</a>, <a href="/categories/reproducible-research/">Reproducible Research</a>, <a href="/categories/data-cleaning-and-transformation/">Data Cleaning and Transformation</a></span>
  

  
    
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=&amp;url="
         target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u="
         target="_blank" rel="noopener">
        <i class="fab fa-facebook-f"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=&amp;title="
         target="_blank" rel="noopener">
        <i class="fab fa-linkedin-in"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=&amp;title="
         target="_blank" rel="noopener">
        <i class="fab fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=&amp;body=">
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

  














</div>



  <div class="article-container">

    <div class="article-style" itemprop="articleBody">
      

<div id="TOC">
<ul>
<li><a href="#tldr"><span class="toc-section-number">1</span> <strong>TL;DR</strong></a></li>
<li><a href="#introduction"><span class="toc-section-number">2</span> <strong>Introduction</strong></a><ul>
<li><a href="#long-data-wide-data-and-tidy-data"><span class="toc-section-number">2.1</span> <strong>“long”</strong> data, <strong>“wide”</strong> data, and <strong>“tidy”</strong> data</a></li>
</ul></li>
<li><a href="#pivot_longer"><span class="toc-section-number">3</span> <strong>pivot_longer()</strong></a></li>
<li><a href="#pivot_wider"><span class="toc-section-number">4</span> <strong>pivot_wider()</strong></a></li>
<li><a href="#unite"><span class="toc-section-number">5</span> <strong>unite()</strong></a></li>
<li><a href="#separate"><span class="toc-section-number">6</span> <strong>separate()</strong></a></li>
<li><a href="#navigation"><span class="toc-section-number">7</span> Navigation</a></li>
<li><a href="#notes"><span class="toc-section-number">8</span> Notes</a></li>
</ul>
</div>

<div id="tldr" class="section level1">
<h1><span class="header-section-number">1</span> <strong>TL;DR</strong></h1>
<p>In the 5th post of the <a href="https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/">Scientist’s Guide to R series</a> we explore using the <a href="https://tidyr.tidyverse.org/">tidyr</a> package to reshape data. You’ll learn all about splitting and combining columns and how to do wide to long or long to wide transformations.</p>
</div>
<div id="introduction" class="section level1">
<h1><span class="header-section-number">2</span> <strong>Introduction</strong></h1>
<p>In the 5th post of the <a href="https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/">Scientist’s Guide to R series</a> we explore using the <a href="https://tidyr.tidyverse.org/">tidyr</a> package to reshape data. As you’ll see, this is really helpful if you are working with repeated-measures data, which is pretty common these days.</p>
<p>Specifically, we will be learning how to use 4 core functions of the <a href="https://tidyr.tidyverse.org/">tidyr</a> package to:</p>
<ol style="list-style-type: decimal">
<li><p>Perform “wide-to-long” transformations using <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a>, converting multiple columns of the same measure into a single value column and associated key column.</p></li>
<li><p>Spread a pair of value and key columns across multiple columns, AKA “long-to-wide” transformations, using <a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider()</a>.</p></li>
<li><p>Combine multiple columns into a single column using <a href="https://tidyr.tidyverse.org/reference/unite.html">unite()</a>.</p></li>
<li><p>Perform the reverse operation to <a href="https://tidyr.tidyverse.org/reference/separate.html">separate()</a> a complex column into multiple simple columns.</p></li>
</ol>
<p>Additional relevant functions that build on this foundation will also be covered where appropriate. If some of these terms don’t mean very much to you now don’t worry. Hopefully they will by the time you’re done reading this post!</p>
<p>In this post I will assume you know how to use the pipe operator (<code>%&gt;%</code>), which I covered <a href="https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#chaining-functions-with-the-pipe-operator">here</a>.</p>
<p>Getting repeated-measures data ready for analysis will be no trouble at all once you’ve mastered these functions.</p>
<p>The examples below will make use of 2 datasets provided by R packages: the gapminder life expectancy data from the <a href="https://www.rdocumentation.org/packages/gapminder/versions/0.3.0">gapminder</a> package and the OBrienKaiser data from the carData package. Since carData is automatically also loaded with the <a href="https://cran.r-project.org/web/packages/car/index.html">car</a> package which we will be using later in the series for regression diagnostics (car = <strong>c</strong>ompanion to <strong>a</strong>pplied <strong>r</strong>egression), we’ll import the OBrienKaiser data indirectly via the car package.</p>
<p>These 2 datasets were chosen because they both contain repeated measurements. One, gapminder, is by default in the so-called “long” form. While the other, OBrienKaiser, is by default in the so-called “wide” form.</p>
<p>Recall that we load a package using the <code>library()</code> function, which imports any data structures and functions from the package and makes them available for use in the current R session.</p>
<pre class="r"><code>library(gapminder) #load the gapminder package which mostly just contains the gapminder dataset

library(car) #load the car package with the associated OBrienKaiser data</code></pre>
<p>Naturally the 1st thing you should do after importing any data is to examine its structure using either <code>str()</code> or <code>dplyr::glimpse()</code>, so that’s what we’ll do next. Data from packages also usually comes with helpful documentation you can view using ?data_object_name.</p>
<pre class="r"><code>#since I prefer to use glimpse() over str() we&#39;ll also load the tidyverse
#package collection (glimpse is included with both tibble and dplyr) which also
#loads the tidyr package we will need later anyways. 
#For now this gives us access to both the pipe operator and the glimpse function.

library(tidyverse)

gapminder %&gt;% glimpse</code></pre>
<pre><code>## Observations: 1,704
## Variables: 6
## $ country   &lt;fct&gt; Afghanistan, Afghanistan, Afghanistan, Afghanistan, Afgha...
## $ continent &lt;fct&gt; Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asi...
## $ year      &lt;int&gt; 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 199...
## $ lifeExp   &lt;dbl&gt; 28.801, 30.332, 31.997, 34.020, 36.088, 38.438, 39.854, 4...
## $ pop       &lt;int&gt; 8425333, 9240934, 10267083, 11537966, 13079460, 14880372,...
## $ gdpPercap &lt;dbl&gt; 779.4453, 820.8530, 853.1007, 836.1971, 739.9811, 786.113...</code></pre>
<pre class="r"><code>OBrienKaiser %&gt;% glimpse</code></pre>
<pre><code>## Observations: 16
## Variables: 17
## $ treatment &lt;fct&gt; control, control, control, control, control, A, A, A, A, ...
## $ gender    &lt;fct&gt; M, M, M, F, F, M, M, F, F, M, M, M, F, F, F, F
## $ pre.1     &lt;dbl&gt; 1, 4, 5, 5, 3, 7, 5, 2, 3, 4, 3, 6, 5, 2, 2, 4
## $ pre.2     &lt;dbl&gt; 2, 4, 6, 4, 4, 8, 5, 3, 3, 4, 3, 7, 5, 2, 2, 5
## $ pre.3     &lt;dbl&gt; 4, 5, 5, 7, 6, 7, 6, 5, 4, 5, 4, 8, 6, 3, 3, 7
## $ pre.4     &lt;dbl&gt; 2, 3, 7, 5, 4, 9, 4, 3, 6, 3, 2, 6, 8, 1, 4, 5
## $ pre.5     &lt;dbl&gt; 1, 4, 7, 4, 3, 9, 5, 2, 4, 4, 3, 3, 6, 2, 4, 4
## $ post.1    &lt;dbl&gt; 3, 2, 4, 2, 6, 9, 7, 2, 4, 6, 5, 9, 4, 5, 6, 7
## $ post.2    &lt;dbl&gt; 2, 2, 5, 2, 7, 9, 7, 4, 5, 7, 4, 10, 6, 6, 6, 7
## $ post.3    &lt;dbl&gt; 5, 3, 7, 3, 8, 10, 8, 8, 6, 6, 7, 11, 6, 7, 7, 8
## $ post.4    &lt;dbl&gt; 3, 5, 5, 5, 6, 8, 10, 6, 4, 8, 5, 9, 8, 5, 9, 6
## $ post.5    &lt;dbl&gt; 2, 3, 4, 3, 3, 9, 8, 5, 1, 8, 4, 6, 6, 2, 7, 7
## $ fup.1     &lt;dbl&gt; 2, 4, 7, 4, 4, 9, 8, 6, 5, 8, 5, 8, 7, 6, 7, 7
## $ fup.2     &lt;dbl&gt; 3, 5, 6, 4, 3, 10, 9, 6, 4, 8, 6, 7, 7, 7, 7, 8
## $ fup.3     &lt;dbl&gt; 2, 6, 9, 5, 6, 11, 11, 7, 7, 9, 8, 10, 8, 8, 8, 10
## $ fup.4     &lt;dbl&gt; 4, 4, 7, 3, 4, 9, 9, 5, 5, 7, 6, 8, 10, 6, 6, 8
## $ fup.5     &lt;dbl&gt; 4, 1, 6, 4, 3, 6, 8, 6, 4, 8, 5, 7, 8, 3, 7, 7</code></pre>
<p>When working with data from an add-on package it is often also a good idea to work on a copy of it rather than overwriting/modifying it under the original name. Using a copy for experimental tranformations is recommended in general in case the transformation doesn’t go quite as planned and you want to change it or recover the original data. To recover data provided in a package if you have accidentally modified it you’d have to remove the object from the <a href="https://craig.rbind.io/post/2019-08-06-asgr-2-0-basic-operations-and-data-structures/#the-global-environment">global environment</a> (deleting your custom copy of it but not the original version in the package) using the rm() function… which can be a bit confusing. Best to just work on a copy with a clearly different name.</p>
<p>The same recommendation applies to naming things in general. Try to use names that aren’t already assigned to other objects or functions. If you’re not sure if a name is in use or not, try to print it (just the name, enclosed in print() if you want) or look-up documentation for it with ?object or help(object).</p>
<pre class="r"><code>#we&#39;ll save a copy of the gapminder data to gap_df (short for gapminder_dataframe)
gap_df &lt;- gapminder

ob_df &lt;- OBrienKaiser

#now we can do whatever we want to gap_df or ob_df without affecting gapminder or OBrienKaiser

#For the next section it helps to focus on just the names of the variables in each of these data frames
names(gap_df)</code></pre>
<pre><code>## [1] &quot;country&quot;   &quot;continent&quot; &quot;year&quot;      &quot;lifeExp&quot;   &quot;pop&quot;       &quot;gdpPercap&quot;</code></pre>
<pre class="r"><code>names(ob_df)</code></pre>
<pre><code>##  [1] &quot;treatment&quot; &quot;gender&quot;    &quot;pre.1&quot;     &quot;pre.2&quot;     &quot;pre.3&quot;     &quot;pre.4&quot;    
##  [7] &quot;pre.5&quot;     &quot;post.1&quot;    &quot;post.2&quot;    &quot;post.3&quot;    &quot;post.4&quot;    &quot;post.5&quot;   
## [13] &quot;fup.1&quot;     &quot;fup.2&quot;     &quot;fup.3&quot;     &quot;fup.4&quot;     &quot;fup.5&quot;</code></pre>
<p>If you haven’t see either of these datasets before I recommend reviewing the documentation for them, using:</p>
<pre class="r"><code>?gapminder 

#and

?OBrienKaiser</code></pre>
<p>Before reading on, try to answer the question: What is the main difference between the variable naming styles used by the authors of these two datasets?</p>
<div id="long-data-wide-data-and-tidy-data" class="section level2">
<h2><span class="header-section-number">2.1</span> <strong>“long”</strong> data, <strong>“wide”</strong> data, and <strong>“tidy”</strong> data</h2>
<p>From the glimpses we requested, we can see that the gapminder data contains 1,704 observations (rows) and 6 variables (columns), while the OBrienKaiser data has only 16 rows but 17 columns. Related to the question I posed above, note that gapminder has unique names for each variable and that most of the columns in OBrienKaiser have generic names with a string.number format. Why is this?</p>
<p>gapminder is an example of <strong>“long”</strong> data because each row represents a unique observation and each column represents a unique variable. This is the form that data needs to be in to do most statistical analyses and generate visualizations in R. Because each unique variable is a single column, each column has a unique name.</p>
<p>OBrienKaiser is an example of <strong>“wide”</strong> data because each row represents a unique case or individual and all measures for these individuals are spread across multiple columns. Because several of the variables are spread across multiple columns, these have more generic names.</p>
<p>This is the form that data typically needs to be in to do statstical analyses in other programs like SPSS, so you’ll encounter it often if you’re importing data directly from SPSS or working on Excel files produced by people who primarily work in SPSS or just Excel itself.</p>
<p>The term <strong>“tidy”</strong> data refers to the long form arrangement of data with the additional criterion that each type of observational unit is in a single table rather than being split across multiple tables. Data cleaning and “tidy-ness” are so germane to real world data analysis and data science that the tidyverse was named after them. If you want to conduct an analysis using data that are spread across multiple data frames or tables, my next blog post will show you how to combine them using a set of functions called joins.</p>
<p>It won’t always be so obvious, but now you know that even the names of a data frame’s columns can tell you quite a bit about its structure.</p>
</div>
</div>
<div id="pivot_longer" class="section level1">
<h1><span class="header-section-number">3</span> <strong>pivot_longer()</strong></h1>
<p>To make data longer so that we have all values of the same measure in a single column we can use the aptly named <strong>pivot_longer()</strong>, which is a newer version of the tidyr <strong>gather()</strong> function. Arguments we need to specify are:</p>
<ol style="list-style-type: decimal">
<li><p><strong>data</strong> (or we can pipe the data in using the pipe operator)</p></li>
<li><p><strong>cols</strong>: the distributed columns we want to combine</p></li>
<li><p><strong>names_to</strong>: string name to use for the new character vector that keeps track
of which columns the values originally came from, sometimes this is called the
“key” column. Values of the “names_to” are by default the names of the
combined columns</p></li>
<li><p><strong>values_to</strong>: string name to use for the new column that will contain all of
the combined values</p></li>
</ol>
<p>For example, this is how you could combine all of the distributed measurement columns from the ob_df data frame into a single tidy key-value column pair.</p>
<pre class="r"><code>#first we&#39;ll add a column to keep track of the subject ID since the OBrienKaiser
#data doesn&#39;t already have one. you could do this either using dplyr&#39;s mutate() function,
#or using the shortcut function rowid_to_column, from the tidyverse package &quot;tibble&quot;

ob_df_v2 &lt;- ob_df %&gt;% 
  rowid_to_column(&quot;subject_id&quot;) #subject ID column values take on the row ID values
#by default this adds the column to the left side of the data frame (in the 1st position)

#alternative using mutate
ob_df_v2b &lt;- ob_df %&gt;% 
  mutate(subject_id = c(1:nrow(ob_df))) %&gt;% #same end result
  # subject id becomes the numbers: [1 to the number of total rows]. 
  # By default, this adds the column to the end, so we will rearrange it using
  # select() with tidyselect helper everything()
  select(subject_id, everything()) #this selects the new subject_id column, then everything else

identical(ob_df_v2, ob_df_v2b) #check if the objects are identical</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>#in this case both methods are equivalent so rowid_to_column() is preferred, but
#if you want to assign something else as subject ids, then mutate() would be
#better. Rearranging with select() is optional of course. I typically prefer to
#work with subject ID in the 1st position though

# next we make the data longer using pivot_longer()

ob_long &lt;- pivot_longer(data = ob_df_v2, 
             cols = pre.1:fup.5, 
             names_to = &quot;session&quot;,
             values_to = &quot;score&quot;
             )

ob_long %&gt;% glimpse </code></pre>
<pre><code>## Observations: 240
## Variables: 5
## $ subject_id &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2,...
## $ treatment  &lt;fct&gt; control, control, control, control, control, control, co...
## $ gender     &lt;fct&gt; M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M,...
## $ session    &lt;chr&gt; &quot;pre.1&quot;, &quot;pre.2&quot;, &quot;pre.3&quot;, &quot;pre.4&quot;, &quot;pre.5&quot;, &quot;post.1&quot;, &quot;...
## $ score      &lt;dbl&gt; 1, 2, 4, 2, 1, 3, 2, 5, 3, 2, 2, 3, 2, 4, 4, 4, 4, 5, 3,...</code></pre>
<pre class="r"><code>#now we have a total of 256 observations for our 16 subjects/cases, score
#measurements are all in a single column that we&#39;ve called &quot;score&quot;, and the data
#collection session is coded using the session variable (the values of which
#used to be the names of the original columns).</code></pre>
<p>As you can see, pooling a single measure is pretty easy, but what if we want to assign multiple sets of measures to different columns, like the pre, post, and fup components of the ob_df_v2 data frame (e.g. if these represented different types of measurements on distinct scales like height, weight, and temperature). This requires an extra step and adjusting our arguments a bit, but <strong>pivot_longer()</strong> makes this pretty easy as well.</p>
<p>The main requirements are:</p>
<ol style="list-style-type: decimal">
<li><p>A consistent and unique string pattern that can be used to determine
which columns of values belong together and what to use as the values of the key colunn</p></li>
<li><p>using the special <span style="color:green">“.value”</span> string as part of the <strong>names_to</strong> argument and
the names_sep argument instead of using <strong>values_to</strong></p></li>
</ol>
<p><em>In the lucky event that your column names already have a consistent pattern in them, then you can just make use of that pattern and skip to step 2.</em> Otherwise it may be a good idea to create one using either the <code>dplyr::rename()</code> function (if you only have to modify a few names), or using some string manipulation functions from the <a href="https://stringr.tidyverse.org/">stringr</a> tidyverse package. This section will serve as a preview of the sort of monotony that stringr and regular expressions can free you from, which will be expanded upon in a future post covering stringr.</p>
<p>Applied to our ob_df_v2 dataset:</p>
<pre class="r"><code># step 1. consistent pattern across the set of value columns ----
 
names(ob_df_v2)</code></pre>
<pre><code>##  [1] &quot;subject_id&quot; &quot;treatment&quot;  &quot;gender&quot;     &quot;pre.1&quot;      &quot;pre.2&quot;     
##  [6] &quot;pre.3&quot;      &quot;pre.4&quot;      &quot;pre.5&quot;      &quot;post.1&quot;     &quot;post.2&quot;    
## [11] &quot;post.3&quot;     &quot;post.4&quot;     &quot;post.5&quot;     &quot;fup.1&quot;      &quot;fup.2&quot;     
## [16] &quot;fup.3&quot;      &quot;fup.4&quot;      &quot;fup.5&quot;</code></pre>
<pre class="r"><code># Looking at the names again, we have a mere period &quot;.&quot; as a consistent pattern.
# while you could use this to flag the columns you want to pivot, something to
# consider is that &quot;.&quot; is also a special character used in regular expressions
# (a string pattern matching system) to represent &quot;any character&quot;, so we would
# have to preface it with one or more of another special character combination,
# in this case &quot;\\&quot;, to &quot;escape it&quot; for string pattern matching functions to
# interpret it as a literal &quot;.&quot; instead of &quot;any character&quot;. This is usually done
# as part of a regular expression made up of combinations of special characters.

# Don&#39;t worry if this strange business of escaping characters and regular
# expressions seems confusing at this point, we&#39;ll learn about it in much more
# detail in a later post.

# For now, you could subset the data and rename the columns, e.g.

ob_df_v2a &lt;- ob_df_v2 %&gt;%
  rename(pretest1 = pre.1, #rename(&quot;new_name&quot; = &quot;old_name&quot;)
         pretest2 = pre.2,
         pretest3 = pre.3,
         pretest4 = pre.4,
         pretest5 = pre.5,
         posttest1 = post.1, 
         posttest2 = post.2,
         posttest3 = post.3,
         posttest4 = post.4,
         posttest5 = post.5,
         fuptest1 = fup.1,
         fuptest2 = fup.2,
         fuptest3 = fup.3,
         fuptest4 = fup.4,
         fuptest5 = fup.5)

ob_df_v2a</code></pre>
<pre><code>##    subject_id treatment gender pretest1 pretest2 pretest3 pretest4 pretest5
## 1           1   control      M        1        2        4        2        1
## 2           2   control      M        4        4        5        3        4
## 3           3   control      M        5        6        5        7        7
## 4           4   control      F        5        4        7        5        4
## 5           5   control      F        3        4        6        4        3
## 6           6         A      M        7        8        7        9        9
## 7           7         A      M        5        5        6        4        5
## 8           8         A      F        2        3        5        3        2
## 9           9         A      F        3        3        4        6        4
## 10         10         B      M        4        4        5        3        4
## 11         11         B      M        3        3        4        2        3
## 12         12         B      M        6        7        8        6        3
## 13         13         B      F        5        5        6        8        6
## 14         14         B      F        2        2        3        1        2
## 15         15         B      F        2        2        3        4        4
## 16         16         B      F        4        5        7        5        4
##    posttest1 posttest2 posttest3 posttest4 posttest5 fuptest1 fuptest2 fuptest3
## 1          3         2         5         3         2        2        3        2
## 2          2         2         3         5         3        4        5        6
## 3          4         5         7         5         4        7        6        9
## 4          2         2         3         5         3        4        4        5
## 5          6         7         8         6         3        4        3        6
## 6          9         9        10         8         9        9       10       11
## 7          7         7         8        10         8        8        9       11
## 8          2         4         8         6         5        6        6        7
## 9          4         5         6         4         1        5        4        7
## 10         6         7         6         8         8        8        8        9
## 11         5         4         7         5         4        5        6        8
## 12         9        10        11         9         6        8        7       10
## 13         4         6         6         8         6        7        7        8
## 14         5         6         7         5         2        6        7        8
## 15         6         6         7         9         7        7        7        8
## 16         7         7         8         6         7        7        8       10
##    fuptest4 fuptest5
## 1         4        4
## 2         4        1
## 3         7        6
## 4         3        4
## 5         4        3
## 6         9        6
## 7         9        8
## 8         5        6
## 9         5        4
## 10        7        8
## 11        6        5
## 12        8        7
## 13       10        8
## 14        6        3
## 15        6        7
## 16        8        7</code></pre>
<pre class="r"><code># However, I&#39;m sure you&#39;ll appreciate how tedious this could get for more than a
# handful of columns. A better solution is to use a combination of the names()
# and stringr::str_replace_all() functions

ob_df_v2b &lt;- ob_df_v2 #create a copy (optional)

names(ob_df_v2b) &lt;- str_replace_all( #use stringr::str_replace_all() to replace the names
                                    
                                    names(ob_df_v2b), #character vector to replace matching values in
                                    
                                    &quot;pre.&quot;, #string component pattern to be matched
                                    
                                    #here the &quot;.&quot; doesn&#39;t matter because I&#39;ve also
                                    #specified the rest of the start of the
                                    #string up to the &quot;.&quot;
                                    
                                    &quot;pretest&quot; #string to replace it with
                                    ) 

names(ob_df_v2b) &lt;- str_replace_all(names(ob_df_v2b), &quot;post.&quot;, &quot;posttest&quot;)

names(ob_df_v2b) &lt;- str_replace_all(names(ob_df_v2b), &quot;fup.&quot;, &quot;fuptest&quot;) 

identical(ob_df_v2a, ob_df_v2b)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>#a bit better... but still inefficient. The obvious third option is to just
#escape the &quot;.&quot; using &quot;\\.&quot;:

ob_df_v2c &lt;- ob_df_v2 
names(ob_df_v2c) &lt;- str_replace_all(names(ob_df_v2), 
                                    &quot;\\.&quot;, #anything with a name that contains a period
                                    &quot;test&quot;)

identical(ob_df_v2a, ob_df_v2c)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code># Fortunately pivot_longer() incorporates the same string matching/detection
# behaviour of str_replace_all(), so you can actually just pass &quot;\\.&quot; directly
# to the cols and names_sep arguments, as in the 2nd and 3rd examples for step 2
# below...

# step 2. use a string patten to pivot columns ----

#with one of the renamed versions of ob_df_v2
ob_long2 &lt;- ob_df_v2c %&gt;%
  pivot_longer(cols = contains(&quot;test&quot;), #select columns with names containing a pattern
               
               names_to = c(&quot;.value&quot;, 
                            #special string that tells pivot_longer to use names
                            #on each side of the separator pattern

                            &quot;session&quot;), #name of the key column to use for the names
               
               names_sep = &quot;test&quot; #separator to use
               )

ob_long2</code></pre>
<pre><code>## # A tibble: 80 x 7
##    subject_id treatment gender session   pre  post   fup
##         &lt;int&gt; &lt;fct&gt;     &lt;fct&gt;  &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1          1 control   M      1           1     3     2
##  2          1 control   M      2           2     2     3
##  3          1 control   M      3           4     5     2
##  4          1 control   M      4           2     3     4
##  5          1 control   M      5           1     2     4
##  6          2 control   M      1           4     2     4
##  7          2 control   M      2           4     2     5
##  8          2 control   M      3           5     3     6
##  9          2 control   M      4           3     5     4
## 10          2 control   M      5           4     3     1
## # ... with 70 more rows</code></pre>
<pre class="r"><code>#directly with a regular expression using the matches() tidyselect helper function
ob_long3 &lt;- ob_df_v2 %&gt;%
  pivot_longer(cols = matches(&quot;\\.&quot;), #select columns with names matching a regular expression pattern
               names_to = c(&quot;.value&quot;, &quot;session&quot;), #special &quot;.value&quot; indictor and name of the key column to use for the names
               names_sep = &quot;\\.&quot;) #separator to use
               

ob_long3</code></pre>
<pre><code>## # A tibble: 80 x 7
##    subject_id treatment gender session   pre  post   fup
##         &lt;int&gt; &lt;fct&gt;     &lt;fct&gt;  &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1          1 control   M      1           1     3     2
##  2          1 control   M      2           2     2     3
##  3          1 control   M      3           4     5     2
##  4          1 control   M      4           2     3     4
##  5          1 control   M      5           1     2     4
##  6          2 control   M      1           4     2     4
##  7          2 control   M      2           4     2     5
##  8          2 control   M      3           5     3     6
##  9          2 control   M      4           3     5     4
## 10          2 control   M      5           4     3     1
## # ... with 70 more rows</code></pre>
<pre class="r"><code>identical(ob_long2, ob_long3)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>#directly using the even easier contains() tidyselect helper function that
#absolves you of the need to worry about special characters/regular expressions

ob_long4 &lt;- ob_df_v2 %&gt;%
  pivot_longer(cols = contains(&quot;.&quot;), #select columns with names containing a literal string pattern
               
               names_to = c(&quot;.value&quot;, &quot;session&quot;), #special &quot;.value&quot; indictor and name of the key column to use for the names
               
               names_sep = &quot;\\.&quot; #separator to use. 
               #names_sep unfortunately requires the escaping of special
               #characters if you want them matched literally. Unfortunately
               #contains() doesnt work in the names_sep argument.
               )

identical(ob_long3, ob_long4)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>Now you know something about making data longer as well as few helpful bits about using string patterns to change variable names.</p>
<p>The preceeding use case represented a situation when you have multiple value columns that you want to aggregate separately, yielding one value column for each separate set. This could occur if data on multiple measures (e.g. height &amp; weight) were collected from the same subjects on multiple occassions. An alternative situation you might encounter (albeit probably less often) occurs when the values of a single measure of interest are spread across numerous columns with complex names consisting of components that specify the measurement group in combination. The simplest example of this might be something like a column naming format for daily temperature values of “d2019-01-23”, “d2019-02-01”, etc., being used to represent dates and you are interested in splitting the key column into its year, month, and day components (yyyy-mm-dd) and putting the values all in a single “temperature” column.</p>
<p>Doing this with <code>pivot_longer()</code> requires making use of the <code>names_pattern</code> argument (instead of <code>names_sep</code>) with a more complex regular expression that determines where to break up all of the name component. This is accomplished by enclosing each component with parentheses, e.g. </p>
<p><code>names_pattern = "(component_1)(component_2)(component_3)"</code></p>
<p>To demonstrate this one we’ll use the WHO tuberculosis report data from the tidyr package to replicate the example of this use case from the <code>pivot_longer()</code> documentation, with minor modifications to simplify it a bit. This dataset is automatically imported when the tidyr package is loaded so you can use it by calling the name “who”</p>
<pre class="r"><code>#?who #uncomment and run this to check the documentation for the who dataset

names(who) #check the names of the columns</code></pre>
<pre><code>##  [1] &quot;country&quot;      &quot;iso2&quot;         &quot;iso3&quot;         &quot;year&quot;         &quot;new_sp_m014&quot; 
##  [6] &quot;new_sp_m1524&quot; &quot;new_sp_m2534&quot; &quot;new_sp_m3544&quot; &quot;new_sp_m4554&quot; &quot;new_sp_m5564&quot;
## [11] &quot;new_sp_m65&quot;   &quot;new_sp_f014&quot;  &quot;new_sp_f1524&quot; &quot;new_sp_f2534&quot; &quot;new_sp_f3544&quot;
## [16] &quot;new_sp_f4554&quot; &quot;new_sp_f5564&quot; &quot;new_sp_f65&quot;   &quot;new_sn_m014&quot;  &quot;new_sn_m1524&quot;
## [21] &quot;new_sn_m2534&quot; &quot;new_sn_m3544&quot; &quot;new_sn_m4554&quot; &quot;new_sn_m5564&quot; &quot;new_sn_m65&quot;  
## [26] &quot;new_sn_f014&quot;  &quot;new_sn_f1524&quot; &quot;new_sn_f2534&quot; &quot;new_sn_f3544&quot; &quot;new_sn_f4554&quot;
## [31] &quot;new_sn_f5564&quot; &quot;new_sn_f65&quot;   &quot;new_ep_m014&quot;  &quot;new_ep_m1524&quot; &quot;new_ep_m2534&quot;
## [36] &quot;new_ep_m3544&quot; &quot;new_ep_m4554&quot; &quot;new_ep_m5564&quot; &quot;new_ep_m65&quot;   &quot;new_ep_f014&quot; 
## [41] &quot;new_ep_f1524&quot; &quot;new_ep_f2534&quot; &quot;new_ep_f3544&quot; &quot;new_ep_f4554&quot; &quot;new_ep_f5564&quot;
## [46] &quot;new_ep_f65&quot;   &quot;newrel_m014&quot;  &quot;newrel_m1524&quot; &quot;newrel_m2534&quot; &quot;newrel_m3544&quot;
## [51] &quot;newrel_m4554&quot; &quot;newrel_m5564&quot; &quot;newrel_m65&quot;   &quot;newrel_f014&quot;  &quot;newrel_f1524&quot;
## [56] &quot;newrel_f2534&quot; &quot;newrel_f3544&quot; &quot;newrel_f4554&quot; &quot;newrel_f5564&quot; &quot;newrel_f65&quot;</code></pre>
<p>Note from the documentation that many of the columns have a name with 3 components: 2 separated by an underscore and an “m” or “f” male/female indicator. These components represent three different variables that collectively specify the type of case and the values of these columns are all counts of tuberculosis cases. According to the documentation for the who data, the newrel* columns are part of this scheme as well, but they only have a single underscore.</p>
<pre class="r"><code># we can standardize the newrel* column names to match the structure of the
# other new* columns using str_replace_all() to simplify subsequent pattern
# matching in pivot_longer()

who2 &lt;- who

names(who2) &lt;- str_replace_all(names(who2), &quot;newrel&quot;, &quot;new_rel&quot;)


who_long &lt;- who2 %&gt;% pivot_longer(
  
  cols = new_sp_m014:new_rel_f65,
  
  names_to = c(&quot;diagnosis&quot;, &quot;gender&quot;, &quot;age&quot;),
  
  names_pattern = &quot;new_(.*)_(.)(.*)&quot;, 
  # pattern to be matched in this case is 
  # &quot;new_(component 1)_(component2[m/f])_(component3)&quot;, 
  # where component 1 is everything between the 1st and 2nd underscore,
  # component 2 is the lowercase letter &quot;m&quot; or &quot;f&quot;, and component 3 is
  # everything after component 2.
  # 
  # note: &quot;*&quot; is used to represent the repetition of the preceeding chraracter
  # (in this case &quot;.&quot; for &quot;any character&quot;) any number of times in a regular
  # expresion
  
  values_to = &quot;count&quot;)

who_long %&gt;% 
  arrange(desc(count)) # arrange by count in descending order</code></pre>
<pre><code>## # A tibble: 405,440 x 8
##    country iso2  iso3   year diagnosis gender age    count
##    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;  &lt;int&gt;
##  1 India   IN    IND    2007 sn        m      3544  250051
##  2 India   IN    IND    2007 sn        f      3544  148811
##  3 China   CN    CHN    2013 rel       m      65    124476
##  4 China   CN    CHN    2013 rel       m      5564  112558
##  5 India   IN    IND    2007 ep        m      3544  105825
##  6 India   IN    IND    2007 ep        f      3544  101015
##  7 China   CN    CHN    2013 rel       m      4554  100297
##  8 India   IN    IND    2009 sp        m      3544   90830
##  9 India   IN    IND    2008 sp        m      3544   90498
## 10 India   IN    IND    2010 sp        m      3544   90440
## # ... with 405,430 more rows</code></pre>
<pre class="r"><code># now all of the values (i.e. counts) are in a single column and our distinct
# grouping variables are specified using a tidy set of 3 simple key columns
# instead of one complicated one

# see the documentation for the who data if you&#39;re wondering why some values of
# age are so high</code></pre>
</div>
<div id="pivot_wider" class="section level1">
<h1><span class="header-section-number">4</span> <strong>pivot_wider()</strong></h1>
<p><strong>pivot_wider()</strong> makes a data frame wider by spliting one or more value columns into a larger number of value columns, with names assigned according to the levels of key columns specified using the <code>names_from</code> argument. Here we’ll use it to make the gapminder data wider by putting the annual life expectancy column, “lifeExp” into separate columns for each year (named using the values of the key column “year”).</p>
<p>Arguments to specify for the simple case of spreading a single key-value column pair are:</p>
<ol style="list-style-type: decimal">
<li><p><strong>data</strong></p></li>
<li><p><strong>id_cols</strong>: the columns that together uniquely identify each observation. by
default this is all columns</p></li>
<li><p><strong>names_from</strong>: the key column(s) to pull the names from for the new set of
replacement columns</p></li>
<li><p><strong>values_from</strong>: the value column(s) to pull values from for the new set of
replacement columns</p></li>
</ol>
<p>You might want to do this as a temporary transformation to facilitate the construction of new variables derived from a combination of the more widely distributed value columns that result from the application of <code>pivot_wider()</code> with <code>mutate()</code>, or if you plan to export the data in wide from to share with someone working in other statistical software programs which require wide data.</p>
<pre class="r"><code>gap_df %&gt;% 
    pivot_wider(id_cols = c(country, continent),  
                names_from = year, values_from = lifeExp)</code></pre>
<pre><code>## # A tibble: 142 x 14
##    country continent `1952` `1957` `1962` `1967` `1972` `1977` `1982` `1987`
##    &lt;fct&gt;   &lt;fct&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1 Afghan~ Asia        28.8   30.3   32.0   34.0   36.1   38.4   39.9   40.8
##  2 Albania Europe      55.2   59.3   64.8   66.2   67.7   68.9   70.4   72  
##  3 Algeria Africa      43.1   45.7   48.3   51.4   54.5   58.0   61.4   65.8
##  4 Angola  Africa      30.0   32.0   34     36.0   37.9   39.5   39.9   39.9
##  5 Argent~ Americas    62.5   64.4   65.1   65.6   67.1   68.5   69.9   70.8
##  6 Austra~ Oceania     69.1   70.3   70.9   71.1   71.9   73.5   74.7   76.3
##  7 Austria Europe      66.8   67.5   69.5   70.1   70.6   72.2   73.2   74.9
##  8 Bahrain Asia        50.9   53.8   56.9   59.9   63.3   65.6   69.1   70.8
##  9 Bangla~ Asia        37.5   39.3   41.2   43.5   45.3   46.9   50.0   52.8
## 10 Belgium Europe      68     69.2   70.2   70.9   71.4   72.8   73.9   75.4
## # ... with 132 more rows, and 4 more variables: `1992` &lt;dbl&gt;, `1997` &lt;dbl&gt;,
## #   `2002` &lt;dbl&gt;, `2007` &lt;dbl&gt;</code></pre>
<pre class="r"><code>#now all the lifeExp values for each year are in separate columns</code></pre>
<p>We can also reverse the first ob_df_v2 lengthening transformation we did by using the <code>names_sep</code> argument again. However, you should be aware that <code>names_sep</code> behaves differently for <code>pivot_wider()</code> than it did for <code>pivot_longer()</code>. Specifically, since we’re adding “.” to the names in <code>pivot_wider()</code> instead of searching for it (as we were in <code>pivot_longer()</code>), the <code>names_sep</code> argument text is read literally for <code>pivot_wider()</code> rather than read like a regular expression for pattern matching like it was with <code>pivor_longer()</code>. In most cases you can use the general rules:</p>
<p><span style="color:green">adding/inserting text = “literal text”</span> where
you don’t need to worry about special characters</p>
<p><span style="color:green">pattern searching/matching = “regular
expresison”</span> where you do need to worry about special characters</p>
<p>Some functions behave differently, but we’ll reserve that discussion for another post.</p>
<pre class="r"><code>ob_long %&gt;% glimpse</code></pre>
<pre><code>## Observations: 240
## Variables: 5
## $ subject_id &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2,...
## $ treatment  &lt;fct&gt; control, control, control, control, control, control, co...
## $ gender     &lt;fct&gt; M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M,...
## $ session    &lt;chr&gt; &quot;pre.1&quot;, &quot;pre.2&quot;, &quot;pre.3&quot;, &quot;pre.4&quot;, &quot;pre.5&quot;, &quot;post.1&quot;, &quot;...
## $ score      &lt;dbl&gt; 1, 2, 4, 2, 1, 3, 2, 5, 3, 2, 2, 3, 2, 4, 4, 4, 4, 5, 3,...</code></pre>
<pre class="r"><code>ob_wide_again &lt;- pivot_wider(data = ob_long, 
                             names_from = &quot;session&quot;,
                             values_from = &quot;score&quot;,
                             names_sep = &quot;.&quot;)
                            

ob_wide_again %&gt;% glimpse</code></pre>
<pre><code>## Observations: 16
## Variables: 18
## $ subject_id &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16
## $ treatment  &lt;fct&gt; control, control, control, control, control, A, A, A, A,...
## $ gender     &lt;fct&gt; M, M, M, F, F, M, M, F, F, M, M, M, F, F, F, F
## $ pre.1      &lt;dbl&gt; 1, 4, 5, 5, 3, 7, 5, 2, 3, 4, 3, 6, 5, 2, 2, 4
## $ pre.2      &lt;dbl&gt; 2, 4, 6, 4, 4, 8, 5, 3, 3, 4, 3, 7, 5, 2, 2, 5
## $ pre.3      &lt;dbl&gt; 4, 5, 5, 7, 6, 7, 6, 5, 4, 5, 4, 8, 6, 3, 3, 7
## $ pre.4      &lt;dbl&gt; 2, 3, 7, 5, 4, 9, 4, 3, 6, 3, 2, 6, 8, 1, 4, 5
## $ pre.5      &lt;dbl&gt; 1, 4, 7, 4, 3, 9, 5, 2, 4, 4, 3, 3, 6, 2, 4, 4
## $ post.1     &lt;dbl&gt; 3, 2, 4, 2, 6, 9, 7, 2, 4, 6, 5, 9, 4, 5, 6, 7
## $ post.2     &lt;dbl&gt; 2, 2, 5, 2, 7, 9, 7, 4, 5, 7, 4, 10, 6, 6, 6, 7
## $ post.3     &lt;dbl&gt; 5, 3, 7, 3, 8, 10, 8, 8, 6, 6, 7, 11, 6, 7, 7, 8
## $ post.4     &lt;dbl&gt; 3, 5, 5, 5, 6, 8, 10, 6, 4, 8, 5, 9, 8, 5, 9, 6
## $ post.5     &lt;dbl&gt; 2, 3, 4, 3, 3, 9, 8, 5, 1, 8, 4, 6, 6, 2, 7, 7
## $ fup.1      &lt;dbl&gt; 2, 4, 7, 4, 4, 9, 8, 6, 5, 8, 5, 8, 7, 6, 7, 7
## $ fup.2      &lt;dbl&gt; 3, 5, 6, 4, 3, 10, 9, 6, 4, 8, 6, 7, 7, 7, 7, 8
## $ fup.3      &lt;dbl&gt; 2, 6, 9, 5, 6, 11, 11, 7, 7, 9, 8, 10, 8, 8, 8, 10
## $ fup.4      &lt;dbl&gt; 4, 4, 7, 3, 4, 9, 9, 5, 5, 7, 6, 8, 10, 6, 6, 8
## $ fup.5      &lt;dbl&gt; 4, 1, 6, 4, 3, 6, 8, 6, 4, 8, 5, 7, 8, 3, 7, 7</code></pre>
<pre class="r"><code>all.equal(ob_df_v2, ob_wide_again, check.attributes = F) </code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code># In case you&#39;re wondering why I didn&#39;t use identical()... all.equal with
# check.atributes = F checks equality of the contents but not attributes of the
# objects. In this case ob_df_v2 is not a tibble (it&#39;s just a data frame) but
# ob_wide_again is a tibble and a data frame, so the &quot;class&quot; attributes of the
# objects are different, but the contents are the same.</code></pre>
<p>…or the 2nd transformation with multiple distinct value columns… just specify them all as a character vector in the values_from argument</p>
<pre class="r"><code>ob_long2 %&gt;% glimpse</code></pre>
<pre><code>## Observations: 80
## Variables: 7
## $ subject_id &lt;int&gt; 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4,...
## $ treatment  &lt;fct&gt; control, control, control, control, control, control, co...
## $ gender     &lt;fct&gt; M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, F, F, F, F,...
## $ session    &lt;chr&gt; &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;1&quot;, &quot;...
## $ pre        &lt;dbl&gt; 1, 2, 4, 2, 1, 4, 4, 5, 3, 4, 5, 6, 5, 7, 7, 5, 4, 7, 5,...
## $ post       &lt;dbl&gt; 3, 2, 5, 3, 2, 2, 2, 3, 5, 3, 4, 5, 7, 5, 4, 2, 2, 3, 5,...
## $ fup        &lt;dbl&gt; 2, 3, 2, 4, 4, 4, 5, 6, 4, 1, 7, 6, 9, 7, 6, 4, 4, 5, 3,...</code></pre>
<pre class="r"><code>ob_wide_again2 &lt;- ob_long2 %&gt;% 
  pivot_wider(names_from = &quot;session&quot;,
              values_from = c(&quot;pre&quot;, &quot;post&quot;, &quot;fup&quot;),
              names_sep = &quot;.&quot;)

all.equal(ob_df_v2, ob_wide_again2, check.attributes = F)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>…or the who2 dataset lengthening transformation by passing a vector with the key column names to the <code>names_from</code> argument and the original starting “new_” portion to the <code>names_prefix</code> argument</p>
<pre class="r"><code>who_long %&gt;% glimpse</code></pre>
<pre><code>## Observations: 405,440
## Variables: 8
## $ country   &lt;chr&gt; &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afghanistan...
## $ iso2      &lt;chr&gt; &quot;AF&quot;, &quot;AF&quot;, &quot;AF&quot;, &quot;AF&quot;, &quot;AF&quot;, &quot;AF&quot;, &quot;AF&quot;, &quot;AF&quot;, &quot;AF&quot;, &quot;AF...
## $ iso3      &lt;chr&gt; &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;...
## $ year      &lt;int&gt; 1980, 1980, 1980, 1980, 1980, 1980, 1980, 1980, 1980, 198...
## $ diagnosis &lt;chr&gt; &quot;sp&quot;, &quot;sp&quot;, &quot;sp&quot;, &quot;sp&quot;, &quot;sp&quot;, &quot;sp&quot;, &quot;sp&quot;, &quot;sp&quot;, &quot;sp&quot;, &quot;sp...
## $ gender    &lt;chr&gt; &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f...
## $ age       &lt;chr&gt; &quot;014&quot;, &quot;1524&quot;, &quot;2534&quot;, &quot;3544&quot;, &quot;4554&quot;, &quot;5564&quot;, &quot;65&quot;, &quot;014...
## $ count     &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</code></pre>
<pre class="r"><code>who2_wide_again &lt;- who_long %&gt;% 
  pivot_wider(names_from = c(&quot;diagnosis&quot;, &quot;gender&quot;, &quot;age&quot;),
              values_from = c(&quot;count&quot;),
              names_prefix = &quot;new_&quot;,
              names_sep = c(&quot;_&quot;)
              )

#remove the extra underscore that was not present between the 2nd and 3rd
#components of the original names

names(who2_wide_again) &lt;- str_replace_all(names(who2_wide_again), &quot;m_&quot;, &quot;m&quot;)
names(who2_wide_again) &lt;- str_replace_all(names(who2_wide_again), &quot;f_&quot;, &quot;f&quot;)

all.equal(who2, who2_wide_again, check.attributes = F)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>Next we move on to <code>unite()</code> and <code>separate()</code> which are specialized <code>tidyr</code> functions for selectively reshaping sets of columns without altering the rest of the manipulated data frame.</p>
</div>
<div id="unite" class="section level1">
<h1><span class="header-section-number">5</span> <strong>unite()</strong></h1>
<p><code>unite()</code> allows you to merge 2 or more columns into a single column without changing the length of the data frame. You typically specify the following arguments:</p>
<ol style="list-style-type: decimal">
<li><p><strong>data</strong></p></li>
<li><p><strong>col</strong>: the name of the new column containing the values of the merged columns</p></li>
<li><p><strong>…</strong> : a selection of columns to unite, or if unspecified, all columns will
be united. Follows similar rules to the … argument of the select() function.</p></li>
<li><p><strong>sep</strong>: string to use to demarcate the component values of the united column</p></li>
<li><p><strong>remove</strong>: set this to FALSE if you want to retain the original columns, leave
it as the default value of TRUE if you want to drop them.</p></li>
</ol>
<p>For example, we could combine the country and continent columns of the gapminder data frame copy gap_df:</p>
<pre class="r"><code>#drop the original columns
united_gap &lt;- gap_df %&gt;% 
  unite(col = &quot;country_continent&quot;,
        country, continent,
        sep = &quot;;&quot;) #the default separator is &quot;_&quot;
united_gap</code></pre>
<pre><code>## # A tibble: 1,704 x 5
##    country_continent  year lifeExp      pop gdpPercap
##    &lt;chr&gt;             &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan;Asia   1952    28.8  8425333      779.
##  2 Afghanistan;Asia   1957    30.3  9240934      821.
##  3 Afghanistan;Asia   1962    32.0 10267083      853.
##  4 Afghanistan;Asia   1967    34.0 11537966      836.
##  5 Afghanistan;Asia   1972    36.1 13079460      740.
##  6 Afghanistan;Asia   1977    38.4 14880372      786.
##  7 Afghanistan;Asia   1982    39.9 12881816      978.
##  8 Afghanistan;Asia   1987    40.8 13867957      852.
##  9 Afghanistan;Asia   1992    41.7 16317921      649.
## 10 Afghanistan;Asia   1997    41.8 22227415      635.
## # ... with 1,694 more rows</code></pre>
<pre class="r"><code>#keep them
gap_df %&gt;% 
  unite(col = &quot;country_continent&quot;,
        country, continent,
        sep = &quot;;&quot;,
        remove = FALSE) </code></pre>
<pre><code>## # A tibble: 1,704 x 7
##    country_continent country     continent  year lifeExp      pop gdpPercap
##    &lt;chr&gt;             &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan;Asia  Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan;Asia  Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan;Asia  Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan;Asia  Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan;Asia  Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan;Asia  Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan;Asia  Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan;Asia  Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan;Asia  Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan;Asia  Afghanistan Asia       1997    41.8 22227415      635.
## # ... with 1,694 more rows</code></pre>
</div>
<div id="separate" class="section level1">
<h1><span class="header-section-number">6</span> <strong>separate()</strong></h1>
<p><code>separate()</code> does the opposite of <code>unite()</code>; it splits the values of a column and distributes them across multiple columns based on a separator string pattern. It also does not affect the length of the data frame. Arguments you’ll use most often are:</p>
<ol style="list-style-type: decimal">
<li><p><strong>data</strong></p></li>
<li><p><strong>col</strong>: the name of the column you want to separate into pieces</p></li>
<li><p><strong>into</strong>: a vector of names for the new columns. <code>NA</code> can be used to omit component columns</p></li>
<li><p><strong>sep</strong>: the string pattern to use to determine where to split the values.
<code>sep</code> also accepts an integer for position-based splitting</p></li>
<li><p><strong>remove</strong>: drops the original complex column</p></li>
<li><p><strong>convert</strong>: if TRUE, re-evaluates and assigns appropriate classes to the new
columns based on the type of their contents after splitting has occurred.</p></li>
</ol>
<p>Here we’ll use <code>separate()</code> to reverse what we just did with <code>unite()</code></p>
<pre class="r"><code>gap_df_separated &lt;- united_gap %&gt;% 
  separate(col = &quot;country_continent&quot;,
           into = c(&quot;country&quot;, &quot;continent&quot;),
           sep = &quot;;&quot;) %&gt;% 
  #one thing separate() won&#39;t do is convert strings to factors for you (the
  #original variables were factors), so we&#39;ll take of that using dplyr::mutate()
  mutate(country = as.factor(country), 
         continent = as.factor(continent))

gap_df_separated</code></pre>
<pre><code>## # A tibble: 1,704 x 6
##    country     continent  year lifeExp      pop gdpPercap
##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan Asia       1997    41.8 22227415      635.
## # ... with 1,694 more rows</code></pre>
<pre class="r"><code>identical(gap_df, gap_df_separated)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>#keep the complex column

united_gap %&gt;% 
  separate(col = &quot;country_continent&quot;,
           into = c(&quot;country&quot;, &quot;continent&quot;),
           sep = &quot;;&quot;,
           remove = FALSE) </code></pre>
<pre><code>## # A tibble: 1,704 x 7
##    country_continent country     continent  year lifeExp      pop gdpPercap
##    &lt;chr&gt;             &lt;chr&gt;       &lt;chr&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan;Asia  Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan;Asia  Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan;Asia  Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan;Asia  Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan;Asia  Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan;Asia  Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan;Asia  Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan;Asia  Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan;Asia  Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan;Asia  Afghanistan Asia       1997    41.8 22227415      635.
## # ... with 1,694 more rows</code></pre>
<pre class="r"><code>#drop one of the new columns using NA

united_gap %&gt;% 
  separate(col = &quot;country_continent&quot;,
           into = c(&quot;country&quot;, NA),
           sep = &quot;;&quot;) </code></pre>
<pre><code>## # A tibble: 1,704 x 5
##    country      year lifeExp      pop gdpPercap
##    &lt;chr&gt;       &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan  1952    28.8  8425333      779.
##  2 Afghanistan  1957    30.3  9240934      821.
##  3 Afghanistan  1962    32.0 10267083      853.
##  4 Afghanistan  1967    34.0 11537966      836.
##  5 Afghanistan  1972    36.1 13079460      740.
##  6 Afghanistan  1977    38.4 14880372      786.
##  7 Afghanistan  1982    39.9 12881816      978.
##  8 Afghanistan  1987    40.8 13867957      852.
##  9 Afghanistan  1992    41.7 16317921      649.
## 10 Afghanistan  1997    41.8 22227415      635.
## # ... with 1,694 more rows</code></pre>
<p>Now just practice these operations a few times with your own data and reshaping data to make it <em>tidyr</em> (pun intended) should be a breeze!</p>
</div>
<div id="navigation" class="section level1">
<h1><span class="header-section-number">7</span> Navigation</h1>
<p>Click <a href="https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/">here</a> to go back to the previous post. A link to the next one (data transformation - part 3 - joining data with dplyr) will be added as soon as I have time to write it.</p>
</div>
<div id="notes" class="section level1">
<h1><span class="header-section-number">8</span> Notes</h1>
<ul>
<li><p>You can learn more about tidy data <a href="https://r4ds.had.co.nz/tidy-data.html">here</a> and <a href="https://www.jstatsoft.org/article/view/v059i10">here</a>.</p></li>
<li><p>If you want to get head start on learning about regular expressions and string manipulation, check <a href="https://stringr.tidyverse.org/articles/regular-expressions.html">this</a> out.</p></li>
</ul>
<p>Thank you for visiting my blog. I welcome any suggestions for future posts, comments or other feedback you might have. Feedback from beginners and science students/trainees (or with them in mind) is especially helpful in the interest of making this guide even better for them.</p>
</div>

    </div>

    

<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/r/">R</a>
  
  <a class="badge badge-light" href="/tags/r-basics/">R basics</a>
  
</div>



    
      








  





  
  <div class="media author-card" itemscope itemtype="http://schema.org/Person">
    
      
      <img class="portrait mr-3" src="/authors/admin/avatar_hu379968d4a591158aefc150dd1b891ba0_3685589_250x250_fill_q90_lanczos_center.jpg" itemprop="image" alt="Avatar">
    

    <div class="media-body">
      <h5 class="card-title" itemprop="name"><a href="/authors/admin/">Dr. Craig P. Hutton</a></h5>
      <h6 class="card-subtitle">Data Scientist | Behavioural Neuroscientist</h6>
      
      <ul class="network-icon" aria-hidden="true">
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a itemprop="sameAs" href="/#contact" >
              <i class="fas fa-envelope"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a itemprop="sameAs" href="https://twitter.com/huttoncp" target="_blank" rel="noopener">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
        
          
          
          
          
          
          
          
            
          
          <li>
            <a itemprop="sameAs" href="https://scholar.google.ca/citations?user=bMNjAzkAAAAJ&amp;hl=en" target="_blank" rel="noopener">
              <i class="ai ai-google-scholar"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a itemprop="sameAs" href="https://github.com/huttoncp" target="_blank" rel="noopener">
              <i class="fab fa-github"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>



      
      
      <div class="article-widget">
        <div class="hr-light"></div>
        <h3>Related</h3>
        <ul>
          
          <li><a href="/post/2019-12-30-asgr-2-1-data-transformation-part-1/">A Scientist&#39;s Guide to R: Step 2.1. Data Transformation - Part 1</a></li>
          
          <li><a href="/post/2019-08-06-asgr-2-0-basic-operations-and-data-structures/">A Scientist&#39;s Guide to R: Step 2.0. Basic Operations &amp; Data Structures</a></li>
          
          <li><a href="/post/2019-06-22-asgr-1-getting-data-into-r/">A Scientist&#39;s Guide to R: Step 1. Getting Data into R</a></li>
          
          <li><a href="/post/2019-05-17-asgr-basic-workflow/">A Scientist&#39;s Guide to R: Introduction and Basic Workflow</a></li>
          
        </ul>
      </div>
      
    

    

    <div id="disqus_thread"></div>
<script>
(function() {
var d = document, s = d.createElement('script');
s.src = 'https://craig-rbind-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  </div>
</article>

<div class="container">
  <footer class="site-footer">
  
  <p class="powered-by">
    <a href="/privacy/">Privacy Policy</a>
  </p>
  

  <p class="powered-by">
    Copyright © 2020 by Craig P. Hutton &middot; 

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

</div>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
      

      
      
    

    
    

    
    
    
    <script id="dsq-count-scr" src="//craig-rbind-io.disqus.com/count.js" async></script>
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.ee8463f2a394889d45e169a983fe913d.js"></script>

  </body>
</html>

