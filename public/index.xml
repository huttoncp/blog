<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Craig Hutton, PhD</title>
    <link>https://craig.rbind.io/</link>
    <description>Recent content on Craig Hutton, PhD</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator>
    <language>en-us</language>
    <copyright>Copyright &amp;copy; {year} by Craig P. Hutton</copyright>
    <lastBuildDate>Fri, 03 Nov 2023 12:30:00 +0000</lastBuildDate>
    
	    <atom:link href="https://craig.rbind.io/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Example Page 1</title>
      <link>https://craig.rbind.io/courses/example/example1/</link>
      <pubDate>Sun, 05 May 2019 00:00:00 +0100</pubDate>
      
      <guid>https://craig.rbind.io/courses/example/example1/</guid>
      <description>

&lt;p&gt;In this tutorial, I&amp;rsquo;ll share my top 10 tips for getting started with Academic:&lt;/p&gt;

&lt;h2 id=&#34;tip-1&#34;&gt;Tip 1&lt;/h2&gt;

&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;

&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;

&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;

&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;

&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;

&lt;h2 id=&#34;tip-2&#34;&gt;Tip 2&lt;/h2&gt;

&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;

&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;

&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;

&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;

&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Example Page 2</title>
      <link>https://craig.rbind.io/courses/example/example2/</link>
      <pubDate>Sun, 05 May 2019 00:00:00 +0100</pubDate>
      
      <guid>https://craig.rbind.io/courses/example/example2/</guid>
      <description>

&lt;p&gt;Here are some more tips for getting started with Academic:&lt;/p&gt;

&lt;h2 id=&#34;tip-3&#34;&gt;Tip 3&lt;/h2&gt;

&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;

&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;

&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;

&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;

&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;

&lt;h2 id=&#34;tip-4&#34;&gt;Tip 4&lt;/h2&gt;

&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;

&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;

&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;

&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;

&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Big Difference BC 2023 micro-presentation</title>
      <link>https://craig.rbind.io/talk/bigdifference2023/</link>
      <pubDate>Fri, 03 Nov 2023 12:30:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/talk/bigdifference2023/</guid>
      <description>&lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;As part of the Province’s pandemic response, employment obligations were suspended for clients supported by the BC Ministry of Social Development and Poverty Reduction (SDPR)’s Expected-to-Work (ETW) income assistance program, during which time WorkBC enrolment rates fell from 15% to 5%. After SDPR resumed enforcing employment obligations (March of 2022), WorkBC engagement only partially recovered (~8%, by October of 2022). Front-line SDPR staff we interviewed relayed complaints from ETW clients of multiple behavioural barriers preventing them from connecting with WorkBC, including: (1) a lack of awareness of the services offered by WorkBC, (2) information/cognitive overload, (3) a lack of motivation or interest, (4) forgetting to register, and (5) impersonal service. We hypothesized that sending ETW clients an educational reminder message designed to address these barriers using behavioural insights would encourage more of them to register for WorkBC Employment Services.&lt;/p&gt;

&lt;p&gt;445 ETW clients who joined SDPR’s caseload in February, 2023, but had not yet registered for WorkBC Employment Services, were randomly selected to either be sent a MySelfServe electronic message about the services offered by WorkBC and benefits of using those services (a “gain message”; treatment group, n = 189), or not (control group, n = 256). Participant data on income assistance utilisation, and on nine socioeconomic and demographic characteristics (age, housing status, etc.), were used to evaluate the impact of the message and other factors on WorkBC registration rates via logistic regression. A causal forest machine learning model was also used to uncover interactions between the treatment and other factors.&lt;/p&gt;

&lt;p&gt;The causal forest revealed an interaction between treatment and education, which a logistic regression model subsequently identified as representing a statistically significant doubling of the WorkBC registration rate for the treatment group vs. the control group, among ETW clients with a high school diploma (29.5% vs. 14.4%; OR  [95% CI ] = 2.49 [1.25, 4.96]), but not among less-educated ETW clients (OR [95% CI] = 0.65 [0.29, 1.45]). An expanded logistic regression model including socioeconomic and demographic variables as covariates also revealed lower WorkBC registration rates among ETW clients with no fixed address vs. housed clients (aOR1 [95% CI] = 0.19 [0.03, 0.64]) and among clients living in the Interior Health region vs. residents of the Fraser Health region (aOR [95% CI] = 0.23 [0.08, 0.60]). These results indicate that the gain message effectively encourages ETW clients with a high school diploma to register for WorkBC Employment Services. However, the gain message did not work for everyone: alternative options should be explored for helping less-educated clients, those with no fixed address, and to resolve regional disparities.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>BCCDC Grand Rounds 2022</title>
      <link>https://craig.rbind.io/talk/bccdc2022/</link>
      <pubDate>Tue, 26 Apr 2022 12:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/talk/bccdc2022/</guid>
      <description>&lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;In 2019, there were there were 24,166 overdose ambulance calls (~66/day) in BC, and in the Vancouver Coastal Health Region 39% of all ambulance calls were for an overdose. In 2020, 1,767 British Columbians died of an illicit drug overdose (~5/day) vs. approx. 957 from COVID-19 (~3/day). Harm reduction has certainly helped but is clearly not enough to keep things from getting worse. Stopping the overdose crisis will require improving our understanding of substance use disorders and risk factors for overdose that can be used to develop effective preventative measures. In collaboration with Dr. Amanda Slaunwhite at the BC Centre for Disease Control, we are investigating the socioeconomic, demographic, and health determinants of overdose using data on a total of 987,406 individuals from the BC Provincial Overdose Cohort and a 20% sample from the general BC population. In this talk, I will share some preliminary results from an overdose prediction model capable of predicting 80% of overdose cases per year and which identifies vulnerable segments of the BC population for whom additional interventions and supports may have the most impact.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>A Scientist&#39;s Guide to R: Step 3.1 - data visualization with ggplot2&#43;</title>
      <link>https://craig.rbind.io/post/2021-05-17-asgr-3-1-data-visualization/</link>
      <pubDate>Mon, 17 May 2021 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/post/2021-05-17-asgr-3-1-data-visualization/</guid>
      <description>
&lt;script src=&#34;index_files/htmlwidgets/htmlwidgets.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;index_files/plotly-binding/plotly.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;index_files/typedarray/typedarray.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;index_files/jquery/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;index_files/crosstalk/css/crosstalk.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;index_files/crosstalk/js/crosstalk.min.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;index_files/plotly-htmlwidgets-css/plotly-htmlwidgets.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;index_files/plotly-main/plotly-latest.min.js&#34;&gt;&lt;/script&gt;

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#tldr&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#introduction&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#setup&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;Setup&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#ggplot2-basics&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;ggplot2 basics&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#aesthetic-customization&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;aesthetic customization&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#titleslabels&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.1&lt;/span&gt; titles/labels&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#fill&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.2&lt;/span&gt; fill&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#colourcolor&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.3&lt;/span&gt; colour/color&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#reordering-factors&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.4&lt;/span&gt; reordering factors&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#colour-palettes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.5&lt;/span&gt; colour palettes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#colourblind-friendly-palettes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.6&lt;/span&gt; colourblind-friendly palettes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#size&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.7&lt;/span&gt; size&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#shape&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.8&lt;/span&gt; shape&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#linetype&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.9&lt;/span&gt; linetype&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#alpha-transparencyopacity&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.10&lt;/span&gt; alpha (transparency/opacity)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#jittering-to-reduce-overplotting&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.11&lt;/span&gt; jittering to reduce overplotting&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#coordinates&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.12&lt;/span&gt; coordinates&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#coord_flip&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.12.1&lt;/span&gt; coord_flip()&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#coord_cartesian&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.12.2&lt;/span&gt; coord_cartesian()&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#guides-legends&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.13&lt;/span&gt; guides (legends)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#x-y-axis-modifications&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.14&lt;/span&gt; x &amp;amp; y axis modifications&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#scale_x_continuousscale_y_continuous&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.14.1&lt;/span&gt; &lt;code&gt;scale_x_continuous()/scale_y_continuous()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#scale_x_discretescale_y_discrete&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.14.2&lt;/span&gt; &lt;code&gt;scale_x_discrete()/scale_y_discrete()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#axis-label-scales&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.15&lt;/span&gt; axis label scales&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#themes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.16&lt;/span&gt; themes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#text-formatting-with-ggtext&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.17&lt;/span&gt; text formatting with &lt;code&gt;ggtext&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#fonts&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.18&lt;/span&gt; fonts&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#faceting&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;faceting&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#facet_wrap-and-facet_grid&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.1&lt;/span&gt; &lt;code&gt;facet_wrap()&lt;/code&gt; and &lt;code&gt;facet_grid()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#too-many-facets&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.2&lt;/span&gt; too many facets&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#layouts&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7&lt;/span&gt; &lt;strong&gt;layouts&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#animation&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;8&lt;/span&gt; &lt;strong&gt;animation&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#exporting-ggplots&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;9&lt;/span&gt; &lt;strong&gt;exporting ggplots&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#navigation&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;10&lt;/span&gt; &lt;strong&gt;Navigation&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#notes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;11&lt;/span&gt; &lt;strong&gt;Notes&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;tldr&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;This post introduces the &lt;a href=&#34;https://ggplot2.tidyverse.org/&#34;&gt;ggplot2&lt;/a&gt; package from the tidyverse and how the grammar of graphics helps you build customized plots in R.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;This post in the &lt;a href=&#34;https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/&#34;&gt;Scientist’s Guide to R series&lt;/a&gt; introduces you to the grammar of graphics approach to data visualization in R with the popular &lt;a href=&#34;https://ggplot2.tidyverse.org/&#34;&gt;ggplot2&lt;/a&gt; package from the &lt;a href=&#34;https://www.tidyverse.org/&#34;&gt;tidyverse&lt;/a&gt; and some extension packages that expand its functionality.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Grammar:&lt;/em&gt; rules about how words (elementary meaningful components of language) change their form and combine with other words to express meaning
- &lt;a href=&#34;https://dictionary.cambridge.org/dictionary/english/grammar&#34;&gt;Cambridge English dictionary&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Grammar of graphics:&lt;/em&gt; rules about how elementary graphical components change visual representations of data and combine with other graphical components to express meaning.&lt;/p&gt;
&lt;p&gt;To paraphrase &lt;code&gt;ggplot2&lt;/code&gt; creator &lt;a href=&#34;http://hadley.nz/&#34;&gt;Hadley Wickham&lt;/a&gt;, learning the grammar of graphics allows us to move beyond basic named plotting functions, like &lt;code&gt;elucidate::plot_box()&lt;/code&gt; or &lt;code&gt;elucidate::plot_scatter()&lt;/code&gt;, and leverage the layered structure of statistical graphics to produce bespoke visual presentations of data&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;. Data visualization is a core data analysis skill that is arguably the most powerful way of communicating research results.&lt;/p&gt;
&lt;p&gt;In &lt;a href=&#34;https://craig.rbind.io/post/2020-12-07-asgr-3-0-exploring-data-with-elucidate/&#34;&gt;the previous post&lt;/a&gt; on the &lt;code&gt;elucidate&lt;/code&gt; package you learned about some convenience &lt;code&gt;plot_*&lt;/code&gt; functions that were drawing graphs for you with &lt;code&gt;ggplot2&lt;/code&gt;. In this post we dive into the mechanics of &lt;code&gt;ggplot2&lt;/code&gt; so you can learn to build your own ggplots “from scratch”.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;ggplot2&lt;/code&gt; grammar of graphics approach to plotting comes with some huge &lt;strong&gt;advantages&lt;/strong&gt; over the alternatives:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Oodles of customization and control options are made accessible through a declarative and readable syntax.&lt;/li&gt;
&lt;li&gt;Easier and more intuitive than plotting in base R or with the &lt;a href=&#34;https://cran.r-project.org/web/packages/lattice/lattice.pdf&#34;&gt;lattice&lt;/a&gt; package.&lt;/li&gt;
&lt;li&gt;Used by a massive and growing community of scientists and other data professionals so there are plenty of resources if you need help.&lt;/li&gt;
&lt;li&gt;The new &lt;a href=&#34;https://plotnine.readthedocs.io/&#34;&gt;plotnine&lt;/a&gt; package in python and &lt;a href=&#34;http://gadflyjl.org/&#34;&gt;gadfly&lt;/a&gt; package in Julia (both inspired by ggplot2) mean that you’re not just learning how to make graphs in R, but in Python and Julia as well.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Disadvantages&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;ggplot2&lt;/code&gt; is a comprehensive and flexible graphing system, which means there is &lt;em&gt;a lot&lt;/em&gt; to learn, even without considering the many extension packages that have been developed in recent years. When customizing graphs I still have to look up the &lt;a href=&#34;https://ggplot2.tidyverse.org/reference/index.html&#34;&gt;documentation&lt;/a&gt; on &lt;code&gt;ggplot2&lt;/code&gt; functions I don’t use often.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;ggplot2&lt;/code&gt; code can be a bit verbose with customized graphs taking up many lines, although if you find yourself copying and pasting code too often, you can use R’s functional programming capabilities to condense/simplify things. This is why I built the &lt;code&gt;elucidate::plot_*&lt;/code&gt; convenience functions.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The declarative syntax of &lt;code&gt;ggplot2&lt;/code&gt; is designed to allow you to describe visual features to use for constructing graphics while allowing R to handle the low level details for you (Wickham, 2011). This post will cover most of what you need to know to produce some of the most common plots used in psychology and related fields. Specifically, we will cover the following topics:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;ggplot2&lt;/code&gt; basics&lt;/strong&gt;: layers, aesthetic mappings, and geometries.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Aesthetic customization&lt;/strong&gt;: labels, scales, colours, themes, fonts, etc.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Faceting&lt;/strong&gt;: splitting a large/complex graph into panels.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Layouts&lt;/strong&gt;: the &lt;code&gt;patchwork&lt;/code&gt; extension package for arranging plot combinations.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Animation&lt;/strong&gt; with the &lt;code&gt;gganimate&lt;/code&gt; package.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Exporting ggplots&lt;/strong&gt;: to a file on disk with &lt;code&gt;ggsave()&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In this post we’ll look at the &lt;code&gt;penguins&lt;/code&gt; dataset from the &lt;code&gt;palmerpenguins&lt;/code&gt; package.&lt;/p&gt;
&lt;p&gt;According to the description in the documentation (&lt;code&gt;?palmerpenguins::penguins&lt;/code&gt;), these data are of body size measurements for different species of penguins in the Palmer archipelago collected annually from 2007-2009.&lt;/p&gt;
&lt;p&gt;By the end of this post, you should know enough to make snazzy graphs like this without much difficulty:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-1-1.png&#34; width=&#34;100%&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;setup&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;Setup&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Because it is a core tidyverse package, &lt;code&gt;ggplot2&lt;/code&gt; is installed for you when you install the &lt;code&gt;tidyverse&lt;/code&gt; meta-package. However, if you’re just joining the blog series now, you can install &lt;code&gt;ggplot2&lt;/code&gt; using &lt;code&gt;install.packages()&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install.packages(&amp;quot;ggplot2&amp;quot;) #only run this if you haven&amp;#39;t installed ggplot2 before (or updated it in a while)
install.packages(&amp;quot;palmerpenguins&amp;quot;) #contains the data we need&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install.packages(&amp;quot;tidyverse&amp;quot;) #if you want to install/update the other core tidyverse packages too
install.packages(&amp;quot;palmerpenguins&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I also recommend installing a few add on packages that enhance/supplement &lt;code&gt;ggplot2&lt;/code&gt;’s capabilities (to be demonstrated in examples)&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install.packages(c(&amp;quot;viridis&amp;quot;, &amp;quot;RColorBrewer&amp;quot;, &amp;quot;ggsci&amp;quot;, #colour palettes
                   &amp;quot;ggthemes&amp;quot;, #additional themes
                   &amp;quot;extrafont&amp;quot;, #additional font family options
                   &amp;quot;ggrepel&amp;quot;, #to avoid overlapping labels
                   &amp;quot;patchwork&amp;quot;, #multi-plot arrangements/combinations
                   &amp;quot;plotly&amp;quot;, #interactive plots
                   &amp;quot;gganimate&amp;quot; #animated ggplots
                   )) 

remotes::install_github(&amp;quot;thomasp85/transformr&amp;quot;) #enables gganimate to transition between different polygons&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then just load these like any other R package, with the &lt;code&gt;library()&lt;/code&gt; function:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse) #I&amp;#39;m loading ggplot2 with the rest of the core tidyverse packages
#or library(ggplot2) to just load ggplot2&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I’m also going to load &lt;code&gt;elucidate&lt;/code&gt; for &lt;a href=&#34;https://craig.rbind.io/post/2020-12-07-asgr-3-0-exploring-data-with-elucidate/#interrogating-data&#34;&gt;data interrogation&lt;/a&gt; and import the &lt;code&gt;penguins&lt;/code&gt; data from the &lt;code&gt;palmerpenguins&lt;/code&gt; package with the &lt;code&gt;data()&lt;/code&gt; function. The remaining packages introduced in this post will be loaded later on when they are needed.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(elucidate) #for data exploration/interrogation functions

#load data from an R package with the data function &amp;amp; package argument (could also import it by loading the package)
data(penguins, package = &amp;quot;palmerpenguins&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Next, we take our usual step of checking the structure of the data with the &lt;code&gt;dplyr::glimpse()&lt;/code&gt; function (also loaded with the &lt;code&gt;tidyverse&lt;/code&gt;).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;glimpse(penguins)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 344
## Columns: 8
## $ species           &amp;lt;fct&amp;gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel~
## $ island            &amp;lt;fct&amp;gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse~
## $ bill_length_mm    &amp;lt;dbl&amp;gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, ~
## $ bill_depth_mm     &amp;lt;dbl&amp;gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, ~
## $ flipper_length_mm &amp;lt;int&amp;gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186~
## $ body_mass_g       &amp;lt;int&amp;gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, ~
## $ sex               &amp;lt;fct&amp;gt; male, female, female, NA, female, male, female, male~
## $ year              &amp;lt;int&amp;gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007~&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;glimpse()&lt;/code&gt; tells us that there are 344 rows and 8 columns in the &lt;code&gt;penguins&lt;/code&gt; data, two of which are numeric/double vectors (bill_length_mm and bill_depth_mm), three are integer vectors (flipper_length_mm, body_mass_g, and year), and three are factors (species, island, and sex).&lt;/p&gt;
&lt;p&gt;Next, we use &lt;code&gt;elucidate::dupes()&lt;/code&gt;, &lt;code&gt;elucidate::counts_tb_all()&lt;/code&gt;, and &lt;code&gt;elucidate::describe_all()&lt;/code&gt; to check for duplicates, suspicious values, and missingness.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dupes(penguins)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## No column names specified - using all columns.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## No duplicates detected.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 0 x 9
## # ... with 9 variables: species &amp;lt;fct&amp;gt;, island &amp;lt;fct&amp;gt;, bill_length_mm &amp;lt;dbl&amp;gt;,
## #   bill_depth_mm &amp;lt;dbl&amp;gt;, flipper_length_mm &amp;lt;int&amp;gt;, body_mass_g &amp;lt;int&amp;gt;, sex &amp;lt;fct&amp;gt;,
## #   year &amp;lt;int&amp;gt;, n_copies &amp;lt;int&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;describe_all(penguins, output = &amp;quot;dt&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $factor
##    variable cases   n na  p_na n_unique ordered
## 1:  species   344 344  0 0.000        3   FALSE
## 2:   island   344 344  0 0.000        3   FALSE
## 3:      sex   344 333 11 0.032        3   FALSE
##                               counts_tb
## 1: Adelie_152, Gentoo_124, Chinstrap_68
## 2:  Biscoe_168, Dream_124, Torgersen_52
## 3:                 male_168, female_165
## 
## $numeric
##             variable cases   n na  p_na     mean      sd     se     p0      p25
## 1:    bill_length_mm   344 342  2 0.006   43.922   5.460  0.295   32.1   39.225
## 2:     bill_depth_mm   344 342  2 0.006   17.151   1.975  0.107   13.1   15.600
## 3: flipper_length_mm   344 342  2 0.006  200.915  14.062  0.760  172.0  190.000
## 4:       body_mass_g   344 342  2 0.006 4201.754 801.955 43.365 2700.0 3550.000
## 5:              year   344 344  0 0.000 2008.029   0.818  0.044 2007.0 2007.000
##        p50    p75   p100   skew   kurt
## 1:   44.45   48.5   59.6  0.053 -0.876
## 2:   17.30   18.7   21.5 -0.143 -0.907
## 3:  197.00  213.0  231.0  0.346 -0.984
## 4: 4050.00 4750.0 6300.0  0.470 -0.719
## 5: 2008.00 2009.0 2009.0 -0.054 -1.505&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;counts_tb_all(penguins, n = 2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $species
##    top_v top_n     bot_v bot_n
## 1 Adelie   152 Chinstrap    68
## 2 Gentoo   124    Gentoo   124
## 
## $island
##    top_v top_n     bot_v bot_n
## 1 Biscoe   168 Torgersen    52
## 2  Dream   124     Dream   124
## 
## $bill_length_mm
##   top_v top_n bot_v bot_n
## 1  41.1     7  32.1     1
## 2  45.2     6  33.1     1
## 
## $bill_depth_mm
##   top_v top_n bot_v bot_n
## 1    17    12  13.1     1
## 2    15    10  13.2     1
## 
## $flipper_length_mm
##   top_v top_n bot_v bot_n
## 1   190    22   172     1
## 2   195    17   174     1
## 
## $body_mass_g
##   top_v top_n bot_v bot_n
## 1  3800    12  2700     1
## 2  3700    11  2925     1
## 
## $sex
##    top_v top_n  bot_v bot_n
## 1   male   168 female   165
## 2 female   165   male   168
## 
## $year
##   top_v top_n bot_v bot_n
## 1  2009   120  2007   110
## 2  2008   114  2008   114&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;These checks don’t reveal any obvious issues aside from a few missing values. Approaches to dealing with missing values will be covered in detail in the next post, so for now we’ll just drop the rows with missing values via &lt;code&gt;na.omit()&lt;/code&gt; to keep things simple.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;nrow(penguins)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 344&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 &amp;lt;- na.omit(penguins)

nrow(penguins2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 333&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;ggplot2-basics&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;ggplot2 basics&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;The first thing you need to know about the mechanics of &lt;code&gt;ggplot2&lt;/code&gt; is that it builds plots in layers. This feature means that you can modify and add components to a graph by simply adding a layer to it, which makes it incredibly flexible. Unfortunately this flexibility can also be confusing for new users especially if they’ve only ever seen code for highly complex graphs that contain many layers. In my personal R learning journey, I found &lt;code&gt;ggplot2&lt;/code&gt; to be a lot more intuitive when I realized that there are &lt;strong&gt;only 3 layers&lt;/strong&gt; you need to build a basic graph:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;The &lt;strong&gt;initialization layer&lt;/strong&gt;, which is just using the &lt;code&gt;ggplot()&lt;/code&gt; function to tell R that you want to initialize a ggplot graphical object. I find it helpful to think of this as creating the blank canvas upon which the graph will be drawn.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The &lt;strong&gt;aesthetic layer&lt;/strong&gt;, added via the &lt;code&gt;aes()&lt;/code&gt; function, is used to define aesthetic mappings, i.e. the assignment of variables in the data frame specified in the “data” argument of the initialization layer to visual features of the plot.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;In general, if you want a graphical feature of a ggplot to be based on the levels of a variable, you map the unquoted name of the variable to the feature inside the &lt;code&gt;aes()&lt;/code&gt; function. For example, in the Palmer penguins data we could assign a different colour to the graphed values for each penguin species with &lt;code&gt;aes(colour = species)&lt;/code&gt;, independently of the plot geometry (scatter plot, bar graph, box plot, etc.). In contrast, if you want to set a graphical parameter to a specific value that will be applied to all geometric objects of the same class that are drawn on the graph, like making all points on a scatter plot blue, you would use &lt;code&gt;colour = &#34;blue&#34;&lt;/code&gt; without the &lt;code&gt;aes()&lt;/code&gt; part in a &lt;code&gt;geom_point()&lt;/code&gt; layer (i.e. &lt;code&gt;geom_point(colour = &#34;blue&#34;)&lt;/code&gt;). This tells R that you want to set the colour of all geometric objects from the same layer (e.g. points on a scatter plot) to a specific colour, rather than assigning distinct colours to each level of a variable. Aesthetic mappings are the most conceptually challenging part of learning &lt;code&gt;ggplot2&lt;/code&gt;, but their meaning will become clear after seeing some examples.&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;A &lt;strong&gt;geometry layer&lt;/strong&gt; to define the spatial features of the graph. There are many geometries available in &lt;code&gt;ggplot2&lt;/code&gt; as intuitively named functions beginning with &lt;code&gt;geom_*&lt;/code&gt;. Some of more commonly used ones are:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;geom_histogram()&lt;/code&gt; = histograms&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;geom_density()&lt;/code&gt; = kernel density plots&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;geom_bar()&lt;/code&gt; = bar charts&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;geom_point()&lt;/code&gt; = scatter plots&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;geom_box()&lt;/code&gt; = box-and-whisker plots&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;geom_violin()&lt;/code&gt; = violin plots&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;geom_line()&lt;/code&gt; = line graphs&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;geom_error()&lt;/code&gt; = error bars&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;geom_smooth()&lt;/code&gt; = adds lines for conditional mean estimates (i.e. regression lines)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can visit the &lt;code&gt;ggplot2&lt;/code&gt; reference page &lt;a href=&#34;https://ggplot2.tidyverse.org/reference/&#34;&gt;here&lt;/a&gt; for a full list. It is worth mentioning that the &lt;code&gt;ggplot2&lt;/code&gt; layering system allows you to overlay multiple geometric layers on the same plot (just add another layer), a feature that was not obvious to me when I was starting to learn it.&lt;/p&gt;
&lt;p&gt;You also need to know that layers are added to a ggplot using the &lt;code&gt;+&lt;/code&gt; symbol instead of the pipe operator (&lt;code&gt;%&amp;gt;%&lt;/code&gt;), where:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ggplot(data = penguins2) + #or equivalently penguins2 %&amp;gt;% ggplot() +
  aes(x = body_mass_g) +
  geom_histogram()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-10-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;…can be read as: “initialize a ggplot while setting the data frame &lt;code&gt;penguins2&lt;/code&gt; as the default dataset to use for aesthetic mappings, then add a layer of aesthetic mappings where the variable ‘body_mass_g’ is to be assigned to the x-axis of the graph, then add a geometry layer that tells R to draw a histogram of that variable.”&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;N.B.&lt;/em&gt;&lt;/strong&gt; The &lt;a href=&#34;https://magrittr.tidyverse.org/reference/pipe.html&#34;&gt;magrittr&lt;/a&gt; package’s pipe&lt;a href=&#34;#fn2&#34; class=&#34;footnote-ref&#34; id=&#34;fnref2&#34;&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt; operator (&lt;code&gt;%&amp;gt;%&lt;/code&gt;) was covered in &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#chaining-functions-with-the-pipe-operator&#34;&gt;an earlier post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;It is more common to see the &lt;code&gt;aes()&lt;/code&gt; layer embedded in the initialization layer via &lt;code&gt;ggplot()&lt;/code&gt;’s “mapping” argument, like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(mapping = aes(x = body_mass_g)) + #or ggplot(penguins2, aes(x = body_mass_g))
  geom_histogram()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-11-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;As you can clearly see, these are effectively identical in that they both define global aesthetic mappings that are “inherited” by all subsequent layers (&lt;code&gt;geom_histogram()&lt;/code&gt; in this example) unless the “inherit.aes” argument in those layers is set to &lt;code&gt;FALSE&lt;/code&gt;, e.g.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ggplot(penguins2) + 
  aes(x = body_mass_g) +
  geom_histogram(inherit.aes = FALSE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Error: stat_bin() requires an x or y aesthetic.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This time I get an error that &lt;code&gt;stat_bin()&lt;/code&gt;, which is a function called by &lt;code&gt;geom_histogram()&lt;/code&gt;, “requires an x or y aesthetic” (variable mapping), because I’ve told &lt;code&gt;geom_histogram()&lt;/code&gt; to ignore the global/default mappings for the ggplot by setting “inherit.aes”. In practice you probably won’t use “inherit.aes” much because you can also just overwrite a mapping for a specific layer by using that layer’s “mapping” argument like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) + 
  geom_histogram(mapping = aes(x = flipper_length_mm))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-13-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Now we end up with a histogram that plots the &lt;em&gt;binned&lt;/em&gt; distribution of the flipper_length_mm variable (as per the new x-axis mapping in the &lt;code&gt;geom_histogram()&lt;/code&gt; layer) but the x-axis title still reads “body_mass_g” because the rest of the plotting components (of which axis titles are one) are affected by the default/global x-axis mapping we set to the body_mass_g variable in the &lt;code&gt;ggplot()&lt;/code&gt; layer.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The key point here is when you map a variable, like penguin body mass in grams, to an aesthetic parameter of a ggplot with the &lt;code&gt;aes()&lt;/code&gt; function, in either the &lt;code&gt;ggplot()&lt;/code&gt; initialization layer of the graph, like this:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;…or as a separate layer, like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot() +
  aes(x = body_mass_g)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;…then that mapping of body mass to the x-axis will be applied by default to all layers of the plot. So you can add a second geom to the plot, like rug lines to density plot of body mass for each species…&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot() +
  aes(x = body_mass_g) +
  geom_density() +
  geom_rug()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-16-1.png&#34; width=&#34;672&#34; /&gt;
…and each &lt;code&gt;geom_*&lt;/code&gt; layer uses penguin body mass as the x-axis variable. If you only want to assign a variable aesthetic mapping to affect a single geom, then pass the &lt;code&gt;aes()&lt;/code&gt; portion to the chosen &lt;code&gt;geom_*&lt;/code&gt; layer’s “mapping” argument instead, as in:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot() +
  geom_density(aes(x = body_mass_g)) +
  geom_rug()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-17-1.png&#34; width=&#34;672&#34; /&gt;
This time the rug lines aren’t rendered because I’ve only assigned penguin body mass to the x-axis of the &lt;code&gt;geom_density()&lt;/code&gt; layer and &lt;code&gt;geom_rug()&lt;/code&gt; has no idea what is supposed to go on the x-axis.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;aesthetic-customization&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;aesthetic customization&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;This section introduces fundamental methods of customizing ggplot aesthetic parameters, many of which can be either mapped to a variable within the &lt;code&gt;aes()&lt;/code&gt; function, or applied globally outside of the &lt;code&gt;aes()&lt;/code&gt; function.&lt;/p&gt;
&lt;div id=&#34;titleslabels&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.1&lt;/span&gt; titles/labels&lt;/h2&gt;
&lt;p&gt;To correct the title in the previous density plot we could use an &lt;code&gt;xlab()&lt;/code&gt; layer (short for “x-axis label”), but I prefer the &lt;code&gt;labs()&lt;/code&gt; function instead because you can use it to modify multiple labels/titles in the same layer, e.g. both the x and y axis labels:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) + 
  geom_histogram() +
  labs(x = &amp;quot;body mass (g)&amp;quot;, y = &amp;quot;count (using 30 bins)&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-18-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Other labels that can be modified with &lt;code&gt;labs()&lt;/code&gt; layer include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;“title”&lt;/strong&gt;: the title of the ggplot, which appears at the top and is left-aligned by default.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;“subtitle”&lt;/strong&gt;: a subtitle for the ggplot that is in a slightly smaller font size and positioned just below the title (if there is one)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;“caption”&lt;/strong&gt;: a caption for the ggplot, which appears at the bottom and is right-aligned by default.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;“tag”&lt;/strong&gt;: adds a tag to the plot. Think about this as putting a letter “a” (or whatever text you want) in the top left corner of the graph (by default) to &lt;em&gt;tag&lt;/em&gt; it as part &lt;strong&gt;a&lt;/strong&gt; of multi-plot figure.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;“colour”/“color”&lt;/strong&gt;: if a variable has been assigned to “colour” (“color” is also valid if you prefer); this controls the title of colour legend.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;“fill”&lt;/strong&gt;: if a variable has been assigned to “fill”, this controls the title of fill legend.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;“size”&lt;/strong&gt;: if a variable has been assigned to “size”, this controls the title of size legend.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;“shape”&lt;/strong&gt;: if a variable has been assigned to “shape”, this controls the title of shape legend.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;“linetype”&lt;/strong&gt;: if a variable has been assigned to “linetype”, this controls the title of the linetype legend.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;N.B.&lt;/em&gt;&lt;/strong&gt; you can remove any of these labels by setting them to &lt;code&gt;NULL&lt;/code&gt; in a &lt;code&gt;labs()&lt;/code&gt; layer, e.g.:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) + 
  geom_histogram() +
  labs(x = &amp;quot;body mass (g)&amp;quot;, y = NULL,
       caption = &amp;quot;source: palmerpenguins R package&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-19-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;fill&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.2&lt;/span&gt; fill&lt;/h2&gt;
&lt;p&gt;The fill aesthetic in &lt;code&gt;ggplot2&lt;/code&gt; controls the fill colour of ggplot geometric components. You can either map a variable to fill using the &lt;code&gt;aes()&lt;/code&gt; function,&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_histogram(aes(fill = species)) +
  labs(fill = &amp;quot;Species&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-20-1.png&#34; width=&#34;672&#34; /&gt;
…or you can set it to a single value (as a character string) to be applied globally by specifying it in the geometry layer &lt;em&gt;outside&lt;/em&gt; of &lt;code&gt;aes()&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_histogram(fill = &amp;quot;blue2&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-21-1.png&#34; width=&#34;672&#34; /&gt;
As you can see, when you assign a variable to the fill (colour) aesthetic, you get different fill colours for each value/level of the specified variable, which is a convenient way of splitting the data in a ggplot. You’ll also get a legend by default. Other aesthetics covered below behave similarly (colour, shape, size, etc.).&lt;/p&gt;
&lt;p&gt;Recall from the last &lt;a href=&#34;https://craig.rbind.io/post/2020-12-07-asgr-3-0-exploring-data-with-elucidate/&#34;&gt;post&lt;/a&gt; that we can see the colour options available in base R via &lt;code&gt;elucidate::colour_options()&lt;/code&gt;…&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;elucidate::colour_options()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-22-1.png&#34; width=&#34;672&#34; /&gt;
…which will be easy to read if you run it yourself and expand it to full screen viewing mode.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ggplot2&lt;/code&gt; also provides &lt;code&gt;scale_*&lt;/code&gt; functions that give you finer control over many aesthetic features of the graphs you build. For example, we can add a &lt;code&gt;scale_fill_manual()&lt;/code&gt; layer to change the fill colours assigned to groups in a histogram…&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_histogram(aes(fill = species)) +
  scale_fill_manual(values = c(&amp;quot;royalblue3&amp;quot;, &amp;quot;darkorchid2&amp;quot;, &amp;quot;green3&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-23-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;…or &lt;code&gt;scale_fill_continuous()&lt;/code&gt;/&lt;code&gt;scale_fill_gradient()&lt;/code&gt; if a continuous variable has been assigned to the fill aesthetic in a scatter plot.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm, fill = body_mass_g)) +
  geom_point(shape = 21, size = 4) +
  scale_fill_continuous(low = &amp;quot;blue&amp;quot;, high = &amp;quot;red&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-24-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;colourcolor&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.3&lt;/span&gt; colour/color&lt;/h2&gt;
&lt;p&gt;The colour aesthetic in &lt;code&gt;ggplot2&lt;/code&gt; controls the outline colour of ggplot geometric components. Note that both the British/Canadian (colour) and American (color) English spellings are valid thanks to the &lt;code&gt;ggplot2&lt;/code&gt; authors. Like fill, you can either map a variable to outline colour using the &lt;code&gt;aes()&lt;/code&gt; function,&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_histogram(aes(colour = species))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-25-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;…or you can set it to a single value (outside of &lt;code&gt;aes()&lt;/code&gt;).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_histogram(colour = &amp;quot;blue2&amp;quot;,
                 fill = &amp;quot;white&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-26-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;For finer control, you can use &lt;code&gt;scale_colour_manual()&lt;/code&gt;…&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(y = body_mass_g, x = species, colour = species)) +
  geom_boxplot() +
  scale_colour_manual(values = c(&amp;quot;green3&amp;quot;, &amp;quot;blue3&amp;quot;, &amp;quot;red2&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-27-1.png&#34; width=&#34;672&#34; /&gt;
…or &lt;code&gt;scale_colour_continuous()&lt;/code&gt;, just like the &lt;code&gt;scale_fill_*&lt;/code&gt; functions. If you want to specify more than 2 colours to use in constructing a colour gradient, then try the &lt;code&gt;scale_colour_gradientn()&lt;/code&gt; function instead&lt;a href=&#34;#fn3&#34; class=&#34;footnote-ref&#34; id=&#34;fnref3&#34;&gt;&lt;sup&gt;3&lt;/sup&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm, colour = body_mass_g)) +
  geom_point(shape = &amp;quot;square&amp;quot;, size = 4) +
  scale_colour_gradientn(colours = c(&amp;quot;blue&amp;quot;, &amp;quot;yellow&amp;quot;, &amp;quot;red&amp;quot;)) #in order from low to medium to high&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-28-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;reordering-factors&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.4&lt;/span&gt; reordering factors&lt;/h2&gt;
&lt;p&gt;To move the box plot for Gentoo penguins to the far left in the second last graph, we can use &lt;code&gt;forcats::fct_relevel()&lt;/code&gt; in a call to &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#mutate&#34;&gt;dplyr::mutate()&lt;/a&gt; &lt;em&gt;before&lt;/em&gt; passing the data to the &lt;code&gt;ggplot()&lt;/code&gt; function.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  mutate(species = fct_relevel(species, &amp;quot;Gentoo&amp;quot;)) %&amp;gt;% 
  ggplot(aes(y = body_mass_g, x = species, colour = species)) +
  geom_boxplot() +
  #the order of colours should match the order of factor levels
  scale_colour_manual(values = c(&amp;quot;green3&amp;quot;, &amp;quot;blue3&amp;quot;, &amp;quot;red2&amp;quot;)) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-29-1.png&#34; width=&#34;672&#34; /&gt;
See the earlier &lt;a href=&#34;https://craig.rbind.io/post/2020-08-29-asgr-2-4-factors/&#34;&gt;post&lt;/a&gt; on factors and the &lt;a href=&#34;https://forcats.tidyverse.org/&#34;&gt;forcats&lt;/a&gt; package for more information on manipulating factor levels in R.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;colour-palettes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.5&lt;/span&gt; colour palettes&lt;/h2&gt;
&lt;p&gt;If you don’t want to pick individual colours to use yourself, you should be aware that there are several packages that provide conveniently organized colour palettes. See this &lt;a href=&#34;https://github.com/EmilHvitfeldt/r-color-palettes/blob/master/type-sorted-palettes.md&#34;&gt;link&lt;/a&gt; for the most comprehesive list I’ve come across so far. For the purposes of this blog post I will only cover four of these packages: the &lt;a href=&#34;https://cran.r-project.org/web/packages/RColorBrewer/index.html&#34;&gt;RColorBrewer&lt;/a&gt;, &lt;a href=&#34;https://nanx.me/ggsci/articles/ggsci.html&#34;&gt;ggsci&lt;/a&gt;, &lt;a href=&#34;https://github.com/clauswilke/colorblindr&#34;&gt;colorblindr&lt;/a&gt;, and &lt;a href=&#34;https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html&#34;&gt;viridis&lt;/a&gt; packages.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://cran.r-project.org/web/packages/RColorBrewer/index.html&#34;&gt;RColorBrewer&lt;/a&gt;, which is installed automatically for you with &lt;code&gt;ggplot2&lt;/code&gt;, was perhaps the first package to offer convenient color palettes for data visualization in R, and provides three types of palettes: sequential, diverging, and qualitative. According to &lt;a href=&#34;https://cran.r-project.org/web/packages/RColorBrewer/RColorBrewer.pdf&#34;&gt;the package documentation&lt;/a&gt;:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Sequential&lt;/strong&gt; palettes are appropriate for ordered variables that progress from low to high values, where low values are assigned light colours and high values are assigned dark colours. Sequential palettes are useful if you want to emphasize extreme values.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Diverging&lt;/strong&gt; palettes are useful when you want to place equal emphasis on low, middle, and high values of an ordered variable.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Qualitative&lt;/strong&gt; palettes are useful for unordered categorical variables where the goal is to simply use distinct colours for each group. I tend to use these ones most often out of the RColorBrewer palettes.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;You can view the &lt;code&gt;RColorBrewer&lt;/code&gt; palette options in your R session’s active graphics device (e.g. R studio “plot” tab) with &lt;code&gt;RColorBrewer::display.brewer.all()&lt;/code&gt;. Here I’ll show you the different palette types separately so they all appear on the screen legibly, but you will be able to see them all at once if you run the default &lt;code&gt;display.brewer.all()&lt;/code&gt; command yourself.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#sequential
RColorBrewer::display.brewer.all(type = &amp;quot;seq&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-30-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#diverging
RColorBrewer::display.brewer.all(type = &amp;quot;div&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-30-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#qualitative
RColorBrewer::display.brewer.all(type = &amp;quot;qual&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-30-3.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ggplot2&lt;/code&gt; provides &lt;code&gt;scale_fill_brewer()&lt;/code&gt; and &lt;code&gt;scale_colour_brewer()&lt;/code&gt; (or &lt;code&gt;scale_color_brewer()&lt;/code&gt; if you prefer) as convenience functions that allow you to access these palettes via the “palette” argument. E.g.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_histogram(aes(fill = species)) +
  scale_fill_brewer(palette = &amp;quot;Dark2&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-31-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Alternatively, you can use the &lt;code&gt;RColorBrewer::brewer.pal()&lt;/code&gt; function with the “n” and “name” arguments to generate a character vector of colour names of length n that can be passed to any plotting function in R.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;RColorBrewer::brewer.pal(n = 3, name = &amp;quot;Set1&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;#E41A1C&amp;quot; &amp;quot;#377EB8&amp;quot; &amp;quot;#4DAF4A&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_histogram(aes(fill = species)) +
  scale_fill_manual(values = RColorBrewer::brewer.pal(n = 3, name = &amp;quot;Set1&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-32-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Those of us who are interested in publishing our work in peer-reviewed journals may be interested in using the &lt;a href=&#34;https://nanx.me/ggsci/articles/ggsci.html&#34;&gt;ggsci&lt;/a&gt; package, which provides palettes inspired by common colour schemes used by prominent journals, like &lt;em&gt;Nature&lt;/em&gt;, &lt;em&gt;Science&lt;/em&gt;, &lt;em&gt;JAMA&lt;/em&gt;, and &lt;em&gt;The New England Journal of Medicine&lt;/em&gt; (and several others inspired by science fiction). When &lt;code&gt;ggsci&lt;/code&gt; is loaded, you can access these palettes with additional &lt;code&gt;scale_fill_*&lt;/code&gt; and &lt;code&gt;scale_colour/color_*&lt;/code&gt; functions, where * can be any of the &lt;code&gt;ggsci&lt;/code&gt; palette names. See the package &lt;a href=&#34;https://nanx.me/ggsci/articles/ggsci.html&#34;&gt;website&lt;/a&gt; for a full list. For the sake of brevity, I will just demonstrate the &lt;em&gt;Nature&lt;/em&gt;-themed palette because, like most other scientists, I’ve always dreamed of one day publishing in &lt;em&gt;Nature&lt;/em&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(ggsci)

penguins2 %&amp;gt;% 
  ggplot(aes(y = body_mass_g)) +
  geom_boxplot(aes(fill = species)) +
  scale_fill_npg() #npg = Nature Publishing Group&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-33-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;As soon as you have some data worthy of publication in &lt;em&gt;Nature&lt;/em&gt; (good luck!) you’ll now have no trouble making figures for it!&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;colourblind-friendly-palettes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.6&lt;/span&gt; colourblind-friendly palettes&lt;/h2&gt;
&lt;p&gt;To assess the friendliness of your graphs to colour blind individuals, you should check out the website for the &lt;a href=&#34;https://github.com/clauswilke/colorblindr&#34;&gt;colorblindr&lt;/a&gt; package by &lt;code&gt;ggplot2&lt;/code&gt;’ developer and author of &lt;a href=&#34;https://clauswilke.com/dataviz/&#34;&gt;The Fundamentals of Data Visualization&lt;/a&gt;, Claus Wilke. You can even upload an image file of a finished graph and simulate how it will look like to colour blind individuals with this cool &lt;a href=&#34;http://hclwizard.org:3000/cvdemulator/&#34;&gt;simulation tool&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&#34;https://sjmgarnier.github.io/viridis/&#34;&gt;viridis&lt;/a&gt; package’s colour palettes are all colourblind-friendly, examples of which are shown &lt;a href=&#34;https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html#the-color-scales&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;viridis&lt;/code&gt; doesn’t come with a built-in convenience function to display all of the colour palettes at once, but we can show them each using &lt;code&gt;scales::show_col()&lt;/code&gt; and &lt;code&gt;viridis::viridis_pal()&lt;/code&gt;. Five options can be displayed this way:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#both of these packages are installed for you with ggplot2 so we can just load them
library(scales)
library(viridis)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: package &amp;#39;viridisLite&amp;#39; was built under R version 4.0.5&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;show_col(viridis_pal(option = &amp;quot;magma&amp;quot;)(9)) #equivalent to option = &amp;quot;A&amp;quot;.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-34-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;show_col(viridis_pal(option = &amp;quot;inferno&amp;quot;)(9)) #equivalent to option = &amp;quot;B&amp;quot;.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-34-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;show_col(viridis_pal(option = &amp;quot;plasma&amp;quot;)(9)) #equivalent to option = &amp;quot;C&amp;quot;.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-34-3.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;show_col(viridis_pal(option = &amp;quot;viridis&amp;quot;)(9)) #the default, equivalent to option = &amp;quot;D&amp;quot;.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-34-4.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;show_col(viridis_pal(option = &amp;quot;cividis&amp;quot;)(9)) #equivalent to option = &amp;quot;E&amp;quot;.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-34-5.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;We can use one of these palettes in a ggplot with &lt;code&gt;viridis::scale_fill_viridis()&lt;/code&gt; or &lt;code&gt;viridis::scale_colour_viridis()&lt;/code&gt; (or &lt;code&gt;viridis::scale_color_viridis()&lt;/code&gt;)&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(aes(fill = species)) +
  scale_fill_viridis(option = &amp;quot;viridis&amp;quot;, #the default
                     discrete = TRUE) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-35-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;                     #discrete = TRUE needs to be added here to use
                     #scale_*_viridis() for a discrete variable&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;size&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.7&lt;/span&gt; size&lt;/h2&gt;
&lt;p&gt;The obviously named “size” aesthetic parameter adjusts the size of a geom. Like other &lt;code&gt;ggplot2&lt;/code&gt; aesthetics, you would either assign a numeric variable to size in &lt;code&gt;aes()&lt;/code&gt;…&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm, 
             size = body_mass_g)) + #point size will be proportional to body_mass_g
  geom_point(colour = &amp;quot;blue2&amp;quot;) #scatter plot&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-36-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;…or set the geom size to a specific value.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) + 
  geom_point(colour = &amp;quot;blue2&amp;quot;, size = 4) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-37-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;As you can see, setting an additional continuous variable to the size aesthetic of a scatter plot is an easy way to explore relationships between 3 variables at once (also called a &lt;a href=&#34;https://www.data-to-viz.com/graph/bubble.html&#34;&gt;“bubble chart”&lt;/a&gt;). I also find it easier to read than extending the plot into a third spatial dimension, which we can do with &lt;a href=&#34;https://plotly.com/r/3d-scatter-plots/&#34;&gt;plotly&lt;/a&gt; instead of &lt;code&gt;ggplot2&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  plotly::plot_ly(x = ~bill_length_mm, 
                  y = ~bill_depth_mm, 
                  z = ~body_mass_g,
                  type = &amp;quot;scatter3d&amp;quot;, 
                  color = I(&amp;quot;blue2&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-1&#34; style=&#34;width:672px;height:480px;&#34; class=&#34;plotly html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-1&#34;&gt;{&#34;x&#34;:{&#34;visdat&#34;:{&#34;481452c92ada&#34;:[&#34;function () &#34;,&#34;plotlyVisDat&#34;]},&#34;cur_data&#34;:&#34;481452c92ada&#34;,&#34;attrs&#34;:{&#34;481452c92ada&#34;:{&#34;x&#34;:{},&#34;y&#34;:{},&#34;z&#34;:{},&#34;color&#34;:[&#34;blue2&#34;],&#34;alpha_stroke&#34;:1,&#34;sizes&#34;:[10,100],&#34;spans&#34;:[1,20],&#34;type&#34;:&#34;scatter3d&#34;}},&#34;layout&#34;:{&#34;margin&#34;:{&#34;b&#34;:40,&#34;l&#34;:60,&#34;t&#34;:25,&#34;r&#34;:10},&#34;scene&#34;:{&#34;xaxis&#34;:{&#34;title&#34;:&#34;bill_length_mm&#34;},&#34;yaxis&#34;:{&#34;title&#34;:&#34;bill_depth_mm&#34;},&#34;zaxis&#34;:{&#34;title&#34;:&#34;body_mass_g&#34;}},&#34;hovermode&#34;:&#34;closest&#34;,&#34;showlegend&#34;:false},&#34;source&#34;:&#34;A&#34;,&#34;config&#34;:{&#34;showSendToCloud&#34;:false},&#34;data&#34;:[{&#34;x&#34;:[39.1,39.5,40.3,36.7,39.3,38.9,39.2,41.1,38.6,34.6,36.6,38.7,42.5,34.4,46,37.8,37.7,35.9,38.2,38.8,35.3,40.6,40.5,37.9,40.5,39.5,37.2,39.5,40.9,36.4,39.2,38.8,42.2,37.6,39.8,36.5,40.8,36,44.1,37,39.6,41.1,36,42.3,39.6,40.1,35,42,34.5,41.4,39,40.6,36.5,37.6,35.7,41.3,37.6,41.1,36.4,41.6,35.5,41.1,35.9,41.8,33.5,39.7,39.6,45.8,35.5,42.8,40.9,37.2,36.2,42.1,34.6,42.9,36.7,35.1,37.3,41.3,36.3,36.9,38.3,38.9,35.7,41.1,34,39.6,36.2,40.8,38.1,40.3,33.1,43.2,35,41,37.7,37.8,37.9,39.7,38.6,38.2,38.1,43.2,38.1,45.6,39.7,42.2,39.6,42.7,38.6,37.3,35.7,41.1,36.2,37.7,40.2,41.4,35.2,40.6,38.8,41.5,39,44.1,38.5,43.1,36.8,37.5,38.1,41.1,35.6,40.2,37,39.7,40.2,40.6,32.1,40.7,37.3,39,39.2,36.6,36,37.8,36,41.5,46.1,50,48.7,50,47.6,46.5,45.4,46.7,43.3,46.8,40.9,49,45.5,48.4,45.8,49.3,42,49.2,46.2,48.7,50.2,45.1,46.5,46.3,42.9,46.1,47.8,48.2,50,47.3,42.8,45.1,59.6,49.1,48.4,42.6,44.4,44,48.7,42.7,49.6,45.3,49.6,50.5,43.6,45.5,50.5,44.9,45.2,46.6,48.5,45.1,50.1,46.5,45,43.8,45.5,43.2,50.4,45.3,46.2,45.7,54.3,45.8,49.8,49.5,43.5,50.7,47.7,46.4,48.2,46.5,46.4,48.6,47.5,51.1,45.2,45.2,49.1,52.5,47.4,50,44.9,50.8,43.4,51.3,47.5,52.1,47.5,52.2,45.5,49.5,44.5,50.8,49.4,46.9,48.4,51.1,48.5,55.9,47.2,49.1,46.8,41.7,53.4,43.3,48.1,50.5,49.8,43.5,51.5,46.2,55.1,48.8,47.2,46.8,50.4,45.2,49.9,46.5,50,51.3,45.4,52.7,45.2,46.1,51.3,46,51.3,46.6,51.7,47,52,45.9,50.5,50.3,58,46.4,49.2,42.4,48.5,43.2,50.6,46.7,52,50.5,49.5,46.4,52.8,40.9,54.2,42.5,51,49.7,47.5,47.6,52,46.9,53.5,49,46.2,50.9,45.5,50.9,50.8,50.1,49,51.5,49.8,48.1,51.4,45.7,50.7,42.5,52.2,45.2,49.3,50.2,45.6,51.9,46.8,45.7,55.8,43.5,49.6,50.8,50.2],&#34;y&#34;:[18.7,17.4,18,19.3,20.6,17.8,19.6,17.6,21.2,21.1,17.8,19,20.7,18.4,21.5,18.3,18.7,19.2,18.1,17.2,18.9,18.6,17.9,18.6,18.9,16.7,18.1,17.8,18.9,17,21.1,20,18.5,19.3,19.1,18,18.4,18.5,19.7,16.9,18.8,19,17.9,21.2,17.7,18.9,17.9,19.5,18.1,18.6,17.5,18.8,16.6,19.1,16.9,21.1,17,18.2,17.1,18,16.2,19.1,16.6,19.4,19,18.4,17.2,18.9,17.5,18.5,16.8,19.4,16.1,19.1,17.2,17.6,18.8,19.4,17.8,20.3,19.5,18.6,19.2,18.8,18,18.1,17.1,18.1,17.3,18.9,18.6,18.5,16.1,18.5,17.9,20,16,20,18.6,18.9,17.2,20,17,19,16.5,20.3,17.7,19.5,20.7,18.3,17,20.5,17,18.6,17.2,19.8,17,18.5,15.9,19,17.6,18.3,17.1,18,17.9,19.2,18.5,18.5,17.6,17.5,17.5,20.1,16.5,17.9,17.1,17.2,15.5,17,16.8,18.7,18.6,18.4,17.8,18.1,17.1,18.5,13.2,16.3,14.1,15.2,14.5,13.5,14.6,15.3,13.4,15.4,13.7,16.1,13.7,14.6,14.6,15.7,13.5,15.2,14.5,15.1,14.3,14.5,14.5,15.8,13.1,15.1,15,14.3,15.3,15.3,14.2,14.5,17,14.8,16.3,13.7,17.3,13.6,15.7,13.7,16,13.7,15,15.9,13.9,13.9,15.9,13.3,15.8,14.2,14.1,14.4,15,14.4,15.4,13.9,15,14.5,15.3,13.8,14.9,13.9,15.7,14.2,16.8,16.2,14.2,15,15,15.6,15.6,14.8,15,16,14.2,16.3,13.8,16.4,14.5,15.6,14.6,15.9,13.8,17.3,14.4,14.2,14,17,15,17.1,14.5,16.1,14.7,15.7,15.8,14.6,14.4,16.5,15,17,15.5,15,16.1,14.7,15.8,14,15.1,15.2,15.9,15.2,16.3,14.1,16,16.2,13.7,14.3,15.7,14.8,16.1,17.9,19.5,19.2,18.7,19.8,17.8,18.2,18.2,18.9,19.9,17.8,20.3,17.3,18.1,17.1,19.6,20,17.8,18.6,18.2,17.3,17.5,16.6,19.4,17.9,19,18.4,19,17.8,20,16.6,20.8,16.7,18.8,18.6,16.8,18.3,20.7,16.6,19.9,19.5,17.5,19.1,17,17.9,18.5,17.9,19.6,18.7,17.3,16.4,19,17.3,19.7,17.3,18.8,16.6,19.9,18.8,19.4,19.5,16.5,17,19.8,18.1,18.2,19,18.7],&#34;z&#34;:[3750,3800,3250,3450,3650,3625,4675,3200,3800,4400,3700,3450,4500,3325,4200,3400,3600,3800,3950,3800,3800,3550,3200,3150,3950,3250,3900,3300,3900,3325,4150,3950,3550,3300,4650,3150,3900,3100,4400,3000,4600,3425,3450,4150,3500,4300,3450,4050,2900,3700,3550,3800,2850,3750,3150,4400,3600,4050,2850,3950,3350,4100,3050,4450,3600,3900,3550,4150,3700,4250,3700,3900,3550,4000,3200,4700,3800,4200,3350,3550,3800,3500,3950,3600,3550,4300,3400,4450,3300,4300,3700,4350,2900,4100,3725,4725,3075,4250,2925,3550,3750,3900,3175,4775,3825,4600,3200,4275,3900,4075,2900,3775,3350,3325,3150,3500,3450,3875,3050,4000,3275,4300,3050,4000,3325,3500,3500,4475,3425,3900,3175,3975,3400,4250,3400,3475,3050,3725,3000,3650,4250,3475,3450,3750,3700,4000,4500,5700,4450,5700,5400,4550,4800,5200,4400,5150,4650,5550,4650,5850,4200,5850,4150,6300,4800,5350,5700,5000,4400,5050,5000,5100,5650,4600,5550,5250,4700,5050,6050,5150,5400,4950,5250,4350,5350,3950,5700,4300,4750,5550,4900,4200,5400,5100,5300,4850,5300,4400,5000,4900,5050,4300,5000,4450,5550,4200,5300,4400,5650,4700,5700,5800,4700,5550,4750,5000,5100,5200,4700,5800,4600,6000,4750,5950,4625,5450,4725,5350,4750,5600,4600,5300,4875,5550,4950,5400,4750,5650,4850,5200,4925,4875,4625,5250,4850,5600,4975,5500,5500,4700,5500,4575,5500,5000,5950,4650,5500,4375,5850,6000,4925,4850,5750,5200,5400,3500,3900,3650,3525,3725,3950,3250,3750,4150,3700,3800,3775,3700,4050,3575,4050,3300,3700,3450,4400,3600,3400,2900,3800,3300,4150,3400,3800,3700,4550,3200,4300,3350,4100,3600,3900,3850,4800,2700,4500,3950,3650,3550,3500,3675,4450,3400,4300,3250,3675,3325,3950,3600,4050,3350,3450,3250,4050,3800,3525,3950,3650,3650,4000,3400,3775,4100,3775],&#34;type&#34;:&#34;scatter3d&#34;,&#34;mode&#34;:&#34;markers&#34;,&#34;marker&#34;:{&#34;color&#34;:&#34;rgba(0,0,238,1)&#34;,&#34;line&#34;:{&#34;color&#34;:&#34;rgba(0,0,238,1)&#34;}},&#34;textfont&#34;:{&#34;color&#34;:&#34;rgba(0,0,238,1)&#34;},&#34;error_y&#34;:{&#34;color&#34;:&#34;rgba(0,0,238,1)&#34;},&#34;error_x&#34;:{&#34;color&#34;:&#34;rgba(0,0,238,1)&#34;},&#34;line&#34;:{&#34;color&#34;:&#34;rgba(0,0,238,1)&#34;},&#34;frame&#34;:null}],&#34;highlight&#34;:{&#34;on&#34;:&#34;plotly_click&#34;,&#34;persistent&#34;:false,&#34;dynamic&#34;:false,&#34;selectize&#34;:false,&#34;opacityDim&#34;:0.2,&#34;selected&#34;:{&#34;opacity&#34;:1},&#34;debounce&#34;:0},&#34;shinyEvents&#34;:[&#34;plotly_hover&#34;,&#34;plotly_click&#34;,&#34;plotly_selected&#34;,&#34;plotly_relayout&#34;,&#34;plotly_brushed&#34;,&#34;plotly_brushing&#34;,&#34;plotly_clickannotation&#34;,&#34;plotly_doubleclick&#34;,&#34;plotly_deselect&#34;,&#34;plotly_afterplot&#34;,&#34;plotly_sunburstclick&#34;],&#34;base_url&#34;:&#34;https://plot.ly&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#hint: try hovering your mouse over this plot and clicking/dragging it in
#different directions to rotate it.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;N.B.&lt;/em&gt;&lt;/strong&gt; I recommend against using 3D scatter plots like this for anything other than data exploration on your own or if you are planning to personally demonstrate the relationships between the three variables by rotating the graph for an audience.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;shape&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.8&lt;/span&gt; shape&lt;/h2&gt;
&lt;p&gt;As you may have guessed, the “shape” parameter affects the shape of the chosen geom, which is typically the points of a scatter plot. You can either map a categorical variable to it…&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm, 
             shape = island)) + 
  geom_point(size = 3) #scatter plot&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-39-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;…or set it to a specific shape choice (see &lt;a href=&#34;https://ggplot2.tidyverse.org/articles/ggplot2-specs.html?q=shape#sec:shape-spec&#34;&gt;here&lt;/a&gt; for options).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) + 
  geom_point(size = 3, shape = 21)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-40-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;linetype&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.9&lt;/span&gt; linetype&lt;/h2&gt;
&lt;p&gt;Changes the type of line (solid, dashed, dotted, etc.) in a line graph. Set globally in the &lt;code&gt;geom_line()&lt;/code&gt; layer…&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;%
  mutate(year = factor(year, ordered = TRUE)) %&amp;gt;% 
  group_by(year) %&amp;gt;% 
  summarise(avg_body_mass_g = mean(body_mass_g), .groups = &amp;quot;drop&amp;quot;) %&amp;gt;% #to get a single value per year
  ungroup() %&amp;gt;% 
  ggplot(aes(x = year, y = avg_body_mass_g)) + 
  geom_line(aes(group = 1), linetype = &amp;quot;dashed&amp;quot;, size = 1.5)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-41-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#set the group aesthetic to 1 to disable grouping of lines&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;…or map a categorical variable to it with &lt;code&gt;aes()&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;%
  mutate(year = factor(year, ordered = TRUE)) %&amp;gt;%
  group_by(year, species) %&amp;gt;%
  summarise(avg_body_mass_g = mean(body_mass_g), .groups = &amp;quot;drop&amp;quot;) %&amp;gt;% #to get a single value per year
  ungroup() %&amp;gt;%
  ggplot(aes(x = year, y = avg_body_mass_g)) + 
  geom_line(aes(group = species, linetype = species), size = 1.5)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-42-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;  #In aes() for geom_line(), &amp;quot;group&amp;quot; splits the lines and &amp;quot;linetype&amp;quot; assigns a
  #different line type to each group&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;alpha-transparencyopacity&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.10&lt;/span&gt; alpha (transparency/opacity)&lt;/h2&gt;
&lt;p&gt;The “alpha” aesthetic adjusts the transparency of a geom and can be specified using a value ranging between 0 (0% opaque/100% transparent) and 1 (100% opaque/0% transparent). It is especially helpful in cases where “overplotting” obscures some of the data because there are too many overlapping elements, like the scatter plot I made of penguin bill depth by bill length…&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) + 
  geom_point(colour = &amp;quot;blue2&amp;quot;, size = 4, alpha = 0.5) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-43-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;…or density plots of penguin body masses grouped by species.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g, fill = species, group = species)) +
  geom_density(alpha = 0.6)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-44-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;jittering-to-reduce-overplotting&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.11&lt;/span&gt; jittering to reduce overplotting&lt;/h2&gt;
&lt;p&gt;In addition to modifying the transparency of a geom to deal with overplotting, we can also slightly move geometric objects in random directions, or “jitter” them by adding random noise. This should retain most statistical properties of the data (because the displacements are random), while making it easier to see more of the data. Jittering can be used with any &lt;code&gt;ggplot2&lt;/code&gt; geom that accepts the output of the &lt;code&gt;ggplot2::position_jitter()&lt;/code&gt; function as an option for a “position” argument. This is so common in scatter plots that there is even a shortcut function, &lt;code&gt;ggplot2::geom_jitter()&lt;/code&gt;, that you can use instead of &lt;code&gt;ggplot2::geom_point(position = position_jitter())&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) +  
  geom_jitter(colour = &amp;quot;blue2&amp;quot;, size = 3, alpha = 0.5) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-45-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;  #or, equivalently: 
  # geom_point(colour = &amp;quot;blue2&amp;quot;, size = 3, alpha = 0.5, 
  #            position = position_jitter())&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;One exception to this advice is the situation when the geom you want to jitter happens to be text, e.g. labels for the species of a penguin that were rendered via &lt;code&gt;ggplot2::geom_text(aes(label = species))&lt;/code&gt;, like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;set.seed(2021) #set random number generator seed for reproducibility

#I&amp;#39;ll just sample 50 rows at random (i.e. data for 50 penguins) for demo
#purposes
penguins_sample &amp;lt;- penguins2[sample(seq_len(nrow(penguins2)), 50), ] 

penguins_sample %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) +  
  geom_jitter(colour = &amp;quot;blue&amp;quot;, size = 3, alpha = 0.5) +
  geom_text(aes(label = species)) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-46-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;The best option for moving the labels out of the way of the points and other labels is to use the &lt;code&gt;ggplot2&lt;/code&gt; extension package &lt;a href=&#34;https://ggrepel.slowkow.com/&#34;&gt;ggrepel&lt;/a&gt;, which contains a &lt;code&gt;geom_text_repel()&lt;/code&gt; function to repel labels from one another in ggplots. It also conveniently works with &lt;code&gt;geom_jitter()&lt;/code&gt;, as shown here:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins_sample %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) +  
  geom_jitter(colour = &amp;quot;blue&amp;quot;, size = 3, alpha = 0.5) +
  ggrepel::geom_text_repel(aes(label = species))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-47-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;That’s so much easier to read!&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;coordinates&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.12&lt;/span&gt; coordinates&lt;/h2&gt;
&lt;div id=&#34;coord_flip&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.12.1&lt;/span&gt; coord_flip()&lt;/h3&gt;
&lt;p&gt;You can add a &lt;code&gt;coord_flip()&lt;/code&gt; layer to your ggplot graph if you want to swap the x and y axes. This can be particularly helpful if you have overlapping tick labels on the x axis, like a long list of countries, as in the &lt;a href=&#34;https://www.rdocumentation.org/packages/gapminder/versions/0.3.0&#34;&gt;gapminder&lt;/a&gt; data that we’ve seen many times &lt;a href=&#34;https://craig.rbind.io/post/2020-01-25-asgr-2-1-data-transformation-part-2/&#34;&gt;before&lt;/a&gt; in the blog series…&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;set.seed(2021) #set the random number generator seed for reproducibility

gapminder::gapminder %&amp;gt;% 
  filter(country %in% sample(unique(gapminder::gapminder$country), 20)) %&amp;gt;% #we&amp;#39;ll try to plot 20 for now 
  ggplot(aes(x = country, y = gdpPercap)) +
  geom_violin(fill = &amp;quot;limegreen&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-48-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;vs. &lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder::gapminder %&amp;gt;% 
  filter(country %in% sample(unique(gapminder::gapminder$country), 20)) %&amp;gt;% 
  ggplot(aes(x = country, y = gdpPercap)) +
  geom_violin(fill = &amp;quot;limegreen&amp;quot;) +
  coord_flip()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-49-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;coord_cartesian&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.12.2&lt;/span&gt; coord_cartesian()&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;coord_cartesian()&lt;/code&gt; allows you to zoom in on a portion of the data without dropping any values. Simply set the x-axis or y-axis (viewing) limits with “xlim” or “ylim” as appropriate. This could allow us to zoom into the lower end of the GDP per capita scale in the above violin plots, e.g. &lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder::gapminder %&amp;gt;% 
  filter(country %in% sample(unique(gapminder::gapminder$country), 20)) %&amp;gt;% 
  ggplot(aes(x = country, y = gdpPercap)) +
  geom_violin(fill = &amp;quot;limegreen&amp;quot;) +
  coord_cartesian(ylim = c(0, 2500)) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-50-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Unfortunately, we can’t combine &lt;code&gt;coord_flip()&lt;/code&gt; and &lt;code&gt;coord_catesian()&lt;/code&gt; layers in the same ggplot because the last one added will overwrite the first, as per the message that prints to the console when I try it:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder::gapminder %&amp;gt;% 
  filter(country %in% sample(unique(gapminder::gapminder$country), 20)) %&amp;gt;% 
  ggplot(aes(x = country, y = gdpPercap)) +
  geom_violin(fill = &amp;quot;limegreen&amp;quot;) +
  coord_cartesian(ylim = c(0, 2500)) +
  coord_flip()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Coordinate system already present. Adding new coordinate system, which will replace the existing one.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-51-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;To get around this issue, &lt;code&gt;coord_flip()&lt;/code&gt; also accepts “xlim” and “ylim” specifications for zooming in on a subset of the data just like &lt;code&gt;coord_cartesian()&lt;/code&gt; does.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder::gapminder %&amp;gt;% 
  filter(country %in% sample(unique(gapminder::gapminder$country), 20)) %&amp;gt;% 
  ggplot(aes(x = country, y = gdpPercap)) +
  geom_violin(fill = &amp;quot;limegreen&amp;quot;) +
  coord_flip(ylim = c(0, 2500)) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-52-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;N.B.&lt;/em&gt;&lt;/strong&gt; You should avoid setting x or y axis limits with the “limits” argument of &lt;code&gt;scale_x_continuous()&lt;/code&gt; or &lt;code&gt;scale_y_continuous()&lt;/code&gt; to restrict the range of values that are shown in your graphs; doing so will affect the statistical properties (and shape) of geoms like density curves and regression lines that are drawn based on calculations using data within the limits set by &lt;code&gt;scale_x_continuous()&lt;/code&gt; and/or &lt;code&gt;scale_y_continous()&lt;/code&gt;. Fortunately, you now know that you can use &lt;code&gt;coord_cartesian()&lt;/code&gt; or &lt;code&gt;coord_flip()&lt;/code&gt; for this purpose instead so it shouldn’t be a problem for you.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;guides-legends&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.13&lt;/span&gt; guides (legends)&lt;/h2&gt;
&lt;p&gt;I’m sure you’ve noticed that whenever we map a variable to an aesthetic parameter inside the &lt;code&gt;aes()&lt;/code&gt; function, a guide (AKA legend) is automatically added to the plot for us. If you want to omit a guide, simply set it to &lt;code&gt;FALSE&lt;/code&gt; for that aesthetic parameter, like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = species, y = body_mass_g, fill = species)) +
  geom_violin() +
  scale_fill_viridis(discrete = TRUE) +
  guides(fill = FALSE)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-53-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;In this case, it makes sense to omit the guide for fill because it isn’t needed. I suppose the fill colours aren’t needed for this graph either, but you might want to use them for consistency with other plots where the guide was needed.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;x-y-axis-modifications&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.14&lt;/span&gt; x &amp;amp; y axis modifications&lt;/h2&gt;
&lt;div id=&#34;scale_x_continuousscale_y_continuous&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.14.1&lt;/span&gt; &lt;code&gt;scale_x_continuous()/scale_y_continuous()&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;scale_x_continuous()&lt;/code&gt; controls the x-axis “breaks”, “limits”, and “labels” when x is a continuous variable. I find it helpful to use the base R &lt;code&gt;seq()&lt;/code&gt; function when modifying the axis break points.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) + 
  geom_point(colour = &amp;quot;blue2&amp;quot;, size = 4, alpha = 0.5) +
  scale_x_continuous(limits = c(30, 60),
                     breaks = seq(from = 30, #start at 
                                   to = 60, #end at
                                   by = 5)) #by this increment&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-54-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;You can also modify the x-axis title/label here with the “names” argument and apply a transformation to the x-axis with with the “trans” argument.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) + 
  geom_point(colour = &amp;quot;blue2&amp;quot;, size = 4, alpha = 0.5) +
  scale_x_continuous(name = &amp;quot;bill length (mm)&amp;quot;,
                     trans = &amp;quot;reverse&amp;quot;,
                     #keep in mind the transformation when specifying axis limit
                     #and breaks
                     limits = c(60, 30),
                     breaks = seq(60, 30, -5))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-55-1.png&#34; width=&#34;672&#34; /&gt;
See the “trans” argument description with &lt;code&gt;?scale_x_continuous()&lt;/code&gt; for a full list of available transformations and information on custom transformation functions via the &lt;a href=&#34;https://scales.r-lib.org/&#34;&gt;scales&lt;/a&gt; package function &lt;code&gt;scales::trans_new()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;I can’t say that I’ve ever needed to do this before, but you can also move the axis to the opposite side of the graph with the “position” argument (“bottom” or “top” for x-axis, “left” or “right” for y-axis).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) + 
  geom_point(colour = &amp;quot;blue2&amp;quot;, size = 4, alpha = 0.5) +
  scale_y_continuous(position = &amp;quot;right&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-56-1.png&#34; width=&#34;672&#34; /&gt;
If you want to add a second x/y-axis on the top/right side of a graph you can use the “sec.axis” argument to &lt;code&gt;scale_x_continuous()&lt;/code&gt; and/or &lt;code&gt;scale_y_continuous()&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) + 
  geom_point(colour = &amp;quot;blue2&amp;quot;, size = 4, alpha = 0.5) +
  scale_x_continuous(name = &amp;quot;bill length (mm)&amp;quot;,
                     sec.axis = sec_axis(~ . /10, name = &amp;quot;bill length (cm)&amp;quot;)) +
  scale_y_continuous(name = &amp;quot;bill depth (mm)&amp;quot;,
                     sec.axis = sec_axis(~ . /10, name = &amp;quot;bill depth (cm)&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-57-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#where &amp;quot;.&amp;quot; in this case represents the value of the original y axis&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Overlaying 2 different geoms with very different y-axis scales is difficult to do in &lt;code&gt;ggplot2&lt;/code&gt; because the lead author, Hadley Wickham, &lt;a href=&#34;https://stackoverflow.com/a/3101876&#34;&gt;asserts&lt;/a&gt; that it is generally bad practice and “fundamentally flawed”.&lt;/p&gt;
&lt;p&gt;One non-flawed example of when it would be OK to do this, in my opinion, is overlaying a normal distribution kernel density plot over a histogram, like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bw &amp;lt;- 100 #define bin width to be used in the histogram
n_obs &amp;lt;- sum(!is.na(penguins2$body_mass_g)) #count of non-missing observations

#define a function that returns the normal density curve scaled by the bin width
#and number of observations
scaled_dnorm &amp;lt;- function(x) {
    dnorm(x, mean = mean(penguins2$body_mass_g), sd = sd(penguins2$body_mass_g)) * (bw * n_obs)
}

penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_histogram(binwidth = bw) +
  #pass the custom scaled_dnorm function to the fun argument of a
  #stat_function() layer
  stat_function(fun = scaled_dnorm, colour = &amp;quot;blue2&amp;quot;, size = 1.5, alpha = 0.8) + 
  #then reverse the scaling in the sec.axis = sec_axis() part of
  #scale_y_continuous so the secondary y-axis shows the density values
  scale_y_continuous(sec.axis = sec_axis(trans = ~./(bw*n_obs), name = &amp;quot;density&amp;quot;, labels = scales::scientific)) +
  #optionally, make the secondary y-axis the same colour as the density curve
  #using theme()
  theme(axis.ticks.y.right = element_line(colour = &amp;quot;blue2&amp;quot;),
        axis.text.y.right = element_text(colour = &amp;quot;blue2&amp;quot;), 
        axis.title.y.right = element_text(colour = &amp;quot;blue2&amp;quot;)) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-58-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;scale_x_discretescale_y_discrete&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.14.2&lt;/span&gt; &lt;code&gt;scale_x_discrete()/scale_y_discrete()&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;If a categorical variable has been assigned to the x-axis, as in this box-and-whiskers plot,&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = species, y = body_mass_g)) +
  geom_boxplot()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-59-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;you can modify the axis title, labels, factor levels that are displayed, and position with &lt;code&gt;scale_x_discrete()&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = species, y = body_mass_g)) +
  geom_boxplot() +
  scale_x_discrete(name = &amp;quot;Species&amp;quot;, 
                   position = &amp;quot;top&amp;quot;, 
                   limits = c(&amp;quot;Chinstrap&amp;quot;, &amp;quot;Gentoo&amp;quot;),
                   labels = c(&amp;quot;C&amp;quot;, &amp;quot;G&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: Removed 146 rows containing missing values (stat_boxplot).&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-60-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;scale_y_continuous()&lt;/code&gt; and &lt;code&gt;scale_y_discrete()&lt;/code&gt; are the equivalent functions for the y-axis.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;axis-label-scales&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.15&lt;/span&gt; axis label scales&lt;/h2&gt;
&lt;p&gt;The &lt;a href=&#34;https://scales.r-lib.org/&#34;&gt;scales&lt;/a&gt; package, a &lt;code&gt;ggplot2&lt;/code&gt; dependency&lt;a href=&#34;#fn4&#34; class=&#34;footnote-ref&#34; id=&#34;fnref4&#34;&gt;&lt;sup&gt;4&lt;/sup&gt;&lt;/a&gt;, makes it incredibly easy to reformat x and y axis labels (among other things). For example, if you wanted to insert commas in every three digits of the labels for a continuous variable, you could use &lt;code&gt;scales::label_comma()&lt;/code&gt; by passing it to the “labels” argument of &lt;code&gt;scale_x_continuous()&lt;/code&gt;, like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g, y = flipper_length_mm)) +
  geom_point() +
  scale_x_continuous(labels = scales::label_comma())&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-61-1.png&#34; width=&#34;672&#34; /&gt;
or convert very large/small values, e.g. populations of countries in the &lt;a href=&#34;https://www.rdocumentation.org/packages/gapminder/versions/0.3.0&#34;&gt;gapminder&lt;/a&gt; data, to scientific notation on the x axis of a scatter plot with &lt;code&gt;scales::label_scientific()&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder::gapminder %&amp;gt;% #using data frame gapminder from the gapminder package
  ggplot(aes(x = pop, y = gdpPercap)) +
  geom_point(colour = &amp;quot;blue2&amp;quot;, size = 2, alpha = 0.5) +
  scale_x_continuous(labels = scales::label_scientific())&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-62-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;or add dollar symbols to the GDP per capita values on the y-axis with &lt;code&gt;scales::label_dollar()&lt;/code&gt;. It’s definitely worth spending a few minutes to peruse the &lt;a href=&#34;https://scales.r-lib.org/reference/index.html&#34;&gt;reference page&lt;/a&gt; and take stock of the many options.&lt;/p&gt;
&lt;p&gt;While we’re here, I’ll incorporate some other features in the &lt;code&gt;scale_x_continuous()&lt;/code&gt; layer by applying a base 10 logarithmic transformation to both axes to spread things out a bit from the bottom-left corner. Perhaps it would also be easier to read if we mapped another variable to the colour aesthetic, like life expectancy, using the “plasma” viridis colour palette.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder::gapminder %&amp;gt;% #using data frame gapminder from the gapminder package
  ggplot(aes(x = pop, y = gdpPercap, fill = lifeExp)) +
  geom_point(size = 3, alpha = 0.7, colour = &amp;quot;black&amp;quot;, shape = 21) +
  scale_x_continuous(trans = &amp;quot;log10&amp;quot;,
                     labels = scales::label_scientific()) +
  scale_y_continuous(trans = &amp;quot;log10&amp;quot;,
                     labels = scales::label_dollar())  +
  scale_fill_viridis(option = &amp;quot;plasma&amp;quot;, end = 0.9) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-63-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Much better for only a few extra lines of code!&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;themes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.16&lt;/span&gt; themes&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;theme()&lt;/code&gt; function in &lt;code&gt;ggplot2&lt;/code&gt; gives you much finer control over graphical features unrelated to the data being plotted, like the background color of the &lt;code&gt;ggplot()&lt;/code&gt; foundation layer, or the font typeface (i.e. bold, italic). There are far too many graphical feature modifications accessible to you through &lt;code&gt;theme()&lt;/code&gt; to cover them in this post. I will therefore leave it as an exercise to the reader to simply consult the function’s &lt;a href=&#34;https://ggplot2.tidyverse.org/reference/theme.html&#34;&gt;reference page&lt;/a&gt; as needed when building graphs.&lt;/p&gt;
&lt;p&gt;Fortunately, you won’t need to use the &lt;code&gt;theme()&lt;/code&gt; function directly too often, as there are many &lt;code&gt;theme_*&lt;/code&gt; shortcut functions that control all non-data elements of a ggplot which are available from &lt;code&gt;ggplot2&lt;/code&gt; itself and expansion packages like &lt;a href=&#34;https://jrnold.github.io/ggthemes/index.html&#34;&gt;ggthemes&lt;/a&gt; that you can use instead.&lt;/p&gt;
&lt;p&gt;The themes available in &lt;code&gt;ggplot2&lt;/code&gt; itself are:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;theme_grey()&lt;/code&gt;/&lt;code&gt;theme_gray()&lt;/code&gt;; the &lt;code&gt;ggplot2&lt;/code&gt; default&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(fill = &amp;quot;blue2&amp;quot;, alpha = 0.5) +
  theme_grey(base_size = 14) #base_size = 14 changes the base font size to 14&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-64-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Note that the &lt;code&gt;theme_*&lt;/code&gt; layer is the key part of the code in these examples.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;theme_bw()&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(fill = &amp;quot;blue2&amp;quot;, alpha = 0.5) +
  theme_bw(14) #base_size is the first argument so you don&amp;#39;t need to specify it&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-65-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;theme_classic()&lt;/code&gt;; the &lt;a href=&#34;https://craig.rbind.io/post/2020-12-07-asgr-3-0-exploring-data-with-elucidate/&#34;&gt;elucidate&lt;/a&gt; package default&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(fill = &amp;quot;blue2&amp;quot;, alpha = 0.5) +
  theme_classic(14) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-66-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;theme_dark()&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(fill = &amp;quot;blue2&amp;quot;, alpha = 0.5) +
  theme_dark(14) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-67-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;theme_light()&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(fill = &amp;quot;blue2&amp;quot;, alpha = 0.5) +
  theme_light(14) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-68-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;theme_linedraw()&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(fill = &amp;quot;blue2&amp;quot;, alpha = 0.5) +
  theme_linedraw(14) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-69-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;theme_minimal()&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(fill = &amp;quot;blue2&amp;quot;, alpha = 0.5) +
  theme_minimal(14) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-70-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;…and &lt;code&gt;theme_void()&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(fill = &amp;quot;blue2&amp;quot;, alpha = 0.5) +
  theme_void(14)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-71-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;The &lt;a href=&#34;https://jrnold.github.io/ggthemes/index.html&#34;&gt;ggthemes&lt;/a&gt; package offers a nice variety of additional themes like &lt;code&gt;theme_wsj()&lt;/code&gt; combined with matching fill colour palette &lt;code&gt;scale_fill_wsj()&lt;/code&gt;…&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g, fill = species)) +
  geom_density(alpha = 0.5) +
  ggthemes::theme_wsj(14) + #wsj = Wall Street Journal
  ggthemes::scale_fill_wsj()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-72-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;…that you should try out on a rainy day.&lt;/p&gt;
&lt;p&gt;One last thing to be aware of for now is that you can set a theme for all of the ggplots you make with the &lt;code&gt;ggplot2::theme_set()&lt;/code&gt; function. Just wrap it around the &lt;code&gt;theme*&lt;/code&gt;, like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;theme_set(theme_classic())&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;…to change the default &lt;code&gt;ggplot2&lt;/code&gt; theme from &lt;code&gt;theme_grey()&lt;/code&gt; to &lt;code&gt;theme_classic()&lt;/code&gt; for the duration of your R session.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;text-formatting-with-ggtext&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.17&lt;/span&gt; text formatting with &lt;code&gt;ggtext&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;The &lt;a href=&#34;https://wilkelab.org/ggtext/articles/introduction.html&#34;&gt;ggtext&lt;/a&gt; extension package for &lt;code&gt;ggplot2&lt;/code&gt; makes it considerably easier to change the formatting of text in ggplot graphs via &lt;a href=&#34;https://bookdown.org/yihui/rmarkdown/&#34;&gt;Markdown&lt;/a&gt; and html rendering. &lt;code&gt;ggtext&lt;/code&gt; provides a few new theme elements to simplify text formatting, such as &lt;code&gt;element_markdown()&lt;/code&gt; &amp;amp; &lt;code&gt;element_textbox()&lt;/code&gt; (or &lt;code&gt;element_textbox_simple()&lt;/code&gt;). According to the linked webpage, the following text element customization features are currently supported:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;bold and/or italics (&lt;code&gt;*text*&lt;/code&gt; for &lt;em&gt;italics&lt;/em&gt;, &lt;code&gt;**text**&lt;/code&gt; for &lt;strong&gt;bold&lt;/strong&gt;, and &lt;code&gt;***text***&lt;/code&gt; for &lt;strong&gt;&lt;em&gt;both&lt;/em&gt;&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;changing the font&lt;/li&gt;
&lt;li&gt;colour&lt;/li&gt;
&lt;li&gt;size&lt;/li&gt;
&lt;li&gt;subscript or superscript placement of text (&lt;code&gt;&amp;lt;sub&amp;gt;text to be subscripted&amp;lt;/sub&amp;gt;&lt;/code&gt; or &lt;code&gt;&amp;lt;sup&amp;gt;text to be superscripted&amp;lt;/sup&amp;gt;&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;“rudimentary” support for images&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For example, to bold segments of the x and y axis titles we can use the &lt;code&gt;**text**&lt;/code&gt; double asterisk Markdown syntax and then call &lt;code&gt;ggtext::element_markdown()&lt;/code&gt; (in place of &lt;code&gt;ggplot2::element_text()&lt;/code&gt;), in a &lt;code&gt;theme()&lt;/code&gt; layer. We can also specify a line break in a title using &lt;code&gt;&amp;lt;br&amp;gt;&lt;/code&gt;, and adjust the colour of a portion of a label between an html-defined “span”, using:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;span style = &#39;color:r_colour_name;&#39;&amp;gt;text&amp;lt;/span&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;span style = &#39;color:r_colour_hex_code;&#39;&amp;gt;text&amp;lt;/span&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = bill_length_mm, y = bill_depth_mm, fill = species)) +  
  geom_jitter(size = 4, alpha = 0.5, shape = 21) +
  scale_fill_manual(values = c(&amp;quot;Red3&amp;quot;, &amp;quot;blue3&amp;quot;, &amp;quot;green3&amp;quot;)) +
  #change the x and y axis titles with the **text** markdown syntax to bold part
  #of the text
  labs(x = &amp;quot;**bill length** (mm)&amp;quot;, 
       y = &amp;quot;**bill depth** (mm)&amp;quot;,
       #customize the color of parts of the plot title using the html 
       # &amp;lt;span&amp;gt;style = &amp;#39;color:colorname;&amp;#39;&amp;gt;text to be coloured&amp;lt;/span&amp;gt; syntax
       #Notice from this example that you can also use the markdown bold/italics
       #syntax on text between the &amp;lt;span&amp;gt; &amp;lt;/span&amp;gt; segments
       title = &amp;quot;Scatterplot of bill lengths and bill depths of &amp;lt;span style = &amp;#39;color:red3;&amp;#39;&amp;gt;***P. adeliae*** **(Adelie)**&amp;lt;/span&amp;gt;, 
       &amp;lt;span style = &amp;#39;color:blue3;&amp;#39;&amp;gt;***P. antarcticus*** **(Chinstrap)**&amp;lt;/span&amp;gt;, 
       and &amp;lt;span style = &amp;#39;color:green3;&amp;#39;&amp;gt;***P. papua*** **(Gentoo)**&amp;lt;/span&amp;gt; penguins in the Palmer Archipelago&amp;quot;) +
  theme_bw() +
  theme(plot.title = ggtext::element_textbox_simple(size = 12), #adjust the font size of the title
        #adjust the colour of the entire label in the theme layer like this
        axis.title.x = ggtext::element_markdown(colour = &amp;quot;darkorchid4&amp;quot;, 
                                                size = 14), 
        #adjust the colour of the entire label in the theme layer like this
        axis.title.y = ggtext::element_markdown(colour = &amp;quot;darkorchid4&amp;quot;, 
                                                size = 14)) + 
  #because we&amp;#39;ve identified the species fill colour in the plot title we no
  #longer need the fill legend
  guides(fill = FALSE)  &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-74-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;It’s a bit beyond the scope of this post, but if you’re interested in learning how to write your own &lt;code&gt;theme_*&lt;/code&gt; function, I recommend checking out this other &lt;a href=&#34;https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/#custom-themes&#34;&gt;blog post&lt;/a&gt; by &lt;a href=&#34;https://themockup.blog/about.html&#34;&gt;Thomas Mock&lt;/a&gt;, the creator of &lt;a href=&#34;https://github.com/rfordatascience/tidytuesday/blob/master/README.md&#34;&gt;TidyTuesday&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;fonts&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.18&lt;/span&gt; fonts&lt;/h2&gt;
&lt;p&gt;If you want to change the font family of the text elements of a graph, you can use the “base_family” argument accepted by most &lt;code&gt;theme_*&lt;/code&gt; layers. With just &lt;code&gt;ggplot2&lt;/code&gt; installed, you’ll only be able to access these three font options&lt;a href=&#34;#fn5&#34; class=&#34;footnote-ref&#34; id=&#34;fnref5&#34;&gt;&lt;sup&gt;5&lt;/sup&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;“serif”&lt;/strong&gt; = Times New Roman&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;“sans”&lt;/strong&gt; = Arial, which is the &lt;code&gt;ggplot2&lt;/code&gt; default.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;“mono”&lt;/strong&gt; = Courier New&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(fill = &amp;quot;blue2&amp;quot;, alpha = 0.5) +
  theme_bw(base_size = 16, #font size 
           base_family = &amp;quot;serif&amp;quot;) #font family&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-75-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.rstudio.com/speakers/winston-chang/&#34;&gt;Winston Chang&lt;/a&gt;’s &lt;a href=&#34;https://github.com/wch/extrafont/blob/master/README.md&#34;&gt;extrafont&lt;/a&gt; package makes it easy to access many more font family options. Simply run &lt;code&gt;extrafont::font_import()&lt;/code&gt; once after installing the package on a computer to import the available True Type fonts from your operating system. It can take a few minutes for &lt;code&gt;extrafont::font_import()&lt;/code&gt; to locate the font information located on your computer and copy it over to R so be patient.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;extrafont::font_import() #run once per computer or after installing a new font&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Afterwards, you should see a much longer list of font options if you use the &lt;code&gt;extrafont::fonts()&lt;/code&gt; or &lt;code&gt;extrafont::fonttable()&lt;/code&gt; function, like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;font_vector &amp;lt;- extrafont::fonts()

#I&amp;#39;ll just print a random sample of 20 font options as examples here
sample(font_vector, 20)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;Californian FB&amp;quot;         &amp;quot;Felix Titling&amp;quot;          &amp;quot;Corbel&amp;quot;                
##  [4] &amp;quot;Book Antiqua&amp;quot;           &amp;quot;Vivaldi&amp;quot;                &amp;quot;Stencil&amp;quot;               
##  [7] &amp;quot;SimSun-ExtB&amp;quot;            &amp;quot;Myanmar Text&amp;quot;           &amp;quot;Perpetua Titling MT&amp;quot;   
## [10] &amp;quot;Trebuchet MS&amp;quot;           &amp;quot;Calisto MT&amp;quot;             &amp;quot;HP Simplified&amp;quot;         
## [13] &amp;quot;Bell MT&amp;quot;                &amp;quot;Bradley Hand ITC&amp;quot;       &amp;quot;Palatino Linotype&amp;quot;     
## [16] &amp;quot;Agency FB&amp;quot;              &amp;quot;Franklin Gothic Medium&amp;quot; &amp;quot;Script MT Bold&amp;quot;        
## [19] &amp;quot;Harrington&amp;quot;             &amp;quot;Britannic Bold&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;After importing fonts from your OS with &lt;code&gt;extrafont::font_import()&lt;/code&gt; I recommend restarting R (&lt;code&gt;[ctrl] + [shift] + [F10]&lt;/code&gt; on Windows/Linux; &lt;code&gt;[cmd] + [shift] + [F10]&lt;/code&gt; on Mac). Then you will just need to load the package with &lt;code&gt;library(extrafont)&lt;/code&gt; to make the additional fonts available as options to ggplot &lt;code&gt;theme_*&lt;/code&gt; layers using the “base_family” argument, like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(extrafont)

penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density() +
  theme_bw(base_size = 16, base_family = &amp;quot;Broadway&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-78-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;…or you can use them in a separate &lt;code&gt;theme()&lt;/code&gt; layer if you don’t want to change other aspects of the theme, like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density() +
  theme(text = element_text(size = 14, family = &amp;quot;Broadway&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-79-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;As pointed out in a webinar I attended today by my colleague &lt;a href=&#34;https://samalbers.science/about/&#34;&gt;Sam Albers&lt;/a&gt;, this is a really nice feature if you want to align the font of your graphs with the rest of the text in a PowerPoint presentation or other document format created with &lt;a href=&#34;https://bookdown.org/yihui/rmarkdown/&#34;&gt;R markdown&lt;/a&gt;. R markdown and reproducible reporting will be covered in detail later on in the “communication” part of the blog series.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;faceting&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;faceting&lt;/strong&gt;&lt;/h1&gt;
&lt;div id=&#34;facet_wrap-and-facet_grid&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.1&lt;/span&gt; &lt;code&gt;facet_wrap()&lt;/code&gt; and &lt;code&gt;facet_grid()&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;To split a ggplot into multiple panels, or facets, all we need to do is add a &lt;code&gt;ggplot2::facet_wrap()&lt;/code&gt; or &lt;code&gt;ggplot2::facet_grid()&lt;/code&gt; layer to a graph.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;facet_wrap()&lt;/code&gt; is typically used when you want to split the graph into panels based on a single variable, which is done with the &lt;code&gt;~variable&lt;/code&gt; syntax.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(fill = &amp;quot;blue&amp;quot;, alpha = 0.8) +
  facet_wrap(~species) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-80-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#note: the optional nrow or ncol arguments control the number of rows or columns
#to use&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I would recommend using &lt;code&gt;facet_grid()&lt;/code&gt; instead if you want to use more than one variable for faceting, like penguin species &lt;em&gt;and&lt;/em&gt; the islands they were observed on, where one variable goes to the left side of the &lt;code&gt;~&lt;/code&gt; and the other goes on the right side.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(fill = &amp;quot;blue&amp;quot;, alpha = 0.8) +
  facet_grid(island~species) #split vertically by island ~ split horizontally by species &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-81-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;There are a few empty panels here because not all species of penguin were observed on all islands. You can also use two variables for faceting like this with &lt;code&gt;facet_wrap(x~y)&lt;/code&gt; if you don’t want any empty panels, because &lt;code&gt;facet_wrap()&lt;/code&gt; will just render one panel for each unique combination of the faceting variable levels that has some data. In this case, the group labels for the additional faceting variable will appear above or below the labels for the first variable. To diambiguate them, you can update the facet labels by passing the &lt;code&gt;ggplot2::label_both&lt;/code&gt; to the “labeller” argument. You may have also noticed that when you use faceting, the x and y axis scales of all panels are standardized by default. If you want to allow them to vary, set the “scales” argument in the &lt;code&gt;facet_*&lt;/code&gt; layer to “free” instead of the default value of “fixed”. For the sake of brevity, I’ll apply both changes at once.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(fill = &amp;quot;blue&amp;quot;, alpha = 0.8) +
  facet_wrap(island~species, 
             labeller = label_both,
             scales = &amp;quot;free&amp;quot;) #use &amp;quot;free_y&amp;quot; or &amp;quot;free_x&amp;quot; instead to allow just one axis to vary&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-82-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;In case you were wondering, we &lt;em&gt;can&lt;/em&gt; use the &lt;code&gt;forcats&lt;/code&gt; package to change the order of the facets as well. This is another example of the consistency across &lt;code&gt;ggplot2&lt;/code&gt; functions that makes it so much fun to graph with.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  mutate(species = fct_relevel(species, c(&amp;quot;Gentoo&amp;quot;, &amp;quot;Adelie&amp;quot;, &amp;quot;Chinstrap&amp;quot;)),
         island = fct_relevel(island, c(&amp;quot;Torgersen&amp;quot;, &amp;quot;Biscoe&amp;quot;, &amp;quot;Dream&amp;quot;))) %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(fill = &amp;quot;blue&amp;quot;, alpha = 0.8) +
  facet_wrap(island~species, labeller = label_both)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-83-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Changing the facet strip label text within the &lt;code&gt;facet_wrap()&lt;/code&gt; or &lt;code&gt;facet_grid()&lt;/code&gt; layer is just as easy if you simply recode/relabel the variable before passing it to &lt;code&gt;ggplot()&lt;/code&gt;. For example, we can add a more detailed prefix to the facet strip labels with &lt;code&gt;forcats::fct_relabel()&lt;/code&gt; and &lt;code&gt;paste0()&lt;/code&gt; in a &lt;code&gt;dplyr::mutate()&lt;/code&gt; layer of our graphing pipeline. We can also move the facet label strips from the top of the graph to the bottom by setting the “strip.position” argument of &lt;code&gt;facet_wrap()&lt;/code&gt; or &lt;code&gt;facet_grid()&lt;/code&gt; to “bottom”.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins2 %&amp;gt;% 
  mutate(species = paste0(&amp;quot;Species of penguin: &amp;quot;, species)) %&amp;gt;% 
  ggplot(aes(x = body_mass_g)) +
  geom_density(fill = &amp;quot;blue&amp;quot;, alpha = 0.8) +
  facet_wrap(~species, 
             scale = &amp;quot;free&amp;quot;,
             strip.position = &amp;quot;bottom&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-84-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;too-many-facets&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.2&lt;/span&gt; too many facets&lt;/h2&gt;
&lt;p&gt;Sometimes you just have too many facets for them to show up legibly on a single page. If this is a problem for you, check out the &lt;a href=&#34;https://hafen.github.io/trelliscopejs/&#34;&gt;trelliscopejs&lt;/a&gt; package, which turns the ggplot into an interactive html widget that enables you to browse a smaller number of facets at a time so you can actually see the data.&lt;/p&gt;
&lt;p&gt;Just swap out &lt;code&gt;ggplot2::facet_wrap()&lt;/code&gt; for &lt;code&gt;trelliscopejs::facet_trelliscope()&lt;/code&gt; and set the initial layout of the viewing pane with the “ncol” and “nrow” arguments.&lt;/p&gt;
&lt;p&gt;Unfortunately I can’t demonstrate &lt;code&gt;facet_trelliscope()&lt;/code&gt; for you in this post because &lt;code&gt;trelliscopejs::facet_trelliscope()&lt;/code&gt; is &lt;a href=&#34;https://github.com/hafen/trelliscopejs/issues/67&#34;&gt;currently incompatible&lt;/a&gt; with &lt;a href=&#34;https://bookdown.org/yihui/blogdown/&#34;&gt;blogdown&lt;/a&gt; (the package I use to write my blog), but it should work for you if you try it yourself. There is also an introductory vignette &lt;a href=&#34;https://hafen.github.io/trelliscopejs/articles/trelliscopejs.html&#34;&gt;here&lt;/a&gt; that you can visit to see some examples.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;layouts&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;7&lt;/span&gt; &lt;strong&gt;layouts&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;You’ve seen how &lt;code&gt;ggplot2::facet_wrap()&lt;/code&gt; and &lt;code&gt;ggplot2::facet_grid()&lt;/code&gt; make it easy to split a graph into multiple panels based on the unique levels of a faceting variable from the same data source, but what if you want to construct a multi-panel figure from completely different plots?&lt;/p&gt;
&lt;p&gt;The &lt;a href=&#34;https://patchwork.data-imaginist.com/&#34;&gt;patchwork&lt;/a&gt; package makes this incredibly easy, in large part by modifying the behaviour of the &lt;code&gt;+&lt;/code&gt; and &lt;code&gt;/&lt;/code&gt; arithmetic operators when they are applied to ggplots such that:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;plot_a + plot_b&lt;/code&gt; tells R to render a second plot (&lt;code&gt;plot_b&lt;/code&gt;) to the right of a first plot (&lt;code&gt;plot_a&lt;/code&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;plot_a / plot_b&lt;/code&gt; tells R to render &lt;code&gt;plot_b&lt;/code&gt; underneath &lt;code&gt;plot_a&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can combine these basic instructions with &lt;code&gt;patchwork::plot_annotation()&lt;/code&gt;, which is also added with the &lt;code&gt;+&lt;/code&gt; operator, to annotate the combined plot with features like a title and/or caption. If you have redundant guides/legends in each panel and want to instead use a single guide, you can also add a &lt;code&gt;patchwork::plot_layout(guides = &#34;collect&#34;)&lt;/code&gt; layer.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(patchwork)

plot_a &amp;lt;- penguins2 %&amp;gt;% 
  ggplot(aes(x = flipper_length_mm, fill = species)) +
  geom_density(alpha = 0.6) +
  ggsci::scale_fill_lancet() +
  labs(tag = &amp;quot;a&amp;quot;, x = &amp;quot;body mass (g)&amp;quot;)

plot_b &amp;lt;- penguins2 %&amp;gt;% 
  ggplot(aes(x = flipper_length_mm, fill = species)) +
  geom_density(alpha = 0.6) +
  ggsci::scale_fill_lancet() +
  labs(tag = &amp;quot;b&amp;quot;, x = &amp;quot;flipper length (mm)&amp;quot;)

plot_a + plot_b + 
  plot_annotation(title = &amp;quot;Density plots of Adelie, Chinstrap, and Gentoo penguin:&amp;lt;br&amp;gt;
                  **a)** body masses (g) and **b)** flipper lengths (mm)&amp;quot;,
                  caption = &amp;quot;Source: palmerpenguins R package&amp;quot;,
                  #you&amp;#39;ll need to use the &amp;quot;theme&amp;quot; argument to plot_annotation()
                  #rather than a separate `theme()` layer to customize the
                  #formatting of text added via plot_annotation(), e.g. to use
                  #it with ggtext::element_markdown()
                  theme = theme(plot.title = ggtext::element_markdown())) +
  patchwork::plot_layout(guides = &amp;quot;collect&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-85-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;There is a lot more you can do with the &lt;code&gt;patchwork&lt;/code&gt; package. See the &lt;a href=&#34;https://patchwork.data-imaginist.com/reference/index.html&#34;&gt;reference page&lt;/a&gt; for details.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;animation&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;8&lt;/span&gt; &lt;strong&gt;animation&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Interested in animating a ggplot to show a statistical relationship that changes over time, actually unfolding over time? Try out the incredibly intuitive &lt;code&gt;ggplot2&lt;/code&gt; extension package &lt;a href=&#34;https://gganimate.com/&#34;&gt;gganimate&lt;/a&gt;! Inspired by the &lt;code&gt;gganimate&lt;/code&gt; authors’ example of animating the gapminder data, I’ll generate a simple looping animation of box plots of life expectancy for each continent changing with the year variable.&lt;/p&gt;
&lt;p&gt;All I need to do is load the &lt;code&gt;gganimate&lt;/code&gt; package and add a &lt;code&gt;gganimate::transition_time(time_variable)&lt;/code&gt; layer to the ggplot code. If you want the current time point to be displayed in the title, &lt;code&gt;gganimate&lt;/code&gt; allows you to do so by inserting the special string “{frame_time}” as part of a title specified in a basic &lt;code&gt;ggplot2::labs()&lt;/code&gt; layer. Animated plots can take a while to render, so I recommend assigning the plot to an object name and then rendering it in a separate step with the &lt;code&gt;gganimate::animate()&lt;/code&gt; function, which comes with an added bonus of allowing you to control the framerate with the “fps” argument (default = 10). You can also save an animated ggplot to a .gif file with &lt;code&gt;gganimate::anim_save()&lt;/code&gt; if you would like to watch it outside of an active R session.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(gganimate)

animated_ggplot &amp;lt;- gapminder::gapminder %&amp;gt;% 
  ggplot(aes(x = continent, y = lifeExp, fill = continent)) +
  geom_boxplot(alpha = 0.8) +
  theme_classic() +
  viridis::scale_fill_viridis(discrete = TRUE) + 
  # the remaining plot code is the gganimate part 
  labs(title = &amp;quot;Year: {frame_time}&amp;quot;, 
       #{frame_time} will be displayed as the value of the time variable in the
       #current frame of the animation
       x = &amp;quot;life expectancy&amp;quot;) +
  #use the year variable to transition between frames of the animation
  transition_time(year) 

#render the animation in the Viewer pane of R studio
animate(animated_ggplot, fps = 20)

#save to a .gif file with `gganimate::anim_save()`
anim_save(&amp;quot;my first animated ggplot.gif&amp;quot;,
          animation = animated_ggplot, 
          #if you don&amp;#39;t specify the animation the most recently rendered one will be saved
          fps = 20)

#N.B. anim_save() also accepts &amp;quot;fps&amp;quot; and other arguments that you can use with
#animate() in case you don&amp;#39;t want to render the animation in the current R
#session but still want to adjust the frame rate. You can also use the
#anim_save() &amp;quot;path&amp;quot; argument if you want the plot saved somewhere other than
#your working directory.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;my%20first%20animated%20ggplot.gif&#34; /&gt;&lt;/p&gt;
&lt;p&gt;To animate a ggplot using a variable that isn’t time-related, simply use &lt;code&gt;gganimate::transition_states()&lt;/code&gt; instead of &lt;code&gt;gganimate::transition_time()&lt;/code&gt;, and special string “{closest_state}” instead of “{frame_time}”. Here is an example of an animated scatterplot of bill lengths and bill depths of the Palmer penguins with the species assigned as a transitioning variable. We can add &lt;code&gt;gganimate::enter_fade()&lt;/code&gt; and &lt;code&gt;gganimate::exit_fade()&lt;/code&gt; layers to transition between plot states by fading points in and out as well.&lt;/p&gt;
&lt;p&gt;I’ll also assign body mass to the point size and apply the Lancet colour palette from &lt;code&gt;ggsci&lt;/code&gt; and the tufte theme from &lt;code&gt;ggthemes&lt;/code&gt; to spruce things up a bit more.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;penguins_animation &amp;lt;- penguins2 %&amp;gt;% 
  ggplot(aes(bill_length_mm, bill_depth_mm, size = body_mass_g, fill = species)) +
  geom_point(alpha = 0.7, colour = &amp;quot;black&amp;quot;, shape = 21) +
  ggsci::scale_fill_lancet() + 
  ggthemes::theme_tufte(14) +
  # the remaining plot code is the gganimate part 
  labs(title = &amp;quot;Species: {closest_state}&amp;quot;, 
       x = &amp;quot;bill length (mm)&amp;quot;, y = &amp;quot;bill depth (mm)&amp;quot;) +
  transition_states(species) +
  enter_fade() + #get points to fade in
  exit_fade() #and fade out&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;animate(penguins_animation)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;penguins_animation.gif&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;exporting-ggplots&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;9&lt;/span&gt; &lt;strong&gt;exporting ggplots&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;You can most easily save a static ggplot graph to your project’s working directory (by default, elsewhere if you use the “path” argument) with the &lt;code&gt;ggplot2::ggsave()&lt;/code&gt; function, where you specify the file name, the plot to save, and the device to use. In this case, the “device” argument refers to the type of image file you want to write, such as “jpeg”, “tiff”, “png”, “bmp”, “pdf”, etc.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ggsave()&lt;/code&gt; will try to guess the device you want to use based on the file extension you specify in the file name so you may not need to use the “device” argument in most cases. If you don’t specify which plot to save, the last plot displayed will be exported by default using the size of the current graphics device (where the plot was rendered). You can also optionally specify the “width” and “height” of the graph in inches, cm, or mm (via the “units” argument) and the resolution in DPI (default is 300).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#example of ggsave() usage
ggsave(filename = &amp;quot;custom ggplot.png&amp;quot;, plot = plot_object)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Congratulations! If you’ve made it here, you should have a pretty solid understanding of how to use &lt;code&gt;ggplot2&lt;/code&gt; and some extension packages to create stunning data visualizations with R. You might find it hard to believe given how much I’ve just covered, but this post only scratches the surface of the graphical options available to you as an R user. Indeed, it would be nearly impossible to cover every single use case without writing a long book on the topic (something to consider as a future project perhaps), but the principles covered here should help you get started at the very least.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;navigation&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;10&lt;/span&gt; &lt;strong&gt;Navigation&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Click &lt;a href=&#34;https://craig.rbind.io/post/2020-12-07-asgr-3-0-exploring-data-with-elucidate/&#34;&gt;here&lt;/a&gt; to go back to the previous post on exploratory data analysis with &lt;a href=&#34;https://github.com/bcgov/elucidate&#34;&gt;elucidate&lt;/a&gt;. A link to the next one, on dealing with missing values, will be added as soon as I have time to write it.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;notes&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;11&lt;/span&gt; &lt;strong&gt;Notes&lt;/strong&gt;&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Spatial plots (maps) were a bit beyond the scope of this post, but the &lt;a href=&#34;https://r-spatial.github.io/sf/&#34;&gt;sf&lt;/a&gt; and &lt;a href=&#34;https://rstudio.github.io/leaflet/&#34;&gt;leaflet&lt;/a&gt; packages may be helpful to those who are interested in building maps with R. Spatial data analysis and map building may become the topic of a future post.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;You can access an online version of &lt;em&gt;the&lt;/em&gt; &lt;code&gt;ggplot2&lt;/code&gt; book &lt;a href=&#34;https://ggplot2-book.org/index.html&#34;&gt;here&lt;/a&gt; for a deeper dive into the mechanics of the &lt;code&gt;ggplot2&lt;/code&gt; graphics system.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;This post covers quite a few &lt;code&gt;ggplot2&lt;/code&gt; extension packages but there are &lt;em&gt;many&lt;/em&gt; more. You can learn more about most of them &lt;a href=&#34;https://exts.ggplot2.tidyverse.org/gallery/&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The &lt;a href=&#34;https://www.r-graph-gallery.com/&#34;&gt;R Graph Gallery&lt;/a&gt; has a lot of R code templates for graphs with an emphasis on &lt;code&gt;ggplot2&lt;/code&gt; that may be of interest.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thank you for visiting my blog. I welcome any suggestions for future posts, comments or other feedback you might have. Feedback from beginners and science students/trainees (or with them in mind) is especially helpful in the interest of making this guide even better for them.&lt;/p&gt;
&lt;p&gt;This blog is something I do as a volunteer in my free time. If you’ve found it helpful and want to give back, &lt;a href=&#34;https://www.buymeacoffee.com/huttoncp&#34;&gt;coffee donations&lt;/a&gt; would be appreciated.&lt;/p&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js&#34; data-name=&#34;bmc-button&#34; data-slug=&#34;huttoncp&#34; data-color=&#34;#FF5F5F&#34; data-emoji=&#34;&#34;  data-font=&#34;Cookie&#34; data-text=&#34;Buy me a coffee&#34; data-outline-color=&#34;#000000&#34; data-font-color=&#34;#ffffff&#34; data-coffee-color=&#34;#FFDD00&#34; &gt;&lt;/script&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;Wickham, H. (2011). ggplot2. Wiley Interdisciplinary Reviews: &lt;em&gt;Computational Statistics&lt;/em&gt;, 3(2), 180-185.&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn2&#34;&gt;&lt;p&gt;The latest version of R (4.1.0) also introduced a native pipe operator, &lt;code&gt;|&amp;gt;&lt;/code&gt;, that behaves similarly to &lt;code&gt;%&amp;gt;%&lt;/code&gt; except that it only allows you to pass the output of the left side to the first argument of the right side, whereas &lt;code&gt;%&amp;gt;%&lt;/code&gt; lets you use a “.” to insert the output of the previous operation anywhere in the subsequently applied function.&lt;a href=&#34;#fnref2&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn3&#34;&gt;&lt;p&gt;There &lt;em&gt;is&lt;/em&gt; an equivalent &lt;code&gt;scale_fill_gradientn()&lt;/code&gt; function in case you were wondering.&lt;a href=&#34;#fnref3&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn4&#34;&gt;&lt;p&gt;meaning it is installed for you when you installed &lt;code&gt;ggplot2&lt;/code&gt;&lt;a href=&#34;#fnref4&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn5&#34;&gt;&lt;p&gt;If you’re using a PC with Windows, you can print these options to the console with &lt;code&gt;windowsFonts()&lt;/code&gt;&lt;a href=&#34;#fnref5&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>A Scientist&#39;s Guide to R: Step 3.0 - exploring data with elucidate</title>
      <link>https://craig.rbind.io/post/2020-12-07-asgr-3-0-exploring-data-with-elucidate/</link>
      <pubDate>Mon, 07 Dec 2020 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/post/2020-12-07-asgr-3-0-exploring-data-with-elucidate/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#tldr&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#introduction&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#installation-setup&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;Installation &amp;amp; Setup&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#interrogating-data&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;Interrogating Data&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#checking-for-row-copies-and-dupes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.1&lt;/span&gt; checking for row &lt;code&gt;copies()&lt;/code&gt; and &lt;code&gt;dupes()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#count-ing-unique-values&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.2&lt;/span&gt; &lt;code&gt;count()&lt;/code&gt;-ing unique values&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#describe-ing-missingness-extreme-values&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.3&lt;/span&gt; &lt;code&gt;describe()&lt;/code&gt;-ing missingness &amp;amp; extreme values&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#descriptives&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;Descriptives&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#describe-a-vector-with-summary-statistics&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.1&lt;/span&gt; &lt;code&gt;describe()&lt;/code&gt; a vector with summary statistics&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#grouped-descriptions&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.2&lt;/span&gt; grouped descriptions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#describe_all-columns-in-a-data-frame&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.3&lt;/span&gt; &lt;code&gt;describe_all()&lt;/code&gt; columns in a data frame&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#confidence-intervals&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.4&lt;/span&gt; confidence intervals&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#to-see-look&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;To see, look&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#anscombes-lesson-numeric-descriptions-can-be-misleading&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.1&lt;/span&gt; Anscombe’s lesson: numeric descriptions can be misleading&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#plot_-ting-data-with-elucidate&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.2&lt;/span&gt; &lt;code&gt;plot_*&lt;/code&gt;-ting data with elucidate&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#basic-plot_scatter-with-regression-lines&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.2.1&lt;/span&gt; basic &lt;code&gt;plot_scatter()&lt;/code&gt; with regression lines&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#basic-plot_density&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.2.2&lt;/span&gt; basic &lt;code&gt;plot_density()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#customized-plot_density&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.2.3&lt;/span&gt; customized &lt;code&gt;plot_density()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#basic-plot_box&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.2.4&lt;/span&gt; basic &lt;code&gt;plot_box()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#customized-plot_box-with-facetting&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.2.5&lt;/span&gt; customized &lt;code&gt;plot_box()&lt;/code&gt; with facetting&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#basic-plot_stat_error-of-the-mean---se&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.2.6&lt;/span&gt; basic &lt;code&gt;plot_stat_error()&lt;/code&gt; of the mean +/- SE&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#plot-medians-and-bootstrapped-cis&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.2.7&lt;/span&gt; plot medians and bootstrapped CIs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#plot-means-or-medians-and-cis-for-multiple-time-points-connected-with-lines&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6.2.8&lt;/span&gt; plot means or medians and CIs for multiple time points connected with lines&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#interacting-with-dynamic-data-representations&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7&lt;/span&gt; &lt;strong&gt;Interacting with dynamic data representations&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#correct-data-with-wash_df-recode_errors&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;8&lt;/span&gt; &lt;strong&gt;Correct&lt;/strong&gt; data with &lt;code&gt;wash_df()&lt;/code&gt; &amp;amp; &lt;code&gt;recode_errors()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#performance-evaluations&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;9&lt;/span&gt; &lt;strong&gt;Performance Evaluations&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#dupes-vs-janitorget_dupes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;9.1&lt;/span&gt; &lt;code&gt;dupes()&lt;/code&gt; vs &lt;code&gt;janitor::get_dupes()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#describe_all-vs.-skimrskim&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;9.2&lt;/span&gt; &lt;code&gt;describe_all()&lt;/code&gt; vs. &lt;code&gt;skimr::skim()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#navigation&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;10&lt;/span&gt; &lt;strong&gt;Navigation&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#notes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;11&lt;/span&gt; &lt;strong&gt;Notes&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;tldr&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;This post dives into the &lt;a href=&#34;https://github.com/bcgov/elucidate&#34;&gt;elucidate&lt;/a&gt; package and how it can help you explore data using sets of functions for interrogating, describing, visualising, interacting with, and correcting data. This is a key stage of any analysis where errors are found and interesting relationships begin to appear.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;hex-elucidate%20v4.png&#34; width=&#34;300&#34;&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;The 10th post of the &lt;a href=&#34;https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/&#34;&gt;Scientist’s Guide to R series&lt;/a&gt; takes us on a journey of discovery through data exploration. It’s going to be an epic journey too because of how much there is to cover. In data science, sometimes you can even learn enough in this stage of an analysis to answer basic research questions. Read on to see how straightforward exploratory data analysis (EDA) can be with a new R package I created called &lt;a href=&#34;https://github.com/bcgov/elucidate&#34;&gt;elucidate&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;elucidate&lt;/code&gt; helps you &lt;em&gt;explore&lt;/em&gt; data by making it easy and efficient to:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Interrogate&lt;/strong&gt; data in search of anomalies with &lt;code&gt;copies()&lt;/code&gt;, &lt;code&gt;dupes()&lt;/code&gt;, and &lt;code&gt;counts*&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Describe&lt;/strong&gt; data with the &lt;code&gt;describe*&lt;/code&gt; set of functions for obtaining summary statistics, bootstrapping confidence intervals, and detecting missing values.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Quickly &lt;strong&gt;visualise&lt;/strong&gt; data with the &lt;code&gt;plot_*&lt;/code&gt; set of functions.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Interact&lt;/strong&gt; with data representations using the &lt;code&gt;static_to_dynamic()&lt;/code&gt; function.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Correct&lt;/strong&gt; data entry errors, anomaly indicator values, and structural inconsistencies seen in real world data more easily using &lt;code&gt;wash_df()&lt;/code&gt; and &lt;code&gt;recode_errors()&lt;/code&gt;. Here we blur the lines a bit between transformation and EDA, because data prep is usually an iterative cleaning/exploring process in practice.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;elucidate&lt;/code&gt; is a package I’ve been thrilled to be developing for the Research Branch of the &lt;a href=&#34;https://www2.gov.bc.ca/gov/content/governments/organizational-structure/ministries-organizations/ministries/social-development-poverty-reduction&#34;&gt;British Columbia Ministry of Social Development &amp;amp; Poverty Reduction&lt;/a&gt; since I started working as a public servant last spring&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;. Although I only spend a small fraction of my time on &lt;code&gt;elucidate&lt;/code&gt;, I’m incredibly grateful for the BC Gov’s ongoing support of the project so I can continue building it for all of us.&lt;/p&gt;
&lt;p&gt;Inspired by tidyverse naming conventions, many &lt;code&gt;elucidate&lt;/code&gt; function are organized into sets that begin with a common root (e.g. &lt;code&gt;describe*&lt;/code&gt;, &lt;code&gt;plot_*&lt;/code&gt;, &lt;code&gt;counts*&lt;/code&gt;), since this lets you see them all as suggestions while coding in R studio after typing the first three characters of the function or object name. It also facilitates code completion via the &lt;code&gt;tab&lt;/code&gt; key.&lt;/p&gt;
&lt;p&gt;Many &lt;code&gt;elucidate&lt;/code&gt; functions also accept a data frame as the 1st argument and return a data frame (or &lt;code&gt;ggplot&lt;/code&gt;) as output, so they are compatible with the &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#chaining-functions-with-the-pipe-operator&#34;&gt;pipe operator&lt;/a&gt; (&lt;code&gt;%&amp;gt;%&lt;/code&gt;) from the &lt;a href=&#34;https://magrittr.tidyverse.org/&#34;&gt;magrittr&lt;/a&gt; package for easy integration into &lt;a href=&#34;https://r4ds.had.co.nz/tidy-data.html&#34;&gt;“tidy”&lt;/a&gt; data processing pipelines. For convenience, the pipe operator is also imported from &lt;code&gt;magrittr&lt;/code&gt; when &lt;code&gt;elucidate&lt;/code&gt; is loaded.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Bonus!&lt;/strong&gt; I recently saw a great &lt;a href=&#34;https://twitter.com/lisalendway/status/1312097209752711169?s=20&#34;&gt;twitter thread&lt;/a&gt; on how to capture screen recordings and include them in R markdown&lt;a href=&#34;#fn2&#34; class=&#34;footnote-ref&#34; id=&#34;fnref2&#34;&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt; docs, so I’m going to try them out in this very post.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Disclaimer:&lt;/strong&gt; This post covers ways of using R to get descriptive statistics, such as the sample mean, standard deviation, and skewness for numeric variables. I’m going to assume that you learned what these are and how to calculate them in an undergraduate introductory statistics course. If these terms are unfamiliar to you and/or statistics seems scary as a topic in general, I strongly recommend visiting Brown University’s awesome &lt;a href=&#34;https://seeing-theory.brown.edu/&#34;&gt;Seeing Theory website&lt;/a&gt; before proceeding.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;installation-setup&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;Installation &amp;amp; Setup&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Because it is still rapidly evolving, &lt;code&gt;elucidate&lt;/code&gt; is not on &lt;a href=&#34;https://cran.r-project.org/web/packages/&#34;&gt;CRAN&lt;/a&gt; yet (maybe in 2021); so you can’t install it the normal way with &lt;code&gt;install.packages()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Instead, like the &lt;em&gt;development versions&lt;/em&gt; of many other packages, you can get it from &lt;a href=&#34;https://github.com/&#34;&gt;github&lt;/a&gt; with:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install.packages(&amp;quot;remotes&amp;quot;) #only run this 1st if you haven&amp;#39;t installed remotes before

remotes::install_github(&amp;quot;bcgov/elucidate&amp;quot;) 

#note: if you have trouble installing or updating some of the dependencies when
#installing a package from GitHub, try (re)-installing their CRAN versions (if
#available) 1st using install.packages().&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then just load it like any other R package, with the &lt;code&gt;library()&lt;/code&gt; function:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse) #for comparisons &amp;amp; the glimpse function&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## -- Attaching packages --------------------------------------- tidyverse 1.3.0 --&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## v ggplot2 3.3.3     v purrr   0.3.4
## v tibble  3.1.1     v dplyr   1.0.2
## v tidyr   1.1.2     v stringr 1.4.0
## v readr   1.4.0     v forcats 0.5.0&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: package &amp;#39;ggplot2&amp;#39; was built under R version 4.0.5&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: package &amp;#39;tibble&amp;#39; was built under R version 4.0.5&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(janitor) #for comparisons&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Attaching package: &amp;#39;janitor&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## The following objects are masked from &amp;#39;package:stats&amp;#39;:
## 
##     chisq.test, fisher.test&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(bench) #for benchmarking

library(elucidate)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Attaching package: &amp;#39;elucidate&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## The following object is masked from &amp;#39;package:base&amp;#39;:
## 
##     mode&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#also set the random generator seed for reproducibility
set.seed(1234)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For this post, we’ll use the generated dataset, &lt;code&gt;pdata&lt;/code&gt; (short for &lt;em&gt;p&lt;/em&gt;ractice &lt;em&gt;data&lt;/em&gt;), that is imported with &lt;code&gt;elucidate&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;interrogating-data&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;Interrogating Data&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;As usual, we’ll start by inspecting the structure of it with &lt;a href=&#34;https://craig.rbind.io/post/2019-08-06-asgr-2-0-basic-operations-and-data-structures/#functions-for-describing-the-structural-information-of-data-objects&#34;&gt;dplyr::glimpse()&lt;/a&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;glimpse(pdata)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 12,000
## Columns: 10
## $ id       &amp;lt;int&amp;gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18~
## $ d        &amp;lt;date&amp;gt; 2008-01-01, 2008-01-01, 2008-01-01, 2008-01-01, 2008-01-01, ~
## $ g        &amp;lt;fct&amp;gt; e, c, d, c, a, a, d, b, e, c, a, a, a, a, a, b, c, b, a, c, a~
## $ high_low &amp;lt;chr&amp;gt; &amp;quot;high&amp;quot;, &amp;quot;high&amp;quot;, &amp;quot;low&amp;quot;, &amp;quot;high&amp;quot;, &amp;quot;high&amp;quot;, &amp;quot;high&amp;quot;, &amp;quot;low&amp;quot;, &amp;quot;low&amp;quot;, ~
## $ even     &amp;lt;lgl&amp;gt; FALSE, TRUE, FALSE, TRUE, FALSE, TRUE, FALSE, TRUE, FALSE, TR~
## $ y1       &amp;lt;dbl&amp;gt; 106.26334, 96.47998, 99.33155, 108.94097, 99.65422, 101.59775~
## $ y2       &amp;lt;dbl&amp;gt; 117.92654, 107.16036, 96.16405, 101.78278, 113.36807, 113.586~
## $ x1       &amp;lt;int&amp;gt; 59, 5, 71, 60, 96, 19, 77, 74, 92, 4, 56, 100, 69, 44, 91, 35~
## $ x2       &amp;lt;int&amp;gt; 116, 101, 111, 130, 196, 163, 133, 191, 106, 134, 142, 111, 1~
## $ x3       &amp;lt;int&amp;gt; 248, 238, 250, 287, 284, 206, 201, 249, 277, 209, 285, 277, 2~&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This tells us that we’ve got 12,000 rows and 10 columns of various classes to work with including an “id” and date (“d”) column that could represent distinct observations.&lt;/p&gt;
&lt;p&gt;Instead of 12,000 rows, let’s over-sample it with replacement so that there are 1,000,000 rows to allow the performance of &lt;code&gt;elucidate&lt;/code&gt; functions to be more realistically evaluated.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_resampled &amp;lt;- pdata[sample(1:nrow(pdata), 1e6, replace = TRUE),]

dim(pdata_resampled) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 1000000      10&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;checking-for-row-copies-and-dupes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.1&lt;/span&gt; checking for row &lt;code&gt;copies()&lt;/code&gt; and &lt;code&gt;dupes()&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;dplyr::glimpse()&lt;/code&gt; is a great first step in the data interrogation process. After learning about the columns names classes, dimensions, and previewing some of the data, the next thing I usually check is how many copies I have of each row based on columns like subject ID # and date, where I’m hoping that there are as many copies as I should find (i.e. one row per ID and date combination, representing unique measurements). Usually this means making sure there aren’t any unexpected row duplicates. This can easily be checked with &lt;code&gt;elucidate::copies()&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_resampled %&amp;gt;% 
  copies() %&amp;gt;% 
  glimpse() #glimpse() again to show all output columns&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## No column names specified - using all columns.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 1,000,000
## Columns: 12
## $ id          &amp;lt;int&amp;gt; 452, 16, 162, 86, 269, 196, 623, 885, 934, 948, 146, 367, ~
## $ d           &amp;lt;date&amp;gt; 2015-01-01, 2016-01-01, 2015-01-01, 2016-01-01, 2015-01-0~
## $ g           &amp;lt;fct&amp;gt; d, b, e, c, a, e, c, d, d, d, b, c, c, a, c, a, c, a, d, e~
## $ high_low    &amp;lt;chr&amp;gt; &amp;quot;high&amp;quot;, &amp;quot;high&amp;quot;, &amp;quot;low&amp;quot;, &amp;quot;high&amp;quot;, &amp;quot;high&amp;quot;, &amp;quot;low&amp;quot;, &amp;quot;low&amp;quot;, &amp;quot;low&amp;quot;~
## $ even        &amp;lt;lgl&amp;gt; TRUE, TRUE, TRUE, TRUE, FALSE, TRUE, FALSE, FALSE, TRUE, T~
## $ y1          &amp;lt;dbl&amp;gt; 195.22487, 196.53225, 117.96544, 228.54892, 144.27335, 134~
## $ y2          &amp;lt;dbl&amp;gt; 104.22839, 108.96997, 92.46506, 108.54791, 107.09374, 95.1~
## $ x1          &amp;lt;int&amp;gt; 49, 34, 72, 78, 36, 35, 32, 43, 55, 85, 33, 84, 85, 44, 52~
## $ x2          &amp;lt;int&amp;gt; 196, 142, 181, 105, 190, 181, 108, 161, 111, 199, 191, 183~
## $ x3          &amp;lt;int&amp;gt; 254, 295, 286, 244, 202, 260, 280, 284, 233, 254, 267, 222~
## $ copy_number &amp;lt;int&amp;gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1~
## $ n_copies    &amp;lt;int&amp;gt; 77, 72, 82, 88, 98, 105, 76, 69, 78, 87, 92, 80, 85, 85, 9~&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can see that the default version of &lt;code&gt;copies()&lt;/code&gt; simply returns the input data with the addition of two columns called “copy_number” (which copy the rows is if multiple copies were detected) and “n_copies” (total number of row copies detected)&lt;a href=&#34;#fn3&#34; class=&#34;footnote-ref&#34; id=&#34;fnref3&#34;&gt;&lt;sup&gt;3&lt;/sup&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In this case, I’ve resampled the same data quite a lot, so there are multiple copies of all original rows. &lt;code&gt;copies()&lt;/code&gt; will also preserve the original ordering of the rows unless you ask it to sort the output by the number of copies&lt;a href=&#34;#fn4&#34; class=&#34;footnote-ref&#34; id=&#34;fnref4&#34;&gt;&lt;sup&gt;4&lt;/sup&gt;&lt;/a&gt;. You do so by setting the &lt;strong&gt;sort_by_copies&lt;/strong&gt; argument to &lt;code&gt;TRUE&lt;/code&gt;. If you also only want to see duplicated rows, you can set the &lt;strong&gt;filter&lt;/strong&gt; argument to &lt;strong&gt;“dupes”&lt;/strong&gt;&lt;a href=&#34;#fn5&#34; class=&#34;footnote-ref&#34; id=&#34;fnref5&#34;&gt;&lt;sup&gt;5&lt;/sup&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_resampled %&amp;gt;% 
  copies(filter = &amp;quot;dupes&amp;quot;, sort_by_copies = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## No column names specified - using all columns.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Duplicated rows detected! 1000000 of 1000000 rows in the input data have multiple copies.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1,000,000 x 11
##       id d          g     high_low even     y1    y2    x1    x2    x3 n_copies
##    &amp;lt;int&amp;gt; &amp;lt;date&amp;gt;     &amp;lt;fct&amp;gt; &amp;lt;chr&amp;gt;    &amp;lt;lgl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt;    &amp;lt;int&amp;gt;
##  1   546 2016-01-01 d     high     TRUE   221.  104.    81   122   226      119
##  2   546 2016-01-01 d     high     TRUE   221.  104.    81   122   226      119
##  3   558 2016-01-01 e     high     TRUE   149.  107.    63   134   223      119
##  4   558 2016-01-01 e     high     TRUE   149.  107.    63   134   223      119
##  5   546 2016-01-01 d     high     TRUE   221.  104.    81   122   226      119
##  6   546 2016-01-01 d     high     TRUE   221.  104.    81   122   226      119
##  7   546 2016-01-01 d     high     TRUE   221.  104.    81   122   226      119
##  8   558 2016-01-01 e     high     TRUE   149.  107.    63   134   223      119
##  9   558 2016-01-01 e     high     TRUE   149.  107.    63   134   223      119
## 10   546 2016-01-01 d     high     TRUE   221.  104.    81   122   226      119
## # ... with 999,990 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As the message informed us, by default &lt;code&gt;copies()&lt;/code&gt; will check for duplicates based on all columns unless you specify columns to condition the search upon. This is done by simply listing the &lt;em&gt;unquoted&lt;/em&gt; names of the columns. E.g. to check for copies based on just the “id” and “d” (date) columns. This time we’ll use the original version of &lt;code&gt;pdata&lt;/code&gt;, to see if each combination of the id and d columns do in fact represents distinct observations…&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata %&amp;gt;% 
  copies(id, d, #only consider these columns when searching for copies
         #only return the rows with at least one duplicate
         filter = &amp;quot;dupes&amp;quot;, 
         #sort the result by the number of copies and then specified
         #conditioning variables (in the same order specified). 
         sort_by_copies = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## No duplicates detected.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 0 x 11
## # ... with 11 variables: id &amp;lt;int&amp;gt;, d &amp;lt;date&amp;gt;, g &amp;lt;fct&amp;gt;, high_low &amp;lt;chr&amp;gt;,
## #   even &amp;lt;lgl&amp;gt;, y1 &amp;lt;dbl&amp;gt;, y2 &amp;lt;dbl&amp;gt;, x1 &amp;lt;int&amp;gt;, x2 &amp;lt;int&amp;gt;, x3 &amp;lt;int&amp;gt;,
## #   n_copies &amp;lt;int&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# note: if you didn&amp;#39;t specify any conditioning variables, sort_by_copies will
# only cause copies() to sort the output by the n_copies column&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;…and they do 😄.&lt;/p&gt;
&lt;p&gt;Checking for duplicates and sorting the result like this is by far the most common way to use &lt;code&gt;copies()&lt;/code&gt;, so &lt;code&gt;elucidate&lt;/code&gt; version 0.0.0.9023 also introduced a convenience wrapper function for the above called &lt;code&gt;dupes()&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;copies_result &amp;lt;- pdata %&amp;gt;% copies(id, d, filter = &amp;quot;dupes&amp;quot;, sort_by_copies = TRUE)
dupes_result &amp;lt;- pdata %&amp;gt;% dupes(id, d)

identical(copies_result, dupes_result)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Since the extra copies in the resampled version of the data are meaningless, if this were a real dataset intended for research purposes we would probably want to get rid of them and just keep the 1st copy of each to end up with a distinct&lt;a href=&#34;#fn6&#34; class=&#34;footnote-ref&#34; id=&#34;fnref6&#34;&gt;&lt;sup&gt;6&lt;/sup&gt;&lt;/a&gt; set of rows. This can also be achieved with &lt;code&gt;copies()&lt;/code&gt; by instead setting the &lt;strong&gt;filter&lt;/strong&gt; argument to &lt;strong&gt;“first”&lt;/strong&gt; (or &lt;strong&gt;“last”&lt;/strong&gt; for the last copy). In this situation, we actually recover a data frame that is equivalent to the original version of &lt;code&gt;pdata&lt;/code&gt;, as demonstrated using &lt;code&gt;identical()&lt;/code&gt; after some sorting and reformatting.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_distinct &amp;lt;- pdata_resampled %&amp;gt;% #the resampled 1,000,000 row version
  copies(filter = &amp;quot;first&amp;quot;) %&amp;gt;% #only keep the 1st detected copy of each row
  arrange(id, d, g, high_low, even, y1, y2, x1, x2, x3) %&amp;gt;% 
  wash_df()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## No column names specified - using all columns.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_sorted &amp;lt;- pdata %&amp;gt;% #original data that has not been resampled
  arrange(id, d, g, high_low, even, y1, y2, x1, x2, x3) %&amp;gt;% 
  wash_df()

pdata_distinct %&amp;gt;% glimpse&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 12,000
## Columns: 10
## $ id       &amp;lt;dbl&amp;gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2~
## $ d        &amp;lt;date&amp;gt; 2008-01-01, 2009-01-01, 2010-01-01, 2011-01-01, 2012-01-01, ~
## $ g        &amp;lt;chr&amp;gt; &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;~
## $ high_low &amp;lt;chr&amp;gt; &amp;quot;high&amp;quot;, &amp;quot;low&amp;quot;, &amp;quot;high&amp;quot;, &amp;quot;low&amp;quot;, &amp;quot;low&amp;quot;, &amp;quot;low&amp;quot;, &amp;quot;low&amp;quot;, &amp;quot;low&amp;quot;, &amp;quot;lo~
## $ even     &amp;lt;lgl&amp;gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE~
## $ y1       &amp;lt;dbl&amp;gt; 106.26334, 110.03424, 157.88571, 110.80402, 134.40024, 158.24~
## $ y2       &amp;lt;dbl&amp;gt; 117.92654, 90.61188, 106.97367, 99.20771, 96.22263, 94.98052,~
## $ x1       &amp;lt;dbl&amp;gt; 59, 14, 14, 69, 93, 26, 47, 79, 19, 87, 75, 86, 5, 73, 25, 86~
## $ x2       &amp;lt;dbl&amp;gt; 116, 186, 141, 186, 193, 149, 180, 197, 196, 135, 172, 199, 1~
## $ x3       &amp;lt;dbl&amp;gt; 248, 238, 243, 256, 216, 277, 232, 251, 293, 261, 287, 261, 2~&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;identical(pdata_distinct, pdata_sorted)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Here the &lt;code&gt;dplyr::arrange()&lt;/code&gt; and &lt;code&gt;elucidate::wash_df()&lt;/code&gt; steps only serve to standardize the formatting/order of the data without modifying any of the actual values. There will be more about &lt;code&gt;wash_df()&lt;/code&gt; later. Now you also know how to eliminate row duplicates and recover data that has been oversampled. When working with real data, this issue most commonly occurs when a &lt;a href=&#34;https://craig.rbind.io/post/2020-03-29-asgr-2-2-joining-data/&#34;&gt;join&lt;/a&gt; goes awry. In fact, I &lt;strong&gt;&lt;em&gt;strongly recommend checking&lt;/em&gt;&lt;/strong&gt; for duplicates and filtering them if appropriate both &lt;strong&gt;&lt;em&gt;before and after every join&lt;/em&gt;&lt;/strong&gt;, at least the first time you’re trying to combine two datasets. &lt;code&gt;copies()&lt;/code&gt; can help you with both tasks.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Real world relevance&lt;/em&gt; - Not long ago I was examining medical records and expected to see one record per person per visit to a health care provider. I was surprised to learn that in fact the data contained one row per service provided, with multiple rows per visit. Checking for duplicates using &lt;code&gt;copies()&lt;/code&gt; revealed this important structural aspect of the data, which subsequently determined how I prepared it for analysis.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;count-ing-unique-values&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.2&lt;/span&gt; &lt;code&gt;count()&lt;/code&gt;-ing unique values&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;counts*&lt;/code&gt; set of functions helps you quickly check your data for manual entry errors or weird values by providing counts of unique values. In my experience, such errors tend to show up as very rare or common values.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;counts()&lt;/code&gt; returns the unique values and counts for a vector in the form “value_count”, sorted by decreasing frequency&lt;a href=&#34;#fn7&#34; class=&#34;footnote-ref&#34; id=&#34;fnref7&#34;&gt;&lt;sup&gt;7&lt;/sup&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;counts(pdata_resampled$g)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;a_216058&amp;quot; &amp;quot;b_205319&amp;quot; &amp;quot;d_197784&amp;quot; &amp;quot;e_196104&amp;quot; &amp;quot;c_184735&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#use order = &amp;quot;a&amp;quot; or &amp;quot;i&amp;quot; to sort in ascending/increasing order&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;counts_all()&lt;/code&gt; gives you a list of unique values and their frequency for all columns in a data frame. To avoid printing too much here, we’ll first &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#select&#34;&gt;select&lt;/a&gt; a few columns to show you what the output looks like.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_resampled %&amp;gt;% 
  select(d, high_low, even) %&amp;gt;% 
  counts_all()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $d
##  [1] &amp;quot;2012-01-01_83846&amp;quot; &amp;quot;2015-01-01_83674&amp;quot; &amp;quot;2018-01-01_83667&amp;quot; &amp;quot;2010-01-01_83558&amp;quot;
##  [5] &amp;quot;2017-01-01_83385&amp;quot; &amp;quot;2019-01-01_83372&amp;quot; &amp;quot;2014-01-01_83335&amp;quot; &amp;quot;2011-01-01_83114&amp;quot;
##  [9] &amp;quot;2009-01-01_83024&amp;quot; &amp;quot;2008-01-01_83013&amp;quot; &amp;quot;2016-01-01_83009&amp;quot; &amp;quot;2013-01-01_83003&amp;quot;
## 
## $high_low
## [1] &amp;quot;high_504860&amp;quot; &amp;quot;low_495140&amp;quot; 
## 
## $even
## [1] &amp;quot;TRUE_500662&amp;quot;  &amp;quot;FALSE_499338&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For convenience, &lt;code&gt;elucidate&lt;/code&gt; also provides shortcut functions &lt;code&gt;counts_tb()&lt;/code&gt; and &lt;code&gt;counts_tb_all()&lt;/code&gt; that give you the &lt;em&gt;t&lt;/em&gt;op and &lt;em&gt;b&lt;/em&gt;ottom &lt;strong&gt;“n”&lt;/strong&gt; unique values (&lt;strong&gt;“n”&lt;/strong&gt; is up to 10 by default) in terms of frequency. Here we’ll just ask for the top 5 and bottom 5 values.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_resampled %&amp;gt;% 
  select(d, high_low, even) %&amp;gt;% 
  counts_tb_all(n = 5)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $d
##        top_v top_n      bot_v bot_n
## 1 2012-01-01 83846 2013-01-01 83003
## 2 2015-01-01 83674 2016-01-01 83009
## 3 2018-01-01 83667 2008-01-01 83013
## 4 2010-01-01 83558 2009-01-01 83024
## 5 2017-01-01 83385 2011-01-01 83114
## 
## $high_low
##   top_v  top_n bot_v  bot_n
## 1  high 504860   low 495140
## 2   low 495140  high 504860
## 3  &amp;lt;NA&amp;gt;   &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;   &amp;lt;NA&amp;gt;
## 4  &amp;lt;NA&amp;gt;   &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;   &amp;lt;NA&amp;gt;
## 5  &amp;lt;NA&amp;gt;   &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;   &amp;lt;NA&amp;gt;
## 
## $even
##   top_v  top_n bot_v  bot_n
## 1  TRUE 500662 FALSE 499338
## 2 FALSE 499338  TRUE 500662
## 3  &amp;lt;NA&amp;gt;   &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;   &amp;lt;NA&amp;gt;
## 4  &amp;lt;NA&amp;gt;   &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;   &amp;lt;NA&amp;gt;
## 5  &amp;lt;NA&amp;gt;   &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;   &amp;lt;NA&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This time we get a list of tibbles instead of a list of vectors, with the top values (“top_v”) and their counts (“top_n”) as a pair of columns, and the bottom values (“bot_v”) beside their counts (“bot_n”). You may have noticed that in cases where there are fewer than “n” unique values, all of them will be shown under each of the &lt;code&gt;top_*&lt;/code&gt; and &lt;code&gt;bot_*&lt;/code&gt; columns, albeit in opposite orders. As expected, &lt;code&gt;counts_tb()&lt;/code&gt; gives you a single tibble showing the top and bottom counts for a single column.&lt;/p&gt;
&lt;p&gt;Using the &lt;code&gt;mark()&lt;/code&gt; function from the &lt;code&gt;bench&lt;/code&gt; package (i.e. &lt;code&gt;bench::mark()&lt;/code&gt;), we can see that these functions run reasonably fast on even 1,000,000 rows of data; under 10 seconds on my laptop (Intel i7-9750H processor &lt;span class=&#34;citation&#34;&gt;@2.6&lt;/span&gt; GHz with 16GB of RAM).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mark(
  #just wrap the expression you want to evaluate the performance of with the
  #bench::mark() function
  pdata_resampled %&amp;gt;% 
    select(d, high_low, even) %&amp;gt;% 
    counts_tb_all(),
  #specify the number of iterations to use for benchmarking with the iterations
  #argument
  iterations = 10) %&amp;gt;% 
  #subset the output to just get the timing &amp;amp; memory usage info
  select(median)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: Some expressions had a GC in every iteration; so filtering is disabled.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1 x 1
##     median
##   &amp;lt;bch:tm&amp;gt;
## 1    9.69s&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now you know how easy it can be to check for data entry errors with the &lt;code&gt;counts*&lt;/code&gt; set of &lt;code&gt;elucidate&lt;/code&gt; functions.&lt;/p&gt;
&lt;p&gt;The latest version of &lt;code&gt;elucidate&lt;/code&gt; also includes a &lt;code&gt;mode()&lt;/code&gt;&lt;a href=&#34;#fn8&#34; class=&#34;footnote-ref&#34; id=&#34;fnref8&#34;&gt;&lt;sup&gt;8&lt;/sup&gt;&lt;/a&gt; function which returns just the most common value (i.e. the mode) of any vector.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;describe-ing-missingness-extreme-values&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.3&lt;/span&gt; &lt;code&gt;describe()&lt;/code&gt;-ing missingness &amp;amp; extreme values&lt;/h2&gt;
&lt;p&gt;Checking for other anomalies like extreme values (outliers) and missing values can be achieved with &lt;code&gt;describe()&lt;/code&gt;. To start with, we’ll subset the output to just focus on columns relevant these quality indicators.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_resampled %&amp;gt;% 
  describe(y1) %&amp;gt;% 
  #desctibe() outputs a tibble, which means we can subsequently manipulate the
  #output with dplyr functions, like select()
  select(cases:p_na, p0:p100) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1 x 9
##     cases       n    na  p_na    p0   p25   p50   p75  p100
##     &amp;lt;int&amp;gt;   &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
## 1 1000000 1000000     0     0  69.2  121.  145.  181.  289.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;From this subset of the output alone we can tell that there are no missing values for y1, which ranges from a minimum (p0) of 69 to a maximum (p100) of 289.2. If p0 is less than ~1.5 x the interquartile range (p75-p25) away from p25 (= 25th percentile) or p100 is &amp;gt;1.5 x IQR greater than p75 (= 75th percentile), we might be concerned about possible outliers in the data. However, unless the deviation is really obvious, you’re better off just looking at a box plot (basically gets you the same information much faster) using &lt;code&gt;elucidate::plot_box()&lt;/code&gt;. If you happen to know &lt;em&gt;a priori&lt;/em&gt; what the normal range of the dependent variable is you can just check the minimum and maximum values for potential outliers.&lt;/p&gt;
&lt;p&gt;Data entry errors can show up here as extreme deviations, like a maximum value of 2,892 or a minimum value of -500 would be in this case. You should also check to see if most of the percentiles are very close to the same value, which could indicate the presence of ceiling effects or floor effects in the dependent variable&lt;a href=&#34;#fn9&#34; class=&#34;footnote-ref&#34; id=&#34;fnref9&#34;&gt;&lt;sup&gt;9&lt;/sup&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Another thing to keep in mind is that some data collection protocols use codes like “9999” (when most true values are &amp;lt; 100) to represent invalid responses (e.g. the patient refused to answer the question) or a specific reason data are missing (e.g. equipment failures). If possible, you should check for those sorts of details in any available protocol documents or other &lt;a href=&#34;https://en.wikipedia.org/wiki/Metadata&#34;&gt;metadata&lt;/a&gt; that exist for the data you’re using.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;descriptives&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;Descriptives&lt;/strong&gt;&lt;/h1&gt;
&lt;div id=&#34;describe-a-vector-with-summary-statistics&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.1&lt;/span&gt; &lt;code&gt;describe()&lt;/code&gt; a vector with summary statistics&lt;/h2&gt;
&lt;p&gt;To get a descriptive summary of a vector you could use the base R &lt;code&gt;summary()&lt;/code&gt; function, which is very fast but yields rather limited information. For numeric vectors, &lt;code&gt;summary()&lt;/code&gt; will give you the minimum, mean, median, 25th percentile, 75th percentile, and maximum values. It will also tell you how many &lt;code&gt;NA&lt;/code&gt;’s there are, but only if some are detected (and not for non-numeric vectors). Alternatively, we can use &lt;code&gt;describe()&lt;/code&gt; to get most (or all) of the summary statistics we typically want.&lt;a href=&#34;#fn10&#34; class=&#34;footnote-ref&#34; id=&#34;fnref10&#34;&gt;&lt;sup&gt;10&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_resampled$y1 %&amp;gt;% summary()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   69.22  120.94  144.75  153.74  181.08  289.24&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;describe(data = pdata_resampled, 
         #if data is a data frame, then you specify the column to describe using
         #the 2nd argument &amp;quot;y&amp;quot;
         y = y1,
         #you can output the results as a data.table instead of a tibble
         #(default is &amp;quot;tibble&amp;quot;) so all output is printed
         output = &amp;quot;dt&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##      cases       n na p_na    mean     sd    se     p0     p25    p50     p75
## 1: 1000000 1000000  0    0 153.742 42.734 0.043 69.224 120.942 144.75 181.079
##       p100 skew   kurt
## 1: 289.235 0.74 -0.183&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#equivalently, describe(pdata_resampled$y1, output = &amp;quot;dt&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;In addition to everything provided by &lt;code&gt;summary()&lt;/code&gt;, &lt;code&gt;describe()&lt;/code&gt; also gives us the standard deviation, standard error of the mean, and clearer information on the shape of the distribution via skewness = “skew” and (excess-)kurtosis = “kurt”, where values of either &lt;code&gt;&amp;gt; 1&lt;/code&gt; or &lt;code&gt;&amp;lt; -1&lt;/code&gt; indicate &lt;a href=&#34;https://brownmath.com/stat/shape.htm&#34;&gt;non-trivial deviations from normality&lt;/a&gt;. In such cases you might want to use the median (p50) and as a measure of central tendency rather than the mean, and the interquartile range (p75-p25) as a measure of the spread of values instead of the standard deviation or standard error. You may also want to look at the distribution with one of the &lt;code&gt;plot_*&lt;/code&gt; functions covered below. &lt;code&gt;elucicidate&lt;/code&gt; also provides convenience wrappers for the &lt;code&gt;skewness()&lt;/code&gt; and &lt;code&gt;kurtosis()&lt;/code&gt; functions in the &lt;a href=&#34;https://www.rdocumentation.org/packages/e1071/versions/1.7-4&#34;&gt;e1071&lt;/a&gt; (and other) packages if you want just these measures for a numeric vector&lt;a href=&#34;#fn11&#34; class=&#34;footnote-ref&#34; id=&#34;fnref11&#34;&gt;&lt;sup&gt;11&lt;/sup&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We also get information on the presence of missing values, as highlighted previously.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;grouped-descriptions&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.2&lt;/span&gt; grouped descriptions&lt;/h2&gt;
&lt;p&gt;Experimental research typically focuses on group comparisons (i.e. intervention vs. control), which was a key consideration in developing &lt;code&gt;elucidate&lt;/code&gt;. Where possible, &lt;code&gt;elucidate&lt;/code&gt; functions make it easy for you to incorporate grouping variables. For example, you can specify any number of them in the &lt;code&gt;describe*&lt;/code&gt; functions as unquoted column names via the special &lt;a href=&#34;https://www.r-bloggers.com/2015/02/r-three-dots-ellipsis/&#34;&gt;&lt;code&gt;...&lt;/code&gt;&lt;/a&gt; argument. For example, to summarise the “y1” numeric variable in &lt;code&gt;pdata&lt;/code&gt; for each level of the factor &lt;code&gt;g&lt;/code&gt;, we just use:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_resampled %&amp;gt;% 
  #1st column name is passed to the y argument to indicate the variable to be
  #described
  describe(y1, 
           #subsequent unquoted column names are interpreted as grouping
           #variables
           g)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 5 x 15
##   g      cases      n    na  p_na  mean    sd    se    p0   p25   p50   p75
##   &amp;lt;fct&amp;gt;  &amp;lt;int&amp;gt;  &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
## 1 d     197784 197784     0     0  174.  43.8 0.098  69.2  138.  175.  214.
## 2 b     205319 205319     0     0  152.  37.8 0.083  74.4  118.  146.  188.
## 3 e     196104 196104     0     0  135.  18.6 0.042  75.1  123.  137.  148.
## 4 c     184735 184735     0     0  177.  57.0 0.133  77.0  127.  166.  232.
## 5 a     216058 216058     0     0  134.  25.8 0.055  75.9  112.  133.  156.
## # ... with 3 more variables: p100 &amp;lt;dbl&amp;gt;, skew &amp;lt;dbl&amp;gt;, kurt &amp;lt;dbl&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#or more compactly: describe(pdata, y1, g)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It’s really that easy.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;describe_all-columns-in-a-data-frame&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.3&lt;/span&gt; &lt;code&gt;describe_all()&lt;/code&gt; columns in a data frame&lt;/h2&gt;
&lt;p&gt;What if you want to describe all columns of a data frame? What about such a description for each level of one or more grouping variables? This is what &lt;code&gt;describe_all()&lt;/code&gt; does.&lt;/p&gt;
&lt;p&gt;To describe a subset of variables instead of all of them, just pass the data through &lt;code&gt;dplyr::select()&lt;/code&gt; before piping it to &lt;code&gt;describe_all()&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_resampled %&amp;gt;%
  #for the sake of brevity we&amp;#39;ll just pick one of each major class to
  #demonstrate class-specific results that are provided
  select(d, g, high_low, even, y2, x1) %&amp;gt;% 
  describe_all()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $date
## # A tibble: 1 x 8
##   variable   cases       n    na  p_na n_unique start      end       
##   &amp;lt;chr&amp;gt;      &amp;lt;int&amp;gt;   &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt;    &amp;lt;int&amp;gt; &amp;lt;date&amp;gt;     &amp;lt;date&amp;gt;    
## 1 d        1000000 1000000     0     0       12 2008-01-01 2019-01-01
## 
## $factor
## # A tibble: 1 x 8
##   variable  cases      n    na  p_na n_unique ordered counts_tb                 
##   &amp;lt;chr&amp;gt;     &amp;lt;int&amp;gt;  &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt;    &amp;lt;int&amp;gt; &amp;lt;lgl&amp;gt;   &amp;lt;chr&amp;gt;                     
## 1 g           1e6    1e6     0     0        5 FALSE   a_216058, b_205319, ..., ~
## 
## $character
## # A tibble: 1 x 9
##   variable  cases      n    na  p_na n_unique min_chars max_chars counts_tb     
##   &amp;lt;chr&amp;gt;     &amp;lt;int&amp;gt;  &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt;    &amp;lt;int&amp;gt;     &amp;lt;int&amp;gt;     &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;         
## 1 high_low    1e6    1e6     0     0        2         3         4 high_504860, ~
## 
## $logical
## # A tibble: 1 x 8
##   variable   cases       n    na  p_na n_TRUE n_FALSE p_TRUE
##   &amp;lt;chr&amp;gt;      &amp;lt;int&amp;gt;   &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;
## 1 even     1000000 1000000     0     0 500662  499338  0.501
## 
## $numeric
## # A tibble: 2 x 15
##   variable   cases       n    na  p_na  mean    sd    se    p0   p25   p50   p75
##   &amp;lt;chr&amp;gt;      &amp;lt;int&amp;gt;   &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
## 1 y2       1000000 1000000     0     0 100.   10.1 0.01   60.0  93.4  100.  107.
## 2 x1       1000000 1000000     0     0  50.6  28.9 0.029   1    25     50    76 
## # ... with 3 more variables: p100 &amp;lt;dbl&amp;gt;, skew &amp;lt;dbl&amp;gt;, kurt &amp;lt;dbl&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Despite the number of calculations and operations that need to be performed, &lt;code&gt;describe_all()&lt;/code&gt; also runs pretty quickly for this amount of data, taking &lt;em&gt;a second&lt;/em&gt; and using less than 620 MB of RAM to describe 6 columns of various classes with 1,000,000 values each&lt;a href=&#34;#fn12&#34; class=&#34;footnote-ref&#34; id=&#34;fnref12&#34;&gt;&lt;sup&gt;12&lt;/sup&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mark(
  pdata_resampled %&amp;gt;%
    select(d, g, high_low, even, y2, x1) %&amp;gt;% 
    describe_all(),
  
  iterations = 10
) %&amp;gt;% 
  select(median, 
         #bench::mark() also tells us how much memory was used
         mem_alloc)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: Some expressions had a GC in every iteration; so filtering is disabled.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1 x 2
##     median mem_alloc
##   &amp;lt;bch:tm&amp;gt; &amp;lt;bch:byt&amp;gt;
## 1    998ms     619MB&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Again, you can specify any number of grouping variables as unquoted column names that are present in the input data via the &lt;code&gt;...&lt;/code&gt;. You can also selectively describe variables of specific classes using &lt;code&gt;describe_all()&lt;/code&gt;’s “class” argument, which accepts a character vector of options:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;“d”&lt;/strong&gt;: dates&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;“f”&lt;/strong&gt;: factors&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;“c”&lt;/strong&gt;: character&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;“l”&lt;/strong&gt;: logical&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;“n”&lt;/strong&gt;: numeric&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;“all”&lt;/strong&gt;: shortcut for all of the above &amp;amp; syntactically equivalent to c(“d”, “f”, “c”, “l”, “n”)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This can save you time both by avoiding a &lt;code&gt;dplyr::select(where())&lt;/code&gt; layer sometimes and also in terms of execution time (especially on larger datasets), because no unnecessary operations are performed upon columns of non-requested classes.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_resampled %&amp;gt;%
  select(-id) %&amp;gt;% 
  describe_all(g, d, #group by factor variable &amp;quot;g&amp;quot; and date variable &amp;quot;d&amp;quot;
               class = &amp;quot;n&amp;quot;) #only describe numeric variables other than the id column&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 300 x 17
##    g     d          variable cases     n    na  p_na  mean    sd    se    p0
##    &amp;lt;fct&amp;gt; &amp;lt;date&amp;gt;     &amp;lt;chr&amp;gt;    &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 d     2015-01-01 y1       16606 16606     0     0 199.  11.5  0.089 172. 
##  2 d     2015-01-01 y2       16606 16606     0     0  99.5  9.56 0.074  73.4
##  3 d     2015-01-01 x1       16606 16606     0     0  54.0 28.4  0.22    1  
##  4 d     2015-01-01 x2       16606 16606     0     0 151.  26.8  0.208 101  
##  5 d     2015-01-01 x3       16606 16606     0     0 250.  30.6  0.237 201  
##  6 b     2016-01-01 y1       17099 17099     0     0 185.  11.1  0.085 150. 
##  7 b     2016-01-01 y2       17099 17099     0     0 101.  10.2  0.078  74.4
##  8 b     2016-01-01 x1       17099 17099     0     0  51.4 30.0  0.229   2  
##  9 b     2016-01-01 x2       17099 17099     0     0 149.  28.9  0.221 101  
## 10 b     2016-01-01 x3       17099 17099     0     0 253.  29.9  0.228 201  
## # ... with 290 more rows, and 6 more variables: p25 &amp;lt;dbl&amp;gt;, p50 &amp;lt;dbl&amp;gt;,
## #   p75 &amp;lt;dbl&amp;gt;, p100 &amp;lt;dbl&amp;gt;, skew &amp;lt;dbl&amp;gt;, kurt &amp;lt;dbl&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#performance when splitting by 2 variables. 
mark(
  pdata_resampled %&amp;gt;% select(-id) %&amp;gt;% 
    describe_all(g, d, class = &amp;quot;n&amp;quot;), 
  
  iterations = 10) %&amp;gt;% 
  select(median, mem_alloc)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: Some expressions had a GC in every iteration; so filtering is disabled.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1 x 2
##     median mem_alloc
##   &amp;lt;bch:tm&amp;gt; &amp;lt;bch:byt&amp;gt;
## 1    1.59s     994MB&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that if only one description variable class is requested, you’ll get a data frame back instead of a list of data frames. Moreover, despite having to repeat all calculations across the 5 non-id numeric columns in the 1,000,000 row version of &lt;code&gt;pdata&lt;/code&gt; &lt;em&gt;for each of 5 levels of the g factor&lt;/em&gt;, we get all of the results in &lt;em&gt;~1.6 seconds&lt;/em&gt; using ~1 GB of RAM!&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;confidence-intervals&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.4&lt;/span&gt; confidence intervals&lt;/h2&gt;
&lt;p&gt;Confidence intervals are a topic that students (and some seasoned researchers) tend to struggle with, so I’ll cover it here in more detail. In &lt;a href=&#34;https://seeing-theory.brown.edu/frequentist-inference/index.html&#34;&gt;frequentist inference&lt;/a&gt;, a &lt;a href=&#34;https://rpsychologist.com/d3/ci/&#34;&gt;confidence interval (CI)&lt;/a&gt; provides an estimate of the possible values a statistic (AKA “parameter”), such as the mean, could take in the population based on the distribution of values in the observed sample data. It is basically an educated guess about what the population value for the parameter is, based on the observed evidence. Naturally, the more observations you have to work with, the more precise your estimates will be. More concretely, an observed 95% CI for a mean of 1-5 has a 95% probability of containing the true population mean.&lt;/p&gt;
&lt;p&gt;Bootstrapping&lt;a href=&#34;#fn13&#34; class=&#34;footnote-ref&#34; id=&#34;fnref13&#34;&gt;&lt;sup&gt;13&lt;/sup&gt;&lt;/a&gt; is a computational procedure to estimate the sampling distribution for the statistic of interest by sampling from the observed data with replacement and calculating the statistic for each sample. This process is repeated thousands of times, and the observed probability distribution of (re-)sampled statistics is used to define confidence limits for plausible values of the statistic in the underlying population. CIs are difficult to derive analytically for statistics other than the mean, but modern computers make it no trouble at all to use bootstrapping to estimate them.&lt;/p&gt;
&lt;p&gt;In practice, we often estimate a statistic, like the mean, based on a single sample under the &lt;em&gt;assumption&lt;/em&gt; that the true probability distribution of what we are measuring closely approximates a well defined distribution in the &lt;a href=&#34;https://en.wikipedia.org/wiki/Exponential_family&#34;&gt;exponential family&lt;/a&gt;, such as the “normal” (AKA “Gaussian”) distribution for continuous variables. In behavioural research, this “normality” assumption is often reasonable because most psychological traits (e.g. intelligence) tend to be expressed in an approximately normally distributed fashion (e.g. performance on IQ tests). Interestingly, it is also generally reasonable for large sample sizes, due to the &lt;a href=&#34;http://www.biostathandbook.com/normality.html&#34;&gt;central limit theorem (CLT)&lt;/a&gt;. The CLT teaches us that a mean estimated from a sufficiently large random sample of independent and identically distributed values (often abbreviated as “i.i.d.”)&lt;a href=&#34;#fn14&#34; class=&#34;footnote-ref&#34; id=&#34;fnref14&#34;&gt;&lt;sup&gt;14&lt;/sup&gt;&lt;/a&gt; will be approximately normally distributed &lt;em&gt;irrespective&lt;/em&gt; of the shape of the distribution of values in the underlying population. You can see the CLT in action &lt;a href=&#34;https://seeing-theory.brown.edu/probability-distributions/index.html#section3&#34;&gt;here&lt;/a&gt;, which is the best demonstration of it I’ve come across so far. You can typically benefit from the CLT if you have a sample size &lt;a href=&#34;https://statisticsbyjim.com/basics/central-limit-theorem/&#34;&gt;&amp;gt;= 30&lt;/a&gt;, which means that you don’t need to worry as much about violations of normality for large samples as they pertain to the validity of popular tests like the analysis of variance.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;elucidate&lt;/code&gt; helps you get either theory-based CIs for the mean or bootstrapped CIs for other numeric variable summary statistics using the &lt;code&gt;describe_ci()&lt;/code&gt; and &lt;code&gt;describe_ci_all()&lt;/code&gt; functions.&lt;/p&gt;
&lt;p&gt;These functions are also super easy to use. They both return a tibble, with a column indicating the “lower” bound of the CI, the observed statistic, and the “upper” bound of the CI. By default, you’ll get a 95% CI for the mean derived analytically from a normal distribution.&lt;/p&gt;
&lt;p&gt;Generating CIs can take a while for larger vectors especially when bootstrapping is involved, so for this segment of the post we’ll work with the original 12,000-row version of &lt;code&gt;pdata&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata %&amp;gt;% 
  describe_ci(y1)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1 x 3
##   lower  mean upper
##   &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
## 1  153.  154.  154.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To get a CI for another statistic, you set the “stat” argument to the unquoted name of the summary statistic function. For example, to get a 95% CI for the median of y1, we can use:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata %&amp;gt;% 
  describe_ci(y1, stat = median)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1 x 3
##   lower median upper
##   &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
## 1  144.   145.  146.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The CIs for summary statistics other than the mean are obtained using bootstrapping via the &lt;a href=&#34;https://cran.r-project.org/web/packages/boot/boot.pdf&#34;&gt;boot&lt;/a&gt; package that is installed with R. You can modify some key bootstrapping parameters, like the number of replicates or the type of CIs to return, via some additional arguments. Like &lt;code&gt;describe()&lt;/code&gt;, &lt;code&gt;describe_ci()&lt;/code&gt; also accepts any number of unquoted variable names to use as grouping variables via &lt;code&gt;...&lt;/code&gt;. You can also try to speed things up with parallel processing if you have multiple cores on your machine&lt;a href=&#34;#fn15&#34; class=&#34;footnote-ref&#34; id=&#34;fnref15&#34;&gt;&lt;sup&gt;15&lt;/sup&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata %&amp;gt;% 
  describe_ci(y1,
              g, #get the median and bootstrapped CI of y1 for each level of g
              stat = median, 
              #use 5,000 bootstrap replicates instead of the default 2,000
              replicates = 5000,  
              #get a bias-corrected and accelerated CI instead of the default
              #percentile intervals
              ci_type = &amp;quot;bca&amp;quot;, 
              #you can adjust the confidence level via ci_level
              ci_level = 0.9,
              #you can enable parallel processing if you have multiple cores
              parallel = TRUE, 
              #specify the number of cores to use with the cores argument
              #my laptop has 12 logical cores so I&amp;#39;ll use 10 of them
              cores = 10)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 5 x 4
##   g     lower median upper
##   &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
## 1 a      131.   133.  134.
## 2 b      141.   147.  152.
## 3 c      159.   165.  172.
## 4 d      170.   175.  180.
## 5 e      136.   137.  137.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It is worth noting that adding more cores doesn’t necessarily mean things will end up finishing sooner, due to the &lt;a href=&#34;http://parallelcomp.uw.hu/ch05lev1sec1.html#:~:text=The%20time%20spent%20communicating%20data,serial%20components%20in%20a%20program.&#34;&gt;overhead&lt;/a&gt; of coordinating operations across cores.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;describe_ci_all()&lt;/code&gt; gives you confidence intervals for the specified statistic for all numeric columns in the input data frame.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata %&amp;gt;% 
  select(-id) %&amp;gt;% 
  #mean and estimated CI for the mean for each non-id numeric column and each
  #level of g
  describe_ci_all(g) %&amp;gt;% 
  print(n = Inf) #print all rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 25 x 5
##    variable g     lower  mean upper
##    &amp;lt;chr&amp;gt;    &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 x1       e      49.5  50.7  51.8
##  2 x1       c      48.7  49.9  51.1
##  3 x1       d      49.4  50.5  51.7
##  4 x1       a      50.2  51.3  52.4
##  5 x1       b      48.8  50.0  51.1
##  6 x2       e     150.  151.  152. 
##  7 x2       c     149.  150.  151. 
##  8 x2       d     150.  151.  152. 
##  9 x2       a     150.  151.  153. 
## 10 x2       b     149.  150.  151. 
## 11 x3       e     249.  250.  251. 
## 12 x3       c     250.  251.  252. 
## 13 x3       d     249.  250.  251. 
## 14 x3       a     249.  250.  251. 
## 15 x3       b     250.  251.  252. 
## 16 y1       e     134.  135.  136. 
## 17 y1       c     175.  177.  180. 
## 18 y1       d     172.  174.  176. 
## 19 y1       a     133.  134.  135. 
## 20 y1       b     150.  152.  153. 
## 21 y2       e      99.7 100.  101. 
## 22 y2       c      99.5  99.9 100. 
## 23 y2       d      99.7 100.  100. 
## 24 y2       a      99.7 100.  100. 
## 25 y2       b      99.8 100.  101.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This reveals that all groups of the “g” factor in &lt;code&gt;pdata&lt;/code&gt; probably have similar population mean values and are unlikely to represent statistically different populations in terms of the “x1”, “x2”, “x3”, or “y2” variables (because the 95% CIs for the mean of each group overlap with one another). However, the mean “y1” scores of groups “c” &amp;amp; “d” seem to be higher than the means of groups “a”, “b”, &amp;amp; “e”. These results suggest that “y1” is a useful measure for differentiating between some of the “g” factor groups in &lt;code&gt;pdata&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;to-see-look&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;To see, look&lt;/strong&gt;&lt;/h1&gt;
&lt;div id=&#34;anscombes-lesson-numeric-descriptions-can-be-misleading&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.1&lt;/span&gt; Anscombe’s lesson: numeric descriptions can be misleading&lt;/h2&gt;
&lt;p&gt;Anscombe’s &lt;a href=&#34;https://en.wikipedia.org/wiki/Anscombe%27s_quartet&#34;&gt;famous quartet&lt;/a&gt; revealed that we can’t always rely upon a set of summary statistics to learn all of the key features of our data. The quartet is a set of four pairs of variables with nearly identical summary statistic values &amp;amp; linear regression parameters but very different distributions. Since these data come pre-loaded with base R, we can just use them (like &lt;code&gt;mtcars&lt;/code&gt;) by calling the name &lt;code&gt;anscombe&lt;/code&gt;. There are 4 pairs (numbered 1-4) of x and y variables to be examined.&lt;/p&gt;
&lt;p&gt;We’ll first examine these data using &lt;code&gt;describe_all()&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;anscombe %&amp;gt;% 
  #recall that glimpse doesn&amp;#39;t modify the data itself, so we can use it in the
  #middle of a pipeline
  glimpse() %&amp;gt;% 
  describe_all() %&amp;gt;% 
  select(mean:kurt)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 11
## Columns: 8
## $ x1 &amp;lt;dbl&amp;gt; 10, 8, 13, 9, 11, 14, 6, 4, 12, 7, 5
## $ x2 &amp;lt;dbl&amp;gt; 10, 8, 13, 9, 11, 14, 6, 4, 12, 7, 5
## $ x3 &amp;lt;dbl&amp;gt; 10, 8, 13, 9, 11, 14, 6, 4, 12, 7, 5
## $ x4 &amp;lt;dbl&amp;gt; 8, 8, 8, 8, 8, 8, 8, 19, 8, 8, 8
## $ y1 &amp;lt;dbl&amp;gt; 8.04, 6.95, 7.58, 8.81, 8.33, 9.96, 7.24, 4.26, 10.84, 4.82, 5.68
## $ y2 &amp;lt;dbl&amp;gt; 9.14, 8.14, 8.74, 8.77, 9.26, 8.10, 6.13, 3.10, 9.13, 7.26, 4.74
## $ y3 &amp;lt;dbl&amp;gt; 7.46, 6.77, 12.74, 7.11, 7.81, 8.84, 6.08, 5.39, 8.15, 6.42, 5.73
## $ y4 &amp;lt;dbl&amp;gt; 6.58, 5.76, 7.71, 8.84, 8.47, 7.04, 5.25, 12.50, 5.56, 7.91, 6.89&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 8 x 10
##    mean    sd    se    p0   p25   p50   p75  p100   skew   kurt
##   &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;
## 1  9     3.32 1      4     6.5   9    11.5  14     0     -1.2  
## 2  9     3.32 1      4     6.5   9    11.5  14     0     -1.2  
## 3  9     3.32 1      4     6.5   9    11.5  14     0     -1.2  
## 4  9     3.32 1      8     8     8     8    19     3.32  11    
## 5  7.50  2.03 0.613  4.26  6.32  7.58  8.57 10.8  -0.065 -0.535
## 6  7.50  2.03 0.613  3.1   6.70  8.14  8.95  9.26 -1.32   0.846
## 7  7.5   2.03 0.612  5.39  6.25  7.11  7.98 12.7   1.86   4.38 
## 8  7.50  2.03 0.612  5.25  6.17  7.04  8.19 12.5   1.51   3.15&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The means, standard deviations, and standard errors we get suggest that all of the x variables and y variables are quite similar to one another, although the percentiles and skew/kurtosis columns hint that perhaps this isn’t quite true.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;plot_-ting-data-with-elucidate&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.2&lt;/span&gt; &lt;code&gt;plot_*&lt;/code&gt;-ting data with elucidate&lt;/h2&gt;
&lt;p&gt;The best way to know for sure is to look at the data, in this case with scatter plots (for combinations of continous variables). R allows you do plot data in a variety of ways, but for now we’ll focus on the &lt;code&gt;elucidate::plot_*&lt;/code&gt; function set. Each of these accepts a data frame as the 1st argument for compatibility with the pipe operator (&lt;code&gt;%&amp;gt;%&lt;/code&gt;) . &lt;code&gt;plot_scatter()&lt;/code&gt; gives us scatter plots. Required arguments are:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;data = data frame containing the x and y variables&lt;/li&gt;
&lt;li&gt;y = variable to plot on the y-axis&lt;/li&gt;
&lt;li&gt;x = variable to plot on the x-axis&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;We can also opt to add regression lines using the &lt;strong&gt;“regression_line”&lt;/strong&gt; argument, and to get a &lt;em&gt;linear&lt;/em&gt; regression line, we’ll set the &lt;strong&gt;“regression_method”&lt;/strong&gt; argument to &lt;strong&gt;“lm”&lt;/strong&gt; (for &lt;strong&gt;l&lt;/strong&gt;inear &lt;strong&gt;m&lt;/strong&gt;odel). There is also an option to specify the “regression_formula” (more on this in a later post), but if you don’t use it the function will conveniently&lt;a href=&#34;#fn16&#34; class=&#34;footnote-ref&#34; id=&#34;fnref16&#34;&gt;&lt;sup&gt;16&lt;/sup&gt;&lt;/a&gt; tell you which formula is being used by default.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;N.B.&lt;/em&gt; There are quite a few other &lt;code&gt;plot_scatter()&lt;/code&gt; arguments to facilitate customization. You can learn about them via &lt;code&gt;?plot_scatter()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&#34;https://cran.r-project.org/web/packages/gridExtra/vignettes/arrangeGrob.html&#34;&gt;gridExtra&lt;/a&gt; package provides a helpful function called &lt;code&gt;grid.arrange()&lt;/code&gt; that we can use to combine plots into one graphics window/printout as panels.&lt;/p&gt;
&lt;div id=&#34;basic-plot_scatter-with-regression-lines&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.2.1&lt;/span&gt; basic &lt;code&gt;plot_scatter()&lt;/code&gt; with regression lines&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p1 &amp;lt;- anscombe %&amp;gt;% 
  plot_scatter(y = y1, x = x1,
               regression_line = TRUE, regression_method = &amp;quot;lm&amp;quot;)

p2 &amp;lt;- anscombe %&amp;gt;% 
  plot_scatter(y = y2, x = x2,
               regression_line = TRUE, regression_method = &amp;quot;lm&amp;quot;)

p3 &amp;lt;- anscombe %&amp;gt;% 
  plot_scatter(y = y3, x = x3,
               regression_line = TRUE, regression_method = &amp;quot;lm&amp;quot;)

p4 &amp;lt;- anscombe %&amp;gt;% 
  plot_scatter(y = y4, x = x4, 
               regression_line = TRUE, regression_method = &amp;quot;lm&amp;quot;)

#since I&amp;#39;m only planning to use grid.arrange() once, I&amp;#39;ll just call it via the
#pacakge::function() syntax, which lets you access any object (yes, R functions
#are objects) from any package that you have installed without loading the rest
#of the package,
gridExtra::grid.arrange(p1, p2, 
                        p3, p4, 
                        #provide unquoted plot object names to be included
                        ncol = 2) #specify ncol or nrow&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## `geom_smooth()` using formula &amp;#39;y ~ x&amp;#39;
## `geom_smooth()` using formula &amp;#39;y ~ x&amp;#39;
## `geom_smooth()` using formula &amp;#39;y ~ x&amp;#39;
## `geom_smooth()` using formula &amp;#39;y ~ x&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-25-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;I think you’ll agree that these variable combinations are quite a bit different than we might have expected based solely on the descriptive stats! Also, basic linear regression only seems like an appropriate choice for the top left plot comparing y1 to x1. I hope you now have a better appreciation of the value of plotting data as well as the utility of metrics like skewness and kurtosis.&lt;/p&gt;
&lt;p&gt;Other obviously named &lt;code&gt;plot_*&lt;/code&gt; (think “plot_geometry”) convenience functions currently provided&lt;a href=&#34;#fn17&#34; class=&#34;footnote-ref&#34; id=&#34;fnref17&#34;&gt;&lt;sup&gt;17&lt;/sup&gt;&lt;/a&gt; by &lt;code&gt;elucidate&lt;/code&gt; include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;plot_histogram()&lt;/code&gt; = histogram of the binned counts of a continuous variable on the x axis (y is not supplied for this one).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;plot_density()&lt;/code&gt; = basically a smoothed version of the histogram that shows a kernel density estimate of the probability density function for a continuous variable. I tend to prefer this over the histogram because it is easier to overlay a normal distribution over it (both are on the same “probability density” scale).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;plot_box()&lt;/code&gt; = “box-and-whiskers” plot of a continuous variable on the y axis by one or more groups (a nominal variable) on the x axis. As you are hopefully already aware, this shows you the 25th, 50th (i.e. the median), and 75th percentiles for the y-variable as a box with a line through it plus whiskers extending above the 75th percentile to the maximum value (or 1.5 x the IQR) and below the 25th percentile to the minimum value.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;plot_violin()&lt;/code&gt; = violin plot of a continuous variable on the y axis by one or more groups (a nominal variable) on the x axis. Violin plots can reveal the presence of a bimodal distribution (containing multiple density peaks), which isn’t captured in a box plot.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;plot_stat_error()&lt;/code&gt; = plot a summary statistic (via the &lt;strong&gt;“stat”&lt;/strong&gt; argument) for a numeric variable, and error bars (via the &lt;strong&gt;“error”&lt;/strong&gt; argument) representing a measure of uncertainty in it. You can use this to quickly plot the mean +/- standard error or a confidence interval. The other “stat” option currently available is “median”.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The 4 plot types I tend to use most often in my research are the density plot, box-and-whiskers plot, scatter plot (as above), and statistic +/- error bars plot, so for this post I will focus on examples for the remaining 3 we haven’t covered so far.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;basic-plot_density&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.2.2&lt;/span&gt; basic &lt;code&gt;plot_density()&lt;/code&gt;&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_resampled %&amp;gt;% 
  plot_density(x = y1,
               title = &amp;quot;basic density plot&amp;quot;,
               fill = &amp;quot;blue2&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-26-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;customized-plot_density&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.2.3&lt;/span&gt; customized &lt;code&gt;plot_density()&lt;/code&gt;&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata %&amp;gt;% plot_density(x = y1,
                       fill_var = g, #assign a variable to colour
                       alpha = 0.4,
                       fill_var_order = c( &amp;quot;c&amp;quot;, &amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;d&amp;quot;, &amp;quot;e&amp;quot;), #reorder the levels of the colour variable
                       fill_var_labs = c(&amp;quot;control&amp;quot; = &amp;quot;c&amp;quot;, 
                                         &amp;quot;treatment A&amp;quot; = &amp;quot;a&amp;quot;,
                                         &amp;quot;treatment B&amp;quot; = &amp;quot;b&amp;quot;,
                                         &amp;quot;treatment D&amp;quot; = &amp;quot;d&amp;quot;,
                                         &amp;quot;treatment E&amp;quot; = &amp;quot;e&amp;quot;), #recode the colour variable labels
                       fill_var_values = c(&amp;quot;blue3&amp;quot;, 
                                           &amp;quot;red3&amp;quot;, 
                                           &amp;quot;green3&amp;quot;,
                                           &amp;quot;purple3&amp;quot;,
                                           &amp;quot;gold3&amp;quot;), #change the colours from the ggplot2 defaults
                       fill_var_title = &amp;quot;# cylinders&amp;quot;) +
  #the plot_* functions give you ggplots, so you can build upon them using
  #ggplot2 layers if you want (added via &amp;quot;+&amp;quot;, not &amp;quot;%&amp;gt;%&amp;quot;). ggplot2 will be the
  #focus of the next post so don&amp;#39;t worry if it doesn&amp;#39;t make as much sense to you
  #yet
  labs(title = &amp;quot;customized density plot&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-27-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;basic-plot_box&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.2.4&lt;/span&gt; basic &lt;code&gt;plot_box()&lt;/code&gt;&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_resampled %&amp;gt;% 
  plot_box(y1, g, fill = &amp;quot;blue2&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-28-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;customized-plot_box-with-facetting&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.2.5&lt;/span&gt; customized &lt;code&gt;plot_box()&lt;/code&gt; with facetting&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#boxplot showing additional customization
plot_box(data = pdata, #data source
         y = y2, #variable to go on the y-axis
         x = high_low, #variable on the x-axis
         ylab = &amp;quot;y2 score&amp;quot;, #custom y-axis label
         xlab = &amp;quot;treatment dosage&amp;quot;, #custom x-axis label
         x_var_order = c(&amp;quot;low&amp;quot;, &amp;quot;high&amp;quot;),
         fill_var = g, #assign variable am to fill
         fill_var_title = &amp;quot;group&amp;quot;, #relabel the fill variable title in the legend
         fill_var_order = c( &amp;quot;c&amp;quot;, &amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;d&amp;quot;, &amp;quot;e&amp;quot;), #reorder the levels of the colour variable
         fill_var_labs = c(&amp;quot;control&amp;quot; = &amp;quot;c&amp;quot;, 
                           &amp;quot;treatment A&amp;quot; = &amp;quot;a&amp;quot;,
                           &amp;quot;treatment B&amp;quot; = &amp;quot;b&amp;quot;,
                           &amp;quot;treatment D&amp;quot; = &amp;quot;d&amp;quot;,
                           &amp;quot;treatment E&amp;quot; = &amp;quot;e&amp;quot;), #recode the colour variable labels
         fill_var_values = c(&amp;quot;blue3&amp;quot;, 
                             &amp;quot;red3&amp;quot;, 
                             &amp;quot;green3&amp;quot;,
                             &amp;quot;purple3&amp;quot;,
                             &amp;quot;gold3&amp;quot;), #change the colours from the ggplot2 defaults
         facet_var = d,
         theme = &amp;quot;bw&amp;quot;) #specify the theme&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-29-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;basic-plot_stat_error-of-the-mean---se&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.2.6&lt;/span&gt; basic &lt;code&gt;plot_stat_error()&lt;/code&gt; of the mean +/- SE&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#plot a mean with SE error bars
pdata %&amp;gt;% 
  plot_stat_error(y = y1, 
                  x = g,
                  fill = &amp;quot;red&amp;quot;,
                  stat = &amp;quot;mean&amp;quot;, 
                  error = &amp;quot;se&amp;quot;, 
                  theme = &amp;quot;bw&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-30-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#notice that the y-axis default reflects the specified statistic (mean or
#median) and error metric&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This one shows us that the mean y1 scores of groups “c” and “d” are actually a lot higher (over 170) than the mean y1 scores of the other groups with groups “a” and “e” having very similar means around 135 and group “b” falling in between the others at approximately 152. The practical utility of these observed mean differences of course depends on whether or not the distributions are approximately Gaussian. If so, then a plot of the group medians and 95% CIs for them should look similar. However, as shown below, they aren’t (which shouldn’t be a surprise after seeing the density plots above).&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;plot-medians-and-bootstrapped-cis&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.2.7&lt;/span&gt; plot medians and bootstrapped CIs&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#You can also produce a bar graph of group medians with 95% bootstrapped
#confidence interval error bars and easily modify fill, colour, and transparency
pdata[1:100, ] %&amp;gt;% 
  plot_stat_error(y = y1, x = g, 
                  #in case your supervisor asks for it, you can get bars instead
                  #of points... although the default points are recommended in
                  #most cases
                  geom = &amp;quot;bar&amp;quot;, 
                  stat = &amp;quot;median&amp;quot;, 
                  fill = &amp;quot;blue2&amp;quot;,
                  colour = &amp;quot;black&amp;quot;,
                  alpha = 0.7, 
                  replicates = 2000) #controls the number of bootstrapped samples to use&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-31-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;plot-means-or-medians-and-cis-for-multiple-time-points-connected-with-lines&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;6.2.8&lt;/span&gt; plot means or medians and CIs for multiple time points connected with lines&lt;/h3&gt;
&lt;p&gt;Overall means and medians can hide important variations in the data in cases where repeated measurements are taken over time. For example, when we account for observation year in &lt;code&gt;pdata&lt;/code&gt; by plotting the “d” date column on the x-axis and assigning the “g” factor to colour, there is a clear divergence of group median “y1” scores from 2008-2019 that becomes especially noticeable after 2014.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#an example with &amp;quot;longitudinal&amp;quot; data
pdata %&amp;gt;%
  #all dates in the d column are for Jan. 1st. Since only the year is
  #meaningful, we&amp;#39;ll 1st extract the 1st 4 characters from the d column values
  #using a combination of dplyr::mutate() and stringr::str_sub()
  mutate(d = as.factor(str_sub(d, end = 4))) %&amp;gt;% 
  plot_stat_error(y = y1, x = d,
                  xlab = &amp;quot;year&amp;quot;,
                  stat = &amp;quot;median&amp;quot;, #default error metric is a 95% CI
                  colour_var_title = &amp;quot;group&amp;quot;, 
                  colour_var = g,
                  colour_var_order = c( &amp;quot;c&amp;quot;, &amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;d&amp;quot;, &amp;quot;e&amp;quot;),
                  colour_var_labs = c(&amp;quot;control&amp;quot; = &amp;quot;c&amp;quot;, 
                                      &amp;quot;drug A&amp;quot; = &amp;quot;a&amp;quot;,
                                      &amp;quot;drug B&amp;quot; = &amp;quot;b&amp;quot;,
                                      &amp;quot;drug D&amp;quot; = &amp;quot;d&amp;quot;,
                                      &amp;quot;drug E&amp;quot; = &amp;quot;e&amp;quot;), #recode the colour variable labels
                  colour_var_values = c(&amp;quot;blue3&amp;quot;, 
                                        &amp;quot;red3&amp;quot;, 
                                        &amp;quot;green3&amp;quot;,
                                        &amp;quot;purple3&amp;quot;,
                                        &amp;quot;gold3&amp;quot;), #change the colours from the ggplot2 defaults
                  geom = &amp;quot;point&amp;quot;, #either &amp;quot;bar&amp;quot; or &amp;quot;point&amp;quot;. default = &amp;quot;point&amp;quot;
                  p_size = 2, #adjust the size of the points
                  add_lines = T, #connect the points with lines. This is useful for repeated-measures data.
                  alpha = 0.6) #adjusts the transparency&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-32-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Thus, despite the apparent lack of any “g” factor group differences in median y1 scores that we saw before when plotting the overall medians &amp;amp; CIs, there do appear to be substantial group differences at specific time points which are revealed when time is properly considered.&lt;/p&gt;
&lt;p&gt;A number of additional &lt;code&gt;plot_*&lt;/code&gt; functions (e.g. &lt;code&gt;plot_bar()&lt;/code&gt;, &lt;code&gt;plot_line()&lt;/code&gt;, etc.) are in development and will be added to the package as soon as they are ready.&lt;/p&gt;
&lt;p&gt;To see what the basic R colour options are (which I’ve found to be more than sufficient for exploratory purposes), you can use &lt;code&gt;eludicate::colour_options()&lt;/code&gt;, which renders labeled example tiles of the colours in either the “plot” panel of R studio…&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;colour_options_demo.gif&#34; /&gt;&lt;/p&gt;
&lt;p&gt;…or saves them to a PDF file in your working directory using the “print_to_pdf” argument (in case you wanted to print it). By default, this PDF will be called “base_r_colour_options.pdf” but you can change it using the “pdf_name” argument.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;interacting-with-dynamic-data-representations&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;7&lt;/span&gt; &lt;strong&gt;Interacting with dynamic data representations&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;elucidate::static_to_dynamic()&lt;/code&gt; is a convenience wrapper for functions in the &lt;a href=&#34;https://rstudio.github.io/DT/&#34;&gt;DT&lt;/a&gt;, &lt;a href=&#34;https://glin.github.io/reactable/&#34;&gt;reactable&lt;/a&gt; and &lt;a href=&#34;https://plotly.com/r/&#34;&gt;plotly&lt;/a&gt; packages that allow you to convert &lt;em&gt;static&lt;/em&gt; data frames and ggplot2 graphs into &lt;em&gt;dynamic&lt;/em&gt; &lt;code&gt;DataTables/reactables&lt;/code&gt; and &lt;code&gt;plotly&lt;/code&gt; graphs you can interact with. Output from &lt;code&gt;static_to_dynamic()&lt;/code&gt; is displayed in the “Viewer” tab of R studio, rather than the “Plots” tab.&lt;/p&gt;
&lt;p&gt;By default, &lt;code&gt;static_to_dynamic()&lt;/code&gt; will convert a data frame into a JavaScript “DataTable” via the &lt;code&gt;DT::datatable()&lt;/code&gt; function if there are &amp;lt;= 10,000 rows, and a “reactable” via the &lt;code&gt;reactable::reactable()&lt;/code&gt;&lt;a href=&#34;#fn18&#34; class=&#34;footnote-ref&#34; id=&#34;fnref18&#34;&gt;&lt;sup&gt;18&lt;/sup&gt;&lt;/a&gt; function if there are more than 10,000 rows. This is because (in my experience) the current local-processing implementation of &lt;code&gt;datatable()&lt;/code&gt; function tends to run slowly (if at all) for data sets that are larger than this threshold, whereas the &lt;code&gt;reactable&lt;/code&gt; alternative still works reasonably well with larger data sets (at least 100,000 rows)&lt;a href=&#34;#fn19&#34; class=&#34;footnote-ref&#34; id=&#34;fnref19&#34;&gt;&lt;sup&gt;19&lt;/sup&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Either option can be used for data frames with less than 10,000 rows via a &lt;code&gt;reactable&lt;/code&gt; argument (&lt;code&gt;TRUE&lt;/code&gt; = “reactable”/&lt;code&gt;FALSE&lt;/code&gt; = “DT”, default = &lt;code&gt;FALSE&lt;/code&gt;). Both options offer search-based filtering for the entire table or for specific columns, and (multi-)column sorting capabilities.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;datatable()&lt;/code&gt; provides more functionality overall than &lt;code&gt;reactable()&lt;/code&gt;, including Excel-like cell-editing/filling, easier filtering of rows, the ability to rearrange columns by clicking and dragging them, show or hide columns selectively, and options for downloading/copying/printing data. I tend to prefer the &lt;code&gt;DT&lt;/code&gt; version for these features when I’m interacting with smaller tables, like the outputs of the &lt;code&gt;describe*&lt;/code&gt; functions, but if you find that it is loading too slowly on your machine, try the “reactable” = &lt;code&gt;TRUE&lt;/code&gt; argument option instead (which will still be nicer than the base R &lt;code&gt;View()&lt;/code&gt; display).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;static_to_dynamic_DT_demo.gif&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;reactable()&lt;/code&gt; is faster and more efficient than (locally-processed) &lt;code&gt;datatable&lt;/code&gt;’s, so it still works reasonably well for larger datasets. &lt;code&gt;reactable()&lt;/code&gt;, but not &lt;code&gt;datatable()&lt;/code&gt; also allows you to group the table by one or more columns with the “group_by” argument so that you can collapse/expand certain groups of interest with a simple click of the mouse. The row stripes and highlighting are more clearly visible in the &lt;code&gt;reactable()&lt;/code&gt; version as well, and you can also select multiple rows with check boxes to highlight them which can make visually comparing rows of interest a bit easier.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;static_to_dynamic_reactable_demo.gif&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ggplot2&lt;/code&gt; graphs (i.e. the outputs of the &lt;code&gt;plot_*&lt;/code&gt; functions) are converted to interactive &lt;code&gt;plotly&lt;/code&gt; graphs via &lt;code&gt;plotly::ggplotly()&lt;/code&gt;, which lets you pan around the plot, zoom in to different areas of it, highlight a subset of data points, and more.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;static_to_dynamic_plotly_demo.gif&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;correct-data-with-wash_df-recode_errors&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;8&lt;/span&gt; &lt;strong&gt;Correct&lt;/strong&gt; data with &lt;code&gt;wash_df()&lt;/code&gt; &amp;amp; &lt;code&gt;recode_errors()&lt;/code&gt;&lt;/h1&gt;
&lt;p&gt;Although, the main focus of &lt;code&gt;elucidate&lt;/code&gt; is on data exploration, it has a few auxiliary utility functions, &lt;code&gt;recode_errors()&lt;/code&gt; &amp;amp; &lt;code&gt;wash_df()&lt;/code&gt;, which help you replace/remove errors &amp;amp; correct common formatting problems detected during the exploration process.&lt;/p&gt;
&lt;p&gt;To demonstrate their utility, I’ve prepared a messy version of a subset of the &lt;a href=&#34;https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html&#34;&gt;mtcars&lt;/a&gt; dataset that we’ve seen before. Imagine, if you will, that these messy data had been supplied by a collaborator for you to analyse and you hadn’t seen another version of them before.&lt;/p&gt;
&lt;p&gt;Let’s see what we’re dealing with using a combination of &lt;code&gt;glimpse()&lt;/code&gt; , &lt;code&gt;dupes()&lt;/code&gt;, &lt;code&gt;counts_tb_all()&lt;/code&gt;, and &lt;code&gt;describe_all()&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;messy_cars %&amp;gt;% 
  glimpse() %&amp;gt;% 
  dupes() %&amp;gt;% 
  head()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## No column names specified - using all columns.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 44
## Columns: 8
## $ `Miles per gallon` &amp;lt;dbl&amp;gt; 21.0, 21.0, 22.8, 21.4, 18.7, 18.1, 14.3, 24.4, 22.~
## $ `# of cylinders`   &amp;lt;chr&amp;gt; &amp;quot;six&amp;quot;, &amp;quot;six&amp;quot;, &amp;quot;4&amp;quot;, &amp;quot;six&amp;quot;, &amp;quot;8&amp;quot;, &amp;quot;six&amp;quot;, &amp;quot;8&amp;quot;, &amp;quot;4&amp;quot;, &amp;quot;4&amp;quot;~
## $ DISP               &amp;lt;chr&amp;gt; &amp;quot;160&amp;quot;, &amp;quot;160&amp;quot;, &amp;quot;108&amp;quot;, &amp;quot;258&amp;quot;, &amp;quot;N/A&amp;quot;, &amp;quot;225&amp;quot;, &amp;quot;N/A&amp;quot;, &amp;quot;1~
## $ hp                 &amp;lt;dbl&amp;gt; 110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123,~
## $ wt                 &amp;lt;dbl&amp;gt; 2.620, 2.875, 2.320, 3.215, 3.440, 3.460, 3.570, 3.~
## $ gear               &amp;lt;chr&amp;gt; &amp;quot;four&amp;quot;, &amp;quot;four&amp;quot;, &amp;quot;four&amp;quot;, &amp;quot;3&amp;quot;, &amp;quot;3&amp;quot;, &amp;quot;3&amp;quot;, &amp;quot;3&amp;quot;, &amp;quot;four&amp;quot;,~
## $ am                 &amp;lt;dbl&amp;gt; 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ~
## $ notes              &amp;lt;lgl&amp;gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,~&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Duplicated rows detected! 21 of 44 rows in the input data have multiple copies.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##   Miles per gallon # of cylinders DISP  hp   wt gear am notes n_copies
## 1             15.0              8  N/A 999 3.57    5  1    NA        4
## 2             15.0              8  N/A 999 3.57    5  1    NA        4
## 3             15.0              8  N/A 999 3.57    5  1    NA        4
## 4             15.0              8  N/A 999 3.57    5  1    NA        4
## 5             15.5              8  N/A 150 3.52    3  0    NA        3
## 6             15.5              8  N/A 150 3.52    3  0    NA        3&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;glimpse()&lt;/code&gt; reveals some inconveniently formatted column names, which (in R) shouldn’t contain spaces or begin with non-letter characters. You also want a column to have consistently formatted values, not like the mix of string and numeric values we are seeing under the number of cylinders column. &lt;code&gt;copies(filter = &#34;dupes&#34;)&lt;/code&gt; also notifies us that 21 of the 44 rows in &lt;code&gt;messy_cars&lt;/code&gt; are not unique.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;counts_tb_all(messy_cars, n = 5)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $`Miles per gallon`
##   top_v top_n bot_v bot_n
## 1    15     4  13.3     1
## 2  15.2     3  14.3     1
## 3  15.5     3  14.7     1
## 4  19.2     3  15.8     1
## 5    21     3  16.4     1
## 
## $`# of cylinders`
##   top_v top_n bot_v bot_n
## 1     8    21   six     9
## 2     4    14     4    14
## 3   six     9     8    21
## 4  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;
## 5  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;
## 
## $DISP
##   top_v top_n bot_v bot_n
## 1   N/A    17   108     1
## 2 275.8     4 120.1     1
## 3   160     3 120.3     1
## 4 146.7     2   121     1
## 5 167.6     2 140.8     1
## 
## $hp
##   top_v top_n bot_v bot_n
## 1   110     4   109     1
## 2   150     4   113     1
## 3   175     4   205     1
## 4   180     4   215     1
## 5   999     4   230     1
## 
## $wt
##   top_v top_n bot_v bot_n
## 1    -1     5  2.14     1
## 2  3.57     5  2.32     1
## 3  3.44     3 2.465     1
## 4  3.52     3  2.77     1
## 5   2.2     2  2.78     1
## 
## $gear
##   top_v top_n bot_v bot_n
## 1     3    20     4     2
## 2  four    14     5     8
## 3     5     8  four    14
## 4     4     2     3    20
## 5  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;
## 
## $am
##   top_v top_n bot_v bot_n
## 1     0    25     1    19
## 2     1    19     0    25
## 3  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;
## 4  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;
## 5  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;
## 
## $notes
##   top_v top_n bot_v bot_n
## 1                        
## 2  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;
## 3  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;
## 4  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;
## 5  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;  &amp;lt;NA&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;counts_tb_all()&lt;/code&gt; tells us that the “# of cylinders” column uses numeric coding for all 4 and 8 cylinder cars but the string “six” for all 6 cylinder cars, a problem that also affects some entries of “four” in the “gears” column. It also shows us an impossible value of “-1” for the car’s weight (“wt”) in 5 cases, 14 invalid &lt;code&gt;N/A&lt;/code&gt; values in the “DISP” column (these should be simply &lt;code&gt;NA&lt;/code&gt; or missing altogether).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;describe_all(messy_cars, 
             output = &amp;quot;dt&amp;quot;) #so all output is printed&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $character
##          variable cases  n na p_na n_unique min_chars max_chars
## 1: # of cylinders    44 44  0    0        3         1         3
## 2:           DISP    44 44  0    0       18         2         5
## 3:           gear    44 44  0    0        4         1         4
##                             counts_tb
## 1:                  8_21, 4_14, six_9
## 2: N/A_17, 275.8_4, ..., 79_1, 95.1_1
## 3:            3_20, four_14, 5_8, 4_2
## 
## $logical
##    variable cases n na p_na n_TRUE n_FALSE p_TRUE
## 1:    notes    44 0 44    1      0       0    NaN
## 
## $numeric
##            variable cases  n na p_na    mean      sd     se   p0   p25    p50
## 1: Miles per gallon    44 44  0    0  20.070   6.169  0.930 10.4 15.20  18.95
## 2:               hp    44 44  0    0 214.045 257.074 38.755 52.0 96.50 136.50
## 3:               wt    44 44  0    0   2.907   1.585  0.239 -1.0  2.62   3.44
## 4:               am    44 44  0    0   0.432   0.501  0.076  0.0  0.00   0.00
##       p75    p100   skew   kurt
## 1:  22.80  33.900  0.855  0.006
## 2: 180.00 999.000  2.707  6.114
## 3:   3.57   5.424 -1.512  2.195
## 4:   1.00   1.000  0.285 -2.012&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;describe_all()&lt;/code&gt; reveals two further problems, a maximum value of 999 (likely representing a data entry error or surrogate value for missingness) under the “hp” column and a completely empty “notes” column. These kinds of inconsistencies and errors are common in datasets where multiple individuals have entered the data manually, e.g. into a shared excel file.&lt;/p&gt;
&lt;p&gt;I was the one who messed these data up so I happen to know in this case that “999” and “-1” are erroneous values, but if you see something like this in data that were collected/entered by someone else, you should ask them about it before proceeding.&lt;/p&gt;
&lt;p&gt;Fortunately the problems we’re seeing aren’t tough to deal with (for the most part) with a few &lt;code&gt;elucidate&lt;/code&gt; helper functions: &lt;code&gt;copies(filter = &#34;first&#34;)&lt;/code&gt;, &lt;code&gt;wash_df()&lt;/code&gt;, and &lt;code&gt;recode_errors()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;As you saw earlier, &lt;code&gt;copies(filter = &#34;first&#34;)&lt;/code&gt; drops the duplicated rows for us, solving one problem. We’ll assign it to a new object, “fixed_cars” which will hopefully converge to the original mtcars data structure as we apply these cleaning functions to it.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;fixed_cars &amp;lt;- messy_cars %&amp;gt;% copies(filter = &amp;quot;first&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## No column names specified - using all columns.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;recode_errors()&lt;/code&gt; function accepts a vector of erroneous values to replace with a single value, where the default is &lt;code&gt;NA&lt;/code&gt; (but this can be changed via the “replacement” argument). It will also replace “error” argument matches found in any cell in the input data across all rows and columns, but you can limit the search to specific rows or columns by passing a character, logical, or numeric vector of indices to the “rows” and/or “cols” arguments. It accepts a data frame or vector as input, so it also works within &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#mutate&#34;&gt;dplyr::mutate()&lt;/a&gt;. In this case, we can use &lt;code&gt;recode_errors()&lt;/code&gt; to fix many of the problems present in &lt;code&gt;messy_cars&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;fixed_cars &amp;lt;- fixed_cars %&amp;gt;% 
  recode_errors(errors = &amp;quot;six&amp;quot;, replacement = &amp;quot;6&amp;quot;) %&amp;gt;%
  recode_errors(&amp;quot;four&amp;quot;, &amp;quot;4&amp;quot;) %&amp;gt;% 
  #after &amp;quot;data&amp;quot;, args. 2 and 3 are &amp;quot;errors&amp;quot; and &amp;quot;replacement&amp;quot;
  recode_errors(c(-1, 999), 
                #default replacement value is NA so we don&amp;#39;t need to specify it
                cols = c(&amp;quot;hp&amp;quot;, &amp;quot;wt&amp;quot;)) %&amp;gt;% #choose columns to recode
  recode_errors(&amp;quot;N/A&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;wash_df()&lt;/code&gt; is a convenience wrapper for several functions in the &lt;a href=&#34;https://github.com/sfirke/janitor&#34;&gt;janitor&lt;/a&gt;, &lt;a href=&#34;https://readr.tidyverse.org/articles/readr.html&#34;&gt;readr&lt;/a&gt;, and &lt;a href=&#34;https://tibble.tidyverse.org/&#34;&gt;tibble&lt;/a&gt; packages that help you clean up the formatting of your data and drop empty rows and/or columns. Specifically, by default it will (in this order):&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.&lt;/strong&gt; Remove completely empty rows and columns using &lt;code&gt;janitor::remove_empty()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.&lt;/strong&gt; Convert all column names to “snake_case” format using &lt;code&gt;janitor::clean_names(case = &#34;snake&#34;)&lt;/code&gt;. The “case” argument allows you to choose a different case to use instead if you want. See the &lt;code&gt;janitor::clean_names()&lt;/code&gt; documentation for details.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.&lt;/strong&gt; re-parse the classes of all columns in the data with &lt;code&gt;readr::parse_guess()&lt;/code&gt;. Such parsing normally happens when you import data using &lt;code&gt;readr::read_csv()&lt;/code&gt; and other importing functions, and now you can re-parse the columns on data that are already loaded into R just as easily. This can save you from having to reclassify columns one at a time with the “as.class”-set of functions (&lt;code&gt;as.numeric()&lt;/code&gt;, &lt;code&gt;as.character()&lt;/code&gt;, etc.).&lt;/p&gt;
&lt;p&gt;Each of these operations can also be modified or disabled with &lt;code&gt;wash_df()&lt;/code&gt; arguments.&lt;/p&gt;
&lt;p&gt;Optionally, you can also convert the row names to a column with the “rownames_to_column” argument, or a column to row names with the “column_to_rownames” argument. These each use &lt;code&gt;tibble&lt;/code&gt; package functions with the same names as the &lt;code&gt;wash_df()&lt;/code&gt; arguments.&lt;/p&gt;
&lt;p&gt;It helps us clean up the &lt;code&gt;messy_cars&lt;/code&gt; data by standardizing formatting of column names, dropping the empty “notes” column, and updating the class of the “number_of_cylinders”, “disp”, and “gear” columns from character to numeric to reflect the character-to-numeric value recoding above.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;fixed_cars &amp;lt;- fixed_cars %&amp;gt;% wash_df()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Let’s see how it turned out by comparison to the relevant columns from the original &lt;code&gt;mtcars&lt;/code&gt; data after renaming the “miles_per_gallon” and “number_of_cylinders” columns to match their original &lt;code&gt;mtcars&lt;/code&gt; names (“mpg” and “cyl”).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;fixed_cars %&amp;gt;% 
  rename(mpg = miles_per_gallon, cyl = number_of_cylinders) %&amp;gt;% glimpse()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 32
## Columns: 7
## $ mpg  &amp;lt;dbl&amp;gt; 21.0, 21.0, 22.8, 21.4, 18.7, 18.1, 14.3, 24.4, 22.8, 19.2, 17.8,~
## $ cyl  &amp;lt;dbl&amp;gt; 6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 8, 8, 8, 8, 8, 4, 4, 4, 4, 8,~
## $ disp &amp;lt;dbl&amp;gt; 160.0, 160.0, 108.0, 258.0, NA, 225.0, NA, 146.7, 140.8, 167.6, 1~
## $ hp   &amp;lt;dbl&amp;gt; 110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123, 180, 180, 180~
## $ wt   &amp;lt;dbl&amp;gt; 2.620, 2.875, 2.320, 3.215, 3.440, 3.460, 3.570, 3.190, 3.150, 3.~
## $ gear &amp;lt;dbl&amp;gt; 4, 4, 4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3, 3,~
## $ am   &amp;lt;dbl&amp;gt; 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0,~&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;select(mtcars, mpg:hp, wt, gear, am) %&amp;gt;% glimpse()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 32
## Columns: 7
## $ mpg  &amp;lt;dbl&amp;gt; 21.0, 21.0, 22.8, 21.4, 18.7, 18.1, 14.3, 24.4, 22.8, 19.2, 17.8,~
## $ cyl  &amp;lt;dbl&amp;gt; 6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 8, 8, 8, 8, 8, 4, 4, 4, 4, 8,~
## $ disp &amp;lt;dbl&amp;gt; 160.0, 160.0, 108.0, 258.0, 360.0, 225.0, 360.0, 146.7, 140.8, 16~
## $ hp   &amp;lt;dbl&amp;gt; 110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123, 180, 180, 180~
## $ wt   &amp;lt;dbl&amp;gt; 2.620, 2.875, 2.320, 3.215, 3.440, 3.460, 3.570, 3.190, 3.150, 3.~
## $ gear &amp;lt;dbl&amp;gt; 4, 4, 4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3, 3,~
## $ am   &amp;lt;dbl&amp;gt; 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0,~&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Not bad. Most aspects match the original, with a couple of mismatches in cases where the “errors” I introduced (&lt;code&gt;N/A&lt;/code&gt;, &lt;code&gt;-1&lt;/code&gt;, and &lt;code&gt;999&lt;/code&gt;), and then subsequently deleted (set to &lt;code&gt;NA&lt;/code&gt;), were meaningful values in the original dataset that I “corrupted” in preparing &lt;code&gt;messy_cars&lt;/code&gt; for pedagogical purposes. In this case the true data are available to us for comparison so we could restore the correct values from the uncorrupted backup source. However, in real projects you may be less fortunate and find yourself in the position of having to omit&lt;a href=&#34;#fn20&#34; class=&#34;footnote-ref&#34; id=&#34;fnref20&#34;&gt;&lt;sup&gt;20&lt;/sup&gt;&lt;/a&gt; anomalous values because doing so interferes less with your ability to get useful results from the data than leaving them in would. Let this example also serve as a lesson of &lt;em&gt;how important it is to be careful with your data at all stages, and back it up, starting on day 1 of collection/entry&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;performance-evaluations&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;9&lt;/span&gt; &lt;strong&gt;Performance Evaluations&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;To show you how well &lt;code&gt;elucidate&lt;/code&gt; functions perform relative to the closest alternatives, we’ll do a few memory utilization and speed comparisons with &lt;code&gt;bench::mark()&lt;/code&gt;. For the sake of brevity, we’ll focus on evaluating two of the most computationally demanding &lt;code&gt;elucidate&lt;/code&gt; functions: &lt;code&gt;dupes()&lt;/code&gt; and &lt;code&gt;describe_all()&lt;/code&gt;. We’ll also increase the number of iterations from 10 to 25 for improved benchmarking reliability.&lt;/p&gt;
&lt;div id=&#34;dupes-vs-janitorget_dupes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;9.1&lt;/span&gt; &lt;code&gt;dupes()&lt;/code&gt; vs &lt;code&gt;janitor::get_dupes()&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;First, I’ll apply &lt;code&gt;dupes()&lt;/code&gt; and it’s closest non-elucidate counterpart, &lt;code&gt;janitor::get_dupes()&lt;/code&gt;, to &lt;code&gt;pdata_resampled&lt;/code&gt; when a couple of search columns are specified and standardize the formatting of the output to show that they yield equivalent results.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;a &amp;lt;- dupes(pdata_resampled, d, id) %&amp;gt;%
  #remainder of pipeline just serves to standardize the output format
  select(d, id, dupe_count = n_copies, everything()) %&amp;gt;%
  arrange(d, id, dupe_count) %&amp;gt;%
  wash_df() 

glimpse(a)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 1,000,000
## Columns: 11
## $ d          &amp;lt;date&amp;gt; 2008-01-01, 2008-01-01, 2008-01-01, 2008-01-01, 2008-01-01~
## $ id         &amp;lt;dbl&amp;gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,~
## $ dupe_count &amp;lt;dbl&amp;gt; 67, 67, 67, 67, 67, 67, 67, 67, 67, 67, 67, 67, 67, 67, 67,~
## $ g          &amp;lt;chr&amp;gt; &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;, &amp;quot;e&amp;quot;,~
## $ high_low   &amp;lt;chr&amp;gt; &amp;quot;high&amp;quot;, &amp;quot;high&amp;quot;, &amp;quot;high&amp;quot;, &amp;quot;high&amp;quot;, &amp;quot;high&amp;quot;, &amp;quot;high&amp;quot;, &amp;quot;high&amp;quot;, &amp;quot;hi~
## $ even       &amp;lt;lgl&amp;gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL~
## $ y1         &amp;lt;dbl&amp;gt; 106.2633, 106.2633, 106.2633, 106.2633, 106.2633, 106.2633,~
## $ y2         &amp;lt;dbl&amp;gt; 117.9265, 117.9265, 117.9265, 117.9265, 117.9265, 117.9265,~
## $ x1         &amp;lt;dbl&amp;gt; 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59,~
## $ x2         &amp;lt;dbl&amp;gt; 116, 116, 116, 116, 116, 116, 116, 116, 116, 116, 116, 116,~
## $ x3         &amp;lt;dbl&amp;gt; 248, 248, 248, 248, 248, 248, 248, 248, 248, 248, 248, 248,~&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;b &amp;lt;- get_dupes(pdata_resampled, d, id) %&amp;gt;%
  wash_df()

all.equal(a, b)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Good, now we can use &lt;a href=&#34;https://github.com/r-lib/bench&#34;&gt;bench::mark()&lt;/a&gt; to compare the performance of &lt;code&gt;dupes()&lt;/code&gt; to
&lt;code&gt;janitor::get_dupes()&lt;/code&gt; when checking for duplicates based on a single variable (column “d” in this case).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bm &amp;lt;- bench::mark(
  dupes(pdata_resampled, d),
  get_dupes(pdata_resampled, d), 
  iterations = 25,
  check = FALSE 
  #we won&amp;#39;t check for equal output structures here so the other formatting
  #steps from before don&amp;#39;t need to be included in the timing
)

bm %&amp;gt;% 
  select(expression, median, mem_alloc)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 2 x 3
##   expression                      median mem_alloc
##   &amp;lt;bch:expr&amp;gt;                    &amp;lt;bch:tm&amp;gt; &amp;lt;bch:byt&amp;gt;
## 1 dupes(pdata_resampled, d)        106ms     142MB
## 2 get_dupes(pdata_resampled, d)    119ms     184MB&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(bm)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-42-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dupes()&lt;/code&gt; is slightly faster when only checking 1 column. It also uses less memory.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;N.B.&lt;/strong&gt; If you’re working with a very large dataset you can speed things up quite a bit by setting the &lt;code&gt;dupes()&lt;/code&gt; function’s “sort_by_copies” argument to &lt;code&gt;FALSE&lt;/code&gt; to skip the time-consuming sorting step…&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bm &amp;lt;- bench::mark(
  dupes(pdata_resampled, d, 
        sort_by_copies = FALSE), #disable sorting by duplicates to maximize speed
  get_dupes(pdata_resampled, d), 
  iterations = 25,
  check = FALSE 
  #we won&amp;#39;t check for equal output structures here so the other formatting
  #steps from before don&amp;#39;t need to be included in the timing
)

bm %&amp;gt;% 
  select(expression, median, mem_alloc)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 2 x 3
##   expression                                          median mem_alloc
##   &amp;lt;bch:expr&amp;gt;                                        &amp;lt;bch:tm&amp;gt; &amp;lt;bch:byt&amp;gt;
## 1 dupes(pdata_resampled, d, sort_by_copies = FALSE)   61.8ms     130MB
## 2 get_dupes(pdata_resampled, d)                      116.7ms     184MB&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(bm)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-43-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;This reduces the median run time of &lt;code&gt;dupes()&lt;/code&gt; by around 40% in this case. As far as I am aware, there isn’t a similar option for &lt;code&gt;get_dupes()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;What happens when we try to search for duplicates using more than one column?&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bm2 &amp;lt;- bench::mark(
  dupes(pdata_resampled, high_low, g),
  get_dupes(pdata_resampled, high_low, g), 
  iterations = 25, 
  check = FALSE
)

bm2 %&amp;gt;% 
  select(expression, median, mem_alloc)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 2 x 3
##   expression                                median mem_alloc
##   &amp;lt;bch:expr&amp;gt;                              &amp;lt;bch:tm&amp;gt; &amp;lt;bch:byt&amp;gt;
## 1 dupes(pdata_resampled, high_low, g)      74.74ms     143MB
## 2 get_dupes(pdata_resampled, high_low, g)    1.18s     184MB&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(bm2)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-44-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Now the difference is much more noticeable (~64 milliseconds vs. ~1.1 seconds; over a &lt;em&gt;17-fold&lt;/em&gt; speedup in favour of &lt;code&gt;dupes()&lt;/code&gt;!) and &lt;code&gt;dupes()&lt;/code&gt; still uses less memory.&lt;/p&gt;
&lt;p&gt;What if we condition the search upon all 10 columns (the default behaviour for each function if no variables are specified to base the search on using the &lt;code&gt;...&lt;/code&gt; argument)?&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bm3 &amp;lt;- bench::mark(
  dupes(pdata_resampled),
  get_dupes(pdata_resampled), 
  iterations = 25,
  check = FALSE
)

bm3 %&amp;gt;% 
  select(expression, median, mem_alloc) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 2 x 3
##   expression                   median mem_alloc
##   &amp;lt;bch:expr&amp;gt;                 &amp;lt;bch:tm&amp;gt; &amp;lt;bch:byt&amp;gt;
## 1 dupes(pdata_resampled)     175.72ms     142MB
## 2 get_dupes(pdata_resampled)    2.09s     237MB&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(bm3)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-45-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Here the speed difference is smaller but &lt;code&gt;dupes()&lt;/code&gt; is still over an order of magnitude faster. &lt;code&gt;get_dupes()&lt;/code&gt; also uses more memory but, surprisingly, &lt;code&gt;dupes()&lt;/code&gt; doesn’t at all.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;describe_all-vs.-skimrskim&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;9.2&lt;/span&gt; &lt;code&gt;describe_all()&lt;/code&gt; vs. &lt;code&gt;skimr::skim()&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;The only other R function that I’m aware of which is comparable to &lt;code&gt;describe_all()&lt;/code&gt; is &lt;code&gt;skimr::skim()&lt;/code&gt;. To describe multiple columns of a data frame within each level of a grouping variable with &lt;code&gt;skim()&lt;/code&gt;, we need to pass it through a &lt;code&gt;dplyr::group_by()&lt;/code&gt; layer first. To simplify the output a bit we’ll just start with “g” as a grouping variable.&lt;/p&gt;
&lt;p&gt;I’ll start by showing you what the output of &lt;code&gt;skim()&lt;/code&gt; looks like.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pdata_resampled %&amp;gt;%
  select(g, y1, d, even) %&amp;gt;% #just to limit printed output
  group_by(g) %&amp;gt;% 
  skimr::skim()&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;caption&gt;&lt;span id=&#34;tab:unnamed-chunk-46&#34;&gt;Table 9.1: &lt;/span&gt;Data summary&lt;/caption&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Name&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Piped data&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Number of rows&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1000000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Number of columns&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;_______________________&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Column type frequency:&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Date&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;logical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;numeric&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;________________________&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Group variables&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;g&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Variable type: Date&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;skim_variable&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;g&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;n_missing&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;complete_rate&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;min&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;max&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;median&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;n_unique&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;d&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;a&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2008-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2019-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2014-01-01&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;d&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;b&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2008-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2019-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2013-01-01&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;d&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;c&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2008-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2019-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2014-01-01&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;d&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;d&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2008-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2019-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2014-01-01&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;d&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;e&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2008-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2019-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2013-01-01&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;12&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Variable type: logical&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;skim_variable&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;g&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;n_missing&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;complete_rate&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;mean&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;count&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;even&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;a&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0.50&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;FAL: 109047, TRU: 107011&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;even&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;b&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0.56&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;TRU: 115207, FAL: 90112&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;even&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;c&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0.42&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;FAL: 106647, TRU: 78088&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;even&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;d&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0.55&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;TRU: 108896, FAL: 88888&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;even&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;e&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0.47&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;FAL: 104644, TRU: 91460&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Variable type: numeric&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;skim_variable&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;g&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;n_missing&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;complete_rate&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;mean&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;sd&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;p0&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;p25&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;p50&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;p75&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;p100&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;hist&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;y1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;a&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;133.98&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;25.75&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;75.86&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;112.24&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;132.56&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;156.23&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;202.22&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;▂▇▆▆▁&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;y1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;b&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;151.62&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;37.83&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;74.35&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;117.82&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;145.74&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;187.91&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;247.29&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;▃▇▃▇▁&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;y1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;c&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;177.35&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;57.00&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;77.02&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;126.68&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;165.83&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;232.25&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;289.24&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;▅▇▃▆▅&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;y1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;d&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;174.25&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;43.79&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;69.22&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;137.83&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;175.44&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;214.06&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;268.21&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;▂▆▆▇▂&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;y1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;e&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;134.81&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;18.61&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;75.10&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;122.66&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;136.63&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;148.35&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;186.97&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;▁▃▇▇▁&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Next, I’ll evaluate the performance of both functions using the factor “g” as a grouping variable and requesting descriptions of the other 9 columns in &lt;code&gt;pdata_resampled&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bm1 &amp;lt;- mark(
  #describe_all() version
  describe_all(pdata_resampled, g), 
  
  #skimr::skim() version
  skimr::skim(group_by(pdata_resampled, g)), 
  
  iterations = 25,
  #the output isn&amp;#39;t exactly the same so we disable the check argument
  check = FALSE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: Some expressions had a GC in every iteration; so filtering is disabled.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bm1 %&amp;gt;% 
  select(expression, median, mem_alloc)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 2 x 3
##   expression                                  median mem_alloc
##   &amp;lt;bch:expr&amp;gt;                                &amp;lt;bch:tm&amp;gt; &amp;lt;bch:byt&amp;gt;
## 1 describe_all(pdata_resampled, g)             1.91s    1.32GB
## 2 skimr::skim(group_by(pdata_resampled, g))    2.41s    2.12GB&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bm1 %&amp;gt;% plot()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-47-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Aesthetically, &lt;code&gt;skim()&lt;/code&gt; does give us some nicely formatted &amp;amp; stylish output when used in R markdown &lt;a href=&#34;#fn21&#34; class=&#34;footnote-ref&#34; id=&#34;fnref21&#34;&gt;&lt;sup&gt;21&lt;/sup&gt;&lt;/a&gt;, but we could achieve something similar by simply passing the outputs of &lt;code&gt;describe*&lt;/code&gt; functions to &lt;code&gt;static_to_dynamic()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;In terms of performance, we can see that &lt;code&gt;describe_all()&lt;/code&gt; runs ~28% faster and uses ~60% less memory when a grouping variable with a handful of levels is specified (similar in terms of scale to most experimental designs with a few treatment groups). &lt;code&gt;describe_all()&lt;/code&gt; also gives you &lt;em&gt;more&lt;/em&gt; information (for numeric variables: se, skew, kurtosis, proportion of values that are missing). &lt;code&gt;skim()&lt;/code&gt; does produce in-line mini-histograms for numeric variables, but I find the resolution of these to be too low to be useful and opt to instead rely on a combination of skewness, kurtosis, and dedicated plotting functions.&lt;/p&gt;
&lt;p&gt;What about a situation where you want to split the descriptive summary by more than one grouping variable? When we ask for a description of &lt;code&gt;pdata_resampled&lt;/code&gt; grouped by both “g” and “d” with a total of 60 level combinations, now the speed gap between &lt;code&gt;skim()&lt;/code&gt; and &lt;code&gt;describe_all()&lt;/code&gt; has shifted to a 5% advantage in favour of &lt;code&gt;skim()&lt;/code&gt;, although &lt;code&gt;describe_all()&lt;/code&gt; is still using substantially less RAM. This result suggests that &lt;code&gt;skim()&lt;/code&gt; may scale better in terms of speed, but not memory efficiency, for situations when you need to describe a very large number of groups/partitions (e.g. splitting by many geographic areas like the thousands of US zip codes).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bm1 &amp;lt;- mark(
  describe_all(pdata_resampled, d, g), 
  skimr::skim(group_by(pdata_resampled, d, g)),
  iterations = 25,
  check = FALSE) #the output isn&amp;#39;t exactly the same so we disable the check argument&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: Some expressions had a GC in every iteration; so filtering is disabled.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bm1 %&amp;gt;% 
  select(expression, median, mem_alloc)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 2 x 3
##   expression                                     median mem_alloc
##   &amp;lt;bch:expr&amp;gt;                                   &amp;lt;bch:tm&amp;gt; &amp;lt;bch:byt&amp;gt;
## 1 describe_all(pdata_resampled, d, g)             2.52s    1.29GB
## 2 skimr::skim(group_by(pdata_resampled, d, g))    2.44s    1.99GB&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bm1 %&amp;gt;% plot()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-48-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;What about the non-grouped version that you’ll probably use most often?&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bm1 &amp;lt;- mark(
  describe_all(pdata_resampled), 
  skimr::skim(pdata_resampled), 
  iterations = 25,
  check = FALSE) #the output isn&amp;#39;t exactly the same so we disable the check argument&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: Some expressions had a GC in every iteration; so filtering is disabled.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bm1 %&amp;gt;% 
  select(expression, median, mem_alloc)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 2 x 3
##   expression                      median mem_alloc
##   &amp;lt;bch:expr&amp;gt;                    &amp;lt;bch:tm&amp;gt; &amp;lt;bch:byt&amp;gt;
## 1 describe_all(pdata_resampled)    1.73s    1.33GB
## 2 skimr::skim(pdata_resampled)      2.1s    2.04GB&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bm1 %&amp;gt;% plot()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-49-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Here &lt;code&gt;describe_all()&lt;/code&gt; clearly comes out on top again, finishing ~22% faster and using ~53% less RAM than &lt;code&gt;skim()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;That’s it! Hopefully you’ll find that &lt;code&gt;elucidate&lt;/code&gt; makes exploratory data analysis in R a breeze when you try it out for yourself.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;navigation&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;10&lt;/span&gt; &lt;strong&gt;Navigation&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Click &lt;a href=&#34;https://craig.rbind.io/post/2020-10-10-asgr-2-5-dates/&#34;&gt;here&lt;/a&gt; to go back to the previous post on dates and times. Click &lt;a href=&#34;https://craig.rbind.io/post/2021-05-17-asgr-3-1-data-visualization/&#34;&gt;here&lt;/a&gt; to go to the next one, on intermediate data visualization with the the popular tidyverse package &lt;a href=&#34;https://ggplot2.tidyverse.org/&#34;&gt;ggplot2&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;notes&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;11&lt;/span&gt; &lt;strong&gt;Notes&lt;/strong&gt;&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;I acknowledge and express my deep gratitude to the many authors of the &lt;a href=&#34;https://www.tidyverse.org/&#34;&gt;tidyverse&lt;/a&gt; packages, &lt;a href=&#34;https://rdatatable.gitlab.io/data.table/index.html&#34;&gt;data.table&lt;/a&gt;, and the functions of other dependency packages which were used to build &lt;code&gt;elucidate&lt;/code&gt;, since without their effort and ingenuity &lt;code&gt;elucidate&lt;/code&gt; would mostly have remained a collection of ideas instead of functions.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;There is one other major component of &lt;code&gt;elucidate&lt;/code&gt; scheduled to be developed starting sometime next quarter, which will facilitate clustering and dimensionality reduction (i.e. unsupervised machine learning), via a &lt;code&gt;profile*&lt;/code&gt; set of functions. After that component has been successfully integrated we’ll try to submit the package to CRAN. I look forward to writing another blog post about those new functions when they’re ready 😄.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thank you for visiting my blog. I welcome any suggestions for future posts, comments or other feedback you might have. Feedback from beginners and science students/trainees (or with them in mind) is especially helpful in the interest of making this guide even better for them.&lt;/p&gt;
&lt;p&gt;This blog is something I do as a volunteer in my free time. If you’ve found it helpful and want to give back, &lt;a href=&#34;https://www.buymeacoffee.com/huttoncp&#34;&gt;coffee donations&lt;/a&gt; would be appreciated.&lt;/p&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js&#34; data-name=&#34;bmc-button&#34; data-slug=&#34;huttoncp&#34; data-color=&#34;#FF5F5F&#34; data-emoji=&#34;&#34;  data-font=&#34;Cookie&#34; data-text=&#34;Buy me a coffee&#34; data-outline-color=&#34;#000000&#34; data-font-color=&#34;#ffffff&#34; data-coffee-color=&#34;#FFDD00&#34; &gt;&lt;/script&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;R (or python) programming really is one of those &lt;em&gt;transferable research skills&lt;/em&gt; that eventually does pay 💰 if you stick with it… on top of all the time you’ll find yourself saving by &lt;a href=&#34;https://automatetheboringstuff.com/&#34;&gt;“automating the boring stuff”&lt;/a&gt;. If you’re currently a grad student, you can learn about some of the other highly marketable skills you’re developing &lt;a href=&#34;https://beyondprof.com/10-transferable-skills-from-your-phd-that-employers-want/&#34;&gt;here&lt;/a&gt;.&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn2&#34;&gt;&lt;p&gt;&lt;a href=&#34;https://bookdown.org/yihui/rmarkdown-cookbook/&#34;&gt;R markdown&lt;/a&gt; is what I’m using to write these posts, you’ll learn much more about it when we get to the reporting &amp;amp; communication part of the guide&lt;a href=&#34;#fnref2&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn3&#34;&gt;&lt;p&gt;The “copy_number” column is only provided for the default filter = “all” version of &lt;code&gt;copies()&lt;/code&gt;, since this is when knowing the specific copy number is most useful (i.e. to facilitate subsequent &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#filter&#34;&gt;subsetting&lt;/a&gt;). Following similar logic, the “n_copies” column is only provided when the filter argument is set to “all” or “dupes” because the other options (“first”, “last”, and “unique”) drop all rows with more than one copy, meaning that the “n_copies” column would contain only values of 1.&lt;a href=&#34;#fnref3&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn4&#34;&gt;&lt;p&gt;The sorting occurs in descending order.&lt;a href=&#34;#fnref4&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn5&#34;&gt;&lt;p&gt;If you only want the truly unique/non-duplicated rows instead use &lt;code&gt;copies(data, filter = &#34;unique&#34;)&lt;/code&gt;&lt;a href=&#34;#fnref5&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn6&#34;&gt;&lt;p&gt;in case you’re wondering, yes, dplyr does have a function called &lt;code&gt;distinct()&lt;/code&gt; that does the same thing as &lt;code&gt;copies(filter = &#34;first&#34;)&lt;/code&gt;, although the underlying code is different and it is less flexible&lt;a href=&#34;#fnref6&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn7&#34;&gt;&lt;p&gt;or ascending frequency if you prefer, via the “order” argument&lt;a href=&#34;#fnref7&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn8&#34;&gt;&lt;p&gt;It is worth noting that &lt;code&gt;elucidate::mode()&lt;/code&gt; masks a &lt;code&gt;mode()&lt;/code&gt; function in base R which is merely a shortcut for the &lt;code&gt;storage.mode()&lt;/code&gt; function that has nothing to do with tabulating values. Although I usually try to avoid such conflicts, I suspect that &lt;code&gt;elucidate&lt;/code&gt; users who are primarily analysing data would prefer a tabulating &lt;code&gt;mode()&lt;/code&gt; function.&lt;a href=&#34;#fnref8&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn9&#34;&gt;&lt;p&gt;These are particularly common in psychological research, for example if you test individuals using questions that are too easy or too difficulty. Ceiling and floor effects are also why most university professors who teach tend to be concerned if the class average deviates too far from ~67%&lt;a href=&#34;#fnref9&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn10&#34;&gt;&lt;p&gt;The base R &lt;code&gt;quantile()&lt;/code&gt; function can be used to get percentiles, i.e. the value of the vector below which are “x”% of the other values in that vector. In case you ever happen to want to find out which percentile a value is, instead of the value at a specified percentile, elucidate provides an &lt;code&gt;inv_quantile()&lt;/code&gt; function that gives you the inverse or opposite of &lt;code&gt;quantile()&lt;/code&gt;. This could be useful if you are a teacher and want to know how some students with scores “x”, “y”, &amp;amp; “z” rank in the class, or in case a student asks you how well they performed on a test relative to the their peers.&lt;a href=&#34;#fnref10&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn11&#34;&gt;&lt;p&gt;However, unlike the equivalent functions in other packages, the &lt;code&gt;elucidate&lt;/code&gt; version’s default setting for each of these is type 2 because it is unbiased under normality, and to a lesser extent for consistency with SAS &amp;amp; SPSS&lt;a href=&#34;#fnref11&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn12&#34;&gt;&lt;p&gt;This great performance comes from the wonderful &lt;a href=&#34;https://rdatatable.gitlab.io/data.table/&#34;&gt;data.table&lt;/a&gt; package doing the bulk of the heavy lifting for us under the hood.&lt;a href=&#34;#fnref12&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn13&#34;&gt;&lt;p&gt;Efron, B., &amp;amp; Tibshirani, R. J. (1994). &lt;em&gt;An introduction to the bootstrap&lt;/em&gt;. CRC press.&lt;a href=&#34;#fnref13&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn14&#34;&gt;&lt;p&gt;“Independent and identically distributed” means that the value of one observation is completely &lt;em&gt;independent&lt;/em&gt; from the values of other observations in the sample. This is another assumption of most common (frequentist) parametric tests, like the t-test, which is referred to as the “independence assumption”. We’ll learn how to evaluate it in a future post on model diagnostics.&lt;a href=&#34;#fnref14&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn15&#34;&gt;&lt;p&gt;Parallelisation for bootstrapping with the &lt;code&gt;elucidate::*_ci&lt;/code&gt; functions uses the “snow” (multi-session) method for Windows machines (as the only option available) and the faster “multicore” (forking) method for non-Windows machines. The &lt;code&gt;describe_ci()&lt;/code&gt; function checks which OS you are using and chooses the correct one for you via the underlying &lt;code&gt;boot::boot()&lt;/code&gt; function’s “parallel” argument. See the &lt;code&gt;?boot()&lt;/code&gt; documentation for additional details.&lt;a href=&#34;#fnref15&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn16&#34;&gt;&lt;p&gt;thanks to the thoughtful authors of the &lt;code&gt;ggplot2&lt;/code&gt; package, which I’ll dive into in the next post&lt;a href=&#34;#fnref16&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn17&#34;&gt;&lt;p&gt;Since this post was originally written, &lt;code&gt;plot_pie()&lt;/code&gt; and &lt;code&gt;plot_bar()&lt;/code&gt; have been added to &lt;code&gt;elucidate&lt;/code&gt; to make it easier to generate pie charts and bar graphs. Of the two, a bar graph is nearly always better at presenting the same information, but &lt;code&gt;plot_pie()&lt;/code&gt; is available in case your boss asks for a pie chart anyways.&lt;a href=&#34;#fnref17&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn18&#34;&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;N.B.&lt;/em&gt;&lt;/strong&gt; For the reactable version to work properly, you’ll need to have the &lt;a href=&#34;https://glin.github.io/reactable/&#34;&gt;reactable&lt;/a&gt; and &lt;a href=&#34;https://shiny.rstudio.com/&#34;&gt;shiny&lt;/a&gt; packages installed. These packages are currently “suggested” instead of “required” as dependencies to limit the number of installation requirements for &lt;code&gt;elucidate&lt;/code&gt;&lt;a href=&#34;#fnref18&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn19&#34;&gt;&lt;p&gt;There is a server-side processing option available for use with &lt;code&gt;datatable()&lt;/code&gt; specifically designed to use with bigger data, but sending your data to be processed on a server isn’t a usually a viable option when you’re working with sensitive or proprietary information (unless you have a private server of course), so it has not been implemented in &lt;code&gt;static_to_dynamic()&lt;/code&gt;.&lt;a href=&#34;#fnref19&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn20&#34;&gt;&lt;p&gt;Other strategies for dealing with missing values will be the topic of a future blog post.&lt;a href=&#34;#fnref20&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn21&#34;&gt;&lt;p&gt;&lt;a href=&#34;https://bookdown.org/yihui/blogdown/&#34;&gt;R markdown&lt;/a&gt; is what these blog posts are written in; the &lt;code&gt;skim()&lt;/code&gt; output looks different when printed from a regular R script.&lt;a href=&#34;#fnref21&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>A Scientist&#39;s Guide to R: Step 2.5 - dates &amp; times</title>
      <link>https://craig.rbind.io/post/2020-10-10-asgr-2-5-dates/</link>
      <pubDate>Sat, 10 Oct 2020 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/post/2020-10-10-asgr-2-5-dates/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#tldr&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#introduction&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#load-packages&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; load packages&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#datetime-basics&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;date/time basics&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#which-day-is-it&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;which day is it?&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#reading-dates&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;reading dates&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#time-zones&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;time zones&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#month-names&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7&lt;/span&gt; &lt;strong&gt;month names&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#extracting-datetime-components&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;8&lt;/span&gt; &lt;strong&gt;extracting datetime components&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#days-in-a-month&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;9&lt;/span&gt; &lt;strong&gt;days in a month&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#custom-date-formats&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;10&lt;/span&gt; &lt;strong&gt;custom date formats&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#date-calculations&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;11&lt;/span&gt; &lt;strong&gt;date calculations&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#correcting-excel-date-to-numeric-conversions&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;11.1&lt;/span&gt; correcting excel date-to-numeric conversions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#planning-a-behavioural-neuroscience-experiment&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;12&lt;/span&gt; &lt;strong&gt;planning a behavioural neuroscience experiment&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#turning-the-planning-script-into-a-function&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;12.1&lt;/span&gt; turning the planning script into a function&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#navigation&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;13&lt;/span&gt; Navigation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#notes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;14&lt;/span&gt; Notes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;tldr&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Dates/times are the last type of data you’ll probably work with on a fairly regular basis. This post will show you how to use the &lt;a href=&#34;https://lubridate.tidyverse.org/&#34;&gt;lubridate&lt;/a&gt; tidyverse package in R so you’ll know how to handle dates &amp;amp; times when you encounter them.&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://p1.pxfuel.com/preview/920/596/59/time-clock-alarm-clock-time-of.jpg&#34; alt=&#34;&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;image source: &lt;a href=&#34;https://www.pxfuel.com/&#34; class=&#34;uri&#34;&gt;https://www.pxfuel.com/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;The 9th post of the &lt;a href=&#34;https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/&#34;&gt;Scientist’s Guide to R series&lt;/a&gt; covers how to work with dates and times in R. This will be the last post on data structures in R that we need to cover before we can confidently move on to more exciting things.&lt;/p&gt;
&lt;p&gt;Until I learned about the &lt;code&gt;lubridate&lt;/code&gt; package, dates were one of the most frustrating data structures to work. This is partly because there are many different formats that can be used to specify them and it’s not uncommon for multiple formats to be used within the same dataset if more than one person entered the data. To make things worse, when you import data from Excel dates will often be read as 5-digit numbers that can leave you wondering if the data somehow became corrupted. Part of the reason for this strangeness is that different programs use different date origins (thanks to my fellow DSS blogger &lt;a href=&#34;https://andriy.rbind.io/&#34;&gt;Andriy Koval&lt;/a&gt; for pointing that out). For example, as you’ll see below, R uses January 1st of 1970 as an origin whereas Excel uses January 1st of 1900.&lt;/p&gt;
&lt;p&gt;This post will show you how &lt;code&gt;lubridate&lt;/code&gt; can help you overcome these sorts of problems. I’ll also demonstrate how &lt;code&gt;lubridate&lt;/code&gt; can help you plan experiments.&lt;/p&gt;
&lt;div id=&#34;load-packages&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; load packages&lt;/h2&gt;
&lt;p&gt;As usual, we’ll start by loading the packages we’ll need.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse) #as usual, we&amp;#39;ll need to use some tidyverse packages 

#while it is part of the &amp;quot;tidyverse&amp;quot;, `lubridate`is installed and loaded
#separately from the tidyverse meta-package

#install.packages(&amp;quot;lubridate&amp;quot;) #uncomment and run if you haven&amp;#39;t installed it before
library(lubridate) &lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;datetime-basics&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;date/time basics&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;In R, temporal data can be represented as dates, times (within a day), or a combination of a date and a time (date-time)&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;. If your data are stored as a tibble, these types will have different class labels: “date”, “time” and “dttm” respectively. Otherwise, they’ll be classified using a date/time format called &lt;a href=&#34;https://www.stat.berkeley.edu/~s133/dates.html&#34;&gt;“POSIXct”&lt;/a&gt; (stands for &lt;strong&gt;p&lt;/strong&gt;ortable &lt;strong&gt;o&lt;/strong&gt;perating &lt;strong&gt;s&lt;/strong&gt;ystem &lt;strong&gt;i&lt;/strong&gt;nterface [originally designed for UNI&lt;strong&gt;X&lt;/strong&gt;], &lt;strong&gt;c&lt;/strong&gt;hronological &lt;strong&gt;t&lt;/strong&gt;ime). There is also a “local time” version which has to do with time zones, but we won’t worry about it for now. Each of these date/time object types has a slightly different default display format (“default” because &lt;code&gt;lubridate&lt;/code&gt; allows you to modify it) that determines how the values are displayed:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;dates:&lt;/strong&gt; yyyy-mm-dd (year-month-day)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;times:&lt;/strong&gt; hh:mm:ss (hours:minutes:seconds)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;datetimes:&lt;/strong&gt; yyyy-mm-dd hh:mm:ss&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;at the right end of times/datetimes you’ll also see an abbreviation for the time zone, which will be “UTC” by default. I’ll cover time zone details later in this post.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Under the hood, a date object in R is stored as the number of days from January 1st of 1970, which is revealed if you convert a date to a numeric vector.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;as.Date(&amp;quot;1970-01-01&amp;quot;) %&amp;gt;% 
  as.numeric()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;as.Date(&amp;quot;1970-01-02&amp;quot;) %&amp;gt;% 
  as.numeric()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 1&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;as.Date(&amp;quot;2020-08-29&amp;quot;) %&amp;gt;% 
  as.numeric()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 18503&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Wow, it’s been a lot of days since January 1st of 1970.&lt;/p&gt;
&lt;p&gt;Why does R represent dates internally as integers? So you can do quick calculations with them, e.g. to get the date 100 days from August 29th, 2020:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;as.Date(&amp;quot;2020-08-29&amp;quot;) + 100&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-12-07&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Calculating the number of days between 2 dates is also pretty straightforward, just subtract the earlier one from the later one:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;as.Date(&amp;quot;2020-08-29&amp;quot;) - as.Date(&amp;quot;2020-01-01&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Time difference of 241 days&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;which-day-is-it&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;which day is it?&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;In base R, you can also get today’s date using &lt;code&gt;Sys.Date()&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;Sys.Date()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-10-10&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Or using the easier-to-remember &lt;code&gt;lubridate&lt;/code&gt; function &lt;code&gt;today()&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;today()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-10-10&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can also get the current system date &amp;amp; time using &lt;code&gt;base::Sys.time()&lt;/code&gt; or &lt;code&gt;lubridate::now()&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;Sys.time()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-10-10 00:20:37 EDT&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;now()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-10-10 00:20:37 EDT&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;reading-dates&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;reading dates&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;While we didn’t have any trouble turning a string into a date when it was presented in the standard format “yyyy-mm-dd”, things go awry if we try the same thing with a non-standard format like “dd-mm-yyyy”:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;as.Date(&amp;quot;29-08-2020&amp;quot;) %&amp;gt;% as.numeric()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] -708704&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Well that doesn’t look right!&lt;/p&gt;
&lt;p&gt;To use a non-standard format with as.Date() we’ll need to specify it with the &lt;code&gt;format&lt;/code&gt; argument via a combination of case-sensitive &lt;code&gt;%*&lt;/code&gt; (replace * with the appropriate letter) codes of the form &lt;code&gt;&#34;%Y-%m-%d&#34;&lt;/code&gt;, where the most common ones you may need are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%a&lt;/code&gt; = abbreviated weekday name&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%A&lt;/code&gt; = full weekday name&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%b&lt;/code&gt; = abbreviated month name&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%B&lt;/code&gt; = full month name&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%d&lt;/code&gt; = day of the month as a 2-digit number&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%D&lt;/code&gt; = shortcut for &lt;code&gt;%Y/%m/%d&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%e&lt;/code&gt; = day of the month as a single digit number with a leading space&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%H&lt;/code&gt; or &lt;code&gt;%I&lt;/code&gt; = hours as a 2-digit number&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%j&lt;/code&gt; = day of the year as a 3-digit number&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%m&lt;/code&gt; = month as a 2-digit number&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%M&lt;/code&gt; = Minute as a 2-digit number&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%p&lt;/code&gt; = AM/PM indicator to use in conjuction with hours specified via &lt;code&gt;%I&lt;/code&gt; but not &lt;code&gt;%H&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%S&lt;/code&gt; = seconds as a 2-digit number&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%U&lt;/code&gt; = week of the year as a 2-digit number (using Sunday as day 1 of the week)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%T&lt;/code&gt; = shortcut for &lt;code&gt;%H:%M:%S&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%y&lt;/code&gt; = year without the century (2-digits)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%Y&lt;/code&gt; = year with the century&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;%Z&lt;/code&gt; = time zone abbreviation as a character string&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;See the strptime help documentation for more information on these codes and a complete list using &lt;code&gt;?strptime&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;To correctly parse “29-08-2020” as day-month-year using &lt;code&gt;as.Date()&lt;/code&gt; we would therefore need to specify the format as follows:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dt &amp;lt;- as.Date(&amp;quot;29-08-2020&amp;quot;, format = &amp;quot;%d-%m-%Y&amp;quot;)

dt &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-08-29&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dt %&amp;gt;% as.numeric()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 18503&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now it shows up the way we expected, and is correctly represented internally as 18,503 days since January 1st of 1970 (as before) rather than -708,704.&lt;/p&gt;
&lt;p&gt;As you can see, this could make date processing quite tedious, especially if you don’t work with dates or times very often or if your data use multiple formats! This is an example of the kinds of hassle that &lt;code&gt;lubridate&lt;/code&gt; was created to help us overcome. Instead of having to specify the format using &lt;code&gt;%*&lt;/code&gt;-codes, &lt;code&gt;lubridate&lt;/code&gt; has a set of functions that make it easy to read dates in various string formats that you may encounter in raw data and convert them to the standard format&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;ymd()&lt;/code&gt; year, month, day&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;dmy()&lt;/code&gt; day, month, year&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;mdy()&lt;/code&gt; month, day, year&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These parsing functions make it quite easy to read dates, e.g.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;identical(
  ymd(&amp;quot;2020-08-29&amp;quot;), 
  dmy(&amp;quot;29-08-2020&amp;quot;)
  )&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;identical(
  ymd(&amp;quot;2020-08-29&amp;quot;), 
  mdy(&amp;quot;08-29-2020&amp;quot;)
  )&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If you also need to specify the time, there are extensions for the above convenience functions to make that easy too. Add &lt;code&gt;_h&lt;/code&gt; for hours, &lt;code&gt;_hm&lt;/code&gt; for hours &amp;amp; minutes, and &lt;code&gt;_hms&lt;/code&gt; for hours, minutes, and seconds, e.g.:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd_h(&amp;quot;2020-08-29 22&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-08-29 22:00:00 UTC&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dmy_hm(&amp;quot;29-08-2020 22:09&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-08-29 22:09:00 UTC&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mdy_hms(&amp;quot;08-29-2020 22:09:19&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-08-29 22:09:19 UTC&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Since working with datetimes is considerably easier in &lt;code&gt;lubridate&lt;/code&gt; than base R, for the sake of brevity I’ll focus on the &lt;code&gt;lubridate&lt;/code&gt; approach for most of the remainder of this post. If you would like to learn more about working with datetimes in base R, see &lt;a href=&#34;https://www.stat.berkeley.edu/~s133/dates.html&#34;&gt;this link&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Fortunately, these &lt;code&gt;lubridate&lt;/code&gt; functions can also handle a variety of non-numeric characters between the datetime values and still parse them correctly.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd(&amp;quot;2020-08-29&amp;quot;) == ymd(&amp;quot;2020/08/29&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd(&amp;quot;2020-08-29&amp;quot;) == ymd(&amp;quot;2020 08 29&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd(&amp;quot;2020-08-29&amp;quot;) ==  ymd(&amp;quot;2020:08:29&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd(&amp;quot;2020-08-29&amp;quot;) ==  ymd(&amp;quot;2020$08$29&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;time-zones&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;time zones&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;To specify the time zone we can use the &lt;code&gt;tz&lt;/code&gt; argument:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd_h(&amp;quot;2020-08-29 9&amp;quot;, 
      tz = &amp;quot;America/Vancouver&amp;quot;) # tz = Continent/City&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-08-29 09:00:00 PDT&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For example, you could use this to figure out what the time difference is between New York and London or Vancouver and Cairo&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd_h(&amp;quot;2020-08-29 9&amp;quot;, tz = &amp;quot;America/New_York&amp;quot;) - ymd_h(&amp;quot;2020-08-29 9&amp;quot;, tz = &amp;quot;Europe/London&amp;quot;)  &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Time difference of 5 hours&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd_h(&amp;quot;2020-08-29 9&amp;quot;, tz = &amp;quot;America/Vancouver&amp;quot;) - ymd_h(&amp;quot;2020-08-29 9&amp;quot;, tz = &amp;quot;Africa/Cairo&amp;quot;)  &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Time difference of 9 hours&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A list of time zone names can be found on &lt;a href=&#34;https://en.wikipedia.org/wiki/List_of_tz_database_time_zones&#34;&gt;this wikipedia page&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;month-names&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;7&lt;/span&gt; &lt;strong&gt;month names&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;lubridate&lt;/code&gt; functions can even parse the month names if they’re provided instead of a fully numeric date string.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mdy(&amp;quot;October 31st, 2020&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-10-31&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dmy(&amp;quot;the 1st of December 2011&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2011-12-01&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;extracting-datetime-components&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;8&lt;/span&gt; &lt;strong&gt;extracting datetime components&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;lubridate&lt;/code&gt; also provides a number of self-explanatory functions for extracting some of the information from a date or datetime:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dt &amp;lt;- ymd_hms(&amp;quot;2020-08-29 22:09:19&amp;quot;)

year(dt)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 2020&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;month(dt)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 8&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;day(dt)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 29&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;hour(dt)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 22&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;minute(dt)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 9&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;second(dt)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 19&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;week(dt) #week of the year&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 35&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;wday(dt) #day of the week, numeric&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 7&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;wday(dt,#day of the week
     label = TRUE, #as a factor level
     abbr = FALSE) #not abbreviated&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] Saturday
## 7 Levels: Sunday &amp;lt; Monday &amp;lt; Tuesday &amp;lt; Wednesday &amp;lt; Thursday &amp;lt; ... &amp;lt; Saturday&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#day of the month, this one isn&amp;#39;t really useful since it gives you the same
#thing as day()
mday(dt) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 29&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;yday(dt) #day of the year&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 242&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;days-in-a-month&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;9&lt;/span&gt; &lt;strong&gt;days in a month&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;There is also a &lt;code&gt;lubridate&lt;/code&gt; function which tells you how many days there are in a specified month if you haven’t yet memorized them all.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;days_in_month(dt) #the month specified in a datetime object&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Aug 
##  31&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;days_in_month(3) #or whichever month you want to specify&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Mar 
##  31&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;days_in_month(1:12) #or all months at once&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec 
##  31  28  31  30  31  30  31  31  30  31  30  31&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;custom-date-formats&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;10&lt;/span&gt; &lt;strong&gt;custom date formats&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;If you’d prefer to have dates displayed differently from the standard/default yyyy-mm-dd format, you can specify an alternative format to use with the &lt;code&gt;lubridate::stamp_date()&lt;/code&gt; function. This could be useful if you want the dates to follow a specific format that is used in your lab or workplace.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#step 1: specify the format using an arbitrary date with stamp_date()
my_stamp &amp;lt;- stamp_date(&amp;quot;January 7th, 2019&amp;quot;) 

#step 2: apply the format to a date object
my_stamp(dt)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;August 29th, 2020&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#if there are multiple possibilities lubridate will use the most probable/common one&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The alternative way of changing the display format is to apply the base R &lt;code&gt;format()&lt;/code&gt; function to a datetime object and specify the format using the &lt;code&gt;%&lt;/code&gt;-codes, e.g.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;format(dt, &amp;quot;%B %dth, %Y&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;August 29th, 2020&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Again, the &lt;code&gt;lubridate&lt;/code&gt; version is a bit easier.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;date-calculations&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;11&lt;/span&gt; &lt;strong&gt;date calculations&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;You can add days to a date that’s been processed using &lt;code&gt;lubridate&lt;/code&gt; just as easily as we did using the base R &lt;code&gt;as.Date()&lt;/code&gt; function&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dt &amp;lt;- ymd(&amp;quot;2020/08/30&amp;quot;)

dt + 10&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-09-09&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A raw number added to a date is interpreted as a request to add the smallest unit of time to the object that is already represented in it. You could instead specify the unit to add (weeks, month, years, etc) to a date with some intuitively-named &lt;code&gt;lubridate&lt;/code&gt; helper functions:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd(&amp;quot;2020/08/30&amp;quot;) + 10 #adds 10 days&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-09-09&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd_hms(&amp;quot;2020/08/30 10:12:58&amp;quot;) + 10 #adds 10 seconds&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-08-30 10:13:08 UTC&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd_hms(&amp;quot;2020/08/30 10:12:58&amp;quot;) + days(10) #adds 10 days instead of seconds&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-09-09 10:12:58 UTC&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd(&amp;quot;2020/08/30&amp;quot;) + weeks(1) #adds 1 week&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-09-06&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd(&amp;quot;2020/08/30&amp;quot;) - months(100) #subtracts 100 months&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2012-04-30&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd(&amp;quot;2020/08/30&amp;quot;) + years(80) #adds 80 years&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2100-08-30&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;N.B.&lt;/em&gt;&lt;/strong&gt; As was recently pointed out by one of my talented colleagues, &lt;a href=&#34;https://samalbers.science/&#34;&gt;Sam Albers&lt;/a&gt;, if you’re adding &lt;code&gt;months()&lt;/code&gt; to 29th or later day of the month and the new date doesn’t exist you’ll get an &lt;code&gt;NA&lt;/code&gt; value, e.g.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd(&amp;quot;2020-10-31&amp;quot;) + months(1)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] NA&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;There is no November 31st, so an &lt;code&gt;NA&lt;/code&gt; is returned. If we were hoping to get a sensible result like the 30th of November or 1st day of December we’d be disappointed. To fix this and get the nearest day (rounded down), you should instead use the lubridate &lt;code&gt;%m+%&lt;/code&gt; operator, or the &lt;code&gt;add_with_rollback()&lt;/code&gt; function.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd(&amp;quot;2020-10-31&amp;quot;) %m+% months(1)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-11-30&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;add_with_rollback(ymd(&amp;quot;2020-10-31&amp;quot;), months(1))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-11-30&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To roll forward instead of backwards, we can also use &lt;code&gt;add_with_rollback()&lt;/code&gt; but this time we set the &lt;code&gt;roll_to_first&lt;/code&gt; argument to &lt;code&gt;TRUE&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;add_with_rollback(ymd(&amp;quot;2020-10-31&amp;quot;), months(1), roll_to_first = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2020-12-01&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Alongside &lt;code&gt;%m+%&lt;/code&gt; is a &lt;code&gt;%m-%&lt;/code&gt; operator that subtracts months without rolling over to another month.&lt;/p&gt;
&lt;p&gt;You can even add vectors of set intervals. For example, if you had a weekly meeting for the next 10 weeks and wanted to know the dates of each of them, you could use:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ymd(&amp;quot;2020/08/30&amp;quot;) + 
  weeks(1)*c(1:10) #1 week unit for the interval * vector of meeting indices/values&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;2020-09-06&amp;quot; &amp;quot;2020-09-13&amp;quot; &amp;quot;2020-09-20&amp;quot; &amp;quot;2020-09-27&amp;quot; &amp;quot;2020-10-04&amp;quot;
##  [6] &amp;quot;2020-10-11&amp;quot; &amp;quot;2020-10-18&amp;quot; &amp;quot;2020-10-25&amp;quot; &amp;quot;2020-11-01&amp;quot; &amp;quot;2020-11-08&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#if you were given a vector of dates and wanted to know which days of the week
#they fell on you can easily get that too. e.g. if you had a meeting on the 15th
#of every month...
meeting_dates &amp;lt;- ydm(
  stringr::str_c(&amp;quot;2020-15-&amp;quot;, 1:12)
) 

meeting_dates&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;2020-01-15&amp;quot; &amp;quot;2020-02-15&amp;quot; &amp;quot;2020-03-15&amp;quot; &amp;quot;2020-04-15&amp;quot; &amp;quot;2020-05-15&amp;quot;
##  [6] &amp;quot;2020-06-15&amp;quot; &amp;quot;2020-07-15&amp;quot; &amp;quot;2020-08-15&amp;quot; &amp;quot;2020-09-15&amp;quot; &amp;quot;2020-10-15&amp;quot;
## [11] &amp;quot;2020-11-15&amp;quot; &amp;quot;2020-12-15&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;meeting_dates %&amp;gt;% wday(label = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] Wed Sat Sun Wed Fri Mon Wed Sat Tue Thu Sun Tue
## Levels: Sun &amp;lt; Mon &amp;lt; Tue &amp;lt; Wed &amp;lt; Thu &amp;lt; Fri &amp;lt; Sat&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#or you could apply a date_stamp to them, which could be useful for populating
#an excel report or data collection sheet.
my_stamp &amp;lt;- stamp_date(&amp;quot;Monday, January 7th, 2019&amp;quot;) 

meeting_dates %&amp;gt;% my_stamp()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;Wednesday, January 15th, 2020&amp;quot; &amp;quot;Saturday, February 15th, 2020&amp;quot;
##  [3] &amp;quot;Sunday, March 15th, 2020&amp;quot;      &amp;quot;Wednesday, April 15th, 2020&amp;quot;  
##  [5] &amp;quot;Friday, May 15th, 2020&amp;quot;        &amp;quot;Monday, June 15th, 2020&amp;quot;      
##  [7] &amp;quot;Wednesday, July 15th, 2020&amp;quot;    &amp;quot;Saturday, August 15th, 2020&amp;quot;  
##  [9] &amp;quot;Tuesday, September 15th, 2020&amp;quot; &amp;quot;Thursday, October 15th, 2020&amp;quot; 
## [11] &amp;quot;Sunday, November 15th, 2020&amp;quot;   &amp;quot;Tuesday, December 15th, 2020&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can also get the interval between two dates in the unit(s) of your choice using the &lt;code&gt;lubridate::interval()&lt;/code&gt; &amp;amp; &lt;code&gt;lubridate::time_length()&lt;/code&gt; functions together.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#step 1: define an interval using lubridate::interval()
int &amp;lt;- interval(mdy(&amp;quot;12-01-2005&amp;quot;), today())

#step 2: use time_length(interval) and the &amp;quot;unit&amp;quot; argument
time_length(int, unit = &amp;quot;day&amp;quot;) #interval length in days&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 5427&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;time_length(int, unit = &amp;quot;month&amp;quot;) #interval length in months&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 178.2903&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;time_length(int, unit = &amp;quot;year&amp;quot;) #interval length in years&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 14.85792&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;time_length(int, unit = c(&amp;quot;day&amp;quot;, &amp;quot;week&amp;quot;, &amp;quot;month&amp;quot;, &amp;quot;year&amp;quot;)) #you can also ask for multiple formats at once&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (unit %in% c(&amp;quot;year&amp;quot;, &amp;quot;month&amp;quot;)) {: the condition has length &amp;gt; 1 and
## only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 5427.00000  775.28571  178.29979   14.85832&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;interval(ymd_h(&amp;quot;2020-08-27 10&amp;quot;), now()) %&amp;gt;% 
  time_length(unit = &amp;quot;hour&amp;quot;) #interval length in hours&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 1050.344&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#of course you can also get the difference in days by just subtracting one date
#from the other as we did earlier using base R functions
mdy(&amp;quot;12-10-2005&amp;quot;) - mdy(&amp;quot;12-01-2005&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Time difference of 9 days&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;correcting-excel-date-to-numeric-conversions&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;11.1&lt;/span&gt; correcting excel date-to-numeric conversions&lt;/h2&gt;
&lt;p&gt;Although it isn’t part of &lt;code&gt;lubridate&lt;/code&gt;, there is a function from the &lt;a href=&#34;http://sfirke.github.io/janitor/index.html&#34;&gt;janitor&lt;/a&gt; package called &lt;code&gt;excel_numeric_to_date()&lt;/code&gt; that can help. For example, May 20th of 2016 may have looked like “2016-05-20” in the .xlsx file when you looked at it, but then when it gets imported into R, it appears as the mysterious number 42510 instead. This is an unfortunate issue that sometimes occurs when trying to read data from excel files specifically. The &lt;code&gt;excel_numeric_to_date()&lt;/code&gt; simply converts these 5-digit date codes back to the string date format you were expecting.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;janitor::excel_numeric_to_date(42510)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2016-05-20&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#also works with vectors
janitor::excel_numeric_to_date(
  c(42510:42520)
)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;2016-05-20&amp;quot; &amp;quot;2016-05-21&amp;quot; &amp;quot;2016-05-22&amp;quot; &amp;quot;2016-05-23&amp;quot; &amp;quot;2016-05-24&amp;quot;
##  [6] &amp;quot;2016-05-25&amp;quot; &amp;quot;2016-05-26&amp;quot; &amp;quot;2016-05-27&amp;quot; &amp;quot;2016-05-28&amp;quot; &amp;quot;2016-05-29&amp;quot;
## [11] &amp;quot;2016-05-30&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;planning-a-behavioural-neuroscience-experiment&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;12&lt;/span&gt; &lt;strong&gt;planning a behavioural neuroscience experiment&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Before I transitioned to working as a data scientist for the BC Government I spent some time doing behavioural neuroscience research. One of the first things I needed to do to conduct an experiment was figure out when I needed to do different things in the lab. I used R to make this process easier and help sort out which days I would need to reserve lab equipment and other resources.&lt;/p&gt;
&lt;p&gt;I started by defining some key parameters such as the sample size per group and the number of treatment conditions I planned to use in my design. These parameters mattered because they would determine how many days some aspects of the experiment would take.&lt;/p&gt;
&lt;p&gt;For this demo, we’ll plan an experiment with rats that uses an aerobic exercise intervention (for half of the animals, selected at random) that lasts 4 weeks, followed by 7 days of behavioural testing in the Barnes Maze (a test of spatial learning and memory for rodents), and then electrophysiological slice recordings to see if we can pickup any changes in neural signalling that might be related to the behavioural effects of the exercise intervention. &lt;em&gt;Feel free to copy this script and adapt it for your own purposes.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;To plan out this hypothetical experiment, we’ll need to define some parameters of the study design that affect scheduling, summarized as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;most obviously, which day we plan to start the experiment&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;the desired sample size and number of experimental groups, which may affect how long some parts of the experiment take based on the available lab equipment (e.g. the number of electrophysiology rigs in the lab)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;whether or not we’ll be breeding the model species we need (rats in this case) or ordering it&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;how many days our experimental intervention or treatment will take to administer&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;how many days our Barnes maze protocol is&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;if we’re measuring neural activity in this experiment using electrophysiology, and how many rigs we plan to use at once&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Then we’ll need to perform the necessary operations on those parameters using a combination of functions from lubridate, functions from tidyverse packages we’ve seen in previous posts, and a bit of base R code.&lt;/p&gt;
&lt;p&gt;To semi-automate this process, a first code block can be used to define parameters and a second one can describe the operations we need to perform on them.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#sample parameters####

#how many total experimental groups will be included; if you&amp;#39;re planning to use
#both sexes and consider biological sex as a factor in your analyses double it.
n.groups &amp;lt;- 4

#desired sample size. This is something to discuss with your PI, but I usually
#tried to aim for at least 12 when examining behaviour
group.n &amp;lt;- 12

#timing parameters####

#to generate animals, start breeding 1 month before experiment begins. replace
#with desired start day, month, and year
start.date  &amp;lt;- dmy(&amp;quot;07-09-2020&amp;quot;) 

breeding &amp;lt;- TRUE #will you be breeding the animals needed for this experiment?
#if you aren&amp;#39;t breeding animals, I&amp;#39;ll assume they are being ordered from a
#commercial breeder, in which case we&amp;#39;ll use the estimated delivery date as the
#start date

intervention_days &amp;lt;- 28  #how many days will the experimental intervention take?

b.testing_days &amp;lt;- 7 #how many days will the behavioural testing take?

#Are you doing electophysiology? Estimate about 2 days per animal per
#available e-phys rig
ephys &amp;lt;- TRUE
ephys.rigs &amp;lt;- 4

#display parameter####
#provide an example of how you would like the dates displayed
my_stamp &amp;lt;- stamp_date(&amp;quot;Saturday, August 29th, 2020&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;From this point we can just run the script below and we’ll end up with an approximate schedule for our hypothetical behavioural neuroscience experiment. Don’t worry too much about the details of the conditional (&lt;code&gt;if&lt;/code&gt;, &lt;code&gt;else if&lt;/code&gt;, &lt;code&gt;else&lt;/code&gt;) statements, we’ll cover that in a later post on R programming, although below we’ll take a first look at how to define a function.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;exp_timeline &amp;lt;- list() #define a list to hold experimental protocol components

#animal breeding####

#we&amp;#39;ll store a version with modified display formatting separately so we can
#still perform calculations on d0
exp_timeline[[&amp;quot;start_date&amp;quot;]] &amp;lt;- my_stamp(start.date) 

if(breeding == TRUE) {
  dob &amp;lt;- start.date+28 #pups born
  exp_timeline[[&amp;quot;pups_born&amp;quot;]] &amp;lt;- my_stamp(dob)
  #approximate weaning date####
  wd &amp;lt;- dob + 21
  exp_timeline[[&amp;quot;pups_weaned&amp;quot;]] &amp;lt;- my_stamp(wd)
}

#acclimatization period####

#acclimatization to maternal separation (if bred in house) or arrival at the
#animal facility (if ordered) (usually 1 week). After this point your animals
#are ready to participate in a behavioural experiment
if(breeding == TRUE) {
  ready.date &amp;lt;- wd + 7  
  exp_timeline[[&amp;quot;ready_date&amp;quot;]] &amp;lt;- my_stamp(ready.date)
} else {
  ready.date &amp;lt;- start.date + 7
  exp_timeline[[&amp;quot;ready_date&amp;quot;]] &amp;lt;- my_stamp(ready.date)
}

#intervention protocol####
if (intervention_days &amp;gt; 0) {
  i.ds &amp;lt;- ready.date + c(1:intervention_days)
  exp_timeline[[&amp;quot;intervention&amp;quot;]] &amp;lt;- data.frame(&amp;quot;protocol_day&amp;quot; = str_c(&amp;quot;day #&amp;quot;,  
                                                                      c(1:intervention_days)), 
                                               &amp;quot;date&amp;quot; = my_stamp(i.ds))
  
}

#behavioural testing days####
#starting the day after the intervention is complete. if you haven&amp;#39;t been
#handling the animals throughout the intervention period for at least 1 week
#then add as many days as needed to ensure the animals have been handled for at
#least 1 week
if (b.testing_days &amp;gt; 0) {
  if (intervention_days &amp;gt; 0) {
    if (intervention_days &amp;lt; 7) {
      handling_days &amp;lt;- 7 - intervention_days
      h.ds &amp;lt;- i.ds[intervention_days] + c(1:handling_days)
      b.ds &amp;lt;- h.ds[handling_days] + c(1:b.testing_days)
    } else {
      b.ds &amp;lt;- i.ds[intervention_days] + c(1:b.testing_days)
    }
  } else if (intervention_days == 0) { 
    #if you were just doing behavioural testing an no postnatal intervention
    #e.g. for a transgenic to wild-type model comparison
    
    #add a week for handling where they should be handled for at least 1 minute
    #each per day for at least 5 of the days in the &amp;quot;handling&amp;quot; week
    handling_days &amp;lt;- 7
    h.ds &amp;lt;- ready.date + c(1:handling_days)
    
    b.ds &amp;lt;- h.ds[7] + c(1:b.testing_days)
  }
  if (exists(&amp;quot;h.ds&amp;quot;)) {
    exp_timeline[[&amp;quot;animal_handling&amp;quot;]] &amp;lt;- data.frame(&amp;quot;protocol_day&amp;quot; = str_c(&amp;quot;day #&amp;quot;,  
                                                                           c(1:handling_days)), 
                                                    &amp;quot;date&amp;quot; = my_stamp(h.ds))    
  } 
  exp_timeline[[&amp;quot;behavioural_testing&amp;quot;]] &amp;lt;- data.frame(&amp;quot;protocol_day&amp;quot; = str_c(&amp;quot;day #&amp;quot;,  
                                                                             c(1:b.testing_days)), 
                                                      &amp;quot;date&amp;quot; = my_stamp(b.ds))
}

#electrophysiology days###
#for an exercise intervention study we could start doing e-phys the day after behavioural testing is complete

totaln &amp;lt;- n.groups*group.n #need to know how many total animals there are

if (ephys == T) {
  ephys.days &amp;lt;- (totaln/2)/ephys.rigs
  
  if (b.testing_days &amp;gt; 0) {
    e.ds &amp;lt;- b.ds[b.testing_days] + c(1:ephys.days)
  } else if (b.testing_days == 0 &amp;amp; intervention_days &amp;gt; 0) { #if you only did an intervention
    e.ds &amp;lt;- i.ds[intervention_days] + c(1:ephys.days)
  } else if (b.testing_days == 0 &amp;amp; intervention_days == 0) { #if you&amp;#39;re only doing e-phys
    e.ds &amp;lt;- ready.date + c(1:ephys.days)
  }
  
  exp_timeline[[&amp;quot;electrophysiology&amp;quot;]] &amp;lt;- data.frame(&amp;quot;protocol_day&amp;quot; = str_c(&amp;quot;day #&amp;quot;,
                                                                           c(1:ephys.days)), 
                                                    &amp;quot;date&amp;quot; = my_stamp(e.ds))
}

#determine how many days the experiment will take to complete up to the end of data collection####
if (exists(&amp;quot;e.ds&amp;quot;)) {
  exp_timeline[[&amp;quot;total_days&amp;quot;]] &amp;lt;- e.ds[ephys.days] - start.date
  
} else if (exists(&amp;quot;b.ds&amp;quot;)) {
  exp_timeline[[&amp;quot;total_days&amp;quot;]] &amp;lt;- b.ds[b.testing_days] - start.date
  
} else if (&amp;quot;i.ds&amp;quot;) { #if you only used an intervention and finished collecting data when it was over
  exp_timeline[[&amp;quot;total_days&amp;quot;]] &amp;lt;- i.ds[intervention_days] - start.date
  
} &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;After defining the parameters to use in constructing our experimental timeline and running the script, all we have to do to see it is print it to the console:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;exp_timeline&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $start_date
## [1] &amp;quot;Monday, September 07th, 2020&amp;quot;
## 
## $pups_born
## [1] &amp;quot;Monday, October 05th, 2020&amp;quot;
## 
## $pups_weaned
## [1] &amp;quot;Monday, October 26th, 2020&amp;quot;
## 
## $ready_date
## [1] &amp;quot;Monday, November 02th, 2020&amp;quot;
## 
## $intervention
##    protocol_day                           date
## 1        day #1   Tuesday, November 03th, 2020
## 2        day #2 Wednesday, November 04th, 2020
## 3        day #3  Thursday, November 05th, 2020
## 4        day #4    Friday, November 06th, 2020
## 5        day #5  Saturday, November 07th, 2020
## 6        day #6    Sunday, November 08th, 2020
## 7        day #7    Monday, November 09th, 2020
## 8        day #8   Tuesday, November 10th, 2020
## 9        day #9 Wednesday, November 11th, 2020
## 10      day #10  Thursday, November 12th, 2020
## 11      day #11    Friday, November 13th, 2020
## 12      day #12  Saturday, November 14th, 2020
## 13      day #13    Sunday, November 15th, 2020
## 14      day #14    Monday, November 16th, 2020
## 15      day #15   Tuesday, November 17th, 2020
## 16      day #16 Wednesday, November 18th, 2020
## 17      day #17  Thursday, November 19th, 2020
## 18      day #18    Friday, November 20th, 2020
## 19      day #19  Saturday, November 21th, 2020
## 20      day #20    Sunday, November 22th, 2020
## 21      day #21    Monday, November 23th, 2020
## 22      day #22   Tuesday, November 24th, 2020
## 23      day #23 Wednesday, November 25th, 2020
## 24      day #24  Thursday, November 26th, 2020
## 25      day #25    Friday, November 27th, 2020
## 26      day #26  Saturday, November 28th, 2020
## 27      day #27    Sunday, November 29th, 2020
## 28      day #28    Monday, November 30th, 2020
## 
## $behavioural_testing
##   protocol_day                           date
## 1       day #1   Tuesday, December 01th, 2020
## 2       day #2 Wednesday, December 02th, 2020
## 3       day #3  Thursday, December 03th, 2020
## 4       day #4    Friday, December 04th, 2020
## 5       day #5  Saturday, December 05th, 2020
## 6       day #6    Sunday, December 06th, 2020
## 7       day #7    Monday, December 07th, 2020
## 
## $electrophysiology
##   protocol_day                           date
## 1       day #1   Tuesday, December 08th, 2020
## 2       day #2 Wednesday, December 09th, 2020
## 3       day #3  Thursday, December 10th, 2020
## 4       day #4    Friday, December 11th, 2020
## 5       day #5  Saturday, December 12th, 2020
## 6       day #6    Sunday, December 13th, 2020
## 
## $total_days
## Time difference of 97 days&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Voila! There you have it. If you were doing this experiment, you’d know approximately which days each step of the protocol would fall on and how long it would take to get your data!&lt;/p&gt;
&lt;div id=&#34;turning-the-planning-script-into-a-function&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;12.1&lt;/span&gt; turning the planning script into a function&lt;/h2&gt;
&lt;p&gt;If we ran these sorts of experiments frequently, eventually we would probably want to combine these pieces into a custom scheduling function. While having all of the code in the script provides full transparency, it also makes the method a bit fragile (especially if you’re not using version control [you should always use some form of version control to save your work!]). Writing a function, documenting it, and putting it into a package is a much better (and more easily shared) long term option. The source code of an R function can of course still be inspected after all.&lt;/p&gt;
&lt;p&gt;Functionalizing our experiment planning script actually isn’t too much extra work once we’ve gotten this far. We basically just need to convert the “parameter definitions” code block into a set of arguments to the special base R function, &lt;code&gt;&#34;function()&#34;&lt;/code&gt;, copy and paste the “operations” code block into the function body, and assign a name to the result. For this example, I’ll use the name “plan_bn_exp” (for “&lt;strong&gt;plan&lt;/strong&gt; a &lt;strong&gt;b&lt;/strong&gt;ehavioural &lt;strong&gt;n&lt;/strong&gt;euroscience &lt;strong&gt;exp&lt;/strong&gt;eriment”).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plan_bn_exp &amp;lt;- function(#call function() &amp;amp; assign to desired name
  #then specify arguments the user can modify between the parentheses
  
  #note: the ones without a default value, set using`=` (as below), require the user
  #to specify a value
  start_dmy, #this name makes it clear which format to use
  intervention_days,
  behav_days,
  n_groups,
  group_n,
  #if some of these don&amp;#39;t change very often between
  #experiments, you might want to set default values for
  #them
  date_stamp = &amp;quot;Saturday, August 29th, 2020&amp;quot;,
  breeding = TRUE,
  ephys = TRUE,
  ephys_rigs = 4
) {
  #then in the section between the curly braces {}, called the &amp;quot;body&amp;quot; of the
  #function, you define what happens to the argument inputs, which in this case
  #just means copying/pasting the relevant code block from above
  
  start.date  &amp;lt;- dmy(start_dmy) 
  
  exp_timeline &amp;lt;- list() 
  
  exp_timeline[[&amp;quot;start_date&amp;quot;]] &amp;lt;- my_stamp(start.date) 
  
  if(breeding == TRUE) {
    dob &amp;lt;- start.date+28
    exp_timeline[[&amp;quot;pups_born&amp;quot;]] &amp;lt;- my_stamp(dob)
    wd &amp;lt;- dob + 21
    exp_timeline[[&amp;quot;pups_weaned&amp;quot;]] &amp;lt;- my_stamp(wd)
  }
  if(breeding == TRUE) {
    ready.date &amp;lt;- wd + 7  
    exp_timeline[[&amp;quot;ready_date&amp;quot;]] &amp;lt;- my_stamp(ready.date)
  } else {
    ready.date &amp;lt;- start.date + 7
    exp_timeline[[&amp;quot;ready_date&amp;quot;]] &amp;lt;- my_stamp(ready.date)
  }
  
  if (intervention_days &amp;gt; 0) {
    i.ds &amp;lt;- ready.date + c(1:intervention_days)
    exp_timeline[[&amp;quot;intervention&amp;quot;]] &amp;lt;- data.frame(&amp;quot;protocol_day&amp;quot; = str_c(&amp;quot;day #&amp;quot;,  
                                                                        c(1:intervention_days)), 
                                                 &amp;quot;date&amp;quot; = my_stamp(i.ds))
  }
  if (b.testing_days &amp;gt; 0) {
    if (intervention_days &amp;gt; 0) {
      if (intervention_days &amp;lt; 7) {
        handling_days &amp;lt;- 7 - intervention_days
        h.ds &amp;lt;- i.ds[intervention_days] + c(1:handling_days)
        b.ds &amp;lt;- h.ds[handling_days] + c(1:b.testing_days)
      } else {
        b.ds &amp;lt;- i.ds[intervention_days] + c(1:b.testing_days)
      }
    } else if (intervention_days == 0) { 
      handling_days &amp;lt;- 7
      h.ds &amp;lt;- ready.date + c(1:handling_days)
      
      b.ds &amp;lt;- h.ds[7] + c(1:b.testing_days)
    }
    if (exists(&amp;quot;h.ds&amp;quot;)) {
      exp_timeline[[&amp;quot;animal_handling&amp;quot;]] &amp;lt;- data.frame(&amp;quot;protocol_day&amp;quot; = str_c(&amp;quot;day #&amp;quot;,  
                                                                             c(1:handling_days)), 
                                                      &amp;quot;date&amp;quot; = my_stamp(h.ds))    
    } 
    exp_timeline[[&amp;quot;behavioural_testing&amp;quot;]] &amp;lt;- data.frame(&amp;quot;protocol_day&amp;quot; = str_c(&amp;quot;day #&amp;quot;,  
                                                                               c(1:b.testing_days)), 
                                                        &amp;quot;date&amp;quot; = my_stamp(b.ds))
  }
  
  totaln &amp;lt;- n.groups*group.n 
  
  if (ephys == T) {
    ephys.days &amp;lt;- (totaln/2)/ephys.rigs
    
    if (b.testing_days &amp;gt; 0) {
      e.ds &amp;lt;- b.ds[b.testing_days] + c(1:ephys.days)
    } else if (b.testing_days == 0 &amp;amp; intervention_days &amp;gt; 0) {
      e.ds &amp;lt;- i.ds[intervention_days] + c(1:ephys.days)
    } else if (b.testing_days == 0 &amp;amp; intervention_days == 0) { 
      e.ds &amp;lt;- ready.date + c(1:ephys.days)
    }
    exp_timeline[[&amp;quot;electrophysiology&amp;quot;]] &amp;lt;- data.frame(&amp;quot;protocol_day&amp;quot; = str_c(&amp;quot;day #&amp;quot;,
                                                                             c(1:ephys.days)), 
                                                      &amp;quot;date&amp;quot; = my_stamp(e.ds))
  }
  if (exists(&amp;quot;e.ds&amp;quot;)) {
    exp_timeline[[&amp;quot;total_days&amp;quot;]] &amp;lt;- e.ds[ephys.days] - start.date
    
  } else if (exists(&amp;quot;b.ds&amp;quot;)) {
    exp_timeline[[&amp;quot;total_days&amp;quot;]] &amp;lt;- b.ds[b.testing_days] - start.date
    
  } else if (&amp;quot;i.ds&amp;quot;) {
    exp_timeline[[&amp;quot;total_days&amp;quot;]] &amp;lt;- i.ds[intervention_days] - start.date
    
  } 
  #a final piece that is often a good idea to include (but not always strictly
  #needed) is to tell the function which object to return() as a result
  return(exp_timeline)
  
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then we can use the new function by calling it like any other R function (&lt;code&gt;plan_bn_exp(args)&lt;/code&gt;) and check that the output is the same. Doing things this way has the big advantage of letting us focus on the parts of the planning that we need to, i.e. the key parameters of our experimental design (assuming our experiments follow consistent protocols). It also reduces the chances that we’ll accidentally break the code when editing it to input the values (as we might via the non-functional version above) .&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;fun_exp_timeline &amp;lt;- plan_bn_exp(start_dmy = &amp;quot;07-09-2020&amp;quot;,
                                intervention_days = 28,
                                behav_days = 28,
                                n_groups = 4, group_n = 12)

#rather than print it all again, I&amp;#39;ll just check to make sure the output is the
#same
all.equal(exp_timeline, fun_exp_timeline)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now you’ve learned a bit about how R programming can help you automate the process of planning a behavioural neuroscience experiment. If you were going to build a package around a function like this you’d want to do things a bit differently, but that’s a story for another post. If any grad students in psychology or neuroscience labs are reading this, some of you may even be looking forward to how much time you’ll save with these new time-processing skills under your belt. Student or not, after reading this I hope you can see that working with dates in R can be pretty easy when you leverage the &lt;code&gt;lubridate&lt;/code&gt; package and you’ve even learned a few ways that they may benefit your research.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;navigation&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;13&lt;/span&gt; Navigation&lt;/h1&gt;
&lt;p&gt;Click &lt;a href=&#34;https://craig.rbind.io/post/2020-08-29-asgr-2-4-factors/&#34;&gt;here&lt;/a&gt; to go back to the previous post on factors, or &lt;a href=&#34;https://craig.rbind.io/post/2020-11-17-asgr-3-0-exploring-data-with-elucidate/&#34;&gt;here&lt;/a&gt; to advance to the next one on exploratory data analysis with the &lt;code&gt;elucidate&lt;/code&gt; package.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;notes&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;14&lt;/span&gt; Notes&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;If you want to go beyond basic date-based operations and calculations and can’t wait to learn about related analytical techniques like time-series analysis &amp;amp; forecasting, I highly recommended checking out &lt;a href=&#34;https://otexts.com/fpp3/&#34;&gt;Forecasting: Principles and Practice&lt;/a&gt; by Rob J. Hyndman and George Athanasopoulos at Monash University.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;If you can’t wait to learn more about how to write your own R functions, you may be interested in this chapter of &lt;a href=&#34;https://r4ds.had.co.nz/functions.html&#34;&gt;R4DS&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thank you for visiting my blog. I welcome any suggestions for future posts, comments or other feedback you might have. Feedback from beginners and science students/trainees (or with them in mind) is especially helpful in the interest of making this guide even better for them.&lt;/p&gt;
&lt;p&gt;This blog is something I do as a volunteer in my free time. If you’ve found it helpful and want to give back, &lt;a href=&#34;https://www.buymeacoffee.com/huttoncp&#34;&gt;coffee donations&lt;/a&gt; would be appreciated.&lt;/p&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js&#34; data-name=&#34;bmc-button&#34; data-slug=&#34;huttoncp&#34; data-color=&#34;#FF5F5F&#34; data-emoji=&#34;&#34;  data-font=&#34;Cookie&#34; data-text=&#34;Buy me a coffee&#34; data-outline-color=&#34;#000000&#34; data-font-color=&#34;#ffffff&#34; data-coffee-color=&#34;#FFDD00&#34; &gt;&lt;/script&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;&lt;a href=&#34;https://r4ds.had.co.nz/dates-and-times.html#creating-datetimes&#34; class=&#34;uri&#34;&gt;https://r4ds.had.co.nz/dates-and-times.html#creating-datetimes&lt;/a&gt;&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>A Scientist&#39;s Guide to R: Step 2.4 - forcats for factors</title>
      <link>https://craig.rbind.io/post/2020-08-29-asgr-2-4-factors/</link>
      <pubDate>Sat, 29 Aug 2020 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/post/2020-08-29-asgr-2-4-factors/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#tldr&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#introduction&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#load-packages&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; load packages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#import-data&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.2&lt;/span&gt; import data&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#factor-basics&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;Factor basics&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#factors-and-data-visualization&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;factors and data visualization&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#factors-and-modelling&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;factors and modelling&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#navigation&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6&lt;/span&gt; Navigation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#notes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7&lt;/span&gt; Notes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;tldr&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Factors are one of the two remaining types of data you’ll encounter on a fairly regular basis. This post will show you how to use the &lt;a href=&#34;https://forcats.tidyverse.org/&#34;&gt;forcats&lt;/a&gt; tidyverse package in R so you’ll know how to handle factors when you encounter them.&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxASEhUSEhAVFRUQFRUPEBUVEBUQFRAQFRUWFhUVFRYYHSggGBolHRUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OGhAQGi0dHR0uLS0tLS0tLS0rLSsvLS0tKy0tKy0tLSstLSstLS0tLS0tLS0tLS0tLS0rLS0tLTc3Lf/AABEIAM8A9AMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAACAAEDBQYEBwj/xAA+EAACAQIEAwYDBgUCBgMAAAABAhEAAwQFEiExQVEGEyJhcZFSgaEUFSMysfAHQmLB0ZLhJDNygrLxFjSi/8QAGQEAAwEBAQAAAAAAAAAAAAAAAAECAwQF/8QAIhEAAgIDAAMBAQADAAAAAAAAAAECEQMSIRMxQVFhFCJx/9oADAMBAAIRAxEAPwCkBog1QzTzXoWeeTh6RaodVPqp2BIDTrUQalrosRKWoddRl6AvSsZOblRm5UWuhL0rHRIz0BNBqoS1Kwok1UM1GWpBqLCiQsKiuNQlqid6VjoVxqhZqFrlRO9S2NITtUZNItQlqkugCaaaY0NAwiaaaYGmmkMU0jSoTSGMajejNRtSZSI2qI1I1RmpKQBpUxpVIzfhqfVUU04NdlnFRLSmoppaqLCiQmmLVGWoddFjol1UBahL0BalYUSF6EtUZegL0rGSF6EtURem1UrAk10JegmgLUWFEjPUFx6RaomNKx0JjQTSNCTSKHJoGNOTQMaQxiaEUiaaaRQ9KlTUAKmJpTQsaQwSaA05NRk0hoZjQGnJoTSZQBpU9KpGbUtSDVFqpE11WchMTTaqi1U00WBKWoC1BQk0rAMvQlqiZqAvRYExNCWqHXQs1KxkxNKah1UQakFEmqgJoTTGgYmNRE07GgagYiaEmkTQlqBimhc0jQMaTGhTTA0xNNUlBTSJoRT0AI0DGnao2NIaQzGgJpE0NS2UI0NPTUhg0qVKgDWzTaqAmlNbnMSBqWqowabVRYUGzVCz0naoCaADNyhL1GWppoCiXVTaqi1U2qkOiaaMGoNVGrUBRJNMxppoWNMBmNAxp2NRsaBjk0BNMTQk0hj6qYmh1U00mMemFNSFIYVNNKaRoAYmo2qQ0JpFEJpqkIoTUjBNCaI0DUhjGlTU1AzTFqcGo9VMDWxzEs0zNUeugd6AHe5UJamZqCaBhTSmgJpTQBJNCTXZhMqvXIIQweG3H0FR5jl9yw+m4rDjpJUqGA5ieVLZeitWukK1ItQrUi0ySWahdqkJrnvGgAi9Rs1Rk0JNFjokLUJagmlNKx0OTSmrvJezj30Nx37pOCkqWLnyEjbzqnxmHa07I0ShgwZB6EeREGo2TdF6sjmkDQzSBpiJBT0AopoAVCaeaFjQAxoDSLUM0ihiaBjTmhNSMalTTSoAv5p9VRTTFq1MSRmqF3pM1RFqYDlqWqoyaja5FKx0dFsFjA4nYCtNlWUW7cNdGtokL/KDynrWfyVWLa+g225+Vb7D2PwLbdSGY8Yadprlz5XVI6cOK3bLLDhwVthSWCBn5DvHGuBwEKGAjy86y38Q7d7vkDKQiIArRsWbdoPsPlXqGRIGtpcYidIA/m2kwD8o9qlzjLsPiEZboGlvCDzBI2I6RtURkk1Q5xtUeS5N2YW+qv3uxEtpXUyjmdPMAyNpq/u9jcIRCXGBI8NzUHWfMcqrshR7F97JP/138W5A08NR3Hh2B/7prd3VV22UsG/O6QSNuJjj8xNGSWRdTCEYVTR5rf7NOjhNQJnjyImAR8x+lR4ns0+wEkk6eHPYfqw961mYYXQQA5ZmDrbK8WgtcEcYY6flQ4OwdkaQS1uJOxJV3G87flT/AExWiy8uyHjV1Rx5JlkW/swRbobe7qSVVjyHPUOoIjaitZLgNXcpY1F/A9zUzFCea7wIra5fgFQKLY/Kml9gZf8AmciQZJ3rJZSsXsTdJ1Cy86iSAWLaYKHmSZmsbbVpmyUVxoyuL7LLaEvdneIWJ5b+kGa6cp7MozCVLQpuNPDQFQiI2MlwPnVzmuWM6B9MICCBq/KpAE+nhAq7yDL7qWxzBRWO0kNAEcIiFU1fluPvpHj76K7NrAUWwHgSA6wyQ0SJMRHpXn/axSMXdB5FOHCO7SCPKvWs4wbX0XTCsGBJiQ6jiJ4g7/SsNnnZa9fxDt3g1MQFlTpIRQo3HAwBIjb0irg0mTK2qRhzTitHf7D49T/y1M8w4994rnxfZLG2xJtSOekhoq/JH9I0l+FMDT0nssvFSIMGREEcRQ1ZIVA1IUJoGCaEmnNCaljQNNSpqAFSpqVIC51UJaoyaEmtjKg2NRk0xNRO9JsaQrlyK5i5JihuPXRleH1uBE1m2aJG87KZXqtMdMtG24Mf2rZ5O6rY0MsATqET8x6/3qq7P2ECrs/h2MAKvDqTXfm+K7pdVtZBnwspBPmOTCudu2bK0ct7NrlhlFoEpckKvOeOwMVwZz2hvukaSvMgtJ48YWf1rkxOPRkjiZUmOW/GZ2j+1VeczBUXSSZiVB22jgOPHes3HvDRS4S5dmCjE95dM9/ZQEDm2hVcAD+pDxq+y/FXEHg1CyJVUVQI332G5MkdawuEQm4ATsq+25mfYe8Vssnt3Ar6HFw2Yvi0yBtYJAJjiY41eSNtEQdJmwy7L9QFxhsiG5wG4YhT7LO3/qujHZfMXEgKrK7QJlz4FWOkE+kVWdl+0Fy8/cXYBuWWfSqwqGfEk89o9uFavM7v2fBOyiW1AJImGDfmjnAk/KoeNqaQ9k4M4cttnWVJgjb5xNVWfrhreq2pVGvAPdaNMsCNM9SSB7VN2bx96+NZItgKhLaFJ71vzqDsCefDbbjNUGZ5z/xFxB+La0mzcM/med2WNlIIjz6VooUyHK0absvbtXfBqB2tn8rKRKsDKtvpJMg8zNT9pMRbwmks+lJNuABuS6gHfYASBPpWcy/CLhVtYiwzFVVbb22hiFZl0wFA5qY25mtGuHt4y65vqCqKoVTMamkz4TPKK0UIpkuTo572Ia5bD2k0q5JJc7godJhVJ3JnnXnGW9pwt+7bvElWckMTpKmYGmOFeiZhhtAKgTClVAIVVtiQNv5uJ47frXl2AtWbeKi7Y1qdQTc2+7aAYIXaPzRw8uEB6pRdkqTcuG7xWZKig6iZUFCZ/KRNcT5kzKLjAzBTYkQAeBA2PHnNVWaW2IQLA1AKo4BYXhw2PHjV1kOT3Ldoq34ivJdgQYbqDvECBFcajG/+nW2ynGCtY1iNYLLuysBq09ZGx4DlVbn/AGGup47K6uJK+XlVtl2T3beZW9yo0sePhcATpPSevp5x6BhbwKAHmBHsJq3KUXaZMoxaPnNjHGo2et/267ND7Q7WwBqOrmN49uX1NZP/AOP3Yk8zArsjK1w5WqKktQlqtjkbb7/lExzI8qrrmGYCY2mKAISaaacihpDFT01KgCzNATTmo2NasyQLtUmFwL3eAP7/AHwrpweBa5BgwP3x5CtbluVHZSg36Df3ArGUzWMTMrkaj8zAkcY2j1qxyDAgOTwEwOfDn51rzk8x4WbwmRHMedQ4XKWtgsEiIJniVqG7RSRPgrQWS0mIjeAfkP0Fa3A4IXUCvclSunuykggDy6R61ibepn06hMyJkA8p9d61vZJbxVkUAlSSWZiVniAP9qhFs887fZU2HcOHJDeEcfyj8s9TyrJ3cW7CGM1v/wCKmJOlVYJqLEHSGAEev68+NebKa6IpV0xd3w7svJa4kcjXpWWYQ3BuDIiHHhK+hisB2esjvAzcE3O0z0r1bI0LAEkdFBEfOPL/ABXLluUjoxvWJ35jAt2rjHxWjpJB5NAkgcorX4JrTlf5hbAccwHmFM9dz9aoVwgfwngavcjyu1ZWAxM+IKXJE8eBqo43ZLyLWvoWa4a2qXbjCdKNoEA6dpkCNzPlXhGT3B3jNBALEREEkmdxwHXhPnxr17t/nBt4a6pJTUukPxKE7ao6DnXi2RZgNZW4oR7UrcVYVSZ3dB8+W3MRW3r0Yq37Npfud4ndlQQw5yPMQRvsRINaTsfk72rYa4+oKSyAlndiebMx/cVTZHesXSCpBAMHyNbG9c02zpIgDpS77K/hFmiW7gOto6AdflXmma4dFuSBwkKTxg/Xn+zw2TZm48IRST0kR/1DlWZ7UYcMhO4eC2xJ26jzHlWEZt2mayhTVBJhvwkdokjWBxA1NpAHqZ9q02BwN60vhPAbjjwrBZ9fu2LdhVZldT3giSCANpEflkmZ863XZ7PbuIsKyuhckggoY0jbVAO1Z0krZp26RxY7BG66XdRV7RkBQDO8HY8Np4dav8vRAgBI6kxG/OqHG69e963uf5B4h1AkkD6US41R4QZY8i3H9aiEm+NBOP2zpzXDK8zv5159m+MtYZmDjiSQACf9hyr0ayZkE7jiBwrCfxAwts29TRtO8DjO0e9dOPjoxl1GNxHadiTFsREbsSY+UVX3szLAAqNjO0/3rgZaQrczot8uzW2h8dkMp5bGPeoM4xFh2Bs2ynUbD6CuCmooLGpUqegDv47TXVgsICZaNzAB5+c0OFteLgwI4zsZHlyrSZfhg0SBPmQT+/KnOQooscqwWpRAkARxj61p8Flr2D3hAa2wgiTt8q7MlwC6AY0kRsTx35SZq8wdkFSsSYMT0+fOsF7NWNh8HCQODyVaOBjhx2riu4aU0ncrxE8Qfry+oq40BUVfPwnrPn84qvzXLbhNw22hwsgQPEvHgR+laKJNmJ7UqqablsQQdDbQIMg+0Cr7KgxtIEZraXFY3GXxOy7Rp6E/2HSs3n1+46NbdAH2grqhiI/MSPCfOlhM2dFQBWACm2x4gb7sOpjaazboqmyDtvlOIxWhrR7xbZNs3HZE1aTAJ33jqNtjXBgP4aYhoLYi0u+kiHaD9BV/azrcBoVUZwAQADZYQsenOurLu1FoKoZhxYcZJknjHrUvJIagiwynsLg7YFtbru/F3ICy2+wXgBz51d4fIu7dPzFUndtJjkJ/zTZTmCXPxArmI30GOH+8Vctca5uEgKAQxDoZ2gRwIg9TSjJthKNILD4XTJJEcBxk0sZcRVJbgoLdeFdlm1P61WdocwtWWQsJC7lQJLsxAVQPUavka6qowv4UPa62l/Dm2oZlurBZfARG/ExXjeBsGziwt0ncaCxBBbRsDM/CF33+te24jHfaE1prCrIdCQug9IiT6V4t2o028asrGnc7SGEkhgY4eW+9RZSNxbxFpB+HHGTG3vV9l+b6l3PyrzhMc7MpZSob8pjiPPy6VaYLHaTHSpjK2U40i6z3ObikpaWWeIPApJ3aelZ29mV8eC5fRzxIB0kf9XWubPsyYtKRMQCd4rN4i8fESdRJCkx1n2EA/Sh16Gv09FybEjGN4ggZYXTrkohUSeGxJnar1cDYwmoazLDZdcyPSvOcg1apXhIYRtJAESefACf0rR38WNtUqTAG3MBQdz6/SsJQXw2Um/ZorVk3ASABvttw9aaxlTiZKxx2XxfI9dqPI8wtaBo3gwQd4PnUuNxcLrDQAeHHrP60JUiW7ZzWcbbtNoAiNjDb/MAVmv4g4iEIB2I4FdUz5/3rTYHGWbge4uksIUAcByPyNZf+IFpja1QCBBBDTHKeFViVMWR8PMTQxUhFCRXUYA0NHQkUDBpU9PSA0tkm65iNMyPP5f5rU5QkQoI2489PQmqDJMmc2w2xncgmJjpWryLAMh1hSeQhtUE8thDDyrFyNNTZYK2e7GuF0jwyJVgeQYdasLWJA0gHgNyOfn67j61lcfmL6dBBRRuoII1R68p5VPhsxmAT4gNp2naOPCaaasbg6NRexXhNolZMkE8COh8/Oszn3aFLFpi91vDssnVB3kKdmNDmmZMF8KM8bkJt4eZgcflXi2d5ndvXCbhOxMKRp0+Ucq0TszfDR5fZxubXilpiltSC7sSwX13lmPHTXrWTfw0sraW3cxeJaBIhkQTzIGk/UnjVR/DTBrZsW12lgHY9WYSf1j5V6rgjIrznnc8mseI2cNVbPHv4nfw/xC2UvWD3qYYeIARdW1zJ5OBx2g+RrznK7BDT03/xX1i1eD57lKYfG37KJCB9dsDgquA8AdBqI+Qrsr4Zp/TcdiivdKXUb8JIE/IVo8zuKqADYMwcRwG0Efp71Q9jsORbkn023joCate0IUWlllEkhd4EkTE/Ks8XJ0XkdxJMPi1VCdUxv69BVBlqNcutiWlpOi0NiLYG2oDqf7mqLN85FpTbDAs35oPARt+tafsxZPdWj8S6jIM7mujLOomOOFsPG29i1yF1ECIAU8N68S7b4i2+YqIANrw3NhB4sP1+te2duJt2g4XbcNxIkiBNfOi4DEX8QzIjP45J3O08J57VEHa6XJfhc4hu9IGtzHAroAt9Oc/+q5ExzKSCZI8M9fOrPCYYToKFWAmDtP8AesnfvaXYdGIPyPCnETLxnLKWnfgN657GDnod+RIP0411YDDXGtBgrQTI2O461ZZDgH7wSkgevH5cqxk2pM3ilqWeByJu7Gh9LRKiI1etV+Oxtw6rd1Y0wBPkBvW9x1wWMM15gPw11Dwx6Ae4rye7jXvOS0+IyacfRH0tcBmrW50nefry/U12LjGaQzGDxE7tJ4DzrNvh2L7Hy8+G3rWg7JZez4oPckhAbhXcb8vlV6cuxb9qjbYDD3Ldop3CLbI2jdhtz8+NcuZYW29sqT+aRBJP/kauGv7AC2WC6g6l/EOO4nip2rC3e0IN1lIKBT4QTy+VRBuXQlS4ZTO8ley3hUleMxMetUxFe1Jg0vWhJDBgOEeu4HGvOu0vZp7BLqJSTMKfAPfhXRGV8MmjMEU1SEUJFWKwIpUUUqQHouAym/aWFuBuS6kK/LYn9Ktssu41UAu2w5Uggo8RDAyNQBBiRt1q8S4vWuuxdX9xXmLKzscUUGZpdvq+pCn4oa3Pj0LoIYcdyxAJPUVw28svggrdXb4rTMP/ADrauVP7FEttOn0q95NgkqKMXLwAjux1hXAJjmCTt5A9Kwmb9mXu3nutcGq42pvw4E8NhPlXqOKwNthxI9Gis/i+z6ncYi8v/cDVPJJfSVCP4dHZm8y20BMm2qo3KSoifnFb/Lcy2G/rXmOHyHEqwa3jTtye1qB8j4q0mEw+KAEtbJ6jUoPy3/WvNknGVrpu1sjePmttQSzRAkzw+deOLmz47Mn0EhbjkmfCFsKoXW0jbwgH1NbC9YuFfxDPkBtVdawlhnBZRI4EeEj5g114slPpg8fOG3wz4e3bAkgKpYHjKrEnYdCKqf4jZS1/BMtl/wAS3/xFtZ/5oCmV9pPyp8NhwAul2hAQoLaoBEEb1NiFgCbjGFheHh2jwwNuldm8bujNRfqzwTJu9XEW+9WJuLIdSQdxsfKvozD4myZI37seKNpaJgdfKsi+Atk7opHQoCKtrGCsgyEAIGkECIXhAjlSWS1/shuHeMvswu2nsOtxRoIdGDCQQoM/vyrx/smfs9qDaeWdmYqisCCwjz4V6LjdKpHqdyTx9azGHVF2ge1E89VQo4ruyuzPE2jrPdtsJUC2wM7yOFeSZlhL1y47lD4mJ4cuUx5RXt7hDM6frXA+Cs/Cv1rL/Ir4aeJFDkmYWTZW2IlQAysdLQNK9DxmrKxiLK3SqFW0lQJgAltwCOI5cqsGwdggakQxwnenXLcNqLd2ktsTB3Ez/aiWaL9oFja9Ff28zOy1hbSMxcspdQpICxJmNhx+leePAbZTA6gj9a9Vx2VYcKNKKPSRVacBa6D3NHnS5Q/Ff088wlxp2ZfnW27KeFWuFgSfDpHNY3k/OnxGR4ZuKD1BINDheziqrC3dIDCIZQ8bgyOEHaJqnmjJV6J8bTs0GExWoEQfEpjcmem9YDH2ouOHRpkj+UkGepbetRbye6GBF4bdFg8COJPmaWIytC0sZPAmeO1EciguMHByfSg7PZv3Eo2sq3CbZ8J9QTVvjM8DDZlC85IMjnA/zXbYyyyo4D3rnxOEt+XvQ8qbDxmZznL8I+6PpaJkBQGmf5ZkcDvVCctX4z/pH+a22IwFs8h7iuF8qT9sKvzkeIyZy4fGf9P+9KtOcpTr/wDoUqfnDxo9EWyvQV0Wba/uKb7KvQ1ImHHnXAdNnQqLU6Itc62R51MlkedaREStbXpXNdw69P0qc2h51C1gedOT4JEuDwy1cYfDrVRhrUdatLBjrXOo9KkzovYdIrNvh11nbn5VeX7m3OqYp4udUJFnhUEUeJQGoLG3WpXNaxYmiL7MscKlt2gOVOKcCrbJRz460pHCqQYJJ/LV1ihXCF86xm+lo5vsafD9aY4BPh+tdoUUWkdaSHbK1sAnw/WlbwKTwPvXayjrQi2OtSyukV/CKREH3riOVp0PuKtDb86A2fOhsFZW/dKef0qfD5ag6+9dndeZp0t+tAdIfu5fP3rivZWPP3q2KeZrlu2/6jTsXSuOVjz965ruTT8VWjWf6jUZs/1UtwplO+SetRtkPr7Vcthz8X0FCcMfi/SjcdFGchPn7UqvBhv6z9KVPcVGt7lPhFGLKfAKqfvVOp9qf72TqfateGerLgWk+EVILSdBVIM2Tz9qMZunU+1HA1Zdd0nwim7lPhFU/wB7p1PtS+9k8/aix6suktJ8IroVE6Vn1zlPP2qQZ0nn7Ug1ZdXLadK5e5Sfyiq585Tz9qiObp1PtQGrL1LSfCKPu0+EVRLnSdT7VIud2+p9jTQ6LsWk+Gi7pPhqjGe2+p9jR/fidT7GqJ1ZZXbKfDXOcMnw1xnOEPM+xoPvVOp9jUMpJliMOnw0vs6fCKr/AL1Xqfan+9l8/akFM7WwyfDQfZrfwiuP70Tqfah+8k6n2pNDpnecKnwUvsifB9a4hmi9T7Ujmy9T7UUHTt+yJ8NP9kT4a4hmq9fpRnNF6/Q0ai6dRwqfDUD4RPhqL72U8/oaE5kvX6Uah0kODT4aA4K38NB94jr9DSOYL1+hpa/wOj/Ybfw0JwNvpTfeC9foab7evX6GjX+D6L7AnSlTfbl6/Sno0Dp//9k=&#34; alt=&#34;&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;image source: &lt;a href=&#34;https://www.shutterstock.com/&#34; class=&#34;uri&#34;&gt;https://www.shutterstock.com/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;The 8th post of the &lt;a href=&#34;https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/&#34;&gt;Scientist’s Guide to R series&lt;/a&gt; covers how to work with factors in R and how the &lt;a href=&#34;https://forcats.tidyverse.org/&#34;&gt;forcats&lt;/a&gt; package can simplify the process.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;N.B.&lt;/em&gt; if anything I’m covering seems strange/confusing to you and you’re jumping into the series now, there’s a good chance I covered it in an earlier post and you can probably find the relevant section pretty quickly with the search bar that can be accessed via the magnifying glass icon at the top right corner of the page.&lt;/p&gt;
&lt;div id=&#34;load-packages&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; load packages&lt;/h2&gt;
&lt;p&gt;As usual, we’ll start by &lt;a href=&#34;https://craig.rbind.io/post/2019-06-22-asgr-1-getting-data-into-r/#installing-and-loading-r-packages&#34;&gt;loading the packages&lt;/a&gt; we’ll need.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse) #note: forcats is installed and loaded with the tidyverse&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;import-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.2&lt;/span&gt; import data&lt;/h2&gt;
&lt;p&gt;For this post we’ll work with the gapminder data one last time so we can focus on applying new methods to data that we’re already familiar with. I promise we will use something different the next time we need to import data.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#in this case we import the data by loading the gapminder package
library(gapminder) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A glimpse of the structure of the gapminder data using dplyr’s &lt;a href=&#34;https://craig.rbind.io/post/2019-08-06-asgr-2-0-basic-operations-and-data-structures/#functions-for-describing-the-structural-information-of-data-objects&#34;&gt;glimpse()&lt;/a&gt; function (loaded with the tidyverse) shows us that there are columns for the country and continent that are already both factors.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder %&amp;gt;% glimpse() #%&amp;gt;% is the pipe operator (covered in an earlier post)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 1,704
## Columns: 6
## $ country   &amp;lt;fct&amp;gt; &amp;quot;Afghanistan&amp;quot;, &amp;quot;Afghanistan&amp;quot;, &amp;quot;Afghanistan&amp;quot;, &amp;quot;Afghanistan&amp;quot;, ~
## $ continent &amp;lt;fct&amp;gt; Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, ~
## $ year      &amp;lt;int&amp;gt; 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, ~
## $ lifeExp   &amp;lt;dbl&amp;gt; 28.801, 30.332, 31.997, 34.020, 36.088, 38.438, 39.854, 40.8~
## $ pop       &amp;lt;int&amp;gt; 8425333, 9240934, 10267083, 11537966, 13079460, 14880372, 12~
## $ gdpPercap &amp;lt;dbl&amp;gt; 779.4453, 820.8530, 853.1007, 836.1971, 739.9811, 786.1134, ~&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;factor-basics&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;Factor basics&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Factors were briefly introduced in an &lt;a href=&#34;https://craig.rbind.io/post/2019-08-06-asgr-2-0-basic-operations-and-data-structures/#factors&#34;&gt;earlier post&lt;/a&gt; as modifications of character or numeric vectors which enables them to be used as categorical variables AKA nominal variables. Categorical variables take on a few discrete values or levels, e.g. biological sex (levels = Male &amp;amp; Female), or continent (levels = Asia, Africa, North America, South America, Antarctica, Europe, &amp;amp; Australia/Oceania). If you’re doing experimental work, you’ll need to use a factor to represent the variable encoding your experimental conditions or treatment groups.&lt;/p&gt;
&lt;p&gt;Recall that a factor can be defined in R using the base R &lt;code&gt;factor()&lt;/code&gt; function,&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;y &amp;lt;- rep(c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;o&amp;quot;), 10) #a vector of the letters a, b, &amp;amp; c repeated 10x as an example 

fruit_category &amp;lt;- factor(x = y, #vector you wish to use to define as a factor 
                         #what are the unique values/levels of the factor 
                         levels = c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;o&amp;quot;), 
                         #use the labels arg to change the labels of the factor
                         #levels
                         labels = c(&amp;quot;Apples&amp;quot;, &amp;quot;Bananas&amp;quot;, &amp;quot;Oranges&amp;quot;),
                         #if you want the factor to be ordered set this to TRUE
                         #(i.e. for an ordinal variable)
                         ordered = FALSE) 

fruit_category #prints the values of the factor and tells you what the levels of it are&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] Apples  Bananas Oranges Apples  Bananas Oranges Apples  Bananas Oranges
## [10] Apples  Bananas Oranges Apples  Bananas Oranges Apples  Bananas Oranges
## [19] Apples  Bananas Oranges Apples  Bananas Oranges Apples  Bananas Oranges
## [28] Apples  Bananas Oranges
## Levels: Apples Bananas Oranges&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#N.B. if you don&amp;#39;t care about the order of factor levels and are happy with the
#labels, you could instead convert a numeric or character vector to a factor
#using as.factor()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To check the levels of a factor without printing out its values at the same time we can use the base R &lt;code&gt;levels()&lt;/code&gt; function (similar to the base R &lt;code&gt;unique()&lt;/code&gt; function for other vector types)&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;levels(fruit_category)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Apples&amp;quot;  &amp;quot;Bananas&amp;quot; &amp;quot;Oranges&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#this is more useful for the gapminder factors since we didn&amp;#39;t define those
gapminder$continent %&amp;gt;% levels()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Africa&amp;quot;   &amp;quot;Americas&amp;quot; &amp;quot;Asia&amp;quot;     &amp;quot;Europe&amp;quot;   &amp;quot;Oceania&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder$country %&amp;gt;% levels() %&amp;gt;% head(10) #show the 1st 10 levels&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;Afghanistan&amp;quot; &amp;quot;Albania&amp;quot;     &amp;quot;Algeria&amp;quot;     &amp;quot;Angola&amp;quot;      &amp;quot;Argentina&amp;quot;  
##  [6] &amp;quot;Australia&amp;quot;   &amp;quot;Austria&amp;quot;     &amp;quot;Bahrain&amp;quot;     &amp;quot;Bangladesh&amp;quot;  &amp;quot;Belgium&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You’ll primarily end up using factors in 2 circumstances: when fitting statistical models and plotting data. Although we won’t go into data visualization and modelling in too much detail until later in the series, we’ll get our toes wet here to spice things up a bit.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;factors-and-data-visualization&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;factors and data visualization&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Ignoring the temporal nature of the data for now, let’s say we were interested in looking at the median life expectancy of each continent to see if there were any differences between them.&lt;/p&gt;
&lt;p&gt;This can be done most easily using a non-parametric box-and-whisker plot, which shows the 25th percentile and 75th percentile as the bottom and top of the box, the median (i.e. 50th percentile) as a line inside the box, then whiskers extending above and below the box for more extreme values&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt; and circles for points beyond the whisker thresholds that may be outliers.&lt;/p&gt;
&lt;p&gt;We can generate a box plot in R using the base R &lt;code&gt;boxplot()&lt;/code&gt; function. In case you’re wondering, we &lt;em&gt;will&lt;/em&gt; cover visualization techniques with the popular ggplot2 package in a future post.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#base R boxplot
boxplot(lifeExp ~ continent, #formula syntax of the form y-variable ~ x-variable
        data = gapminder)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;That’s great, but what if we wanted to reorder the levels of the factor so that the Americas appear first? We could redefine the continent factor using the &lt;code&gt;factor()&lt;/code&gt; function, or we could use &lt;code&gt;fct_relevel()&lt;/code&gt; from the forcats package (in conjunction with &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#mutate&#34;&gt;dplyr::mutate()&lt;/a&gt;).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#if we use factor() we need to specify all levels again
p1a &amp;lt;- gapminder %&amp;gt;%
  #first modify the column using dplyr::mutate(), which was loaded with
  #library(tidyverse)
  mutate(continent = factor(continent, 
                            levels = c(&amp;quot;Americas&amp;quot;, &amp;quot;Africa&amp;quot;, &amp;quot;Asia&amp;quot;, &amp;quot;Europe&amp;quot;, &amp;quot;Oceania&amp;quot;)) 
  ) %&amp;gt;%
  #recall that &amp;quot;.&amp;quot; is used to specify which argument the output from whatever
  #was before the %&amp;gt;% (pipe operator) should be passed to
  boxplot(lifeExp ~ continent, data = .) 

#for fct_relevel you only need to mention the levels you want to rearrange
p1b &amp;lt;- gapminder %&amp;gt;%
  mutate(continent = fct_relevel(continent, &amp;quot;Americas&amp;quot;) 
         #by default levels you mention move to the front
  ) %&amp;gt;%
  boxplot(lifeExp ~ continent, data = .) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;identical(p1a, p1b)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#both options have the same effect on the plot


#if we wanted to move the data for the Americas to the end, we could use the
#&amp;quot;after&amp;quot; argument
gapminder %&amp;gt;%
  mutate(continent = fct_relevel(continent, &amp;quot;Americas&amp;quot;,
                                 after = Inf) 
         #here the special character set &amp;quot;Inf&amp;quot; specifies the end
         ) %&amp;gt;%
  boxplot(lifeExp ~ continent, data = .) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-7-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#or to the 4th position
gapminder %&amp;gt;%
  mutate(continent = fct_relevel(continent, &amp;quot;Americas&amp;quot;,
                                 after = 3) 
         ) %&amp;gt;%
  boxplot(lifeExp ~ continent, data = .) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-7-3.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;In addition to manually reordering the levels of a factor using &lt;code&gt;fct_relevel()&lt;/code&gt;, you can reorder a factor based on another variable with &lt;code&gt;fct_reorder()&lt;/code&gt;, e.g. if you want them to appear in order of ascending life expectancy:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder %&amp;gt;%
  mutate(continent = fct_reorder(continent, lifeExp) 
         ) %&amp;gt;%
  boxplot(lifeExp ~ continent, data = .) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#to sort in descending order add .desc = TRUE in the fct_reorder call.
gapminder %&amp;gt;%
  mutate(continent = fct_reorder(continent, lifeExp, 
                                 .desc = TRUE)  
         ) %&amp;gt;%
  boxplot(lifeExp ~ continent, data = .) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-8-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;A way to remember the difference between &lt;code&gt;fct_relevel()&lt;/code&gt; and &lt;code&gt;fct_reorder()&lt;/code&gt; is that &lt;code&gt;fct_relevel()&lt;/code&gt; allows you &lt;em&gt;manually&lt;/em&gt; specify the &lt;em&gt;levels&lt;/em&gt; of a factor, while &lt;code&gt;fct_reorder()&lt;/code&gt; lets you re-&lt;em&gt;order&lt;/em&gt; a factor based on the &lt;em&gt;order&lt;/em&gt; of another variable.&lt;/p&gt;
&lt;p&gt;To modify the values of a factor you can use either the labels argument of the base R &lt;code&gt;factor()&lt;/code&gt; function and (again) have to specify all values and labels, which can become tedious really fast, or you can just &lt;code&gt;forcats::fct_recode()&lt;/code&gt;. For example, let’s say we wanted to change continent values of “Oceania” to “Australia”:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#base R&amp;#39;s factor()
gapminder %&amp;gt;%
  mutate(continent = factor(continent,  
                            #all existing unique values/levels you want to use
                            #need to be specified
                            levels = c(&amp;quot;Africa&amp;quot;, &amp;quot;Americas&amp;quot;, &amp;quot;Asia&amp;quot;, &amp;quot;Europe&amp;quot;, &amp;quot;Oceania&amp;quot;),
                            #one label per level needs to be specified, in the
                            #same order as the levels
                            labels = c(&amp;quot;Africa&amp;quot;, &amp;quot;Americas&amp;quot;, &amp;quot;Asia&amp;quot;, &amp;quot;Europe&amp;quot;, &amp;quot;Australia&amp;quot;))
         ) %&amp;gt;%
  boxplot(lifeExp ~ continent, data = .) 

#using forcats::fct_recode()
gapminder %&amp;gt;%
  mutate(continent = fct_recode(continent,
                                #only the value(s) you want to recode need to be
                                #specified
                                &amp;quot;Australia&amp;quot; = &amp;quot;Oceania&amp;quot;) #&amp;quot;new value&amp;quot; = &amp;quot;old value&amp;quot;
         ) %&amp;gt;%
  boxplot(lifeExp ~ continent, data = .) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Forcats also makes it easy to aggregate levels using &lt;code&gt;fct_recode()&lt;/code&gt;, &lt;code&gt;fct_collapse()&lt;/code&gt;, or &lt;code&gt;fct_lump_*()&lt;/code&gt;. The main difference is that &lt;code&gt;fct_recode()&lt;/code&gt; is for manually recoding of categories, while &lt;code&gt;fct_lump_*()&lt;/code&gt; will combine categories based on a criterion like those with counts less than a specified threshold.&lt;/p&gt;
&lt;p&gt;For example, if we wanted to view the combined data for Europe and Asia under the label “Eurasia”, we could do so using &lt;code&gt;fct_recode()&lt;/code&gt; or a shortcut function called &lt;code&gt;fct_collapse()&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder %&amp;gt;%
  mutate(continent = fct_recode(continent,
                                #use the same label for more than one value to
                                #aggregate
                                &amp;quot;Eurasia&amp;quot; = &amp;quot;Europe&amp;quot;,
                                &amp;quot;Eurasia&amp;quot; = &amp;quot;Asia&amp;quot;) 
         ) %&amp;gt;%
  boxplot(lifeExp ~ continent, data = .) 

#a shortcut for this use of fct_recode() is fct_collapse()
gapminder %&amp;gt;%
  mutate(continent = fct_collapse(continent,
                                &amp;quot;Eurasia&amp;quot; = c(&amp;quot;Europe&amp;quot;, &amp;quot;Asia&amp;quot;)) 
         ) %&amp;gt;%
  boxplot(lifeExp ~ continent, data = .) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-10-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Or if we wanted to aggregate the data for the continents other than the top 2 most common values we could use &lt;code&gt;fct_lump_n()&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder %&amp;gt;%
  mutate(continent = fct_lump_n(continent, 
                                #the n argument determines the number of levels to
                                #retain (in order of descending frequency of
                                #appearance)
                                n = 2,
                                #the other_level argument is used to set the label
                                #for the new category representing the former
                                #uncommon categories
                                other_level = &amp;quot;Other&amp;quot; #default label is &amp;quot;Other&amp;quot;
  )  
  ) %&amp;gt;%
  boxplot(lifeExp ~ continent, data = .) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-11-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#or to lump together categories appearing less than a minimum number of times,
#use fct_lump_min()

gapminder %&amp;gt;%
  mutate(continent = fct_lump_min(continent, 
                                  #the min argument defines the minimum
                                  #frequency threshold for a category to avoid
                                  #being lumped together. For this demo we&amp;#39;ll
                                  #use the mean count of each continent using
                                  #the mean() and table() functions and lump
                                  #together continents appearing less often than
                                  #that
                                  min = mean(table(gapminder$continent)))    
  ) %&amp;gt;%
  boxplot(lifeExp ~ continent, data = .) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-11-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;There are a few other &lt;code&gt;fct_lump_*&lt;/code&gt; variants that you can learn about in the &lt;code&gt;fct_lump()&lt;/code&gt; documentation.&lt;/p&gt;
&lt;p&gt;To drop unused levels of a factor you can use &lt;code&gt;fct_drop()&lt;/code&gt;. If we filter the gapminder data to drop records for Africa, we might be surprised to see that &lt;code&gt;levels(gapminder$continent)&lt;/code&gt; still lists Africa as one of the levels for the continent factor (despite the fact that there are no longer any records for it). In this case, the factor retains the original level coding but one of the levels is no longer represented in the data. To remove that unused level we can use &lt;code&gt;fct_drop()&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#save this subset as a new object so we don&amp;#39;t overwrite the original data frame
gap2 &amp;lt;- gapminder %&amp;gt;% 
  filter(continent != &amp;quot;Africa&amp;quot;)

gap2$continent %&amp;gt;% levels()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Africa&amp;quot;   &amp;quot;Americas&amp;quot; &amp;quot;Asia&amp;quot;     &amp;quot;Europe&amp;quot;   &amp;quot;Oceania&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#check the counts of each level
gap2$continent %&amp;gt;% table() #no records for Africa, as expected!&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## .
##   Africa Americas     Asia   Europe  Oceania 
##        0      300      396      360       24&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#what&amp;#39;s worse, Africa still shows up (without any data) when we try to graph
#life expectancy as a function of continent
boxplot(lifeExp ~ continent, gap2)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-12-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#drop the unused level
gap2 &amp;lt;- gap2 %&amp;gt;% 
  mutate(continent = fct_drop(continent))

gap2$continent %&amp;gt;% levels()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Americas&amp;quot; &amp;quot;Asia&amp;quot;     &amp;quot;Europe&amp;quot;   &amp;quot;Oceania&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#now we don&amp;#39;t have to worry about it anymore&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;factors-and-modelling&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;factors and modelling&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;To see how factor levels affect modelling, lets fit a basic linear regression model to see if life expectancy is differs between continents using the base R &lt;code&gt;lm()&lt;/code&gt; &amp;amp; &lt;code&gt;summary()&lt;/code&gt; functions.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#fit the model
linear_regression_model &amp;lt;- lm(lifeExp ~ continent, 
                              #dependent variable ~ independent variable(s)
                              #AKA response ~ predictor(s)
                              data = gapminder)

#print the model results summary using the summary() function
summary(linear_regression_model)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Call:
## lm(formula = lifeExp ~ continent, data = gapminder)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -31.2639  -5.4537   0.3297   6.0480  27.5767 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(&amp;gt;|t|)    
## (Intercept)        48.8653     0.3696  132.22   &amp;lt;2e-16 ***
## continentAmericas  15.7934     0.6486   24.35   &amp;lt;2e-16 ***
## continentAsia      11.1996     0.5931   18.88   &amp;lt;2e-16 ***
## continentEurope    23.0384     0.6110   37.70   &amp;lt;2e-16 ***
## continentOceania   25.4609     1.9204   13.26   &amp;lt;2e-16 ***
## ---
## Signif. codes:  0 &amp;#39;***&amp;#39; 0.001 &amp;#39;**&amp;#39; 0.01 &amp;#39;*&amp;#39; 0.05 &amp;#39;.&amp;#39; 0.1 &amp;#39; &amp;#39; 1
## 
## Residual standard error: 9.232 on 1699 degrees of freedom
## Multiple R-squared:  0.4904, Adjusted R-squared:  0.4892 
## F-statistic: 408.7 on 4 and 1699 DF,  p-value: &amp;lt; 2.2e-16&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ignoring most of the output for now (which will be covered in detail in a future post on modelling in R), we can see a set of t-tests for each level of the continent factor except for Africa. This is because when an lm() object is passed to the summary() function, R evaluates linear regression predictor variables that are factors by comparing each category to a baseline/reference category, which happens to be “Africa” in this case. If the assumptions of the linear regression model are valid, this output tells us if the life expectancy (what we’ve specified as the dependent variable) of each non-African continent is statistically equivalent or not (b/c in frequentist stats we’re evaluating a null hypothesis of equivalence) compared to the life expectancy of Africa.&lt;/p&gt;
&lt;p&gt;What if you wanted to compare each continent to the Americas instead? Just relevel the continent factor and make Americas the first level.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#fit the model
linear_regression_model &amp;lt;- lm(lifeExp ~ continent, 
                              data = gapminder %&amp;gt;% 
                                mutate(continent = 
                                         fct_relevel(continent,
                                                     #make Americas the new &amp;quot;reference&amp;quot; level
                                                     &amp;quot;Americas&amp;quot;))
                              )

#print the model results summary using the summary() function
summary(linear_regression_model)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Call:
## lm(formula = lifeExp ~ continent, data = gapminder %&amp;gt;% mutate(continent = fct_relevel(continent, 
##     &amp;quot;Americas&amp;quot;)))
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -31.2639  -5.4537   0.3297   6.0480  27.5767 
## 
## Coefficients:
##                  Estimate Std. Error t value Pr(&amp;gt;|t|)    
## (Intercept)       64.6587     0.5330 121.309  &amp;lt; 2e-16 ***
## continentAfrica  -15.7934     0.6486 -24.350  &amp;lt; 2e-16 ***
## continentAsia     -4.5938     0.7066  -6.501 1.05e-10 ***
## continentEurope    7.2449     0.7217  10.039  &amp;lt; 2e-16 ***
## continentOceania   9.6675     1.9584   4.936 8.74e-07 ***
## ---
## Signif. codes:  0 &amp;#39;***&amp;#39; 0.001 &amp;#39;**&amp;#39; 0.01 &amp;#39;*&amp;#39; 0.05 &amp;#39;.&amp;#39; 0.1 &amp;#39; &amp;#39; 1
## 
## Residual standard error: 9.232 on 1699 degrees of freedom
## Multiple R-squared:  0.4904, Adjusted R-squared:  0.4892 
## F-statistic: 408.7 on 4 and 1699 DF,  p-value: &amp;lt; 2.2e-16&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now the life expectancy of each non-American continent is being compared to the life expectancy of the Americas.&lt;/p&gt;
&lt;p&gt;BTW, in case you were wondering, we will cover how to get the usual ANOVA outputs for linear models that you may be more accustomed to seeing in a later post.&lt;/p&gt;
&lt;p&gt;Now you know the basics of the forcats package which should help you work with factors in R. Here’s another cute cat picture for making it to the end…&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQZ3_yoCc--6SFjIfacmHvYGVLsuHujAIOoVg&amp;amp;usqp=CAU&#34; alt=&#34;&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;image source: &lt;a href=&#34;https://www.boredpanda.com/&#34; class=&#34;uri&#34;&gt;https://www.boredpanda.com/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;navigation&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;6&lt;/span&gt; Navigation&lt;/h1&gt;
&lt;p&gt;Click &lt;a href=&#34;https://craig.rbind.io/post/2020-06-28-asgr-2-3-string-manipulation/&#34;&gt;here&lt;/a&gt; to go back to the previous post on strings and regular expressions, or &lt;a href=&#34;https://craig.rbind.io/post/2020-10-10-ASGR-2-5-dates&#34;&gt;here&lt;/a&gt; to advance to the next one on working with dates &amp;amp; times in R will be added as soon as I have time to write it.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;notes&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;7&lt;/span&gt; Notes&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;To learn more about factors and dates in R see &lt;a href=&#34;https://r4ds.had.co.nz/factors.html&#34;&gt;this chapter&lt;/a&gt; of &lt;a href=&#34;https://r4ds.had.co.nz/&#34;&gt;R 4 Data Science&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;A further bonus of the forcats functions like &lt;code&gt;fct_reorder()&lt;/code&gt; is that you can give them a character vector instead of a factor as input they will automatically convert that character vector into a factor for you (However, unlike the stringr functions, this doesn’t work for other vector types like numeric/integer vectors).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thank you for visiting my blog. I welcome any suggestions for future posts, comments or other feedback you might have. Feedback from beginners and science students/trainees (or with them in mind) is especially helpful in the interest of making this guide even better for them.&lt;/p&gt;
&lt;p&gt;This blog is something I do as a volunteer in my free time. If you’ve found it helpful and want to give back, &lt;a href=&#34;https://www.buymeacoffee.com/huttoncp&#34;&gt;coffee donations&lt;/a&gt; would be appreciated.&lt;/p&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js&#34; data-name=&#34;bmc-button&#34; data-slug=&#34;huttoncp&#34; data-color=&#34;#FF5F5F&#34; data-emoji=&#34;&#34;  data-font=&#34;Cookie&#34; data-text=&#34;Buy me a coffee&#34; data-outline-color=&#34;#000000&#34; data-font-color=&#34;#ffffff&#34; data-coffee-color=&#34;#FFDD00&#34; &gt;&lt;/script&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;whiskers are plotted at 1.5x the interquartile range from the top &amp;amp; bottom lines of the box or the maximum/minimum value if no values are above/below that 1.5*IQR threshold&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>A Scientist&#39;s Guide to R: Step 2.3 - string manipulation and regex</title>
      <link>https://craig.rbind.io/post/2020-06-28-asgr-2-3-string-manipulation/</link>
      <pubDate>Sun, 28 Jun 2020 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/post/2020-06-28-asgr-2-3-string-manipulation/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#tldr&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#introduction&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#regular-expressions&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;Regular expressions&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#detecting-pattern-matches-with-str_detect-str_which-str_count-and-str_locate.&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;Detecting pattern matches&lt;/strong&gt; with &lt;code&gt;str_detect()&lt;/code&gt;, &lt;code&gt;str_which()&lt;/code&gt;, &lt;code&gt;str_count()&lt;/code&gt;, and &lt;code&gt;str_locate()&lt;/code&gt;.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#subsetting-strings-data-frames-with-str_subset-str_sub-str_match-str_extract.&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;Subsetting strings &amp;amp; data frames&lt;/strong&gt; with &lt;code&gt;str_subset()&lt;/code&gt;, &lt;code&gt;str_sub()&lt;/code&gt;, &lt;code&gt;str_match()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_extract()&lt;/code&gt;.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#combining-and-splitting-strings-using-str_c-str_flatten-str_split-str_glue.&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;Combining and splitting strings&lt;/strong&gt; using &lt;code&gt;str_c()&lt;/code&gt;, &lt;code&gt;str_flatten()&lt;/code&gt;, &lt;code&gt;str_split()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_glue()&lt;/code&gt;.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#manage-the-lengths-of-strings-using-str_length-str_pad-str_trunc-str_trim&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7&lt;/span&gt; &lt;strong&gt;Manage the lengths of strings&lt;/strong&gt; using &lt;code&gt;str_length()&lt;/code&gt;, &lt;code&gt;str_pad()&lt;/code&gt;, &lt;code&gt;str_trunc()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_trim()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#mutating-strings-with-str_sub-str_replace-str_replace_all-str_remove-str_remove_all&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;8&lt;/span&gt; &lt;strong&gt;Mutating strings&lt;/strong&gt; with &lt;code&gt;str_sub()&lt;/code&gt;, &lt;code&gt;str_replace()&lt;/code&gt;, &lt;code&gt;str_replace_all()&lt;/code&gt;, &lt;code&gt;str_remove()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_remove_all()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#you-can-modify-the-case-of-a-string-using-str_to_lower-str_to_upper-str_to_title-str_to_sentence&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;9&lt;/span&gt; You can &lt;strong&gt;modify the case of a string&lt;/strong&gt; using &lt;code&gt;str_to_lower()&lt;/code&gt;, &lt;code&gt;str_to_upper()&lt;/code&gt;, &lt;code&gt;str_to_title()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_to_sentence()&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#example-application-using-str_detect-or-str_which-to-subset-with-data-frames&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;10&lt;/span&gt; Example application: Using &lt;code&gt;str_detect()&lt;/code&gt; or &lt;code&gt;str_which()&lt;/code&gt; to subset with data frames&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#navigation&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;11&lt;/span&gt; Navigation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#notes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;12&lt;/span&gt; Notes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;tldr&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Being able to work with character strings is an essential skill in data analysis and science. In this post we’ll learn a few of the ways in which the &lt;a href=&#34;https://stringr.tidyverse.org/index.html&#34;&gt;stringr&lt;/a&gt; package and regular expressions (AKA “regex” or “regexps”) makes working with strings in R considerably easier.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;The 7th post of the &lt;a href=&#34;https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/&#34;&gt;Scientist’s Guide to R series&lt;/a&gt; is all about showing you how to work with strings in R, using the intuitive &lt;a href=&#34;https://stringr.tidyverse.org/index.html&#34;&gt;stringr&lt;/a&gt; package from the &lt;a href=&#34;https://www.tidyverse.org/&#34;&gt;tidyverse&lt;/a&gt;. You’ll also learn about regular expressions, which allow you to use concisely specified patterns to search, subset, and modify strings. This is quite a large topic, so for this post I’ll focus on some of the more common operations that I’ve had to use in my work as an academic researcher and data scientist. Usually, this means working with strings vectors that are columns in data frames or the names of the columns in a data frame (which you may recall we can get with the base R &lt;code&gt;names()&lt;/code&gt; function). Specifically, we’ll consider:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;What regular expressions are and how to use them.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Detecting, locating, and counting pattern matches with &lt;code&gt;str_detect()&lt;/code&gt;, &lt;code&gt;str_which()&lt;/code&gt;, &lt;code&gt;str_locate()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_count()&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Subset strings with &lt;code&gt;str_subset()&lt;/code&gt;, &lt;code&gt;str_sub()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_extract()&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Combining and splitting strings using &lt;code&gt;str_c()&lt;/code&gt;, &lt;code&gt;str_flatten()&lt;/code&gt;, &lt;code&gt;str_split()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_glue()&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Manage lengths of strings with &lt;code&gt;str_length()&lt;/code&gt;, &lt;code&gt;str_pad()&lt;/code&gt;, &lt;code&gt;str_trunc()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_trim()&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Mutate strings using &lt;code&gt;str_sub()&lt;/code&gt;, &lt;code&gt;str_replace()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_remove()&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Alter the case of strings with &lt;code&gt;str_to_lower()&lt;/code&gt;, &lt;code&gt;str_to_upper()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_to_title()&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Note: as usual, at this point in the blog series I’ll assume you’re familiar with the pipe operator (&lt;code&gt;%&amp;gt;%&lt;/code&gt;). To refresh your memory or if you’re reading about the pipe operator for the 1st time, see &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#chaining-functions-with-the-pipe-operator&#34;&gt;this section&lt;/a&gt; of an earlier post.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;regular-expressions&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;Regular expressions&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Regular expressions, or “regexps” for short, are a powerful way to work with patterns in strings. Becoming familiar with regexps is well worth the effort in the time they will save you. Regex allows you to match patterns in strings using a set of special characters that tell regexps-supported functions in R how to concisely describe the pattern in question. You can learn more about regular expressions &lt;a href=&#34;https://www.regular-expressions.info/&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;https://bookdown.org/rdpeng/rprogdatascience/regular-expressions.html&#34;&gt;here&lt;/a&gt;, and &lt;a href=&#34;https://en.wikipedia.org/wiki/Regular_expression&#34;&gt;here&lt;/a&gt;. I won’t be using all of these in the subsequent demonstrations of the &lt;a href=&#34;https://stringr.tidyverse.org/&#34;&gt;stringr&lt;/a&gt; functions (to keep things simple), but listing the majority of the available options will be useful as future reference for us to use in constructing regexps.&lt;/p&gt;
&lt;p&gt;In this post we’ll focus on some of the most common special chararcters you’ll need, specifically (&lt;code&gt;special character&lt;/code&gt; = definition):&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Basics&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;^&lt;/code&gt; = start of a string&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;$&lt;/code&gt; = end of a string&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;.&lt;/code&gt; = any character&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;[:digit:]&lt;/code&gt; = any digit (use an extra set of square brackets for base R functions that accept regexps)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;[:alpha:]&lt;/code&gt; = any letter&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;[:alnum:]&lt;/code&gt; = letters and/or numbers&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;[:punct:]&lt;/code&gt; = punctuation characters&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;[:graph:]&lt;/code&gt; = letters, numbers, and punctuation characters&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;[:lower:]&lt;/code&gt; = lowercase letters only&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;[:upper:]&lt;/code&gt; = uppercase letters only&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;[:space:]&lt;/code&gt; = empty spaces&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;[:blank:]&lt;/code&gt; = empty spaces or tabs&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Quantifiers&lt;/strong&gt; These are useful when you want to match a pattern a specific number of times (based on the preceding character in the regexp):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;*&lt;/code&gt; = matches the preceding character any number of times&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;+&lt;/code&gt; = matches the preceding character once&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;?&lt;/code&gt; = matches the predecing character at most once (i.e. optionally)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;{n}&lt;/code&gt; = matches the preceding character exactly &lt;strong&gt;n&lt;/strong&gt; times&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;{n, }&lt;/code&gt; = &lt;strong&gt;n&lt;/strong&gt; or more times&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;{n, m}&lt;/code&gt; = between &lt;strong&gt;n&lt;/strong&gt; &amp;amp; &lt;strong&gt;m&lt;/strong&gt; times&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Alternatives &amp;amp; look-arounds&lt;/strong&gt; are useful for matching patterns more flexibly:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;|&lt;/code&gt; = or (just like the base R logical operator), e.g. the regexp “apples|oranges” would look for apples or oranges&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;[abc]&lt;/code&gt; = one of &lt;strong&gt;a&lt;/strong&gt;, &lt;strong&gt;b&lt;/strong&gt;, or &lt;strong&gt;c&lt;/strong&gt; (or whatever else you put within the &lt;strong&gt;[ ]&lt;/strong&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;[t-z]&lt;/code&gt; = a letter from &lt;strong&gt;t&lt;/strong&gt; to &lt;strong&gt;z&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;[^abc]&lt;/code&gt; = anything other than &lt;strong&gt;a&lt;/strong&gt;, &lt;strong&gt;b&lt;/strong&gt;, or &lt;strong&gt;c&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;(?=)&lt;/code&gt; = look ahead, e.g. &lt;code&gt;i(?=e)&lt;/code&gt; = &lt;strong&gt;i&lt;/strong&gt; when it comes before &lt;strong&gt;e&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;(?!)&lt;/code&gt; = negative look ahead, e.g. &lt;code&gt;i(?!e)&lt;/code&gt; &lt;strong&gt;i&lt;/strong&gt; when it comes before something that isn’t &lt;strong&gt;e&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;(?&amp;lt;)&lt;/code&gt; = look behind, e.g. &lt;code&gt;(?&amp;lt;=e)i&lt;/code&gt; = &lt;strong&gt;i&lt;/strong&gt; when it follows &lt;strong&gt;e&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;(?&amp;lt;!)&lt;/code&gt; = negative look behind, e.g. &lt;code&gt;(?&amp;lt;!e)i&lt;/code&gt; = &lt;strong&gt;i&lt;/strong&gt; when it does not follow &lt;strong&gt;e&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Capturing pattern groups&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Parentheses can be used to specify the order of evaluation (as for mathematical expressions) and to &lt;em&gt;capture&lt;/em&gt; groups or components of regexps. After defining pattern groups this way, you can refer to the groups using “\\n”, where n is the group number, assigned to groups in the regexp in order from left to right. The most common reason you would want to do this is to replace patterns using &lt;code&gt;str_replace()&lt;/code&gt; or &lt;code&gt;str_replace_all()&lt;/code&gt;, as will be demonstrated below in the section on mutating strings.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Escaping characters&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;What if you want to search for a literal “.” or “$” rather than use the special regexp characters for “any character” or “the end of a string”. This can be accomplished by &lt;em&gt;escaping&lt;/em&gt; the character, which simply means putting one or more backslashes “\” in front of it&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;. So to search for a literal period, “.”, you could use “\\.”&lt;/p&gt;
&lt;p&gt;Aside from the characters above, most of the rest of a regexp will consist of the literal text you want to match. For example, the regexp “&lt;code&gt;^[Ss]un.*&lt;/code&gt;” when applied to a string vector of the days of the week, would match entries for “Sunday” or “sunday” since these entries start with (^) an “S” or an “s”, followed by the literal characters “un”, then any character (“.”) repeated any number of times (asterisk).&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;detecting-pattern-matches-with-str_detect-str_which-str_count-and-str_locate.&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;Detecting pattern matches&lt;/strong&gt; with &lt;code&gt;str_detect()&lt;/code&gt;, &lt;code&gt;str_which()&lt;/code&gt;, &lt;code&gt;str_count()&lt;/code&gt;, and &lt;code&gt;str_locate()&lt;/code&gt;.&lt;/h1&gt;
&lt;p&gt;To use any of the stringr functions, we 1st need to load the stringr package via the &lt;code&gt;library()&lt;/code&gt; function&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse) #note: stringr is installed and loaded with the tidyverse&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: package &amp;#39;ggplot2&amp;#39; was built under R version 4.0.5&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: package &amp;#39;tibble&amp;#39; was built under R version 4.0.5&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We’ll start exploring the uses of some of these special characters with some basic regexps by submitting them to the pattern arguments (2nd argument) of &lt;code&gt;str_detect()&lt;/code&gt;, &lt;code&gt;str_which()&lt;/code&gt;, &lt;code&gt;str_count()&lt;/code&gt;, and &lt;code&gt;str_locate()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;str_detect()&lt;/code&gt; finds matches for a regexp and returns a logical vector that is &lt;strong&gt;TRUE&lt;/strong&gt; for matching entries, and &lt;strong&gt;FALSE&lt;/strong&gt; for non-matching entries.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#1st we&amp;#39;ll construct a vector of weekdays, repeated 10 times
days &amp;lt;- rep(c(&amp;quot;Monday&amp;quot;, &amp;quot;Tuesday&amp;quot;, &amp;quot;Wednesday&amp;quot;, 
              &amp;quot;Thursday&amp;quot;, &amp;quot;Friday&amp;quot;, &amp;quot;Saturday&amp;quot;, &amp;quot;Sunday&amp;quot;), 3) 

#note that stringr also has a function called str_dup() which can be used to
#replicate/duplicate string values.

str_detect(days, &amp;quot;^[Ss]un.*&amp;quot;) #every 7th entry is a match&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
## [13] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#in this case, since Su appears uniquely for the Sunday entries, we could also
#just use &amp;quot;Su&amp;quot; for the regexp

identical(str_detect(days, &amp;quot;Su&amp;quot;), str_detect(days, &amp;quot;^[Ss]un.*&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#str_detect() is the tidyverse equivalent to the grepl() function in base R
identical(grepl(&amp;quot;Su&amp;quot;, days), str_detect(days, &amp;quot;Su&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#the main advantages of str_detect() are that the string is the 1st argument
#(i.e. it is pipe friendly), and there many of the stringr functions also have a
#&amp;quot;negate&amp;quot; option which allows you to look for non-matching entries instead of
#matching entries, e.g.

days %&amp;gt;% str_detect(&amp;quot;Su&amp;quot;, negate = T) #find non-matches instead of matches&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
## [13]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;str_which()&lt;/code&gt; returns the indices of matches for a regexp and returns a numeric vector, i.e. it tells you &lt;em&gt;which&lt;/em&gt; entries are matches.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;days %&amp;gt;% 
  #indices of matching entries, in this case starting with a capital &amp;quot;M&amp;quot; (for &amp;quot;Monday&amp;quot;)
  str_which(&amp;quot;^M&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1]  1  8 15&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;days %&amp;gt;% str_which(&amp;quot;^M&amp;quot;, negate = T) #indices of non-matching entries&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1]  2  3  4  5  6  7  9 10 11 12 13 14 16 17 18 19 20 21&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#if there were non-day values in our weekday vector, we could use either of
#these functions to identify the unusual values, e.g.

#replace 10 randomly selected values with a non-weekday entry, like a &amp;quot;day off&amp;quot;
#of work... which can happen irregularly if you&amp;#39;re a grad student ;) lol

days[sample(1:70, 10)] &amp;lt;- &amp;quot;day off&amp;quot; 

#find the indices of the entries which do not end in &amp;quot;day&amp;quot;, i.e. the indices of the days off
days %&amp;gt;% str_which(&amp;quot;day$&amp;quot;, negate = T)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1]  7 10 19 20 32 36 39 42 61 68&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#as you can see, this is useful for checking for unusual values which may be
#data entry/coding errors.

#example of the &amp;quot;or&amp;quot; operator in a regular expression

str_which(days, &amp;quot;(Monday|Tuesday)&amp;quot;) #indices for entries containing either &amp;quot;Monday&amp;quot; or &amp;quot;Tuesday&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1]  1  2  8  9 15 16&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#which entries contain an empty space (the &amp;quot;day off&amp;quot; ones)?

str_which(days, &amp;quot;[:space:]{1}&amp;quot;) #match entries containing a single {1} space [:space:]&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1]  7 10 19 20 32 36 39 42 61 68&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;str_locate()&lt;/code&gt; or &lt;code&gt;str_locate_all()&lt;/code&gt; tell you the character positions the pattern characters are found in. I haven’t needed to use them so far.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;days %&amp;gt;% 
  str_locate(&amp;quot;day&amp;quot;) %&amp;gt;% #this tells us the starting and ending positions of the pattern &amp;quot;day&amp;quot;
  head() #only print the 1st 6 rows of the output&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##      start end
## [1,]     4   6
## [2,]     5   7
## [3,]     7   9
## [4,]     6   8
## [5,]     4   6
## [6,]     6   8&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#if someone else provided us with the days vector and expected it to only
#contain entries for days of the week, all of these values should have start
#values greater than 1.

#str_locate() will return the starting and stopping positions of the FIRST match
#only, if you want the positions of all matches, use str_locate_all() instead.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;str_count()&lt;/code&gt; tells you how many times a pattern appears in each entry of a string/character vector. This might be most useful for checking for unexpected duplications of values when cleaning data or for extracting data from unstructured text (e.g. quantifying the number of times a specific keyword appears in an interview transcript).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;days %&amp;gt;% str_count(&amp;quot;e&amp;quot;) #number of times the letter &amp;quot;e&amp;quot; appears in each entry&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1]  0  1  2  0  0  0  0  0  1  0  0  0  0  0  0  1  2  0  0  0  0 NA NA NA NA
## [26] NA NA NA NA NA NA  0 NA NA NA  0 NA NA  0 NA NA  0 NA NA NA NA NA NA NA NA
## [51] NA NA NA NA NA NA NA NA NA NA  0 NA NA NA NA NA NA  0&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;subsetting-strings-data-frames-with-str_subset-str_sub-str_match-str_extract.&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;Subsetting strings &amp;amp; data frames&lt;/strong&gt; with &lt;code&gt;str_subset()&lt;/code&gt;, &lt;code&gt;str_sub()&lt;/code&gt;, &lt;code&gt;str_match()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_extract()&lt;/code&gt;.&lt;/h1&gt;
&lt;p&gt;For the remainer of this post we’ll work with the gapminder data, which you may recall from earlier posts contains data on life expectancy, population, and GDP per capita for 142 countries.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(gapminder) #load the gapminder package containing the gapminder data

gapminder %&amp;gt;% glimpse() #show the structure of a data frame using dplyr::glimpse()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 1,704
## Columns: 6
## $ country   &amp;lt;fct&amp;gt; &amp;quot;Afghanistan&amp;quot;, &amp;quot;Afghanistan&amp;quot;, &amp;quot;Afghanistan&amp;quot;, &amp;quot;Afghanistan&amp;quot;, ~
## $ continent &amp;lt;fct&amp;gt; Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, ~
## $ year      &amp;lt;int&amp;gt; 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, ~
## $ lifeExp   &amp;lt;dbl&amp;gt; 28.801, 30.332, 31.997, 34.020, 36.088, 38.438, 39.854, 40.8~
## $ pop       &amp;lt;int&amp;gt; 8425333, 9240934, 10267083, 11537966, 13079460, 14880372, 12~
## $ gdpPercap &amp;lt;dbl&amp;gt; 779.4453, 820.8530, 853.1007, 836.1971, 739.9811, 786.1134, ~&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;One of the first things we learned about was how to use “patterns” with numeric vectors via base R &lt;a href=&#34;https://craig.rbind.io/post/2019-08-06-asgr-2-0-basic-operations-and-data-structures/#logical-operators&#34;&gt;logical comparison operators&lt;/a&gt; like &lt;code&gt;&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;&amp;lt;=&lt;/code&gt;, or &lt;code&gt;&amp;gt;=&lt;/code&gt;. The &lt;code&gt;str_subset()&lt;/code&gt;, &lt;code&gt;str_sub()&lt;/code&gt;, &lt;code&gt;str_match()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_extract()&lt;/code&gt; from &lt;code&gt;stringr&lt;/code&gt; help us subset strings&lt;a href=&#34;#fn2&#34; class=&#34;footnote-ref&#34; id=&#34;fnref2&#34;&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;str_subset()&lt;/code&gt; returns all values in a vector which match a pattern. We could use it to figure out which countries in the gapminder data begin with an A or C and also end with an A or C.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;subsetted_country_names &amp;lt;- gapminder$country %&amp;gt;% 
  unique() %&amp;gt;% #just get the unique() values to drop duplicates for a vector
  str_subset(&amp;quot;^[AC].*a$&amp;quot;) 
#above pattern = starts with (^) an A or C ([AC]), then anything (.) repeated
#any number of times (*), then a lower case &amp;quot;a&amp;quot; at the end ($).

subsetted_country_names %&amp;gt;% head()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Albania&amp;quot;   &amp;quot;Algeria&amp;quot;   &amp;quot;Angola&amp;quot;    &amp;quot;Argentina&amp;quot; &amp;quot;Australia&amp;quot; &amp;quot;Austria&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#A tidyverse-only alternative to the $ symbol for &amp;quot;pulling&amp;quot; a variable from a
#data frame is the pull() function

gapminder %&amp;gt;% 
  pull(country) %&amp;gt;% 
  unique() %&amp;gt;%  
  str_subset(&amp;quot;^[AC].*a$&amp;quot;) %&amp;gt;% 
  identical(subsetted_country_names)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You may recall that this behaviour is similar to the &lt;code&gt;matches()&lt;/code&gt; “tidy-select” helper function that you can use to &lt;code&gt;select()&lt;/code&gt; columns with dplyr (which was loaded as one of the tidyverse packages). For example,&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gap_c_cols &amp;lt;- gapminder %&amp;gt;% select(matches(&amp;quot;^c&amp;quot;))

gap_c_cols %&amp;gt;% 
  head() #only print the 1st 6 rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 6 x 2
##   country     continent
##   &amp;lt;fct&amp;gt;       &amp;lt;fct&amp;gt;    
## 1 Afghanistan Asia     
## 2 Afghanistan Asia     
## 3 Afghanistan Asia     
## 4 Afghanistan Asia     
## 5 Afghanistan Asia     
## 6 Afghanistan Asia&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;is equivalent to&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;c_names &amp;lt;- gapminder %&amp;gt;% names() %&amp;gt;% str_subset(&amp;quot;^c&amp;quot;)

all.equal(
  #recall that we can subset columns with a character vector of names
  gapminder[, c_names],  
          gap_c_cols  #compare to the select(matches()) version
  )&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#more on stringr for subsetting data frames later...&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;While, I don’t expect anyone to use &lt;code&gt;str_subset()&lt;/code&gt; and &lt;code&gt;[]&lt;/code&gt; instead of &lt;code&gt;dplyr::select()&lt;/code&gt; &amp;amp; &lt;code&gt;tidyselect::matches()&lt;/code&gt;, the take home message here is that the fact that the column names of a data frame are also a string vector means that you can use stringr functions to work with them.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;str_sub()&lt;/code&gt; extracts parts of strings based on their position with the start and end arguments&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gap_names &amp;lt;- gapminder %&amp;gt;% names

gap_names %&amp;gt;% str_sub(start = 1, end = 6) #return the 1st 6 characters of each column name&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;countr&amp;quot; &amp;quot;contin&amp;quot; &amp;quot;year&amp;quot;   &amp;quot;lifeEx&amp;quot; &amp;quot;pop&amp;quot;    &amp;quot;gdpPer&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gap_names %&amp;gt;% str_sub(start = -3, end = -1) #return the last 3 characters of each column name&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;try&amp;quot; &amp;quot;ent&amp;quot; &amp;quot;ear&amp;quot; &amp;quot;Exp&amp;quot; &amp;quot;pop&amp;quot; &amp;quot;cap&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;str_extract()&lt;/code&gt; is useful if you want to extract just the part of the string matching the specified regex instead of the entire entry as would be returned by &lt;code&gt;str_subset()&lt;/code&gt;. For example, if you have some data on names and phone numbers in the same column, you might want to extract just the phone number or name portions.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- c(&amp;quot;Bob: 250-999-8888&amp;quot;, &amp;quot;Emily: 416-908-2004&amp;quot;, &amp;quot;Roger: 204-192-9879&amp;quot;, &amp;quot;Lindsay: 250-209-3047&amp;quot;)

#extract just the phone numbers using a regex that detects 3 numbers followed by
#a dash, then 3 numbers, another dash, then 4 numbers
str_extract(x, &amp;quot;[:digit:]{3}-[:digit:]{3}-[:digit:]{4}&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;250-999-8888&amp;quot; &amp;quot;416-908-2004&amp;quot; &amp;quot;204-192-9879&amp;quot; &amp;quot;250-209-3047&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#extract just the names with a regex that matches a sequence of letters &amp;quot;[:alpha:]&amp;quot;
#of arbitrary length &amp;quot;*&amp;quot;
str_extract(x, &amp;quot;[:alpha:]*&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Bob&amp;quot;     &amp;quot;Emily&amp;quot;   &amp;quot;Roger&amp;quot;   &amp;quot;Lindsay&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It is worth mentioning that within each entry of the string vector &lt;code&gt;str_extract()&lt;/code&gt; will pull the first set of values matching the specified pattern, so in the example above, if we had first and last names separated by a space, we would only get the 1st one with the &lt;code&gt;[:alpha:]*&lt;/code&gt; pattern I used. To extract all matches, we could use &lt;code&gt;str_extract_all()&lt;/code&gt; instead.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- c(&amp;quot;Bob Jones: 250-999-8888&amp;quot;, &amp;quot;Emily Robins: 416-908-2004&amp;quot;, 
       &amp;quot;Roger Smith: 204-192-9879&amp;quot;, &amp;quot;Lindsay Richards: 250-209-3047&amp;quot;)

#only returns the 1st name (the 1st match)
str_extract(x, &amp;quot;[:alpha:]*&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Bob&amp;quot;     &amp;quot;Emily&amp;quot;   &amp;quot;Roger&amp;quot;   &amp;quot;Lindsay&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#str_extract_all() returns both names (all matches), but gives you a list
#(simplify = FALSE, the default) or matrix (simplify = TRUE)
str_extract_all(x, &amp;quot;[:alpha:]{2,}&amp;quot;, simplify = TRUE) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##      [,1]      [,2]      
## [1,] &amp;quot;Bob&amp;quot;     &amp;quot;Jones&amp;quot;   
## [2,] &amp;quot;Emily&amp;quot;   &amp;quot;Robins&amp;quot;  
## [3,] &amp;quot;Roger&amp;quot;   &amp;quot;Smith&amp;quot;   
## [4,] &amp;quot;Lindsay&amp;quot; &amp;quot;Richards&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#here I used the {2, } quantifier for &amp;quot;2 or more&amp;quot; because the * quantifier
#returns a bunch of empty strings as well.

#alternatively, we could just pass a more complex regex to the pattern argument
#of str_extract() to look for the 1st set of letters and 2nd set of letters with
#a space between them

str_extract(x, &amp;quot;[:alpha:]* [:alpha:]*&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Bob Jones&amp;quot;        &amp;quot;Emily Robins&amp;quot;     &amp;quot;Roger Smith&amp;quot;      &amp;quot;Lindsay Richards&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#of course that will only work if the names are formatted consitently, e.g. no
#commas between names&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;combining-and-splitting-strings-using-str_c-str_flatten-str_split-str_glue.&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;Combining and splitting strings&lt;/strong&gt; using &lt;code&gt;str_c()&lt;/code&gt;, &lt;code&gt;str_flatten()&lt;/code&gt;, &lt;code&gt;str_split()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_glue()&lt;/code&gt;.&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;str_c()&lt;/code&gt; is very useful if you want to combine multiple strings or other vectors into a single character vector on an element-wise basis. I often use this to add an indicator string to the names of a data frame before joining it to another one to make it easy to keep track of which columns came from which data frame.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;nms &amp;lt;- names(gapminder) #store the original names

nms &amp;lt;- str_c(names(gapminder), &amp;quot;_gap&amp;quot;) #add _gap to the end of each column name

nms&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;country_gap&amp;quot;   &amp;quot;continent_gap&amp;quot; &amp;quot;year_gap&amp;quot;      &amp;quot;lifeExp_gap&amp;quot;  
## [5] &amp;quot;pop_gap&amp;quot;       &amp;quot;gdpPercap_gap&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#in contrast, the c() operator from base R, would not do the combination on an
#elementwise basis and just adds &amp;quot;_gap&amp;quot; as a separate entry at the end of the
#names vector

names(gapminder) %&amp;gt;% c(&amp;quot;_gap&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;country&amp;quot;   &amp;quot;continent&amp;quot; &amp;quot;year&amp;quot;      &amp;quot;lifeExp&amp;quot;   &amp;quot;pop&amp;quot;       &amp;quot;gdpPercap&amp;quot;
## [7] &amp;quot;_gap&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;str_flatten()&lt;/code&gt; collapses a string vector into a single string (i.e. a character vector of length 1)&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_flatten(c(&amp;quot;a_3&amp;quot;, &amp;quot;d_54&amp;quot;), #vector to collapse
            collapse =  &amp;quot; &amp;quot;) #character(s) to insert between each piece&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;a_3 d_54&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;str_split()&lt;/code&gt; splits a string into a list or matrix of pieces based on a supplied pattern&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_split(c(&amp;quot;a_3&amp;quot;, &amp;quot;d_54&amp;quot;), pattern = &amp;quot;_&amp;quot;) #pattern to use for splitting. returns a list.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [[1]]
## [1] &amp;quot;a&amp;quot; &amp;quot;3&amp;quot;
## 
## [[2]]
## [1] &amp;quot;d&amp;quot;  &amp;quot;54&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_split(c(&amp;quot;a_3&amp;quot;, &amp;quot;d_54&amp;quot;), pattern = &amp;quot;_&amp;quot;, simplify = TRUE) #returns a matrix&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##      [,1] [,2]
## [1,] &amp;quot;a&amp;quot;  &amp;quot;3&amp;quot; 
## [2,] &amp;quot;d&amp;quot;  &amp;quot;54&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;str_glue()&lt;/code&gt; is a convenience wrapper for the &lt;a href=&#34;https://github.com/tidyverse/glue&#34;&gt;glue::glue()&lt;/a&gt; function, which allows you to interpolate strings and values that have been assigned to names in R. To insert a value, you simply wrap it in &lt;code&gt;{}&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;y &amp;lt;- Sys.Date() #store the current date
str_glue(&amp;quot;today is {y}&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## today is 2021-05-15&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;nm &amp;lt;- &amp;quot;Craig&amp;quot;
str_glue(&amp;quot;Hi, my name is {nm}&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Hi, my name is Craig&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;a &amp;lt;- 5
str_glue(&amp;quot;a = {a}&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## a = 5&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#the base R equivalent is the paste0 function, which requires separating the
#text and values with commas. This still accomplishes the same thing, but the
#code doesn&amp;#39;t look quite as nice.
paste0(&amp;quot;today is &amp;quot;, y)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;today is 2021-05-15&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;manage-the-lengths-of-strings-using-str_length-str_pad-str_trunc-str_trim&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;7&lt;/span&gt; &lt;strong&gt;Manage the lengths of strings&lt;/strong&gt; using &lt;code&gt;str_length()&lt;/code&gt;, &lt;code&gt;str_pad()&lt;/code&gt;, &lt;code&gt;str_trunc()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_trim()&lt;/code&gt;&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;str_length()&lt;/code&gt; tells you how many characters are in each entry of a character vector&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;names(gapminder)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;country&amp;quot;   &amp;quot;continent&amp;quot; &amp;quot;year&amp;quot;      &amp;quot;lifeExp&amp;quot;   &amp;quot;pop&amp;quot;       &amp;quot;gdpPercap&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_length(names(gapminder))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 7 9 4 7 3 9&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;str_pad()&lt;/code&gt; standardizes the length of strings in a character vector by padding it on the left or right ends with a specified character (by default, a space)&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_pad(string = names(gapminder), 
        width = 9, #the minimum width of the string to fill/pad positions up to
        side = &amp;quot;both&amp;quot;, #the side to insert the extra characters on (left, right, or both)
        pad = &amp;quot;_&amp;quot;) #single character to use for padding &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;_country_&amp;quot; &amp;quot;continent&amp;quot; &amp;quot;__year___&amp;quot; &amp;quot;_lifeExp_&amp;quot; &amp;quot;___pop___&amp;quot; &amp;quot;gdpPercap&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;str_trunc()&lt;/code&gt; standardizes string lengths in the opposite direction, by controlling the maximum width and truncating strings longer which are longer than this&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_trunc(string = names(gapminder), 
        width = 7, #the maximum width to allow for strings
        side= &amp;quot;right&amp;quot;,
        #entries which have been truncated will show this to indicate that
        #something has been removed
        ellipsis = &amp;quot;...&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;country&amp;quot; &amp;quot;cont...&amp;quot; &amp;quot;year&amp;quot;    &amp;quot;lifeExp&amp;quot; &amp;quot;pop&amp;quot;     &amp;quot;gdpP...&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;str_trim()&lt;/code&gt; removes empty spaces on the ends of a string&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#add some whitespace
padded_names &amp;lt;- names(gapminder) %&amp;gt;% str_pad(12, &amp;quot;both&amp;quot;)

padded_names&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;  country   &amp;quot; &amp;quot; continent  &amp;quot; &amp;quot;    year    &amp;quot; &amp;quot;  lifeExp   &amp;quot; &amp;quot;    pop     &amp;quot;
## [6] &amp;quot; gdpPercap  &amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#remove it
str_trim(padded_names)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;country&amp;quot;   &amp;quot;continent&amp;quot; &amp;quot;year&amp;quot;      &amp;quot;lifeExp&amp;quot;   &amp;quot;pop&amp;quot;       &amp;quot;gdpPercap&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;mutating-strings-with-str_sub-str_replace-str_replace_all-str_remove-str_remove_all&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;8&lt;/span&gt; &lt;strong&gt;Mutating strings&lt;/strong&gt; with &lt;code&gt;str_sub()&lt;/code&gt;, &lt;code&gt;str_replace()&lt;/code&gt;, &lt;code&gt;str_replace_all()&lt;/code&gt;, &lt;code&gt;str_remove()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_remove_all()&lt;/code&gt;&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;str_sub()&lt;/code&gt; can also be used to replace values based on position when combined with the assignment operator (&lt;code&gt;&amp;lt;-&lt;/code&gt;)&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gap_names &amp;lt;- gapminder %&amp;gt;% names

str_sub(gap_names, end = 1) &amp;lt;- &amp;quot;X_&amp;quot; #replace the 1st character with &amp;quot;X_&amp;quot;

gap_names  &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;X_ountry&amp;quot;   &amp;quot;X_ontinent&amp;quot; &amp;quot;X_ear&amp;quot;      &amp;quot;X_ifeExp&amp;quot;   &amp;quot;X_op&amp;quot;      
## [6] &amp;quot;X_dpPercap&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#the main downside to this is that it modifies the original string vector, so
#you would need to recreate it if you make a mistake

gap_names &amp;lt;- gapminder %&amp;gt;% names #recreate the original gap_names vector&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To modify a copy instead, you can use &lt;code&gt;str_replace()&lt;/code&gt; or &lt;code&gt;str_replace_all()&lt;/code&gt;. &lt;code&gt;str_replace()&lt;/code&gt; replaces the 1st match in each entry of the string vector, while &lt;code&gt;str_repalce_all()&lt;/code&gt; replaces all matches. I almost always use &lt;code&gt;str_replace_all()&lt;/code&gt; instead of &lt;code&gt;str_replace()&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gap_names &amp;lt;- gapminder %&amp;gt;% names

str_replace(gap_names, 
            pattern = &amp;quot;^.{3}&amp;quot;, #match the 1st 3 characters of each string in the vector
            replacement = &amp;quot;X_&amp;quot;) #replace them with with &amp;quot;X_&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;X_ntry&amp;quot;   &amp;quot;X_tinent&amp;quot; &amp;quot;X_r&amp;quot;      &amp;quot;X_eExp&amp;quot;   &amp;quot;X_&amp;quot;       &amp;quot;X_Percap&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gap_names  #original names vector is unaffected&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;country&amp;quot;   &amp;quot;continent&amp;quot; &amp;quot;year&amp;quot;      &amp;quot;lifeExp&amp;quot;   &amp;quot;pop&amp;quot;       &amp;quot;gdpPercap&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;countries &amp;lt;- unique(gapminder$country)

#replace all lower case a&amp;#39;s with A&amp;#39;s flanked by &amp;quot;_&amp;quot; to make it obvious what has changed
str_replace(countries, 
            pattern = &amp;quot;a&amp;quot;, 
            replacement = &amp;quot;_A_&amp;quot;) %&amp;gt;%   #replace them with with &amp;quot;_A_&amp;quot;
  head()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Afgh_A_nistan&amp;quot; &amp;quot;Alb_A_nia&amp;quot;     &amp;quot;Algeri_A_&amp;quot;     &amp;quot;Angol_A_&amp;quot;     
## [5] &amp;quot;Argentin_A_&amp;quot;   &amp;quot;Austr_A_lia&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#replace all lower case e&amp;#39;s with E&amp;#39;s
countries &amp;lt;- str_replace_all(countries, 
            pattern = &amp;quot;e&amp;quot;, 
            replacement = &amp;quot;E&amp;quot;)  #replace them with with &amp;quot;E&amp;quot;

countries %&amp;gt;% head()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Afghanistan&amp;quot; &amp;quot;Albania&amp;quot;     &amp;quot;AlgEria&amp;quot;     &amp;quot;Angola&amp;quot;      &amp;quot;ArgEntina&amp;quot;  
## [6] &amp;quot;Australia&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#to delete part of a string, you can just set the replacement value to &amp;quot;&amp;quot;
underscores_removed &amp;lt;- str_replace_all(countries, 
            pattern = &amp;quot;_&amp;quot;, 
            replacement = &amp;quot;&amp;quot;) %&amp;gt;% head() #replace them with &amp;quot;&amp;quot;, effectively deleting them
underscores_removed &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Afghanistan&amp;quot; &amp;quot;Albania&amp;quot;     &amp;quot;AlgEria&amp;quot;     &amp;quot;Angola&amp;quot;      &amp;quot;ArgEntina&amp;quot;  
## [6] &amp;quot;Australia&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#a shortcut for this use of str_replace() or str_replace_all() to delete regexp
#matches are the str_remove() &amp;amp; str_remove_all()
str_remove_all(countries, &amp;quot;_&amp;quot;) %&amp;gt;% 
  head() %&amp;gt;% 
  identical(underscores_removed)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;you-can-modify-the-case-of-a-string-using-str_to_lower-str_to_upper-str_to_title-str_to_sentence&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;9&lt;/span&gt; You can &lt;strong&gt;modify the case of a string&lt;/strong&gt; using &lt;code&gt;str_to_lower()&lt;/code&gt;, &lt;code&gt;str_to_upper()&lt;/code&gt;, &lt;code&gt;str_to_title()&lt;/code&gt;, &amp;amp; &lt;code&gt;str_to_sentence()&lt;/code&gt;&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_to_lower(&amp;quot;AFTER such a long HIKE in the sun, the BEER was very refreshing&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;after such a long hike in the sun, the beer was very refreshing&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_to_upper(&amp;quot;after such a long hike in the sun, the beer was very refreshing&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;AFTER SUCH A LONG HIKE IN THE SUN, THE BEER WAS VERY REFRESHING&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_to_title(&amp;quot;after such a long hike in the sun, the beer was very refreshing&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;After Such A Long Hike In The Sun, The Beer Was Very Refreshing&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_to_sentence(&amp;quot;after such a long hike in the sun, the beer was very refreshing&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;After such a long hike in the sun, the beer was very refreshing&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;example-application-using-str_detect-or-str_which-to-subset-with-data-frames&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;10&lt;/span&gt; Example application: Using &lt;code&gt;str_detect()&lt;/code&gt; or &lt;code&gt;str_which()&lt;/code&gt; to subset with data frames&lt;/h1&gt;
&lt;p&gt;We saw one example of this earlier, but here are a few more. You can use these functions for subsetting because they return logical vectors or vectors of indices.&lt;/p&gt;
&lt;p&gt;Recall from a prior post that we can subset &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#select&#34;&gt;columns&lt;/a&gt; or &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#filter&#34;&gt;rows&lt;/a&gt; using vectors of indices or logical (TRUE/FALSE) values.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;names(gapminder)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;country&amp;quot;   &amp;quot;continent&amp;quot; &amp;quot;year&amp;quot;      &amp;quot;lifeExp&amp;quot;   &amp;quot;pop&amp;quot;       &amp;quot;gdpPercap&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder[, c(1, 4, 6)] %&amp;gt;% names() #columns 1, 4, 6&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;country&amp;quot;   &amp;quot;lifeExp&amp;quot;   &amp;quot;gdpPercap&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder[, c(TRUE, FALSE, TRUE, FALSE, FALSE, FALSE)] %&amp;gt;% names() #columns 1 &amp;amp; 3&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;country&amp;quot; &amp;quot;year&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can take advantage of this to select columns using a regexp via the &lt;code&gt;str_detect()&lt;/code&gt; or &lt;code&gt;str_which()&lt;/code&gt; functions&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gap_names &amp;lt;- names(gapminder)

gapminder[, str_detect(gap_names, &amp;quot;^c&amp;quot;)] %&amp;gt;% names() #columns with names starting with (^) a c&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;country&amp;quot;   &amp;quot;continent&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder[, str_which(gap_names, &amp;quot;p$&amp;quot;)] %&amp;gt;% names() #columns with names that end ($) in p&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;lifeExp&amp;quot;   &amp;quot;pop&amp;quot;       &amp;quot;gdpPercap&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;While it’s unlikley that you would ever do this in practice given that &lt;code&gt;dplyr::select()&lt;/code&gt; makes it a bit easier, the same logic can be used for subsetting rows using regexps, which is something that &lt;code&gt;dplyr::filter()&lt;/code&gt; doesn’t do on its own.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#get the indices of the rows with data for Canada or (|) Italy
CI_rows &amp;lt;- str_which(gapminder$country, &amp;quot;Canada|Italy&amp;quot;) 
CI_rows %&amp;gt;% head() #view the 1st 6&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 241 242 243 244 245 246&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder[CI_rows, ] %&amp;gt;% head&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 6 x 6
##   country continent  year lifeExp      pop gdpPercap
##   &amp;lt;fct&amp;gt;   &amp;lt;fct&amp;gt;     &amp;lt;int&amp;gt;   &amp;lt;dbl&amp;gt;    &amp;lt;int&amp;gt;     &amp;lt;dbl&amp;gt;
## 1 Canada  Americas   1952    68.8 14785584    11367.
## 2 Canada  Americas   1957    70.0 17010154    12490.
## 3 Canada  Americas   1962    71.3 18985849    13462.
## 4 Canada  Americas   1967    72.1 20819767    16077.
## 5 Canada  Americas   1972    72.9 22284500    18971.
## 6 Canada  Americas   1977    74.2 23796400    22091.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#str_detect() yields the same results
identical(gapminder[str_detect(gapminder$country, &amp;quot;Canada|Italy&amp;quot;), ],
          gapminder[str_which(gapminder$country, &amp;quot;Canada|Italy&amp;quot;), ]
          )&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#or if you prefer dplyr::filter() to the square bracket notation, use
#str_detect(), an advantage of this is that when working within filter you don&amp;#39;t
#need to use the dataframe$variable syntax since it knows to look for the
#variable in the data frame you&amp;#39;ve piped in (gapminder)

identical(
  #str_detect() combined with dplyr::filter()
  gapminder %&amp;gt;% 
    filter(str_detect(country, &amp;quot;Canada|Italy&amp;quot;)),
  #str_detect() with [] from base R
  gapminder[str_detect(gapminder$country, &amp;quot;Canada|Italy&amp;quot;), ]
  )&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can see from these examples that &lt;strong&gt;stringr&lt;/strong&gt; functions alone can do some of the same things that &lt;strong&gt;dplyr&lt;/strong&gt; functions can, as well as building upon the functionality of some dplyr functions like &lt;strong&gt;filter()&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Congrats! If you’ve made it here working with strings just got a whole lot easier for you…&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;navigation&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;11&lt;/span&gt; Navigation&lt;/h1&gt;
&lt;p&gt;Click &lt;a href=&#34;https://craig.rbind.io/post/2020-03-29-asgr-2-2-joining-data/&#34;&gt;here&lt;/a&gt; to go back to the previous post on joining data with dplyr. A link to the next one will be added as soon as I have time to write it.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;notes&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;12&lt;/span&gt; Notes&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;If you want to up your string manipulation game even more, you can learn more from the strings chapter of R 4 data science &lt;a href=&#34;https://r4ds.had.co.nz/strings.html&#34;&gt;here&lt;/a&gt; or the stringr package documentation on &lt;a href=&#34;https://cloud.r-project.org/web/packages/stringr/stringr.pdf&#34;&gt;CRAN&lt;/a&gt;, and some base R string processing functions &lt;a href=&#34;https://stringr.tidyverse.org/articles/from-base.html&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Data scientist &amp;amp; skilled R developer &lt;a href=&#34;https://www.garrickadenbuie.com/&#34;&gt;Garrick Aden-Buie&lt;/a&gt; has also built an &lt;a href=&#34;https://www.garrickadenbuie.com/project/regexplain/&#34;&gt;Addin for R studio, via the regexplain package&lt;/a&gt; that can make it easier to work with regexps, which you may find helpful.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;While it is a good idea to develop some direct knowledge of regexps for simple cases like the ones we’ve explored here, the &lt;a href=&#34;https://github.com/richierocks/rebus&#34;&gt;rebus&lt;/a&gt; and/or &lt;a href=&#34;https://github.com/martineastwood/Regularity&#34;&gt;Regularity&lt;/a&gt; packages can make building complex regexps quite a bit easier and I recommend checking them out if you’ll be working with a lot of unstructured text in your research.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;This isn’t something you’ll need to use often, but you can remove special characters from a string using the &lt;code&gt;iconv()&lt;/code&gt; function from base R.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thank you for visiting my blog. I welcome any suggestions for future posts, comments or other feedback you might have. Feedback from beginners and science students/trainees (or with them in mind) is especially helpful in the interest of making this guide even better for them.&lt;/p&gt;
&lt;p&gt;This blog is something I do as a volunteer in my free time. If you’ve found it helpful and want to give back, &lt;a href=&#34;https://www.buymeacoffee.com/huttoncp&#34;&gt;coffee donations&lt;/a&gt; would be appreciated.&lt;/p&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js&#34; data-name=&#34;bmc-button&#34; data-slug=&#34;huttoncp&#34; data-color=&#34;#FF5F5F&#34; data-emoji=&#34;&#34;  data-font=&#34;Cookie&#34; data-text=&#34;Buy me a coffee&#34; data-outline-color=&#34;#000000&#34; data-font-color=&#34;#ffffff&#34; data-coffee-color=&#34;#FFDD00&#34; &gt;&lt;/script&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;This applies to escaping characters in R. Escaping characters and building regex statements in other languages may require slightly different syntax&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn2&#34;&gt;&lt;p&gt;or any other type of vector if we convert it to a character class temporarily&lt;a href=&#34;#fnref2&#34; class=&#34;footnote-back&#34;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>A Scientist&#39;s Guide to R: Step 2.2 - Joining Data with dplyr</title>
      <link>https://craig.rbind.io/post/2020-03-29-asgr-2-2-joining-data/</link>
      <pubDate>Sun, 29 Mar 2020 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/post/2020-03-29-asgr-2-2-joining-data/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#tldr&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#introduction&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#setup&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; setup&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#left_join&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;left_join()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#right_join&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;right_join()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#full_join&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;full_join()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#inner_join&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;inner_join()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#semi_join&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7&lt;/span&gt; &lt;strong&gt;semi_join()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#anti_join&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;8&lt;/span&gt; &lt;strong&gt;anti_join()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#building-data-frames-using-bind_rows-or-bind_cols&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;9&lt;/span&gt; building data frames using &lt;strong&gt;bind_rows()&lt;/strong&gt; or &lt;strong&gt;bind_cols()&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#add_row&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;9.1&lt;/span&gt; &lt;strong&gt;add_row()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#joining-3-or-more-data-frames&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;10&lt;/span&gt; joining 3 or more data frames&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#merge&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;11&lt;/span&gt; &lt;strong&gt;merge()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#navigation&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;12&lt;/span&gt; Navigation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#notes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;13&lt;/span&gt; Notes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;tldr&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Out in the real world you may often find yourself working with data from multiple sources. It will probably be stored in separate files and you’ll need to combine them before you can attempt to answer any of your research questions. This post will show you how you can combine data frames using another set of &lt;a href=&#34;https://dplyr.tidyverse.org/reference/join.htm&#34;&gt;dplyr&lt;/a&gt; functions called &lt;strong&gt;joins&lt;/strong&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;The 6th post of the &lt;a href=&#34;https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/&#34;&gt;Scientist’s Guide to R series&lt;/a&gt; is all about using joins to combine data. While tidy data organized nicely into a single &lt;code&gt;.csv&lt;/code&gt; or &lt;code&gt;.xlsx&lt;/code&gt; spreadsheet may be provided to you in courses, in the real world you’ll often collect data from multiple sources often only containing one or two similar “key” columns (like subject ID #) and have to combine pieces of them to do anything interesting. This type of data is called &lt;strong&gt;relational data&lt;/strong&gt;, since the datasets are &lt;em&gt;related&lt;/em&gt; through common key column(s). &lt;a href=&#34;https://www.ibm.com/cloud/learn/relational-databases&#34;&gt;Relational databases&lt;/a&gt; are how most data are stored in modern non-academic organizations.&lt;/p&gt;
&lt;p&gt;Fortunately, a package we’re already familiar with from a couple of posts ago, &lt;a href=&#34;https://dplyr.tidyverse.org/&#34;&gt;dplyr&lt;/a&gt;, also has a set of functions for combining data with functions called &lt;a href=&#34;https://dplyr.tidyverse.org/reference/join.htm&#34;&gt;&lt;strong&gt;“joins”&lt;/strong&gt;&lt;/a&gt;. For this post we will cover the 6 most common joins:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;left_join(x, y)&lt;/code&gt; which combines all columns in data frame &lt;code&gt;x&lt;/code&gt; with those in data frame &lt;code&gt;y&lt;/code&gt; but only retains rows from &lt;code&gt;x&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;right_join(x, y)&lt;/code&gt; also keeps all columns but operates in the opposite direction, returning only rows from &lt;code&gt;y&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;full_join(x, y)&lt;/code&gt; combines all columns of x with all columns of y and retains all rows from both data frames.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;inner_join(x, y)&lt;/code&gt; combines all columns present in either &lt;code&gt;x&lt;/code&gt; or &lt;code&gt;y&lt;/code&gt; but only retains rows that are present in both data frames.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;semi_join(x, y)&lt;/code&gt; returns the columns from &lt;code&gt;x&lt;/code&gt; only and &lt;em&gt;retains&lt;/em&gt; rows of &lt;code&gt;x&lt;/code&gt; that &lt;em&gt;are also&lt;/em&gt; present in &lt;code&gt;y&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;anti_join(x, y)&lt;/code&gt; returns the columns from &lt;code&gt;x&lt;/code&gt; only and &lt;em&gt;retains&lt;/em&gt; rows of &lt;code&gt;x&lt;/code&gt; that &lt;em&gt;are not&lt;/em&gt; present in &lt;code&gt;y&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;A nice design feature of these functions is that their names and behaviour were &lt;a href=&#34;https://r4ds.had.co.nz/relational-data.html&#34;&gt;inspired&lt;/a&gt; by analogous functions for joining data in the ubiquitous database management programming language &lt;a href=&#34;https://en.wikipedia.org/wiki/SQL&#34;&gt;“Stuctured Query Language” (SQL)&lt;/a&gt;. Learning dplyr therefore also makes SQL easier to learn in the future, which will be helpful if you ever want to work with data for a &lt;a href=&#34;https://livebook.manning.com/book/build-your-career-in-data-science/chapter-1/32&#34;&gt;living&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In case you find yourself working in an environment where only base R is available, we’ll also cover how to join data using the base R function &lt;a href=&#34;https://stat.ethz.ch/R-manual/R-devel/library/base/html/merge.html&#34;&gt;merge()&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Aside from specifying the data frames to be joined, one other thing we need to do is specify the &lt;strong&gt;key column(s)&lt;/strong&gt; to be used for aligning the rows prior to joining the data.&lt;/p&gt;
&lt;p&gt;Key columns are specified with the &lt;code&gt;by&lt;/code&gt; argument, e.g. &lt;code&gt;inner_join(x, y, by = &#34;subject_id&#34;)&lt;/code&gt; adds columns of &lt;code&gt;y&lt;/code&gt; to &lt;code&gt;x&lt;/code&gt; for all rows where the values of the “subject_id” column (present in each data frame) match. If the name of the key column differs between the data frames, e.g. “subject_id” in &lt;code&gt;x&lt;/code&gt; and “subj_id” in &lt;code&gt;y&lt;/code&gt;, then you have to specify both names using &lt;code&gt;by = c(&#34;subject_id&#34; = &#34;subj_id&#34;)&lt;/code&gt; so that the functions know which columns to compare.&lt;/p&gt;
&lt;p&gt;A nice feature of the &lt;code&gt;*_join()&lt;/code&gt; functions is that if you don’t specify the &lt;code&gt;by&lt;/code&gt; argument they will assume that columns with the same names across &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; are key columns. This is very convenient when the columns with the same names in fact contain the same type of values.&lt;/p&gt;
&lt;div id=&#34;setup&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; setup&lt;/h2&gt;
&lt;p&gt;To demonstrate the use of the join functions, I’ll prepare an example of relational data using the &lt;a href=&#34;https://cran.r-project.org/web/packages/gapminder/gapminder.pdf&#34;&gt;gapminder&lt;/a&gt; dataset for the year 2007 aggregated to the continent level. In this representation of the data, the life expectancy, population, and gdpPercap are stored in separate data frames (called &lt;code&gt;life_df&lt;/code&gt;, &lt;code&gt;pop_df&lt;/code&gt;, and &lt;code&gt;gdp_df&lt;/code&gt; respectively). This sort of arrangement is closer to what you might encouter if the gapminder data were stored in a relational database.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(gapminder) #contains the gapminder data

library(dplyr) #functions for manipulating and joining data

life_df &amp;lt;- gapminder %&amp;gt;%
  filter(year &amp;gt;= 1997 &amp;amp; year &amp;lt;= 2007) %&amp;gt;%
  group_by(continent, year) %&amp;gt;% 
  summarise(mean_life_expectancy = mean(lifeExp, na.rm = T)) %&amp;gt;% 
  filter(continent != &amp;quot;Asia&amp;quot;) %&amp;gt;% ungroup()

pop_df &amp;lt;- gapminder %&amp;gt;% 
  filter(year &amp;gt;= 1997 &amp;amp; year &amp;lt;= 2007) %&amp;gt;%
  group_by(continent, year) %&amp;gt;% 
  summarise(total_population = sum(pop, na.rm = T)) %&amp;gt;% 
  filter(continent != &amp;quot;Europe&amp;quot;) %&amp;gt;%
  ungroup()


gdp_df &amp;lt;- gapminder %&amp;gt;% 
  filter(year == 1997 | year == 2007) %&amp;gt;%
  group_by(continent, year) %&amp;gt;% 
  summarise(total_gdpPercap = sum(gdpPercap, na.rm = T)) %&amp;gt;% 
  ungroup()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Recall that we can print a view of the structure of each data frame using the glimpse function from dplyr&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;life_df %&amp;gt;% glimpse()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 12
## Columns: 3
## $ continent            &amp;lt;fct&amp;gt; Africa, Africa, Africa, Americas, Americas, Ameri~
## $ year                 &amp;lt;int&amp;gt; 1997, 2002, 2007, 1997, 2002, 2007, 1997, 2002, 2~
## $ mean_life_expectancy &amp;lt;dbl&amp;gt; 53.59827, 53.32523, 54.80604, 71.15048, 72.42204,~&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pop_df %&amp;gt;% glimpse()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 12
## Columns: 3
## $ continent        &amp;lt;fct&amp;gt; Africa, Africa, Africa, Americas, Americas, Americas,~
## $ year             &amp;lt;int&amp;gt; 1997, 2002, 2007, 1997, 2002, 2007, 1997, 2002, 2007,~
## $ total_population &amp;lt;dbl&amp;gt; 743832984, 833723916, 929539692, 796900410, 849772762~&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gdp_df %&amp;gt;% glimpse()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 10
## Columns: 3
## $ continent       &amp;lt;fct&amp;gt; Africa, Africa, Americas, Americas, Asia, Asia, Europe~
## $ year            &amp;lt;int&amp;gt; 1997, 2007, 1997, 2007, 1997, 2007, 1997, 2007, 1997, ~
## $ total_gdpPercap &amp;lt;dbl&amp;gt; 123695.50, 160629.70, 222232.52, 275075.79, 324525.08,~&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;or print them to the console using the names&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;life_df&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 12 x 3
##    continent  year mean_life_expectancy
##    &amp;lt;fct&amp;gt;     &amp;lt;int&amp;gt;                &amp;lt;dbl&amp;gt;
##  1 Africa     1997                 53.6
##  2 Africa     2002                 53.3
##  3 Africa     2007                 54.8
##  4 Americas   1997                 71.2
##  5 Americas   2002                 72.4
##  6 Americas   2007                 73.6
##  7 Europe     1997                 75.5
##  8 Europe     2002                 76.7
##  9 Europe     2007                 77.6
## 10 Oceania    1997                 78.2
## 11 Oceania    2002                 79.7
## 12 Oceania    2007                 80.7&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pop_df &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 12 x 3
##    continent  year total_population
##    &amp;lt;fct&amp;gt;     &amp;lt;int&amp;gt;            &amp;lt;dbl&amp;gt;
##  1 Africa     1997        743832984
##  2 Africa     2002        833723916
##  3 Africa     2007        929539692
##  4 Americas   1997        796900410
##  5 Americas   2002        849772762
##  6 Americas   2007        898871184
##  7 Asia       1997       3383285500
##  8 Asia       2002       3601802203
##  9 Asia       2007       3811953827
## 10 Oceania    1997         22241430
## 11 Oceania    2002         23454829
## 12 Oceania    2007         24549947&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gdp_df &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 10 x 3
##    continent  year total_gdpPercap
##    &amp;lt;fct&amp;gt;     &amp;lt;int&amp;gt;           &amp;lt;dbl&amp;gt;
##  1 Africa     1997         123695.
##  2 Africa     2007         160630.
##  3 Americas   1997         222233.
##  4 Americas   2007         275076.
##  5 Asia       1997         324525.
##  6 Asia       2007         411610.
##  7 Europe     1997         572303.
##  8 Europe     2007         751634.
##  9 Oceania    1997          48048.
## 10 Oceania    2007          59620.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;From these printouts we can tell that each data frame only has values for some of the continents and/or some of the years that are present in the full gapminder data. I’ve structured them this way so that it is easier to see how they are joined, as you’ll soon find out.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;left_join&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;left_join()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;If we wanted to add the population data for each continent that appears in the life expectancy data frame, we could use &lt;code&gt;left_join()&lt;/code&gt; and the key columns &lt;code&gt;continent&lt;/code&gt; and &lt;code&gt;year&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#all columns in x will be returned and 
#all columns of y will be returned 
#for rows in the key column that have values in y that match those in x

left_join(x = life_df, 
          y = pop_df, 
          by = c(&amp;quot;continent&amp;quot;, &amp;quot;year&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 12 x 4
##    continent  year mean_life_expectancy total_population
##    &amp;lt;fct&amp;gt;     &amp;lt;int&amp;gt;                &amp;lt;dbl&amp;gt;            &amp;lt;dbl&amp;gt;
##  1 Africa     1997                 53.6        743832984
##  2 Africa     2002                 53.3        833723916
##  3 Africa     2007                 54.8        929539692
##  4 Americas   1997                 71.2        796900410
##  5 Americas   2002                 72.4        849772762
##  6 Americas   2007                 73.6        898871184
##  7 Europe     1997                 75.5               NA
##  8 Europe     2002                 76.7               NA
##  9 Europe     2007                 77.6               NA
## 10 Oceania    1997                 78.2         22241430
## 11 Oceania    2002                 79.7         23454829
## 12 Oceania    2007                 80.7         24549947&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# if the key columns have different names, you can tell the join function which
# columns to use with the equality operator

#1st I&amp;#39;ll just rename the continent column for pedagogical purposes
life_df_renamed &amp;lt;- rename(life_df, 
                          cont = continent)

names(life_df_renamed)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;cont&amp;quot;                 &amp;quot;year&amp;quot;                 &amp;quot;mean_life_expectancy&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;left_join(x = life_df_renamed, 
          y = pop_df, 
          #since the continent column is now called &amp;quot;cont&amp;quot; in life_df, 
          #we have to tell left_join which columns to match on.
          #You&amp;#39;ll get an error if you try by = c(&amp;quot;continent&amp;quot;, &amp;quot;year&amp;quot;) this time
          by = c(&amp;quot;cont&amp;quot; = &amp;quot;continent&amp;quot;,
                 &amp;quot;year&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 12 x 4
##    cont      year mean_life_expectancy total_population
##    &amp;lt;fct&amp;gt;    &amp;lt;int&amp;gt;                &amp;lt;dbl&amp;gt;            &amp;lt;dbl&amp;gt;
##  1 Africa    1997                 53.6        743832984
##  2 Africa    2002                 53.3        833723916
##  3 Africa    2007                 54.8        929539692
##  4 Americas  1997                 71.2        796900410
##  5 Americas  2002                 72.4        849772762
##  6 Americas  2007                 73.6        898871184
##  7 Europe    1997                 75.5               NA
##  8 Europe    2002                 76.7               NA
##  9 Europe    2007                 77.6               NA
## 10 Oceania   1997                 78.2         22241430
## 11 Oceania   2002                 79.7         23454829
## 12 Oceania   2007                 80.7         24549947&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that the total_population column from &lt;code&gt;pop_df&lt;/code&gt; has been joined to &lt;code&gt;life_df&lt;/code&gt; based on matching values in the key columns that appear in both data frames. Since we used a &lt;strong&gt;left join&lt;/strong&gt; and Europe is listed as a continent in &lt;code&gt;life_df&lt;/code&gt;, the row for it is returned in the joined data frame. However, because there are no population values for Europe in &lt;code&gt;pop_df&lt;/code&gt;, these rows are filled with &lt;code&gt;NA&lt;/code&gt;s under the total_population column.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;right_join&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;right_join()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;A &lt;strong&gt;right join&lt;/strong&gt; is basically the same thing as a left_join but in the other direction, where the 1st data frame (x) is joined to the 2nd one (y), so if we wanted to add life expectancy and GDP per capita data we could either use:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: lower-roman&#34;&gt;
&lt;li&gt;&lt;p&gt;a &lt;code&gt;right_join()&lt;/code&gt; with &lt;code&gt;life_df&lt;/code&gt; on the &lt;em&gt;left&lt;/em&gt; side and &lt;code&gt;gdp_df&lt;/code&gt; on the &lt;em&gt;right&lt;/em&gt; side, or&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;a &lt;code&gt;left_join()&lt;/code&gt; with &lt;code&gt;gdp_df&lt;/code&gt; on the &lt;em&gt;left&lt;/em&gt; side and &lt;code&gt;life_df&lt;/code&gt; on the &lt;em&gt;right&lt;/em&gt; side&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;… and get the same result with only the columns arranged differently…&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#Also, since the key columns have the same names in each data frame we don&amp;#39;t have to specify them
#we can also pipe in the 1st dataframe using the pipe operator (`%&amp;gt;%`)

rj &amp;lt;- life_df %&amp;gt;% right_join(gdp_df) 

rj&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 10 x 4
##    continent  year mean_life_expectancy total_gdpPercap
##    &amp;lt;fct&amp;gt;     &amp;lt;int&amp;gt;                &amp;lt;dbl&amp;gt;           &amp;lt;dbl&amp;gt;
##  1 Africa     1997                 53.6         123695.
##  2 Africa     2007                 54.8         160630.
##  3 Americas   1997                 71.2         222233.
##  4 Americas   2007                 73.6         275076.
##  5 Europe     1997                 75.5         572303.
##  6 Europe     2007                 77.6         751634.
##  7 Oceania    1997                 78.2          48048.
##  8 Oceania    2007                 80.7          59620.
##  9 Asia       1997                 NA           324525.
## 10 Asia       2007                 NA           411610.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;lj &amp;lt;- gdp_df %&amp;gt;% left_join(life_df)

identical(rj, lj)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;identical(rj, select(lj, 1, 2, 4, 3))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This time there are missing values for Asia’s mean life expectancy because Asia does not appear in the continent column of life_df (but it does appear in gdp_df), and no rows for the year 2002 because 2002 does not appear in the “year” key column of gdp_df.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;full_join&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;full_join()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;After aligning rows by matches in the key column(s), a &lt;strong&gt;full join&lt;/strong&gt; retains all rows that appear in &lt;code&gt;x&lt;/code&gt; or &lt;code&gt;y&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;life_df %&amp;gt;% 
  full_join(gdp_df) %&amp;gt;% 
  arrange(year, continent) #sort by year then by continent&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 14 x 4
##    continent  year mean_life_expectancy total_gdpPercap
##    &amp;lt;fct&amp;gt;     &amp;lt;int&amp;gt;                &amp;lt;dbl&amp;gt;           &amp;lt;dbl&amp;gt;
##  1 Africa     1997                 53.6         123695.
##  2 Americas   1997                 71.2         222233.
##  3 Asia       1997                 NA           324525.
##  4 Europe     1997                 75.5         572303.
##  5 Oceania    1997                 78.2          48048.
##  6 Africa     2002                 53.3             NA 
##  7 Americas   2002                 72.4             NA 
##  8 Europe     2002                 76.7             NA 
##  9 Oceania    2002                 79.7             NA 
## 10 Africa     2007                 54.8         160630.
## 11 Americas   2007                 73.6         275076.
## 12 Asia       2007                 NA           411610.
## 13 Europe     2007                 77.6         751634.
## 14 Oceania    2007                 80.7          59620.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The output now includes rows for the year 2002, which were present in &lt;code&gt;life_df&lt;/code&gt; but not in &lt;code&gt;gdp_df&lt;/code&gt;. It also includes rows for &lt;code&gt;Asia&lt;/code&gt;, which are present in &lt;code&gt;gdp_df&lt;/code&gt; but are missing from &lt;code&gt;life_df&lt;/code&gt;. As you can see, a full join retains all of the data, filling in missing values where necessary.&lt;/p&gt;
&lt;p&gt;Left joins, right joins, and full joins are also collectively referred to as &lt;em&gt;outer joins&lt;/em&gt; because they retain the observations from at least one of the joined tables. This excellent set of diagrams from &lt;a href=&#34;https://r4ds.had.co.nz/&#34;&gt;R for Data Science (R4DS)&lt;/a&gt; can help you build an intuitive sense of how these outer joins work:&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://d33wubrfki0l68.cloudfront.net/9c12ca9e12ed26a7c5d2aa08e36d2ac4fb593f1e/79980/diagrams/join-outer.png&#34; alt=&#34;&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;source: &lt;a href=&#34;https://r4ds.had.co.nz/relational-data.html&#34; class=&#34;uri&#34;&gt;https://r4ds.had.co.nz/relational-data.html&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;inner_join&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;inner_join()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Often you may only want to work with rows which have matching entries in both data sources. Since only some rows are retained, we’re no longer dealing with an outer join. In this case you could use &lt;code&gt;inner_join()&lt;/code&gt;, which returns all rows in both &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; but only rows with that appear in the key columns of both data frames.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;life_df %&amp;gt;% 
  inner_join(gdp_df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 8 x 4
##   continent  year mean_life_expectancy total_gdpPercap
##   &amp;lt;fct&amp;gt;     &amp;lt;int&amp;gt;                &amp;lt;dbl&amp;gt;           &amp;lt;dbl&amp;gt;
## 1 Africa     1997                 53.6         123695.
## 2 Africa     2007                 54.8         160630.
## 3 Americas   1997                 71.2         222233.
## 4 Americas   2007                 73.6         275076.
## 5 Europe     1997                 75.5         572303.
## 6 Europe     2007                 77.6         751634.
## 7 Oceania    1997                 78.2          48048.
## 8 Oceania    2007                 80.7          59620.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This time we only get data for 1997 and 2007 even though &lt;code&gt;life_df&lt;/code&gt; has values for 2002 because &lt;code&gt;gdp_df&lt;/code&gt; did not contain any data for 2002. We also don’t get any data for Asia, which was present in &lt;code&gt;gdp_df&lt;/code&gt;, because there was no data for Asia in &lt;code&gt;life_df&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This diagram from &lt;a href=&#34;https://r4ds.had.co.nz/&#34;&gt;R4DS&lt;/a&gt; shows you another example of how an inner join works:&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://d33wubrfki0l68.cloudfront.net/3abea0b730526c3f053a3838953c35a0ccbe8980/7f29b/diagrams/join-inner.png&#34; alt=&#34;&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;source: &lt;a href=&#34;https://r4ds.had.co.nz/relational-data.html&#34; class=&#34;uri&#34;&gt;https://r4ds.had.co.nz/relational-data.html&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;semi_join&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;7&lt;/span&gt; &lt;strong&gt;semi_join()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;So far we’ve been filtering rows based on matches in the key columns but extacting all columns from both data frames. The other two main dplyr join functions are available for situations where you only want to keep the columns of one data frame (&lt;code&gt;x&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;&lt;code&gt;semi_join(x, y)&lt;/code&gt; filters the rows of &lt;code&gt;x&lt;/code&gt; to retain only those that also appear in &lt;code&gt;y&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;life_df %&amp;gt;% 
  semi_join(pop_df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 9 x 3
##   continent  year mean_life_expectancy
##   &amp;lt;fct&amp;gt;     &amp;lt;int&amp;gt;                &amp;lt;dbl&amp;gt;
## 1 Africa     1997                 53.6
## 2 Africa     2002                 53.3
## 3 Africa     2007                 54.8
## 4 Americas   1997                 71.2
## 5 Americas   2002                 72.4
## 6 Americas   2007                 73.6
## 7 Oceania    1997                 78.2
## 8 Oceania    2002                 79.7
## 9 Oceania    2007                 80.7&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This time we only get the columns from life_df and we’ve dropped rows for Europe because Europe only appears under the continent key column for life_df and not pop_df.&lt;/p&gt;
&lt;p&gt;Here is the &lt;a href=&#34;https://r4ds.had.co.nz/&#34;&gt;R4DS&lt;/a&gt; semi-join diagram showing that only columns and rows from table 1 are retained as a second example:&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://d33wubrfki0l68.cloudfront.net/028065a7f353a932d70d2dfc82bc5c5966f768ad/85a30/diagrams/join-semi.png&#34; alt=&#34;&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;source: &lt;a href=&#34;https://r4ds.had.co.nz/relational-data.html&#34; class=&#34;uri&#34;&gt;https://r4ds.had.co.nz/relational-data.html&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;anti_join&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;8&lt;/span&gt; &lt;strong&gt;anti_join()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;In contrast to &lt;strong&gt;semi joins&lt;/strong&gt;, &lt;strong&gt;anti joins&lt;/strong&gt; return the rows &lt;code&gt;x&lt;/code&gt; that do &lt;strong&gt;not&lt;/strong&gt; appear in &lt;code&gt;y&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;life_df %&amp;gt;% 
  anti_join(pop_df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 3 x 3
##   continent  year mean_life_expectancy
##   &amp;lt;fct&amp;gt;     &amp;lt;int&amp;gt;                &amp;lt;dbl&amp;gt;
## 1 Europe     1997                 75.5
## 2 Europe     2002                 76.7
## 3 Europe     2007                 77.6&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As you can see, anti joins can be very useful if you want to know which rows are excluded due to mismatches in the key columns. Checking for consistencies and inconsistencies between data sources is an important part of the data cleaning process and can often help to uncover data entry or coding errors that should be fixed prior to conducting any analyses.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://r4ds.had.co.nz/&#34;&gt;R4DS&lt;/a&gt; diagram showing how the anti-join works:&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://d33wubrfki0l68.cloudfront.net/f29a85efd53a079cc84c14ba4ba6894e238c3759/c1408/diagrams/join-anti.png&#34; alt=&#34;&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;source: &lt;a href=&#34;https://r4ds.had.co.nz/relational-data.html&#34; class=&#34;uri&#34;&gt;https://r4ds.had.co.nz/relational-data.html&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;building-data-frames-using-bind_rows-or-bind_cols&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;9&lt;/span&gt; building data frames using &lt;strong&gt;bind_rows()&lt;/strong&gt; or &lt;strong&gt;bind_cols()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;If you have two data frames with the same columns, you can combine their rows using &lt;code&gt;dplyr::bind_rows()&lt;/code&gt; or &lt;code&gt;rbind()&lt;/code&gt;. &lt;code&gt;rbind()&lt;/code&gt; is best suited for rowwise combinations of vectors or matrices, while &lt;code&gt;bind_rows()&lt;/code&gt; is better for combining data frames. In my experience, the most common reason to use either would be to add data for new cases to a data frame, so I will only demonstrate &lt;code&gt;bind_rows()&lt;/code&gt; here. For example, say we decided to add the gapminder life expectancy data for Asia to life_df:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#first get the data for asia from the original gapminder dataset
asia_life_exp &amp;lt;- gapminder %&amp;gt;%
  filter(continent == &amp;quot;Asia&amp;quot;,
         between(year, 1997, 2007)) %&amp;gt;% #between is a shortcut for (column &amp;gt;= value &amp;amp; column &amp;lt;= value) 
  group_by(continent, year) %&amp;gt;% 
  summarise(mean_life_expectancy = mean(lifeExp, na.rm = T))

#then add it to the top of life_df
bind_rows(asia_life_exp, life_df) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 15 x 3
## # Groups:   continent [5]
##    continent  year mean_life_expectancy
##    &amp;lt;fct&amp;gt;     &amp;lt;int&amp;gt;                &amp;lt;dbl&amp;gt;
##  1 Asia       1997                 68.0
##  2 Asia       2002                 69.2
##  3 Asia       2007                 70.7
##  4 Africa     1997                 53.6
##  5 Africa     2002                 53.3
##  6 Africa     2007                 54.8
##  7 Americas   1997                 71.2
##  8 Americas   2002                 72.4
##  9 Americas   2007                 73.6
## 10 Europe     1997                 75.5
## 11 Europe     2002                 76.7
## 12 Europe     2007                 77.6
## 13 Oceania    1997                 78.2
## 14 Oceania    2002                 79.7
## 15 Oceania    2007                 80.7&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If we instead had two data frames with the same cases/rows but different columns (and no common key columns to enable the use of joins), we could combine them using &lt;code&gt;dplyr::bind_cols()&lt;/code&gt; or &lt;code&gt;cbind()&lt;/code&gt;. Again, &lt;code&gt;bind_cols()&lt;/code&gt; is preferred over &lt;code&gt;cbind()&lt;/code&gt; for combining data frames by column. However, if you’re only adding a few columns, &lt;code&gt;dplyr::mutate()&lt;/code&gt; or a &lt;code&gt;&#34;df$newcol &amp;lt;- newcol&#34;&lt;/code&gt; statement per column to add would also work.&lt;/p&gt;
&lt;p&gt;For example, if we were provided with each column of the gapminder dataframe as separate vectors (each with values in identical order), without any common key columns among any of the fragments, we could reconstruct the orginal gapminder data frame using &lt;code&gt;bind_cols()&lt;/code&gt;, e.g.:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ctry &amp;lt;- gapminder$country

ctin &amp;lt;- gapminder$continent

yr &amp;lt;-  gapminder$year

le &amp;lt;- gapminder$lifeExp

pop &amp;lt;- gapminder$pop

gdp &amp;lt;- gapminder$gdpPercap

bound_gap &amp;lt;- bind_cols(&amp;quot;country&amp;quot; = ctry, #add names using &amp;quot;name&amp;quot; = vector syntax
                       &amp;quot;continent&amp;quot; = ctin, 
                       &amp;quot;year&amp;quot; = yr, &amp;quot;lifeExp&amp;quot; = le, 
                       &amp;quot;pop&amp;quot; = pop, 
                       &amp;quot;gdpPercap&amp;quot; = gdp)

identical(gapminder, bound_gap)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#the main difference between cbind() and bind_rows() is that bind_rows returns a
#tibble&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;When considering the use of &lt;code&gt;rbind()&lt;/code&gt;/&lt;code&gt;bind_rows()&lt;/code&gt; or &lt;code&gt;cbind()&lt;/code&gt;/&lt;code&gt;bind_cols()&lt;/code&gt; &lt;strong&gt;you must keep in mind that because no key columns are checked for matching values you need to be sure that the columns (when binding rows) or rows (when binding columns) are arranged in exactly the same order&lt;/strong&gt; for each portion of the dataframe before binding the pieces together. This approach can be very error prone, particularly in cases where data cleaning or analysis is being done collaboratively.&lt;/p&gt;
&lt;p&gt;For this reason &lt;strong&gt;I strongly recommend that you&lt;/strong&gt; make use of key columns and &lt;strong&gt;combine data using joins whenever possible&lt;/strong&gt;.&lt;/p&gt;
&lt;div id=&#34;add_row&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;9.1&lt;/span&gt; &lt;strong&gt;add_row()&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;If you only wanted to add a single row to a data frame, you can use &lt;code&gt;tibble::add_row()&lt;/code&gt; and (recall that the tibble package is also part of the &lt;a href=&#34;https://www.tidyverse.org/&#34;&gt;tidyverse&lt;/a&gt;). Let’s say (hypothetically of course) we found out that the mean life expectancy for countries in Africa had gone up to 56 for the year 2012. We could add this row as follows:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;updated_life_df &amp;lt;- life_df %&amp;gt;% 
  tibble::add_row(continent = &amp;quot;Africa&amp;quot;, year = 2012, mean_life_expectancy = 56) %&amp;gt;%  #specify values to be added using column = value syntax
  arrange(continent, year)

updated_life_df #now the value we added appears in the printout of the data frame&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 13 x 3
##    continent  year mean_life_expectancy
##    &amp;lt;chr&amp;gt;     &amp;lt;dbl&amp;gt;                &amp;lt;dbl&amp;gt;
##  1 Africa     1997                 53.6
##  2 Africa     2002                 53.3
##  3 Africa     2007                 54.8
##  4 Africa     2012                 56  
##  5 Americas   1997                 71.2
##  6 Americas   2002                 72.4
##  7 Americas   2007                 73.6
##  8 Europe     1997                 75.5
##  9 Europe     2002                 76.7
## 10 Europe     2007                 77.6
## 11 Oceania    1997                 78.2
## 12 Oceania    2002                 79.7
## 13 Oceania    2007                 80.7&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;joining-3-or-more-data-frames&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;10&lt;/span&gt; joining 3 or more data frames&lt;/h1&gt;
&lt;p&gt;Joining 3 or more data frames is also pretty easy using dplyr, just pipe the output of a join into another join. This is incredibly simple if they all have key columns with the same names. For example, if I wanted to combine &lt;code&gt;life_df&lt;/code&gt;, &lt;code&gt;pop_df&lt;/code&gt; and &lt;code&gt;gdp_df&lt;/code&gt; and keep rows present in any of them, all I have to do is:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;combined_data &amp;lt;- life_df %&amp;gt;% 
  full_join(pop_df) %&amp;gt;% #life_df is inserted as the 1st argument i.e. data frame &amp;quot;x&amp;quot; of the full_join
  full_join(gdp_df) #the output of the previous join is passed to the first argument of the second full_join

combined_data #now it&amp;#39;s all together, using what could be condensed into a single line of code&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 15 x 5
##    continent  year mean_life_expectancy total_population total_gdpPercap
##    &amp;lt;fct&amp;gt;     &amp;lt;int&amp;gt;                &amp;lt;dbl&amp;gt;            &amp;lt;dbl&amp;gt;           &amp;lt;dbl&amp;gt;
##  1 Africa     1997                 53.6        743832984         123695.
##  2 Africa     2002                 53.3        833723916             NA 
##  3 Africa     2007                 54.8        929539692         160630.
##  4 Americas   1997                 71.2        796900410         222233.
##  5 Americas   2002                 72.4        849772762             NA 
##  6 Americas   2007                 73.6        898871184         275076.
##  7 Europe     1997                 75.5               NA         572303.
##  8 Europe     2002                 76.7               NA             NA 
##  9 Europe     2007                 77.6               NA         751634.
## 10 Oceania    1997                 78.2         22241430          48048.
## 11 Oceania    2002                 79.7         23454829             NA 
## 12 Oceania    2007                 80.7         24549947          59620.
## 13 Asia       1997                 NA         3383285500         324525.
## 14 Asia       2002                 NA         3601802203             NA 
## 15 Asia       2007                 NA         3811953827         411610.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Alternatively, I could use full_join(life_df, pop_df) %&amp;gt;% full_join(gdp_df)

# or full_join(full_join(life_df, pop_df), gdp_df)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This is another example of how nested function calls can be easier to read when written in series with the pipe operator (&lt;code&gt;%&amp;gt;%&lt;/code&gt;), which I covered in more detail &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#chaining-functions-with-the-pipe-operator&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;merge&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;11&lt;/span&gt; &lt;strong&gt;merge()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;In the very unlikely event that you find yourself having to combine relational data but are working on a computer that only has base R and no admin priviledges to enable you to install dplyr, have no fear! You can use the &lt;code&gt;merge()&lt;/code&gt; function from base R to perform &lt;strong&gt;left joins&lt;/strong&gt;, &lt;strong&gt;right joins&lt;/strong&gt;, &lt;strong&gt;inner joins&lt;/strong&gt;, and &lt;strong&gt;full joins&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;In addition to the &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; arguments that need to be used to specify the data frames to be joined and the &lt;code&gt;by&lt;/code&gt; argument that indicates which key columns to use, the type of join is determined via the &lt;code&gt;all.x&lt;/code&gt; and &lt;code&gt;all.y&lt;/code&gt; arguments&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# inner join/merge

ij_merge &amp;lt;- merge(life_df, pop_df,
            all.x = F, all.y = F) #the default merge/join is an inner join, in which all.x and all.y are both FALSE

ij_dplyr &amp;lt;- inner_join(life_df, pop_df) %&amp;gt;% 
  as.data.frame() #removes the tibble class which the merge result doesn&amp;#39;t have

all.equal(ij_merge, ij_dplyr)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#full join/merge
fj_merge &amp;lt;- merge(life_df, pop_df,
            all.x = T, all.y = T) #set (all.x = T and all.y = T) or (all = T), to perform a full join

fj_dplyr &amp;lt;- full_join(life_df, pop_df) %&amp;gt;% 
  as.data.frame() %&amp;gt;%
  arrange(continent)

all.equal(fj_merge, fj_dplyr)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#for a left join, all.x should be set to TRUE and all.y to FALSE
lj_merge &amp;lt;- merge(life_df, pop_df,
            all.x = T, all.y = F) 

lj_dplyr &amp;lt;- left_join(life_df, pop_df) %&amp;gt;% as.data.frame()

all.equal(lj_merge, lj_dplyr)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#for a right join, all.x should be set to FALSE and all.y to TRUE
rj_merge &amp;lt;- merge(life_df, pop_df,
            all.x = F, all.y = T) 

rj_dplyr &amp;lt;- right_join(life_df, pop_df) %&amp;gt;% as.data.frame()

all.equal(rj_merge, rj_dplyr)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Component \&amp;quot;continent\&amp;quot;: 6 string mismatches&amp;quot;                                        
## [2] &amp;quot;Component \&amp;quot;mean_life_expectancy\&amp;quot;: &amp;#39;is.NA&amp;#39; value mismatch: 3 in current 3 in target&amp;quot;
## [3] &amp;quot;Component \&amp;quot;total_population\&amp;quot;: Mean relative difference: 1.974144&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Why bother with dplyr joins if &lt;code&gt;merge()&lt;/code&gt; can do so much? Simply because the dplyr code is easier to read and the dplyr functions are faster. Unfortunately, merge also can’t handle semi joins or anti joins, so you’d have to do a bit more work to achieve the same results without dplyr.&lt;/p&gt;
&lt;p&gt;If you’ve followed along, congratulations! You now know how the basics of combining data frames in with dplyr joins and base R. Just practice these operations a few times on your own and joins will seem trivial!&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;navigation&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;12&lt;/span&gt; Navigation&lt;/h1&gt;
&lt;p&gt;Click &lt;a href=&#34;https://craig.rbind.io/post/2020-01-25-asgr-2-1-data-transformation-part-2/&#34;&gt;here&lt;/a&gt; to go back to the previous post on reshaping data with tidyr or &lt;a href=&#34;https://craig.rbind.io/post/2020-06-28-asgr-2-3-string-manipulation/&#34;&gt;here&lt;/a&gt; to go to the next post on string manipulation with stringr.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;notes&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;13&lt;/span&gt; Notes&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;You can learn more about joins, working with relational data, and the &lt;em&gt;set operation functions&lt;/em&gt; in &lt;code&gt;R&lt;/code&gt; &lt;a href=&#34;https://r4ds.had.co.nz/relational-data.html&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;You can learn more about &lt;code&gt;SQL&lt;/code&gt; &lt;a href=&#34;https://www.w3schools.com/sql/default.asp&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The author of dplyr, &lt;a href=&#34;http://hadley.nz/&#34;&gt;Hadley Wickham&lt;/a&gt;, also wrote the &lt;strong&gt;dbplyr&lt;/strong&gt; package, which translates dplyr to SQL for you so you can actually query databases directly using dplyr code or even view the &lt;a href=&#34;https://dbplyr.tidyverse.org/articles/sql-translation.html&#34;&gt;SQL code translations&lt;/a&gt;. You can learn more about dbplyr &lt;a href=&#34;https://dbplyr.tidyverse.org/&#34;&gt;here&lt;/a&gt;. The code translation is really helpful if you’re trying to learn SQL.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thank you for visiting my blog. I welcome any suggestions for future posts, comments or other feedback you might have. Feedback from beginners and science students/trainees (or with them in mind) is especially helpful in the interest of making this guide even better for them.&lt;/p&gt;
&lt;p&gt;This blog is something I do as a volunteer in my free time. If you’ve found it helpful and want to give back, &lt;a href=&#34;https://www.buymeacoffee.com/huttoncp&#34;&gt;coffee donations&lt;/a&gt; would be appreciated.&lt;/p&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js&#34; data-name=&#34;bmc-button&#34; data-slug=&#34;huttoncp&#34; data-color=&#34;#FF5F5F&#34; data-emoji=&#34;&#34;  data-font=&#34;Cookie&#34; data-text=&#34;Buy me a coffee&#34; data-outline-color=&#34;#000000&#34; data-font-color=&#34;#ffffff&#34; data-coffee-color=&#34;#FFDD00&#34; &gt;&lt;/script&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>A Scientist&#39;s Guide to R: Step 2.1 Data Transformation - part 2</title>
      <link>https://craig.rbind.io/post/2020-01-25-asgr-2-1-data-transformation-part-2/</link>
      <pubDate>Sat, 25 Jan 2020 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/post/2020-01-25-asgr-2-1-data-transformation-part-2/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#tldr&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#introduction&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#long-data-wide-data-and-tidy-data&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; &lt;strong&gt;“long”&lt;/strong&gt; data, &lt;strong&gt;“wide”&lt;/strong&gt; data, and &lt;strong&gt;“tidy”&lt;/strong&gt; data&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#pivot_longer&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;pivot_longer()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#pivot_wider&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;pivot_wider()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#unite&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;unite()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#separate&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;separate()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#navigation&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7&lt;/span&gt; Navigation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#notes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;8&lt;/span&gt; Notes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;tldr&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;In the 5th post of the &lt;a href=&#34;https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/&#34;&gt;Scientist’s Guide to R series&lt;/a&gt; we explore using the &lt;a href=&#34;https://tidyr.tidyverse.org/&#34;&gt;tidyr&lt;/a&gt; package to reshape data. You’ll learn all about splitting and combining columns and how to do wide to long or long to wide transformations.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;In the 5th post of the &lt;a href=&#34;https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/&#34;&gt;Scientist’s Guide to R series&lt;/a&gt; we explore using the &lt;a href=&#34;https://tidyr.tidyverse.org/&#34;&gt;tidyr&lt;/a&gt; package to reshape data. As you’ll see, this is really helpful if you are working with repeated-measures data, which is pretty common these days.&lt;/p&gt;
&lt;p&gt;Specifically, we will be learning how to use 4 core functions of the &lt;a href=&#34;https://tidyr.tidyverse.org/&#34;&gt;tidyr&lt;/a&gt; package to:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;Perform “wide-to-long” transformations using &lt;a href=&#34;https://tidyr.tidyverse.org/reference/pivot_longer.html&#34;&gt;pivot_longer()&lt;/a&gt;, converting multiple columns of the same measure into a single value column and associated key column.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Spread a pair of value and key columns across multiple columns, AKA “long-to-wide” transformations, using &lt;a href=&#34;https://tidyr.tidyverse.org/reference/pivot_wider.html&#34;&gt;pivot_wider()&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Combine multiple columns into a single column using &lt;a href=&#34;https://tidyr.tidyverse.org/reference/unite.html&#34;&gt;unite()&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Perform the reverse operation to &lt;a href=&#34;https://tidyr.tidyverse.org/reference/separate.html&#34;&gt;separate()&lt;/a&gt; a complex column into multiple simple columns.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Additional relevant functions that build on this foundation will also be covered where appropriate. If some of these terms don’t mean very much to you now don’t worry. Hopefully they will by the time you’re done reading this post!&lt;/p&gt;
&lt;p&gt;In this post I will assume you know how to use the pipe operator (&lt;code&gt;%&amp;gt;%&lt;/code&gt;), which I covered &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#chaining-functions-with-the-pipe-operator&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Getting repeated-measures data ready for analysis will be no trouble at all once you’ve mastered these functions.&lt;/p&gt;
&lt;p&gt;The examples below will make use of 2 datasets provided by R packages: the gapminder life expectancy data from the &lt;a href=&#34;https://www.rdocumentation.org/packages/gapminder/versions/0.3.0&#34;&gt;gapminder&lt;/a&gt; package and the OBrienKaiser data from the carData package. Since carData is automatically also loaded with the &lt;a href=&#34;https://cran.r-project.org/web/packages/car/index.html&#34;&gt;car&lt;/a&gt; package which we will be using later in the series for regression diagnostics (car = &lt;strong&gt;c&lt;/strong&gt;ompanion to &lt;strong&gt;a&lt;/strong&gt;pplied &lt;strong&gt;r&lt;/strong&gt;egression), we’ll import the OBrienKaiser data indirectly via the car package.&lt;/p&gt;
&lt;p&gt;These 2 datasets were chosen because they both contain repeated measurements. One, gapminder, is by default in the so-called “long” form. While the other, OBrienKaiser, is by default in the so-called “wide” form.&lt;/p&gt;
&lt;p&gt;Recall that we load a package using the &lt;code&gt;library()&lt;/code&gt; function, which imports any data structures and functions from the package and makes them available for use in the current R session.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(gapminder) #load the gapminder package which mostly just contains the gapminder dataset

library(car) #load the car package with the associated OBrienKaiser data&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Naturally the 1st thing you should do after importing any data is to examine its structure using either &lt;code&gt;str()&lt;/code&gt; or &lt;code&gt;dplyr::glimpse()&lt;/code&gt;, so that’s what we’ll do next. Data from packages also usually comes with helpful documentation you can view using ?data_object_name.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#since I prefer to use glimpse() over str() we&amp;#39;ll also load the tidyverse
#package collection (glimpse is included with both tibble and dplyr) which also
#loads the tidyr package we will need later anyways. 
#For now this gives us access to both the pipe operator and the glimpse function.

library(tidyverse)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## -- Attaching packages --------------------------------------- tidyverse 1.3.0 --&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## v ggplot2 3.3.3     v purrr   0.3.4
## v tibble  3.1.1     v dplyr   1.0.2
## v tidyr   1.1.2     v stringr 1.4.0
## v readr   1.4.0     v forcats 0.5.0&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: package &amp;#39;ggplot2&amp;#39; was built under R version 4.0.5&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: package &amp;#39;tibble&amp;#39; was built under R version 4.0.5&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
## x dplyr::recode() masks car::recode()
## x purrr::some()   masks car::some()&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder %&amp;gt;% glimpse&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 1,704
## Columns: 6
## $ country   &amp;lt;fct&amp;gt; &amp;quot;Afghanistan&amp;quot;, &amp;quot;Afghanistan&amp;quot;, &amp;quot;Afghanistan&amp;quot;, &amp;quot;Afghanistan&amp;quot;, ~
## $ continent &amp;lt;fct&amp;gt; Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, ~
## $ year      &amp;lt;int&amp;gt; 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, ~
## $ lifeExp   &amp;lt;dbl&amp;gt; 28.801, 30.332, 31.997, 34.020, 36.088, 38.438, 39.854, 40.8~
## $ pop       &amp;lt;int&amp;gt; 8425333, 9240934, 10267083, 11537966, 13079460, 14880372, 12~
## $ gdpPercap &amp;lt;dbl&amp;gt; 779.4453, 820.8530, 853.1007, 836.1971, 739.9811, 786.1134, ~&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;OBrienKaiser %&amp;gt;% glimpse&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 16
## Columns: 17
## $ treatment &amp;lt;fct&amp;gt; control, control, control, control, control, A, A, A, A, B, ~
## $ gender    &amp;lt;fct&amp;gt; M, M, M, F, F, M, M, F, F, M, M, M, F, F, F, F
## $ pre.1     &amp;lt;dbl&amp;gt; 1, 4, 5, 5, 3, 7, 5, 2, 3, 4, 3, 6, 5, 2, 2, 4
## $ pre.2     &amp;lt;dbl&amp;gt; 2, 4, 6, 4, 4, 8, 5, 3, 3, 4, 3, 7, 5, 2, 2, 5
## $ pre.3     &amp;lt;dbl&amp;gt; 4, 5, 5, 7, 6, 7, 6, 5, 4, 5, 4, 8, 6, 3, 3, 7
## $ pre.4     &amp;lt;dbl&amp;gt; 2, 3, 7, 5, 4, 9, 4, 3, 6, 3, 2, 6, 8, 1, 4, 5
## $ pre.5     &amp;lt;dbl&amp;gt; 1, 4, 7, 4, 3, 9, 5, 2, 4, 4, 3, 3, 6, 2, 4, 4
## $ post.1    &amp;lt;dbl&amp;gt; 3, 2, 4, 2, 6, 9, 7, 2, 4, 6, 5, 9, 4, 5, 6, 7
## $ post.2    &amp;lt;dbl&amp;gt; 2, 2, 5, 2, 7, 9, 7, 4, 5, 7, 4, 10, 6, 6, 6, 7
## $ post.3    &amp;lt;dbl&amp;gt; 5, 3, 7, 3, 8, 10, 8, 8, 6, 6, 7, 11, 6, 7, 7, 8
## $ post.4    &amp;lt;dbl&amp;gt; 3, 5, 5, 5, 6, 8, 10, 6, 4, 8, 5, 9, 8, 5, 9, 6
## $ post.5    &amp;lt;dbl&amp;gt; 2, 3, 4, 3, 3, 9, 8, 5, 1, 8, 4, 6, 6, 2, 7, 7
## $ fup.1     &amp;lt;dbl&amp;gt; 2, 4, 7, 4, 4, 9, 8, 6, 5, 8, 5, 8, 7, 6, 7, 7
## $ fup.2     &amp;lt;dbl&amp;gt; 3, 5, 6, 4, 3, 10, 9, 6, 4, 8, 6, 7, 7, 7, 7, 8
## $ fup.3     &amp;lt;dbl&amp;gt; 2, 6, 9, 5, 6, 11, 11, 7, 7, 9, 8, 10, 8, 8, 8, 10
## $ fup.4     &amp;lt;dbl&amp;gt; 4, 4, 7, 3, 4, 9, 9, 5, 5, 7, 6, 8, 10, 6, 6, 8
## $ fup.5     &amp;lt;dbl&amp;gt; 4, 1, 6, 4, 3, 6, 8, 6, 4, 8, 5, 7, 8, 3, 7, 7&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;When working with data from an add-on package it is often also a good idea to work on a copy of it rather than overwriting/modifying it under the original name. Using a copy for experimental tranformations is recommended in general in case the transformation doesn’t go quite as planned and you want to change it or recover the original data. To recover data provided in a package if you have accidentally modified it you’d have to remove the object from the &lt;a href=&#34;https://craig.rbind.io/post/2019-08-06-asgr-2-0-basic-operations-and-data-structures/#the-global-environment&#34;&gt;global environment&lt;/a&gt; (deleting your custom copy of it but not the original version in the package) using the rm() function… which can be a bit confusing. Best to just work on a copy with a clearly different name.&lt;/p&gt;
&lt;p&gt;The same recommendation applies to naming things in general. Try to use names that aren’t already assigned to other objects or functions. If you’re not sure if a name is in use or not, try to print it (just the name, enclosed in print() if you want) or look-up documentation for it with ?object or help(object).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#we&amp;#39;ll save a copy of the gapminder data to gap_df (short for gapminder_dataframe)
gap_df &amp;lt;- gapminder

ob_df &amp;lt;- OBrienKaiser

#now we can do whatever we want to gap_df or ob_df without affecting gapminder or OBrienKaiser

#For the next section it helps to focus on just the names of the variables in each of these data frames
names(gap_df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;country&amp;quot;   &amp;quot;continent&amp;quot; &amp;quot;year&amp;quot;      &amp;quot;lifeExp&amp;quot;   &amp;quot;pop&amp;quot;       &amp;quot;gdpPercap&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;names(ob_df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;treatment&amp;quot; &amp;quot;gender&amp;quot;    &amp;quot;pre.1&amp;quot;     &amp;quot;pre.2&amp;quot;     &amp;quot;pre.3&amp;quot;     &amp;quot;pre.4&amp;quot;    
##  [7] &amp;quot;pre.5&amp;quot;     &amp;quot;post.1&amp;quot;    &amp;quot;post.2&amp;quot;    &amp;quot;post.3&amp;quot;    &amp;quot;post.4&amp;quot;    &amp;quot;post.5&amp;quot;   
## [13] &amp;quot;fup.1&amp;quot;     &amp;quot;fup.2&amp;quot;     &amp;quot;fup.3&amp;quot;     &amp;quot;fup.4&amp;quot;     &amp;quot;fup.5&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If you haven’t see either of these datasets before I recommend reviewing the documentation for them, using:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;?gapminder 

#and

?OBrienKaiser&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Before reading on, try to answer the question: What is the main difference between the variable naming styles used by the authors of these two datasets?&lt;/p&gt;
&lt;div id=&#34;long-data-wide-data-and-tidy-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; &lt;strong&gt;“long”&lt;/strong&gt; data, &lt;strong&gt;“wide”&lt;/strong&gt; data, and &lt;strong&gt;“tidy”&lt;/strong&gt; data&lt;/h2&gt;
&lt;p&gt;From the glimpses we requested, we can see that the gapminder data contains 1,704 observations (rows) and 6 variables (columns), while the OBrienKaiser data has only 16 rows but 17 columns. Related to the question I posed above, note that gapminder has unique names for each variable and that most of the columns in OBrienKaiser have generic names with a string.number format. Why is this?&lt;/p&gt;
&lt;p&gt;gapminder is an example of &lt;strong&gt;“long”&lt;/strong&gt; data because each row represents a unique observation and each column represents a unique variable. This is the form that data needs to be in to do most statistical analyses and generate visualizations in R. Because each unique variable is a single column, each column has a unique name.&lt;/p&gt;
&lt;p&gt;OBrienKaiser is an example of &lt;strong&gt;“wide”&lt;/strong&gt; data because each row represents a unique case or individual and all measures for these individuals are spread across multiple columns. Because several of the variables are spread across multiple columns, these have more generic names.&lt;/p&gt;
&lt;p&gt;This is the form that data typically needs to be in to do statstical analyses in other programs like SPSS, so you’ll encounter it often if you’re importing data directly from SPSS or working on Excel files produced by people who primarily work in SPSS or just Excel itself.&lt;/p&gt;
&lt;p&gt;The term &lt;strong&gt;“tidy”&lt;/strong&gt; data refers to the long form arrangement of data with the additional criterion that each type of observational unit is in a single table rather than being split across multiple tables. Data cleaning and “tidy-ness” are so germane to real world data analysis and data science that the tidyverse was named after them. If you want to conduct an analysis using data that are spread across multiple data frames or tables, my next blog post will show you how to combine them using a set of functions called joins.&lt;/p&gt;
&lt;p&gt;It won’t always be so obvious, but now you know that even the names of a data frame’s columns can tell you quite a bit about its structure.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;pivot_longer&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;pivot_longer()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;To make data longer so that we have all values of the same measure in a single column we can use the aptly named &lt;strong&gt;pivot_longer()&lt;/strong&gt;, which is a newer version of the tidyr &lt;strong&gt;gather()&lt;/strong&gt; function. Arguments we need to specify are:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;data&lt;/strong&gt; (or we can pipe the data in using the pipe operator)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;cols&lt;/strong&gt;: the distributed columns we want to combine&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;names_to&lt;/strong&gt;: string name to use for the new character vector that keeps track
of which columns the values originally came from, sometimes this is called the
“key” column. Values of the “names_to” are by default the names of the
combined columns&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;values_to&lt;/strong&gt;: string name to use for the new column that will contain all of
the combined values&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;For example, this is how you could combine all of the distributed measurement columns from the ob_df data frame into a single tidy key-value column pair.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#first we&amp;#39;ll add a column to keep track of the subject ID since the OBrienKaiser
#data doesn&amp;#39;t already have one. you could do this either using dplyr&amp;#39;s mutate() function,
#or using the shortcut function rowid_to_column, from the tidyverse package &amp;quot;tibble&amp;quot;

ob_df_v2 &amp;lt;- ob_df %&amp;gt;% 
  rowid_to_column(&amp;quot;subject_id&amp;quot;) #subject ID column values take on the row ID values
#by default this adds the column to the left side of the data frame (in the 1st position)

#alternative using mutate
ob_df_v2b &amp;lt;- ob_df %&amp;gt;% 
  mutate(subject_id = c(1:nrow(ob_df))) %&amp;gt;% #same end result
  # subject id becomes the numbers: [1 to the number of total rows]. 
  # By default, this adds the column to the end, so we will rearrange it using
  # select() with tidyselect helper everything()
  select(subject_id, everything()) #this selects the new subject_id column, then everything else

identical(ob_df_v2, ob_df_v2b) #check if the objects are identical&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#in this case both methods are equivalent so rowid_to_column() is preferred, but
#if you want to assign something else as subject ids, then mutate() would be
#better. Rearranging with select() is optional of course. I typically prefer to
#work with subject ID in the 1st position though

# next we make the data longer using pivot_longer()

ob_long &amp;lt;- pivot_longer(data = ob_df_v2, 
             cols = pre.1:fup.5, 
             names_to = &amp;quot;session&amp;quot;,
             values_to = &amp;quot;score&amp;quot;
             )

ob_long %&amp;gt;% glimpse &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 240
## Columns: 5
## $ subject_id &amp;lt;int&amp;gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2,~
## $ treatment  &amp;lt;fct&amp;gt; control, control, control, control, control, control, contr~
## $ gender     &amp;lt;fct&amp;gt; M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M,~
## $ session    &amp;lt;chr&amp;gt; &amp;quot;pre.1&amp;quot;, &amp;quot;pre.2&amp;quot;, &amp;quot;pre.3&amp;quot;, &amp;quot;pre.4&amp;quot;, &amp;quot;pre.5&amp;quot;, &amp;quot;post.1&amp;quot;, &amp;quot;pos~
## $ score      &amp;lt;dbl&amp;gt; 1, 2, 4, 2, 1, 3, 2, 5, 3, 2, 2, 3, 2, 4, 4, 4, 4, 5, 3, 4,~&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#now we have a total of 256 observations for our 16 subjects/cases, score
#measurements are all in a single column that we&amp;#39;ve called &amp;quot;score&amp;quot;, and the data
#collection session is coded using the session variable (the values of which
#used to be the names of the original columns).&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As you can see, pooling a single measure is pretty easy, but what if we want to assign multiple sets of measures to different columns, like the pre, post, and fup components of the ob_df_v2 data frame (e.g. if these represented different types of measurements on distinct scales like height, weight, and temperature). This requires an extra step and adjusting our arguments a bit, but &lt;strong&gt;pivot_longer()&lt;/strong&gt; makes this pretty easy as well.&lt;/p&gt;
&lt;p&gt;The main requirements are:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;A consistent and unique string pattern that can be used to determine
which columns of values belong together and what to use as the values of the key colunn&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;using the special &lt;span style=&#34;color:green&#34;&gt;“.value”&lt;/span&gt; string as part of the &lt;strong&gt;names_to&lt;/strong&gt; argument and
the names_sep argument instead of using &lt;strong&gt;values_to&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;em&gt;In the lucky event that your column names already have a consistent pattern in them, then you can just make use of that pattern and skip to step 2.&lt;/em&gt; Otherwise it may be a good idea to create one using either the &lt;code&gt;dplyr::rename()&lt;/code&gt; function (if you only have to modify a few names), or using some string manipulation functions from the &lt;a href=&#34;https://stringr.tidyverse.org/&#34;&gt;stringr&lt;/a&gt; tidyverse package. This section will serve as a preview of the sort of monotony that stringr and regular expressions can free you from, which will be expanded upon in a future post covering stringr.&lt;/p&gt;
&lt;p&gt;Applied to our ob_df_v2 dataset:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# step 1. consistent pattern across the set of value columns ----
 
names(ob_df_v2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;subject_id&amp;quot; &amp;quot;treatment&amp;quot;  &amp;quot;gender&amp;quot;     &amp;quot;pre.1&amp;quot;      &amp;quot;pre.2&amp;quot;     
##  [6] &amp;quot;pre.3&amp;quot;      &amp;quot;pre.4&amp;quot;      &amp;quot;pre.5&amp;quot;      &amp;quot;post.1&amp;quot;     &amp;quot;post.2&amp;quot;    
## [11] &amp;quot;post.3&amp;quot;     &amp;quot;post.4&amp;quot;     &amp;quot;post.5&amp;quot;     &amp;quot;fup.1&amp;quot;      &amp;quot;fup.2&amp;quot;     
## [16] &amp;quot;fup.3&amp;quot;      &amp;quot;fup.4&amp;quot;      &amp;quot;fup.5&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Looking at the names again, we have a mere period &amp;quot;.&amp;quot; as a consistent pattern.
# while you could use this to flag the columns you want to pivot, something to
# consider is that &amp;quot;.&amp;quot; is also a special character used in regular expressions
# (a string pattern matching system) to represent &amp;quot;any character&amp;quot;, so we would
# have to preface it with one or more of another special character combination,
# in this case &amp;quot;\\&amp;quot;, to &amp;quot;escape it&amp;quot; for string pattern matching functions to
# interpret it as a literal &amp;quot;.&amp;quot; instead of &amp;quot;any character&amp;quot;. This is usually done
# as part of a regular expression made up of combinations of special characters.

# Don&amp;#39;t worry if this strange business of escaping characters and regular
# expressions seems confusing at this point, we&amp;#39;ll learn about it in much more
# detail in a later post.

# For now, you could subset the data and rename the columns, e.g.

ob_df_v2a &amp;lt;- ob_df_v2 %&amp;gt;%
  rename(pretest1 = pre.1, #rename(&amp;quot;new_name&amp;quot; = &amp;quot;old_name&amp;quot;)
         pretest2 = pre.2,
         pretest3 = pre.3,
         pretest4 = pre.4,
         pretest5 = pre.5,
         posttest1 = post.1, 
         posttest2 = post.2,
         posttest3 = post.3,
         posttest4 = post.4,
         posttest5 = post.5,
         fuptest1 = fup.1,
         fuptest2 = fup.2,
         fuptest3 = fup.3,
         fuptest4 = fup.4,
         fuptest5 = fup.5)

ob_df_v2a&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    subject_id treatment gender pretest1 pretest2 pretest3 pretest4 pretest5
## 1           1   control      M        1        2        4        2        1
## 2           2   control      M        4        4        5        3        4
## 3           3   control      M        5        6        5        7        7
## 4           4   control      F        5        4        7        5        4
## 5           5   control      F        3        4        6        4        3
## 6           6         A      M        7        8        7        9        9
## 7           7         A      M        5        5        6        4        5
## 8           8         A      F        2        3        5        3        2
## 9           9         A      F        3        3        4        6        4
## 10         10         B      M        4        4        5        3        4
## 11         11         B      M        3        3        4        2        3
## 12         12         B      M        6        7        8        6        3
## 13         13         B      F        5        5        6        8        6
## 14         14         B      F        2        2        3        1        2
## 15         15         B      F        2        2        3        4        4
## 16         16         B      F        4        5        7        5        4
##    posttest1 posttest2 posttest3 posttest4 posttest5 fuptest1 fuptest2 fuptest3
## 1          3         2         5         3         2        2        3        2
## 2          2         2         3         5         3        4        5        6
## 3          4         5         7         5         4        7        6        9
## 4          2         2         3         5         3        4        4        5
## 5          6         7         8         6         3        4        3        6
## 6          9         9        10         8         9        9       10       11
## 7          7         7         8        10         8        8        9       11
## 8          2         4         8         6         5        6        6        7
## 9          4         5         6         4         1        5        4        7
## 10         6         7         6         8         8        8        8        9
## 11         5         4         7         5         4        5        6        8
## 12         9        10        11         9         6        8        7       10
## 13         4         6         6         8         6        7        7        8
## 14         5         6         7         5         2        6        7        8
## 15         6         6         7         9         7        7        7        8
## 16         7         7         8         6         7        7        8       10
##    fuptest4 fuptest5
## 1         4        4
## 2         4        1
## 3         7        6
## 4         3        4
## 5         4        3
## 6         9        6
## 7         9        8
## 8         5        6
## 9         5        4
## 10        7        8
## 11        6        5
## 12        8        7
## 13       10        8
## 14        6        3
## 15        6        7
## 16        8        7&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# However, I&amp;#39;m sure you&amp;#39;ll appreciate how tedious this could get for more than a
# handful of columns. A better solution is to use a combination of the names()
# and stringr::str_replace_all() functions

ob_df_v2b &amp;lt;- ob_df_v2 #create a copy (optional)

names(ob_df_v2b) &amp;lt;- str_replace_all( #use stringr::str_replace_all() to replace the names
                                    
                                    names(ob_df_v2b), #character vector to replace matching values in
                                    
                                    &amp;quot;pre.&amp;quot;, #string component pattern to be matched
                                    
                                    #here the &amp;quot;.&amp;quot; doesn&amp;#39;t matter because I&amp;#39;ve also
                                    #specified the rest of the start of the
                                    #string up to the &amp;quot;.&amp;quot;
                                    
                                    &amp;quot;pretest&amp;quot; #string to replace it with
                                    ) 

names(ob_df_v2b) &amp;lt;- str_replace_all(names(ob_df_v2b), &amp;quot;post.&amp;quot;, &amp;quot;posttest&amp;quot;)

names(ob_df_v2b) &amp;lt;- str_replace_all(names(ob_df_v2b), &amp;quot;fup.&amp;quot;, &amp;quot;fuptest&amp;quot;) 

identical(ob_df_v2a, ob_df_v2b)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#a bit better... but still inefficient. The obvious third option is to just
#escape the &amp;quot;.&amp;quot; using &amp;quot;\\.&amp;quot;:

ob_df_v2c &amp;lt;- ob_df_v2 
names(ob_df_v2c) &amp;lt;- str_replace_all(names(ob_df_v2), 
                                    &amp;quot;\\.&amp;quot;, #anything with a name that contains a period
                                    &amp;quot;test&amp;quot;)

identical(ob_df_v2a, ob_df_v2c)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Fortunately pivot_longer() incorporates the same string matching/detection
# behaviour of str_replace_all(), so you can actually just pass &amp;quot;\\.&amp;quot; directly
# to the cols and names_sep arguments, as in the 2nd and 3rd examples for step 2
# below...

# step 2. use a string patten to pivot columns ----

#with one of the renamed versions of ob_df_v2
ob_long2 &amp;lt;- ob_df_v2c %&amp;gt;%
  pivot_longer(cols = contains(&amp;quot;test&amp;quot;), #select columns with names containing a pattern
               
               names_to = c(&amp;quot;.value&amp;quot;, 
                            #special string that tells pivot_longer to use names
                            #on each side of the separator pattern

                            &amp;quot;session&amp;quot;), #name of the key column to use for the names
               
               names_sep = &amp;quot;test&amp;quot; #separator to use
               )

ob_long2&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 80 x 7
##    subject_id treatment gender session   pre  post   fup
##         &amp;lt;int&amp;gt; &amp;lt;fct&amp;gt;     &amp;lt;fct&amp;gt;  &amp;lt;chr&amp;gt;   &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1          1 control   M      1           1     3     2
##  2          1 control   M      2           2     2     3
##  3          1 control   M      3           4     5     2
##  4          1 control   M      4           2     3     4
##  5          1 control   M      5           1     2     4
##  6          2 control   M      1           4     2     4
##  7          2 control   M      2           4     2     5
##  8          2 control   M      3           5     3     6
##  9          2 control   M      4           3     5     4
## 10          2 control   M      5           4     3     1
## # ... with 70 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#directly with a regular expression using the matches() tidyselect helper function
ob_long3 &amp;lt;- ob_df_v2 %&amp;gt;%
  pivot_longer(cols = matches(&amp;quot;\\.&amp;quot;), #select columns with names matching a regular expression pattern
               names_to = c(&amp;quot;.value&amp;quot;, &amp;quot;session&amp;quot;), #special &amp;quot;.value&amp;quot; indictor and name of the key column to use for the names
               names_sep = &amp;quot;\\.&amp;quot;) #separator to use
               

ob_long3&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 80 x 7
##    subject_id treatment gender session   pre  post   fup
##         &amp;lt;int&amp;gt; &amp;lt;fct&amp;gt;     &amp;lt;fct&amp;gt;  &amp;lt;chr&amp;gt;   &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1          1 control   M      1           1     3     2
##  2          1 control   M      2           2     2     3
##  3          1 control   M      3           4     5     2
##  4          1 control   M      4           2     3     4
##  5          1 control   M      5           1     2     4
##  6          2 control   M      1           4     2     4
##  7          2 control   M      2           4     2     5
##  8          2 control   M      3           5     3     6
##  9          2 control   M      4           3     5     4
## 10          2 control   M      5           4     3     1
## # ... with 70 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;identical(ob_long2, ob_long3)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#directly using the even easier contains() tidyselect helper function that
#absolves you of the need to worry about special characters/regular expressions

ob_long4 &amp;lt;- ob_df_v2 %&amp;gt;%
  pivot_longer(cols = contains(&amp;quot;.&amp;quot;), #select columns with names containing a literal string pattern
               
               names_to = c(&amp;quot;.value&amp;quot;, &amp;quot;session&amp;quot;), #special &amp;quot;.value&amp;quot; indictor and name of the key column to use for the names
               
               names_sep = &amp;quot;\\.&amp;quot; #separator to use. 
               #names_sep unfortunately requires the escaping of special
               #characters if you want them matched literally. Unfortunately
               #contains() doesnt work in the names_sep argument.
               )

identical(ob_long3, ob_long4)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now you know something about making data longer as well as few helpful bits about using string patterns to change variable names.&lt;/p&gt;
&lt;p&gt;The preceeding use case represented a situation when you have multiple value columns that you want to aggregate separately, yielding one value column for each separate set. This could occur if data on multiple measures (e.g. height &amp;amp; weight) were collected from the same subjects on multiple occassions. An alternative situation you might encounter (albeit probably less often) occurs when the values of a single measure of interest are spread across numerous columns with complex names consisting of components that specify the measurement group in combination. The simplest example of this might be something like a column naming format for daily temperature values of “d2019-01-23”, “d2019-02-01”, etc., being used to represent dates and you are interested in splitting the key column into its year, month, and day components (yyyy-mm-dd) and putting the values all in a single “temperature” column.&lt;/p&gt;
&lt;p&gt;Doing this with &lt;code&gt;pivot_longer()&lt;/code&gt; requires making use of the &lt;code&gt;names_pattern&lt;/code&gt; argument (instead of &lt;code&gt;names_sep&lt;/code&gt;) with a more complex regular expression that determines where to break up all of the name component. This is accomplished by enclosing each component with parentheses, e.g. &lt;/p&gt;
&lt;p&gt;&lt;code&gt;names_pattern = &#34;(component_1)(component_2)(component_3)&#34;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;To demonstrate this one we’ll use the WHO tuberculosis report data from the tidyr package to replicate the example of this use case from the &lt;code&gt;pivot_longer()&lt;/code&gt; documentation, with minor modifications to simplify it a bit. This dataset is automatically imported when the tidyr package is loaded so you can use it by calling the name “who”&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#?who #uncomment and run this to check the documentation for the who dataset

names(who) #check the names of the columns&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;country&amp;quot;      &amp;quot;iso2&amp;quot;         &amp;quot;iso3&amp;quot;         &amp;quot;year&amp;quot;         &amp;quot;new_sp_m014&amp;quot; 
##  [6] &amp;quot;new_sp_m1524&amp;quot; &amp;quot;new_sp_m2534&amp;quot; &amp;quot;new_sp_m3544&amp;quot; &amp;quot;new_sp_m4554&amp;quot; &amp;quot;new_sp_m5564&amp;quot;
## [11] &amp;quot;new_sp_m65&amp;quot;   &amp;quot;new_sp_f014&amp;quot;  &amp;quot;new_sp_f1524&amp;quot; &amp;quot;new_sp_f2534&amp;quot; &amp;quot;new_sp_f3544&amp;quot;
## [16] &amp;quot;new_sp_f4554&amp;quot; &amp;quot;new_sp_f5564&amp;quot; &amp;quot;new_sp_f65&amp;quot;   &amp;quot;new_sn_m014&amp;quot;  &amp;quot;new_sn_m1524&amp;quot;
## [21] &amp;quot;new_sn_m2534&amp;quot; &amp;quot;new_sn_m3544&amp;quot; &amp;quot;new_sn_m4554&amp;quot; &amp;quot;new_sn_m5564&amp;quot; &amp;quot;new_sn_m65&amp;quot;  
## [26] &amp;quot;new_sn_f014&amp;quot;  &amp;quot;new_sn_f1524&amp;quot; &amp;quot;new_sn_f2534&amp;quot; &amp;quot;new_sn_f3544&amp;quot; &amp;quot;new_sn_f4554&amp;quot;
## [31] &amp;quot;new_sn_f5564&amp;quot; &amp;quot;new_sn_f65&amp;quot;   &amp;quot;new_ep_m014&amp;quot;  &amp;quot;new_ep_m1524&amp;quot; &amp;quot;new_ep_m2534&amp;quot;
## [36] &amp;quot;new_ep_m3544&amp;quot; &amp;quot;new_ep_m4554&amp;quot; &amp;quot;new_ep_m5564&amp;quot; &amp;quot;new_ep_m65&amp;quot;   &amp;quot;new_ep_f014&amp;quot; 
## [41] &amp;quot;new_ep_f1524&amp;quot; &amp;quot;new_ep_f2534&amp;quot; &amp;quot;new_ep_f3544&amp;quot; &amp;quot;new_ep_f4554&amp;quot; &amp;quot;new_ep_f5564&amp;quot;
## [46] &amp;quot;new_ep_f65&amp;quot;   &amp;quot;newrel_m014&amp;quot;  &amp;quot;newrel_m1524&amp;quot; &amp;quot;newrel_m2534&amp;quot; &amp;quot;newrel_m3544&amp;quot;
## [51] &amp;quot;newrel_m4554&amp;quot; &amp;quot;newrel_m5564&amp;quot; &amp;quot;newrel_m65&amp;quot;   &amp;quot;newrel_f014&amp;quot;  &amp;quot;newrel_f1524&amp;quot;
## [56] &amp;quot;newrel_f2534&amp;quot; &amp;quot;newrel_f3544&amp;quot; &amp;quot;newrel_f4554&amp;quot; &amp;quot;newrel_f5564&amp;quot; &amp;quot;newrel_f65&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note from the documentation that many of the columns have a name with 3 components: 2 separated by an underscore and an “m” or “f” male/female indicator. These components represent three different variables that collectively specify the type of case and the values of these columns are all counts of tuberculosis cases. According to the documentation for the who data, the newrel* columns are part of this scheme as well, but they only have a single underscore.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# we can standardize the newrel* column names to match the structure of the
# other new* columns using str_replace_all() to simplify subsequent pattern
# matching in pivot_longer()

who2 &amp;lt;- who

names(who2) &amp;lt;- str_replace_all(names(who2), &amp;quot;newrel&amp;quot;, &amp;quot;new_rel&amp;quot;)


who_long &amp;lt;- who2 %&amp;gt;% pivot_longer(
  
  cols = new_sp_m014:new_rel_f65,
  
  names_to = c(&amp;quot;diagnosis&amp;quot;, &amp;quot;gender&amp;quot;, &amp;quot;age&amp;quot;),
  
  names_pattern = &amp;quot;new_(.*)_(.)(.*)&amp;quot;, 
  # pattern to be matched in this case is 
  # &amp;quot;new_(component 1)_(component2[m/f])_(component3)&amp;quot;, 
  # where component 1 is everything between the 1st and 2nd underscore,
  # component 2 is the lowercase letter &amp;quot;m&amp;quot; or &amp;quot;f&amp;quot;, and component 3 is
  # everything after component 2.
  # 
  # note: &amp;quot;*&amp;quot; is used to represent the repetition of the preceeding chraracter
  # (in this case &amp;quot;.&amp;quot; for &amp;quot;any character&amp;quot;) any number of times in a regular
  # expresion
  
  values_to = &amp;quot;count&amp;quot;)

who_long %&amp;gt;% 
  arrange(desc(count)) # arrange by count in descending order&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 405,440 x 8
##    country iso2  iso3   year diagnosis gender age    count
##    &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;  &amp;lt;chr&amp;gt;  &amp;lt;int&amp;gt;
##  1 India   IN    IND    2007 sn        m      3544  250051
##  2 India   IN    IND    2007 sn        f      3544  148811
##  3 China   CN    CHN    2013 rel       m      65    124476
##  4 China   CN    CHN    2013 rel       m      5564  112558
##  5 India   IN    IND    2007 ep        m      3544  105825
##  6 India   IN    IND    2007 ep        f      3544  101015
##  7 China   CN    CHN    2013 rel       m      4554  100297
##  8 India   IN    IND    2009 sp        m      3544   90830
##  9 India   IN    IND    2008 sp        m      3544   90498
## 10 India   IN    IND    2010 sp        m      3544   90440
## # ... with 405,430 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# now all of the values (i.e. counts) are in a single column and our distinct
# grouping variables are specified using a tidy set of 3 simple key columns
# instead of one complicated one

# see the documentation for the who data if you&amp;#39;re wondering why some values of
# age are so high&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;pivot_wider&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;pivot_wider()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;pivot_wider()&lt;/strong&gt; makes a data frame wider by spliting one or more value columns into a larger number of value columns, with names assigned according to the levels of key columns specified using the &lt;code&gt;names_from&lt;/code&gt; argument. Here we’ll use it to make the gapminder data wider by putting the annual life expectancy column, “lifeExp” into separate columns for each year (named using the values of the key column “year”).&lt;/p&gt;
&lt;p&gt;Arguments to specify for the simple case of spreading a single key-value column pair are:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;data&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;id_cols&lt;/strong&gt;: the columns that together uniquely identify each observation. by
default this is all columns&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;names_from&lt;/strong&gt;: the key column(s) to pull the names from for the new set of
replacement columns&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;values_from&lt;/strong&gt;: the value column(s) to pull values from for the new set of
replacement columns&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;You might want to do this as a temporary transformation to facilitate the construction of new variables derived from a combination of the more widely distributed value columns that result from the application of &lt;code&gt;pivot_wider()&lt;/code&gt; with &lt;code&gt;mutate()&lt;/code&gt;, or if you plan to export the data in wide from to share with someone working in other statistical software programs which require wide data.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gap_df %&amp;gt;% 
    pivot_wider(id_cols = c(country, continent),  
                names_from = year, values_from = lifeExp)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 142 x 14
##    country     continent `1952` `1957` `1962` `1967` `1972` `1977` `1982` `1987`
##    &amp;lt;fct&amp;gt;       &amp;lt;fct&amp;gt;      &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;
##  1 Afghanistan Asia        28.8   30.3   32.0   34.0   36.1   38.4   39.9   40.8
##  2 Albania     Europe      55.2   59.3   64.8   66.2   67.7   68.9   70.4   72  
##  3 Algeria     Africa      43.1   45.7   48.3   51.4   54.5   58.0   61.4   65.8
##  4 Angola      Africa      30.0   32.0   34     36.0   37.9   39.5   39.9   39.9
##  5 Argentina   Americas    62.5   64.4   65.1   65.6   67.1   68.5   69.9   70.8
##  6 Australia   Oceania     69.1   70.3   70.9   71.1   71.9   73.5   74.7   76.3
##  7 Austria     Europe      66.8   67.5   69.5   70.1   70.6   72.2   73.2   74.9
##  8 Bahrain     Asia        50.9   53.8   56.9   59.9   63.3   65.6   69.1   70.8
##  9 Bangladesh  Asia        37.5   39.3   41.2   43.5   45.3   46.9   50.0   52.8
## 10 Belgium     Europe      68     69.2   70.2   70.9   71.4   72.8   73.9   75.4
## # ... with 132 more rows, and 4 more variables: 1992 &amp;lt;dbl&amp;gt;, 1997 &amp;lt;dbl&amp;gt;,
## #   2002 &amp;lt;dbl&amp;gt;, 2007 &amp;lt;dbl&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#now all the lifeExp values for each year are in separate columns&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can also reverse the first ob_df_v2 lengthening transformation we did by using the &lt;code&gt;names_sep&lt;/code&gt; argument again. However, you should be aware that &lt;code&gt;names_sep&lt;/code&gt; behaves differently for &lt;code&gt;pivot_wider()&lt;/code&gt; than it did for &lt;code&gt;pivot_longer()&lt;/code&gt;. Specifically, since we’re adding “.” to the names in &lt;code&gt;pivot_wider()&lt;/code&gt; instead of searching for it (as we were in &lt;code&gt;pivot_longer()&lt;/code&gt;), the &lt;code&gt;names_sep&lt;/code&gt; argument text is read literally for &lt;code&gt;pivot_wider()&lt;/code&gt; rather than read like a regular expression for pattern matching like it was with &lt;code&gt;pivor_longer()&lt;/code&gt;. In most cases you can use the general rules:&lt;/p&gt;
&lt;p&gt;&lt;span style=&#34;color:green&#34;&gt;adding/inserting text = “literal text”&lt;/span&gt; where
you don’t need to worry about special characters&lt;/p&gt;
&lt;p&gt;&lt;span style=&#34;color:green&#34;&gt;pattern searching/matching = “regular
expresison”&lt;/span&gt; where you do need to worry about special characters&lt;/p&gt;
&lt;p&gt;Some functions behave differently, but we’ll reserve that discussion for another post.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ob_long %&amp;gt;% glimpse&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 240
## Columns: 5
## $ subject_id &amp;lt;int&amp;gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2,~
## $ treatment  &amp;lt;fct&amp;gt; control, control, control, control, control, control, contr~
## $ gender     &amp;lt;fct&amp;gt; M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, M,~
## $ session    &amp;lt;chr&amp;gt; &amp;quot;pre.1&amp;quot;, &amp;quot;pre.2&amp;quot;, &amp;quot;pre.3&amp;quot;, &amp;quot;pre.4&amp;quot;, &amp;quot;pre.5&amp;quot;, &amp;quot;post.1&amp;quot;, &amp;quot;pos~
## $ score      &amp;lt;dbl&amp;gt; 1, 2, 4, 2, 1, 3, 2, 5, 3, 2, 2, 3, 2, 4, 4, 4, 4, 5, 3, 4,~&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ob_wide_again &amp;lt;- pivot_wider(data = ob_long, 
                             names_from = &amp;quot;session&amp;quot;,
                             values_from = &amp;quot;score&amp;quot;,
                             names_sep = &amp;quot;.&amp;quot;)
                            

ob_wide_again %&amp;gt;% glimpse&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 16
## Columns: 18
## $ subject_id &amp;lt;int&amp;gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16
## $ treatment  &amp;lt;fct&amp;gt; control, control, control, control, control, A, A, A, A, B,~
## $ gender     &amp;lt;fct&amp;gt; M, M, M, F, F, M, M, F, F, M, M, M, F, F, F, F
## $ pre.1      &amp;lt;dbl&amp;gt; 1, 4, 5, 5, 3, 7, 5, 2, 3, 4, 3, 6, 5, 2, 2, 4
## $ pre.2      &amp;lt;dbl&amp;gt; 2, 4, 6, 4, 4, 8, 5, 3, 3, 4, 3, 7, 5, 2, 2, 5
## $ pre.3      &amp;lt;dbl&amp;gt; 4, 5, 5, 7, 6, 7, 6, 5, 4, 5, 4, 8, 6, 3, 3, 7
## $ pre.4      &amp;lt;dbl&amp;gt; 2, 3, 7, 5, 4, 9, 4, 3, 6, 3, 2, 6, 8, 1, 4, 5
## $ pre.5      &amp;lt;dbl&amp;gt; 1, 4, 7, 4, 3, 9, 5, 2, 4, 4, 3, 3, 6, 2, 4, 4
## $ post.1     &amp;lt;dbl&amp;gt; 3, 2, 4, 2, 6, 9, 7, 2, 4, 6, 5, 9, 4, 5, 6, 7
## $ post.2     &amp;lt;dbl&amp;gt; 2, 2, 5, 2, 7, 9, 7, 4, 5, 7, 4, 10, 6, 6, 6, 7
## $ post.3     &amp;lt;dbl&amp;gt; 5, 3, 7, 3, 8, 10, 8, 8, 6, 6, 7, 11, 6, 7, 7, 8
## $ post.4     &amp;lt;dbl&amp;gt; 3, 5, 5, 5, 6, 8, 10, 6, 4, 8, 5, 9, 8, 5, 9, 6
## $ post.5     &amp;lt;dbl&amp;gt; 2, 3, 4, 3, 3, 9, 8, 5, 1, 8, 4, 6, 6, 2, 7, 7
## $ fup.1      &amp;lt;dbl&amp;gt; 2, 4, 7, 4, 4, 9, 8, 6, 5, 8, 5, 8, 7, 6, 7, 7
## $ fup.2      &amp;lt;dbl&amp;gt; 3, 5, 6, 4, 3, 10, 9, 6, 4, 8, 6, 7, 7, 7, 7, 8
## $ fup.3      &amp;lt;dbl&amp;gt; 2, 6, 9, 5, 6, 11, 11, 7, 7, 9, 8, 10, 8, 8, 8, 10
## $ fup.4      &amp;lt;dbl&amp;gt; 4, 4, 7, 3, 4, 9, 9, 5, 5, 7, 6, 8, 10, 6, 6, 8
## $ fup.5      &amp;lt;dbl&amp;gt; 4, 1, 6, 4, 3, 6, 8, 6, 4, 8, 5, 7, 8, 3, 7, 7&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;all.equal(ob_df_v2, ob_wide_again, check.attributes = F) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# In case you&amp;#39;re wondering why I didn&amp;#39;t use identical()... all.equal with
# check.atributes = F checks equality of the contents but not attributes of the
# objects. In this case ob_df_v2 is not a tibble (it&amp;#39;s just a data frame) but
# ob_wide_again is a tibble and a data frame, so the &amp;quot;class&amp;quot; attributes of the
# objects are different, but the contents are the same.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;…or the 2nd transformation with multiple distinct value columns… just specify them all as a character vector in the values_from argument&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ob_long2 %&amp;gt;% glimpse&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 80
## Columns: 7
## $ subject_id &amp;lt;int&amp;gt; 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4,~
## $ treatment  &amp;lt;fct&amp;gt; control, control, control, control, control, control, contr~
## $ gender     &amp;lt;fct&amp;gt; M, M, M, M, M, M, M, M, M, M, M, M, M, M, M, F, F, F, F, F,~
## $ session    &amp;lt;chr&amp;gt; &amp;quot;1&amp;quot;, &amp;quot;2&amp;quot;, &amp;quot;3&amp;quot;, &amp;quot;4&amp;quot;, &amp;quot;5&amp;quot;, &amp;quot;1&amp;quot;, &amp;quot;2&amp;quot;, &amp;quot;3&amp;quot;, &amp;quot;4&amp;quot;, &amp;quot;5&amp;quot;, &amp;quot;1&amp;quot;, &amp;quot;2&amp;quot;,~
## $ pre        &amp;lt;dbl&amp;gt; 1, 2, 4, 2, 1, 4, 4, 5, 3, 4, 5, 6, 5, 7, 7, 5, 4, 7, 5, 4,~
## $ post       &amp;lt;dbl&amp;gt; 3, 2, 5, 3, 2, 2, 2, 3, 5, 3, 4, 5, 7, 5, 4, 2, 2, 3, 5, 3,~
## $ fup        &amp;lt;dbl&amp;gt; 2, 3, 2, 4, 4, 4, 5, 6, 4, 1, 7, 6, 9, 7, 6, 4, 4, 5, 3, 4,~&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ob_wide_again2 &amp;lt;- ob_long2 %&amp;gt;% 
  pivot_wider(names_from = &amp;quot;session&amp;quot;,
              values_from = c(&amp;quot;pre&amp;quot;, &amp;quot;post&amp;quot;, &amp;quot;fup&amp;quot;),
              names_sep = &amp;quot;.&amp;quot;)

all.equal(ob_df_v2, ob_wide_again2, check.attributes = F)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;…or the who2 dataset lengthening transformation by passing a vector with the key column names to the &lt;code&gt;names_from&lt;/code&gt; argument and the original starting “new_” portion to the &lt;code&gt;names_prefix&lt;/code&gt; argument&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;who_long %&amp;gt;% glimpse&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 405,440
## Columns: 8
## $ country   &amp;lt;chr&amp;gt; &amp;quot;Afghanistan&amp;quot;, &amp;quot;Afghanistan&amp;quot;, &amp;quot;Afghanistan&amp;quot;, &amp;quot;Afghanistan&amp;quot;, ~
## $ iso2      &amp;lt;chr&amp;gt; &amp;quot;AF&amp;quot;, &amp;quot;AF&amp;quot;, &amp;quot;AF&amp;quot;, &amp;quot;AF&amp;quot;, &amp;quot;AF&amp;quot;, &amp;quot;AF&amp;quot;, &amp;quot;AF&amp;quot;, &amp;quot;AF&amp;quot;, &amp;quot;AF&amp;quot;, &amp;quot;AF&amp;quot;, ~
## $ iso3      &amp;lt;chr&amp;gt; &amp;quot;AFG&amp;quot;, &amp;quot;AFG&amp;quot;, &amp;quot;AFG&amp;quot;, &amp;quot;AFG&amp;quot;, &amp;quot;AFG&amp;quot;, &amp;quot;AFG&amp;quot;, &amp;quot;AFG&amp;quot;, &amp;quot;AFG&amp;quot;, &amp;quot;AFG~
## $ year      &amp;lt;int&amp;gt; 1980, 1980, 1980, 1980, 1980, 1980, 1980, 1980, 1980, 1980, ~
## $ diagnosis &amp;lt;chr&amp;gt; &amp;quot;sp&amp;quot;, &amp;quot;sp&amp;quot;, &amp;quot;sp&amp;quot;, &amp;quot;sp&amp;quot;, &amp;quot;sp&amp;quot;, &amp;quot;sp&amp;quot;, &amp;quot;sp&amp;quot;, &amp;quot;sp&amp;quot;, &amp;quot;sp&amp;quot;, &amp;quot;sp&amp;quot;, ~
## $ gender    &amp;lt;chr&amp;gt; &amp;quot;m&amp;quot;, &amp;quot;m&amp;quot;, &amp;quot;m&amp;quot;, &amp;quot;m&amp;quot;, &amp;quot;m&amp;quot;, &amp;quot;m&amp;quot;, &amp;quot;m&amp;quot;, &amp;quot;f&amp;quot;, &amp;quot;f&amp;quot;, &amp;quot;f&amp;quot;, &amp;quot;f&amp;quot;, &amp;quot;f&amp;quot;, ~
## $ age       &amp;lt;chr&amp;gt; &amp;quot;014&amp;quot;, &amp;quot;1524&amp;quot;, &amp;quot;2534&amp;quot;, &amp;quot;3544&amp;quot;, &amp;quot;4554&amp;quot;, &amp;quot;5564&amp;quot;, &amp;quot;65&amp;quot;, &amp;quot;014&amp;quot;, ~
## $ count     &amp;lt;int&amp;gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;who2_wide_again &amp;lt;- who_long %&amp;gt;% 
  pivot_wider(names_from = c(&amp;quot;diagnosis&amp;quot;, &amp;quot;gender&amp;quot;, &amp;quot;age&amp;quot;),
              values_from = c(&amp;quot;count&amp;quot;),
              names_prefix = &amp;quot;new_&amp;quot;,
              names_sep = c(&amp;quot;_&amp;quot;)
              )

#remove the extra underscore that was not present between the 2nd and 3rd
#components of the original names

names(who2_wide_again) &amp;lt;- str_replace_all(names(who2_wide_again), &amp;quot;m_&amp;quot;, &amp;quot;m&amp;quot;)
names(who2_wide_again) &amp;lt;- str_replace_all(names(who2_wide_again), &amp;quot;f_&amp;quot;, &amp;quot;f&amp;quot;)

all.equal(who2, who2_wide_again, check.attributes = F)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Next we move on to &lt;code&gt;unite()&lt;/code&gt; and &lt;code&gt;separate()&lt;/code&gt; which are specialized &lt;code&gt;tidyr&lt;/code&gt; functions for selectively reshaping sets of columns without altering the rest of the manipulated data frame.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;unite&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;unite()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;unite()&lt;/code&gt; allows you to merge 2 or more columns into a single column without changing the length of the data frame. You typically specify the following arguments:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;data&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;col&lt;/strong&gt;: the name of the new column containing the values of the merged columns&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;…&lt;/strong&gt; : a selection of columns to unite, or if unspecified, all columns will
be united. Follows similar rules to the … argument of the select() function.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;sep&lt;/strong&gt;: string to use to demarcate the component values of the united column&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;remove&lt;/strong&gt;: set this to FALSE if you want to retain the original columns, leave
it as the default value of TRUE if you want to drop them.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;For example, we could combine the country and continent columns of the gapminder data frame copy gap_df:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#drop the original columns
united_gap &amp;lt;- gap_df %&amp;gt;% 
  unite(col = &amp;quot;country_continent&amp;quot;,
        country, continent,
        sep = &amp;quot;;&amp;quot;) #the default separator is &amp;quot;_&amp;quot;
united_gap&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1,704 x 5
##    country_continent  year lifeExp      pop gdpPercap
##    &amp;lt;chr&amp;gt;             &amp;lt;int&amp;gt;   &amp;lt;dbl&amp;gt;    &amp;lt;int&amp;gt;     &amp;lt;dbl&amp;gt;
##  1 Afghanistan;Asia   1952    28.8  8425333      779.
##  2 Afghanistan;Asia   1957    30.3  9240934      821.
##  3 Afghanistan;Asia   1962    32.0 10267083      853.
##  4 Afghanistan;Asia   1967    34.0 11537966      836.
##  5 Afghanistan;Asia   1972    36.1 13079460      740.
##  6 Afghanistan;Asia   1977    38.4 14880372      786.
##  7 Afghanistan;Asia   1982    39.9 12881816      978.
##  8 Afghanistan;Asia   1987    40.8 13867957      852.
##  9 Afghanistan;Asia   1992    41.7 16317921      649.
## 10 Afghanistan;Asia   1997    41.8 22227415      635.
## # ... with 1,694 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#keep them
gap_df %&amp;gt;% 
  unite(col = &amp;quot;country_continent&amp;quot;,
        country, continent,
        sep = &amp;quot;;&amp;quot;,
        remove = FALSE) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1,704 x 7
##    country_continent country     continent  year lifeExp      pop gdpPercap
##    &amp;lt;chr&amp;gt;             &amp;lt;fct&amp;gt;       &amp;lt;fct&amp;gt;     &amp;lt;int&amp;gt;   &amp;lt;dbl&amp;gt;    &amp;lt;int&amp;gt;     &amp;lt;dbl&amp;gt;
##  1 Afghanistan;Asia  Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan;Asia  Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan;Asia  Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan;Asia  Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan;Asia  Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan;Asia  Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan;Asia  Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan;Asia  Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan;Asia  Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan;Asia  Afghanistan Asia       1997    41.8 22227415      635.
## # ... with 1,694 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;separate&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;separate()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;separate()&lt;/code&gt; does the opposite of &lt;code&gt;unite()&lt;/code&gt;; it splits the values of a column and distributes them across multiple columns based on a separator string pattern. It also does not affect the length of the data frame. Arguments you’ll use most often are:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;data&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;col&lt;/strong&gt;: the name of the column you want to separate into pieces&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;into&lt;/strong&gt;: a vector of names for the new columns. &lt;code&gt;NA&lt;/code&gt; can be used to omit component columns&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;sep&lt;/strong&gt;: the string pattern to use to determine where to split the values.
&lt;code&gt;sep&lt;/code&gt; also accepts an integer for position-based splitting&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;remove&lt;/strong&gt;: drops the original complex column&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;convert&lt;/strong&gt;: if TRUE, re-evaluates and assigns appropriate classes to the new
columns based on the type of their contents after splitting has occurred.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Here we’ll use &lt;code&gt;separate()&lt;/code&gt; to reverse what we just did with &lt;code&gt;unite()&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gap_df_separated &amp;lt;- united_gap %&amp;gt;% 
  separate(col = &amp;quot;country_continent&amp;quot;,
           into = c(&amp;quot;country&amp;quot;, &amp;quot;continent&amp;quot;),
           sep = &amp;quot;;&amp;quot;) %&amp;gt;% 
  #one thing separate() won&amp;#39;t do is convert strings to factors for you (the
  #original variables were factors), so we&amp;#39;ll take of that using dplyr::mutate()
  mutate(country = as.factor(country), 
         continent = as.factor(continent))

gap_df_separated&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1,704 x 6
##    country     continent  year lifeExp      pop gdpPercap
##    &amp;lt;fct&amp;gt;       &amp;lt;fct&amp;gt;     &amp;lt;int&amp;gt;   &amp;lt;dbl&amp;gt;    &amp;lt;int&amp;gt;     &amp;lt;dbl&amp;gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan Asia       1997    41.8 22227415      635.
## # ... with 1,694 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;identical(gap_df, gap_df_separated)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#keep the complex column

united_gap %&amp;gt;% 
  separate(col = &amp;quot;country_continent&amp;quot;,
           into = c(&amp;quot;country&amp;quot;, &amp;quot;continent&amp;quot;),
           sep = &amp;quot;;&amp;quot;,
           remove = FALSE) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1,704 x 7
##    country_continent country     continent  year lifeExp      pop gdpPercap
##    &amp;lt;chr&amp;gt;             &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;     &amp;lt;int&amp;gt;   &amp;lt;dbl&amp;gt;    &amp;lt;int&amp;gt;     &amp;lt;dbl&amp;gt;
##  1 Afghanistan;Asia  Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan;Asia  Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan;Asia  Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan;Asia  Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan;Asia  Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan;Asia  Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan;Asia  Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan;Asia  Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan;Asia  Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan;Asia  Afghanistan Asia       1997    41.8 22227415      635.
## # ... with 1,694 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#drop one of the new columns using NA

united_gap %&amp;gt;% 
  separate(col = &amp;quot;country_continent&amp;quot;,
           into = c(&amp;quot;country&amp;quot;, NA),
           sep = &amp;quot;;&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1,704 x 5
##    country      year lifeExp      pop gdpPercap
##    &amp;lt;chr&amp;gt;       &amp;lt;int&amp;gt;   &amp;lt;dbl&amp;gt;    &amp;lt;int&amp;gt;     &amp;lt;dbl&amp;gt;
##  1 Afghanistan  1952    28.8  8425333      779.
##  2 Afghanistan  1957    30.3  9240934      821.
##  3 Afghanistan  1962    32.0 10267083      853.
##  4 Afghanistan  1967    34.0 11537966      836.
##  5 Afghanistan  1972    36.1 13079460      740.
##  6 Afghanistan  1977    38.4 14880372      786.
##  7 Afghanistan  1982    39.9 12881816      978.
##  8 Afghanistan  1987    40.8 13867957      852.
##  9 Afghanistan  1992    41.7 16317921      649.
## 10 Afghanistan  1997    41.8 22227415      635.
## # ... with 1,694 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now just practice these operations a few times with your own data and reshaping data to make it &lt;em&gt;tidyr&lt;/em&gt; (pun intended) should be a breeze!&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;navigation&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;7&lt;/span&gt; Navigation&lt;/h1&gt;
&lt;p&gt;Click &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/&#34;&gt;here&lt;/a&gt; to go back to the previous post. You can read the next one on joining data with dplyr &lt;a href=&#34;https://craig.rbind.io/post/2020-03-29-asgr-2-2-joining-data/&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;notes&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;8&lt;/span&gt; Notes&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;You can learn more about tidy data &lt;a href=&#34;https://r4ds.had.co.nz/tidy-data.html&#34;&gt;here&lt;/a&gt; and &lt;a href=&#34;https://www.jstatsoft.org/article/view/v059i10&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;If you want to get head start on learning about regular expressions and string manipulation, check &lt;a href=&#34;https://stringr.tidyverse.org/articles/regular-expressions.html&#34;&gt;this&lt;/a&gt; out.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thank you for visiting my blog. I welcome any suggestions for future posts, comments or other feedback you might have. Feedback from beginners and science students/trainees (or with them in mind) is especially helpful in the interest of making this guide even better for them.&lt;/p&gt;
&lt;p&gt;This blog is something I do as a volunteer in my free time. If you’ve found it helpful and want to give back, &lt;a href=&#34;https://www.buymeacoffee.com/huttoncp&#34;&gt;coffee donations&lt;/a&gt; would be appreciated.&lt;/p&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js&#34; data-name=&#34;bmc-button&#34; data-slug=&#34;huttoncp&#34; data-color=&#34;#FF5F5F&#34; data-emoji=&#34;&#34;  data-font=&#34;Cookie&#34; data-text=&#34;Buy me a coffee&#34; data-outline-color=&#34;#000000&#34; data-font-color=&#34;#ffffff&#34; data-coffee-color=&#34;#FFDD00&#34; &gt;&lt;/script&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Multiple object tracking scores predict post-concussion status years after mild traumatic brain injury</title>
      <link>https://craig.rbind.io/publication/lysenk-martin-hutton-et-al-2020/</link>
      <pubDate>Fri, 17 Jan 2020 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/publication/lysenk-martin-hutton-et-al-2020/</guid>
      <description></description>
    </item>
    
    <item>
      <title>A Scientist&#39;s Guide to R: Step 2.1. Data Transformation - Part 1</title>
      <link>https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/</link>
      <pubDate>Mon, 30 Dec 2019 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#tldr&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#introduction&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#select&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;select()&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#renaming-columns-with-select-or-rename&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.1&lt;/span&gt; Renaming Columns with &lt;strong&gt;select()&lt;/strong&gt; or &lt;strong&gt;rename()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#filter&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;filter()&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#subset-rows-using-indices-with-slice&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.1&lt;/span&gt; Subset Rows using Indices with &lt;strong&gt;slice()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#mutate&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;mutate()&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#recoding-or-creating-indicator-variables-using-if_else-case_when-or-recode&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.1&lt;/span&gt; Recoding or Creating Indicator Variables using &lt;strong&gt;if_else()&lt;/strong&gt;, &lt;strong&gt;case_when()&lt;/strong&gt;, or &lt;strong&gt;recode()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#summarise&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;summarise()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#group_by&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7&lt;/span&gt; &lt;strong&gt;group_by()&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#chaining-functions-with-the-pipe-operator&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;8&lt;/span&gt; Chaining Functions with the &lt;strong&gt;pipe operator (%&amp;gt;%)&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#navigation&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;9&lt;/span&gt; Navigation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#notes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;10&lt;/span&gt; Notes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;tldr&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;The 4th post in the &lt;a href=&#34;https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/&#34;&gt;Scientist’s Guide to R series&lt;/a&gt; introduces data transformation techniques useful for wrangling/tidying/cleaning data. Specifically, we will be learning how to use the 6 core functions (and a few others) from the popular &lt;a href=&#34;https://www.rdocumentation.org/packages/dplyr/versions/0.7.8&#34;&gt;dplyr&lt;/a&gt; package, perform similar operations in base R, and chain operations with the pipe operator (&lt;code&gt;%&amp;gt;%&lt;/code&gt;) to streamline the process.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;The 4th post in the &lt;a href=&#34;https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/&#34;&gt;Scientist’s Guide to R series&lt;/a&gt; introduces data transformation techniques useful for wrangling/tidying/cleaning data, which often takes longer than any other step in the data analysis process. Specifically, we will be learning how to use the 6 core functions or “verbs” of the popular &lt;a href=&#34;https://dplyr.tidyverse.org/&#34;&gt;dplyr&lt;/a&gt; package to:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;Easily &lt;a href=&#34;https://dplyr.tidyverse.org/reference/select.html&#34;&gt;select&lt;/a&gt; a subset of columns.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://dplyr.tidyverse.org/reference/filter.html&#34;&gt;filter&lt;/a&gt; rows using logical tests with values of specified columns.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Modify columns or add new ones using &lt;a href=&#34;https://dplyr.tidyverse.org/reference/mutate.html&#34;&gt;mutate&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Obtain descriptive summaries of data using &lt;a href=&#34;https://dplyr.tidyverse.org/reference/summarise.html&#34;&gt;summarise&lt;/a&gt; (or the equivalent summarize()).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Assign a grouping structure to a data frame to enable subsequent dplyr package function calls to be executed within groups using &lt;a href=&#34;https://dplyr.tidyverse.org/reference/group_by.html&#34;&gt;group_by&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://dplyr.tidyverse.org/reference/arrange.html&#34;&gt;arrange&lt;/a&gt; a data frame for improved readability.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Some additional relevant functions that build on this foundation will also be covered where appropriate.&lt;/p&gt;
&lt;p&gt;While other great packages (and other functions in base R) exist to help you manipulate data, using the dplyr package is perhaps the easiest way to learn these essential data processing techniques. However, if you find yourself working with very large datasets (e.g. &amp;gt; 1,000,000 rows) you might want to check out the &lt;a href=&#34;https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html&#34;&gt;data.table&lt;/a&gt; package, which emphasizes efficiency and performance over readability and ease of use.&lt;/p&gt;
&lt;p&gt;Most dplyr functions accept a data frame or tibble as their first argument and return a data frame as their output. This is a key design feature that enables you to apply a series of operations to a data frame in a chain using the pipe operator (&lt;code&gt;%&amp;gt;%&lt;/code&gt;), as demonstrated in &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#chaining-functions-with-the-pipe-operator&#34;&gt;section 8&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;select&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;select()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;select()&lt;/code&gt; is one of the dplyr functions you can use for subsetting. &lt;code&gt;select()&lt;/code&gt; lets you extract a subset of &lt;strong&gt;columns&lt;/strong&gt; from a data frame.&lt;/p&gt;
&lt;p&gt;Columns may be specified using indices, names, or using string patterns with the assistance of a few &lt;a href=&#34;https://www.rdocumentation.org/packages/dplyr/versions/0.5.0/topics/select_helpers&#34;&gt;tidyselect helper functions&lt;/a&gt; such as &lt;code&gt;contains()&lt;/code&gt;, &lt;code&gt;starts_with()&lt;/code&gt;, and &lt;code&gt;ends_with()&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(dplyr) #load the dplyr package with the library function.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Attaching package: &amp;#39;dplyr&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## The following objects are masked from &amp;#39;package:stats&amp;#39;:
## 
##     filter, lag&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## The following objects are masked from &amp;#39;package:base&amp;#39;:
## 
##     intersect, setdiff, setequal, union&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#the dplyr package will be used throughout this tutorial so make sure it is
#loaded before trying to run the examples yourself

df &amp;lt;- starwars #assign the star wars data frame (imported when dplyr is loaded) to the label/name &amp;quot;df&amp;quot;

# inspect the structure

glimpse(df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 87
## Columns: 14
## $ name       &amp;lt;chr&amp;gt; &amp;quot;Luke Skywalker&amp;quot;, &amp;quot;C-3PO&amp;quot;, &amp;quot;R2-D2&amp;quot;, &amp;quot;Darth Vader&amp;quot;, &amp;quot;Leia Or~
## $ height     &amp;lt;int&amp;gt; 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180, 2~
## $ mass       &amp;lt;dbl&amp;gt; 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, 77.~
## $ hair_color &amp;lt;chr&amp;gt; &amp;quot;blond&amp;quot;, NA, NA, &amp;quot;none&amp;quot;, &amp;quot;brown&amp;quot;, &amp;quot;brown, grey&amp;quot;, &amp;quot;brown&amp;quot;, N~
## $ skin_color &amp;lt;chr&amp;gt; &amp;quot;fair&amp;quot;, &amp;quot;gold&amp;quot;, &amp;quot;white, blue&amp;quot;, &amp;quot;white&amp;quot;, &amp;quot;light&amp;quot;, &amp;quot;light&amp;quot;, &amp;quot;~
## $ eye_color  &amp;lt;chr&amp;gt; &amp;quot;blue&amp;quot;, &amp;quot;yellow&amp;quot;, &amp;quot;red&amp;quot;, &amp;quot;yellow&amp;quot;, &amp;quot;brown&amp;quot;, &amp;quot;blue&amp;quot;, &amp;quot;blue&amp;quot;,~
## $ birth_year &amp;lt;dbl&amp;gt; 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, NA, 24.0, 57.0, ~
## $ sex        &amp;lt;chr&amp;gt; &amp;quot;male&amp;quot;, &amp;quot;none&amp;quot;, &amp;quot;none&amp;quot;, &amp;quot;male&amp;quot;, &amp;quot;female&amp;quot;, &amp;quot;male&amp;quot;, &amp;quot;female&amp;quot;,~
## $ gender     &amp;lt;chr&amp;gt; &amp;quot;masculine&amp;quot;, &amp;quot;masculine&amp;quot;, &amp;quot;masculine&amp;quot;, &amp;quot;masculine&amp;quot;, &amp;quot;femini~
## $ homeworld  &amp;lt;chr&amp;gt; &amp;quot;Tatooine&amp;quot;, &amp;quot;Tatooine&amp;quot;, &amp;quot;Naboo&amp;quot;, &amp;quot;Tatooine&amp;quot;, &amp;quot;Alderaan&amp;quot;, &amp;quot;T~
## $ species    &amp;lt;chr&amp;gt; &amp;quot;Human&amp;quot;, &amp;quot;Droid&amp;quot;, &amp;quot;Droid&amp;quot;, &amp;quot;Human&amp;quot;, &amp;quot;Human&amp;quot;, &amp;quot;Human&amp;quot;, &amp;quot;Huma~
## $ films      &amp;lt;list&amp;gt; &amp;lt;&amp;quot;The Empire Strikes Back&amp;quot;, &amp;quot;Revenge of the Sith&amp;quot;, &amp;quot;Return~
## $ vehicles   &amp;lt;list&amp;gt; &amp;lt;&amp;quot;Snowspeeder&amp;quot;, &amp;quot;Imperial Speeder Bike&amp;quot;&amp;gt;, &amp;lt;&amp;gt;, &amp;lt;&amp;gt;, &amp;lt;&amp;gt;, &amp;quot;Imp~
## $ starships  &amp;lt;list&amp;gt; &amp;lt;&amp;quot;X-wing&amp;quot;, &amp;quot;Imperial shuttle&amp;quot;&amp;gt;, &amp;lt;&amp;gt;, &amp;lt;&amp;gt;, &amp;quot;TIE Advanced x1&amp;quot;,~&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#in base R, you would extract columns using either [, &amp;quot;name&amp;quot;] or [[&amp;quot;name&amp;quot;]], or $name
df[, &amp;quot;name&amp;quot;] #[] returns another data frame&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 1
##    name              
##    &amp;lt;chr&amp;gt;             
##  1 Luke Skywalker    
##  2 C-3PO             
##  3 R2-D2             
##  4 Darth Vader       
##  5 Leia Organa       
##  6 Owen Lars         
##  7 Beru Whitesun lars
##  8 R5-D4             
##  9 Biggs Darklighter 
## 10 Obi-Wan Kenobi    
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;head(df[[&amp;quot;name&amp;quot;]]) #[[]] returns a 1 dimensional vector. head() just shows the 1st 6 values&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Luke Skywalker&amp;quot; &amp;quot;C-3PO&amp;quot;          &amp;quot;R2-D2&amp;quot;          &amp;quot;Darth Vader&amp;quot;   
## [5] &amp;quot;Leia Organa&amp;quot;    &amp;quot;Owen Lars&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df[, c(&amp;quot;name&amp;quot;, &amp;quot;mass&amp;quot;, &amp;quot;hair_color&amp;quot;)] #[] can accept a vector of names&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 3
##    name                mass hair_color   
##    &amp;lt;chr&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;        
##  1 Luke Skywalker        77 blond        
##  2 C-3PO                 75 &amp;lt;NA&amp;gt;         
##  3 R2-D2                 32 &amp;lt;NA&amp;gt;         
##  4 Darth Vader          136 none         
##  5 Leia Organa           49 brown        
##  6 Owen Lars            120 brown, grey  
##  7 Beru Whitesun lars    75 brown        
##  8 R5-D4                 32 &amp;lt;NA&amp;gt;         
##  9 Biggs Darklighter     84 black        
## 10 Obi-Wan Kenobi        77 auburn, white
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#df[[c(&amp;quot;name&amp;quot;, &amp;quot;mass&amp;quot;, &amp;quot;hair_color&amp;quot;)]] #[[]] can&amp;#39;t and returns an error

#or a logical or integer vector the same length as the number of columns

df[, 1:ncol(df) %% 2 == 0] #columns with even indices&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 7
##    height hair_color    eye_color sex    homeworld films     starships
##     &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;         &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;  &amp;lt;chr&amp;gt;     &amp;lt;list&amp;gt;    &amp;lt;list&amp;gt;   
##  1    172 blond         blue      male   Tatooine  &amp;lt;chr [5]&amp;gt; &amp;lt;chr [2]&amp;gt;
##  2    167 &amp;lt;NA&amp;gt;          yellow    none   Tatooine  &amp;lt;chr [6]&amp;gt; &amp;lt;chr [0]&amp;gt;
##  3     96 &amp;lt;NA&amp;gt;          red       none   Naboo     &amp;lt;chr [7]&amp;gt; &amp;lt;chr [0]&amp;gt;
##  4    202 none          yellow    male   Tatooine  &amp;lt;chr [4]&amp;gt; &amp;lt;chr [1]&amp;gt;
##  5    150 brown         brown     female Alderaan  &amp;lt;chr [5]&amp;gt; &amp;lt;chr [0]&amp;gt;
##  6    178 brown, grey   blue      male   Tatooine  &amp;lt;chr [3]&amp;gt; &amp;lt;chr [0]&amp;gt;
##  7    165 brown         blue      female Tatooine  &amp;lt;chr [3]&amp;gt; &amp;lt;chr [0]&amp;gt;
##  8     97 &amp;lt;NA&amp;gt;          red       none   Tatooine  &amp;lt;chr [1]&amp;gt; &amp;lt;chr [0]&amp;gt;
##  9    183 black         brown     male   Tatooine  &amp;lt;chr [1]&amp;gt; &amp;lt;chr [1]&amp;gt;
## 10    182 auburn, white blue-gray male   Stewjon   &amp;lt;chr [6]&amp;gt; &amp;lt;chr [5]&amp;gt;
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df[, 1:5] #1st 5 columns&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 5
##    name               height  mass hair_color    skin_color 
##    &amp;lt;chr&amp;gt;               &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;         &amp;lt;chr&amp;gt;      
##  1 Luke Skywalker        172    77 blond         fair       
##  2 C-3PO                 167    75 &amp;lt;NA&amp;gt;          gold       
##  3 R2-D2                  96    32 &amp;lt;NA&amp;gt;          white, blue
##  4 Darth Vader           202   136 none          white      
##  5 Leia Organa           150    49 brown         light      
##  6 Owen Lars             178   120 brown, grey   light      
##  7 Beru Whitesun lars    165    75 brown         light      
##  8 R5-D4                  97    32 &amp;lt;NA&amp;gt;          white, red 
##  9 Biggs Darklighter     183    84 black         light      
## 10 Obi-Wan Kenobi        182    77 auburn, white fair       
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#dplyr::select() makes extracting multiple columns even easier
select(df, 
       name, mass, hair_color) #note that names don&amp;#39;t have to be quoted&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 3
##    name                mass hair_color   
##    &amp;lt;chr&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;        
##  1 Luke Skywalker        77 blond        
##  2 C-3PO                 75 &amp;lt;NA&amp;gt;         
##  3 R2-D2                 32 &amp;lt;NA&amp;gt;         
##  4 Darth Vader          136 none         
##  5 Leia Organa           49 brown        
##  6 Owen Lars            120 brown, grey  
##  7 Beru Whitesun lars    75 brown        
##  8 R5-D4                 32 &amp;lt;NA&amp;gt;         
##  9 Biggs Darklighter     84 black        
## 10 Obi-Wan Kenobi        77 auburn, white
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;select(df, name:hair_color) #and you can get all columns in a range using unquoted names&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 4
##    name               height  mass hair_color   
##    &amp;lt;chr&amp;gt;               &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;        
##  1 Luke Skywalker        172    77 blond        
##  2 C-3PO                 167    75 &amp;lt;NA&amp;gt;         
##  3 R2-D2                  96    32 &amp;lt;NA&amp;gt;         
##  4 Darth Vader           202   136 none         
##  5 Leia Organa           150    49 brown        
##  6 Owen Lars             178   120 brown, grey  
##  7 Beru Whitesun lars    165    75 brown        
##  8 R5-D4                  97    32 &amp;lt;NA&amp;gt;         
##  9 Biggs Darklighter     183    84 black        
## 10 Obi-Wan Kenobi        182    77 auburn, white
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;select(df, 1:5, 9, 10) #select also accepts column indices and doesn&amp;#39;t require c()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 7
##    name               height  mass hair_color    skin_color  gender    homeworld
##    &amp;lt;chr&amp;gt;               &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;         &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;    
##  1 Luke Skywalker        172    77 blond         fair        masculine Tatooine 
##  2 C-3PO                 167    75 &amp;lt;NA&amp;gt;          gold        masculine Tatooine 
##  3 R2-D2                  96    32 &amp;lt;NA&amp;gt;          white, blue masculine Naboo    
##  4 Darth Vader           202   136 none          white       masculine Tatooine 
##  5 Leia Organa           150    49 brown         light       feminine  Alderaan 
##  6 Owen Lars             178   120 brown, grey   light       masculine Tatooine 
##  7 Beru Whitesun lars    165    75 brown         light       feminine  Tatooine 
##  8 R5-D4                  97    32 &amp;lt;NA&amp;gt;          white, red  masculine Tatooine 
##  9 Biggs Darklighter     183    84 black         light       masculine Tatooine 
## 10 Obi-Wan Kenobi        182    77 auburn, white fair        masculine Stewjon  
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#select everything other than a specified column using the subtraction operator &amp;quot;-&amp;quot;
select(df, -hair_color, -mass) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 12
##    name    height skin_color eye_color birth_year sex   gender homeworld species
##    &amp;lt;chr&amp;gt;    &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;  &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;  
##  1 Luke S~    172 fair       blue            19   male  mascu~ Tatooine  Human  
##  2 C-3PO      167 gold       yellow         112   none  mascu~ Tatooine  Droid  
##  3 R2-D2       96 white, bl~ red             33   none  mascu~ Naboo     Droid  
##  4 Darth ~    202 white      yellow          41.9 male  mascu~ Tatooine  Human  
##  5 Leia O~    150 light      brown           19   fema~ femin~ Alderaan  Human  
##  6 Owen L~    178 light      blue            52   male  mascu~ Tatooine  Human  
##  7 Beru W~    165 light      blue            47   fema~ femin~ Tatooine  Human  
##  8 R5-D4       97 white, red red             NA   none  mascu~ Tatooine  Droid  
##  9 Biggs ~    183 light      brown           24   male  mascu~ Tatooine  Human  
## 10 Obi-Wa~    182 fair       blue-gray       57   male  mascu~ Stewjon   Human  
## # ... with 77 more rows, and 3 more variables: films &amp;lt;list&amp;gt;, vehicles &amp;lt;list&amp;gt;,
## #   starships &amp;lt;list&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;select(df, -c(name:hair_color)) #everything other than a range of named columns&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 10
##    skin_color eye_color birth_year sex   gender homeworld species films vehicles
##    &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;  &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;   &amp;lt;lis&amp;gt; &amp;lt;list&amp;gt;  
##  1 fair       blue            19   male  mascu~ Tatooine  Human   &amp;lt;chr~ &amp;lt;chr [2~
##  2 gold       yellow         112   none  mascu~ Tatooine  Droid   &amp;lt;chr~ &amp;lt;chr [0~
##  3 white, bl~ red             33   none  mascu~ Naboo     Droid   &amp;lt;chr~ &amp;lt;chr [0~
##  4 white      yellow          41.9 male  mascu~ Tatooine  Human   &amp;lt;chr~ &amp;lt;chr [0~
##  5 light      brown           19   fema~ femin~ Alderaan  Human   &amp;lt;chr~ &amp;lt;chr [1~
##  6 light      blue            52   male  mascu~ Tatooine  Human   &amp;lt;chr~ &amp;lt;chr [0~
##  7 light      blue            47   fema~ femin~ Tatooine  Human   &amp;lt;chr~ &amp;lt;chr [0~
##  8 white, red red             NA   none  mascu~ Tatooine  Droid   &amp;lt;chr~ &amp;lt;chr [0~
##  9 light      brown           24   male  mascu~ Tatooine  Human   &amp;lt;chr~ &amp;lt;chr [0~
## 10 fair       blue-gray       57   male  mascu~ Stewjon   Human   &amp;lt;chr~ &amp;lt;chr [1~
## # ... with 77 more rows, and 1 more variable: starships &amp;lt;list&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# dplyr also provides a number of &amp;quot;select helper&amp;quot; functions that allow you to
# select variables using string patterns, e.g.

select(df, contains(&amp;quot;m&amp;quot;)) #all columns with names that contain the letter m&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 4
##    name                mass homeworld films    
##    &amp;lt;chr&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;     &amp;lt;list&amp;gt;   
##  1 Luke Skywalker        77 Tatooine  &amp;lt;chr [5]&amp;gt;
##  2 C-3PO                 75 Tatooine  &amp;lt;chr [6]&amp;gt;
##  3 R2-D2                 32 Naboo     &amp;lt;chr [7]&amp;gt;
##  4 Darth Vader          136 Tatooine  &amp;lt;chr [4]&amp;gt;
##  5 Leia Organa           49 Alderaan  &amp;lt;chr [5]&amp;gt;
##  6 Owen Lars            120 Tatooine  &amp;lt;chr [3]&amp;gt;
##  7 Beru Whitesun lars    75 Tatooine  &amp;lt;chr [3]&amp;gt;
##  8 R5-D4                 32 Tatooine  &amp;lt;chr [1]&amp;gt;
##  9 Biggs Darklighter     84 Tatooine  &amp;lt;chr [1]&amp;gt;
## 10 Obi-Wan Kenobi        77 Stewjon   &amp;lt;chr [6]&amp;gt;
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;select(df, starts_with(&amp;quot;m&amp;quot;)) #all columns with names that start with the letter m &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 1
##     mass
##    &amp;lt;dbl&amp;gt;
##  1    77
##  2    75
##  3    32
##  4   136
##  5    49
##  6   120
##  7    75
##  8    32
##  9    84
## 10    77
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;select(df, ends_with(&amp;quot;s&amp;quot;)) #all columns with names that end with the letter s &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 5
##     mass species films     vehicles  starships
##    &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;   &amp;lt;list&amp;gt;    &amp;lt;list&amp;gt;    &amp;lt;list&amp;gt;   
##  1    77 Human   &amp;lt;chr [5]&amp;gt; &amp;lt;chr [2]&amp;gt; &amp;lt;chr [2]&amp;gt;
##  2    75 Droid   &amp;lt;chr [6]&amp;gt; &amp;lt;chr [0]&amp;gt; &amp;lt;chr [0]&amp;gt;
##  3    32 Droid   &amp;lt;chr [7]&amp;gt; &amp;lt;chr [0]&amp;gt; &amp;lt;chr [0]&amp;gt;
##  4   136 Human   &amp;lt;chr [4]&amp;gt; &amp;lt;chr [0]&amp;gt; &amp;lt;chr [1]&amp;gt;
##  5    49 Human   &amp;lt;chr [5]&amp;gt; &amp;lt;chr [1]&amp;gt; &amp;lt;chr [0]&amp;gt;
##  6   120 Human   &amp;lt;chr [3]&amp;gt; &amp;lt;chr [0]&amp;gt; &amp;lt;chr [0]&amp;gt;
##  7    75 Human   &amp;lt;chr [3]&amp;gt; &amp;lt;chr [0]&amp;gt; &amp;lt;chr [0]&amp;gt;
##  8    32 Droid   &amp;lt;chr [1]&amp;gt; &amp;lt;chr [0]&amp;gt; &amp;lt;chr [0]&amp;gt;
##  9    84 Human   &amp;lt;chr [1]&amp;gt; &amp;lt;chr [0]&amp;gt; &amp;lt;chr [1]&amp;gt;
## 10    77 Human   &amp;lt;chr [6]&amp;gt; &amp;lt;chr [1]&amp;gt; &amp;lt;chr [5]&amp;gt;
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# there is also a select helper called &amp;quot;matches&amp;quot; that enables you to select columns
# with more complex string patterns using regular expressions 

# a detailed introduction to the &amp;quot;matches&amp;quot; select helper, string manipulation,
# and regular expressions will be covered in a later post.

# see the documentation for select_helpers (from the tidyselect package, which
# is loaded with dplyr) for more info
# ?tidyselect::select_helpers

# you can rearrange columns and rename them during the selection process
select(df, 5:last_col(), 1:4) #select columns 5 to the end, then columns 1 to 4 &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 14
##    skin_color eye_color birth_year sex   gender homeworld species films vehicles
##    &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;  &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;   &amp;lt;lis&amp;gt; &amp;lt;list&amp;gt;  
##  1 fair       blue            19   male  mascu~ Tatooine  Human   &amp;lt;chr~ &amp;lt;chr [2~
##  2 gold       yellow         112   none  mascu~ Tatooine  Droid   &amp;lt;chr~ &amp;lt;chr [0~
##  3 white, bl~ red             33   none  mascu~ Naboo     Droid   &amp;lt;chr~ &amp;lt;chr [0~
##  4 white      yellow          41.9 male  mascu~ Tatooine  Human   &amp;lt;chr~ &amp;lt;chr [0~
##  5 light      brown           19   fema~ femin~ Alderaan  Human   &amp;lt;chr~ &amp;lt;chr [1~
##  6 light      blue            52   male  mascu~ Tatooine  Human   &amp;lt;chr~ &amp;lt;chr [0~
##  7 light      blue            47   fema~ femin~ Tatooine  Human   &amp;lt;chr~ &amp;lt;chr [0~
##  8 white, red red             NA   none  mascu~ Tatooine  Droid   &amp;lt;chr~ &amp;lt;chr [0~
##  9 light      brown           24   male  mascu~ Tatooine  Human   &amp;lt;chr~ &amp;lt;chr [0~
## 10 fair       blue-gray       57   male  mascu~ Stewjon   Human   &amp;lt;chr~ &amp;lt;chr [1~
## # ... with 77 more rows, and 5 more variables: starships &amp;lt;list&amp;gt;, name &amp;lt;chr&amp;gt;,
## #   height &amp;lt;int&amp;gt;, mass &amp;lt;dbl&amp;gt;, hair_color &amp;lt;chr&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# to select() a single column and turn it into a vector (instead of leaving it as a data frame),

all.equal(
  pull(select(df, mass), mass), # wrap it in the pull function (also from dplyr)
  df$mass, # or use the $ symbol
  df[[&amp;quot;mass&amp;quot;]] # or the equivalent `[[` operator
  )&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;renaming-columns-with-select-or-rename&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.1&lt;/span&gt; Renaming Columns with &lt;strong&gt;select()&lt;/strong&gt; or &lt;strong&gt;rename()&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Columns can also be renamed when subsetting with the &lt;code&gt;select()&lt;/code&gt; function or without subsetting using the &lt;code&gt;rename()&lt;/code&gt; function (also in the dplyr package).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#rename and subset using select
select(df, nm = name, hgt = height, byear = birth_year) #select columns and rename them&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 3
##    nm                   hgt byear
##    &amp;lt;chr&amp;gt;              &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt;
##  1 Luke Skywalker       172  19  
##  2 C-3PO                167 112  
##  3 R2-D2                 96  33  
##  4 Darth Vader          202  41.9
##  5 Leia Organa          150  19  
##  6 Owen Lars            178  52  
##  7 Beru Whitesun lars   165  47  
##  8 R5-D4                 97  NA  
##  9 Biggs Darklighter    183  24  
## 10 Obi-Wan Kenobi       182  57  
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#to just rename columns without subsetting, use dplyr::rename() instead of select()
rename(df, nm = name, hgt = height, b_year = birth_year) #returns all columns&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 14
##    nm           hgt  mass hair_color   skin_color eye_color b_year sex   gender 
##    &amp;lt;chr&amp;gt;      &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;        &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;      &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;  
##  1 Luke Skyw~   172    77 blond        fair       blue        19   male  mascul~
##  2 C-3PO        167    75 &amp;lt;NA&amp;gt;         gold       yellow     112   none  mascul~
##  3 R2-D2         96    32 &amp;lt;NA&amp;gt;         white, bl~ red         33   none  mascul~
##  4 Darth Vad~   202   136 none         white      yellow      41.9 male  mascul~
##  5 Leia Orga~   150    49 brown        light      brown       19   fema~ femini~
##  6 Owen Lars    178   120 brown, grey  light      blue        52   male  mascul~
##  7 Beru Whit~   165    75 brown        light      blue        47   fema~ femini~
##  8 R5-D4         97    32 &amp;lt;NA&amp;gt;         white, red red         NA   none  mascul~
##  9 Biggs Dar~   183    84 black        light      brown       24   male  mascul~
## 10 Obi-Wan K~   182    77 auburn, whi~ fair       blue-gray   57   male  mascul~
## # ... with 77 more rows, and 5 more variables: homeworld &amp;lt;chr&amp;gt;, species &amp;lt;chr&amp;gt;,
## #   films &amp;lt;list&amp;gt;, vehicles &amp;lt;list&amp;gt;, starships &amp;lt;list&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#to save the updated names just assign the output back to the same data frame object
renamed_df &amp;lt;- rename(df, nm = name, hgt = height, b_year = birth_year) 

#In base R you can just assign names using a string vector. 
#The main disadvantage of this method is that all variable names have to be specified,
#instead of just the ones that you want to change (which is all you need to do with the rename function)
#Unlike select() or rename(), the base R method also requires that names be assigned in the correct order,
#according to the column indices.

df_names &amp;lt;- names(df) #store the original names

names(df) &amp;lt;- c(&amp;quot;nm&amp;quot;, &amp;quot;hgt&amp;quot;, &amp;quot;mass&amp;quot;, 
               &amp;quot;hair_color&amp;quot;, &amp;quot;skin_color&amp;quot;, &amp;quot;eye_color&amp;quot;,
               &amp;quot;b_year&amp;quot;) #returns a warning and then all non-specified names become NA&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: The `value` argument of `names&amp;lt;-` must have the same length as `x` as of tibble 3.0.0.
## `names` must have length 14, not 7.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: The `value` argument of `names&amp;lt;-` can&amp;#39;t be empty as of tibble 3.0.0.
## Columns 8, 9, 10, 11, 12, and 2 more must be named.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;names(df) &amp;lt;- df_names #restore the original names from the vector saved above&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;filter&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;filter()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;filter()&lt;/code&gt; is the other core dplyr verb you can use for subsetting your data. &lt;code&gt;filter()&lt;/code&gt; lets you extract a subset of &lt;strong&gt;rows&lt;/strong&gt; using &lt;a href=&#34;https://craig.rbind.io/post/2019-08-06-asgr-2-0-basic-operations-and-data-structures/#logical-operators&#34;&gt;logical operators&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To filter a data frame, specify the name of the data frame as the 1st argument, then any number of logical tests for values of variables in the data frame that you want to use as filtering criteria.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# we&amp;#39;ll just work with a few columns to simplify the output and highlight the filtering
df2 &amp;lt;- select(df, name, height, species, homeworld) 

unique(df2$homeworld) #check the unique values of the homeworld variable, which we will use for filtering&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;Tatooine&amp;quot;       &amp;quot;Naboo&amp;quot;          &amp;quot;Alderaan&amp;quot;       &amp;quot;Stewjon&amp;quot;       
##  [5] &amp;quot;Eriadu&amp;quot;         &amp;quot;Kashyyyk&amp;quot;       &amp;quot;Corellia&amp;quot;       &amp;quot;Rodia&amp;quot;         
##  [9] &amp;quot;Nal Hutta&amp;quot;      &amp;quot;Bestine IV&amp;quot;     NA               &amp;quot;Kamino&amp;quot;        
## [13] &amp;quot;Trandosha&amp;quot;      &amp;quot;Socorro&amp;quot;        &amp;quot;Bespin&amp;quot;         &amp;quot;Mon Cala&amp;quot;      
## [17] &amp;quot;Chandrila&amp;quot;      &amp;quot;Endor&amp;quot;          &amp;quot;Sullust&amp;quot;        &amp;quot;Cato Neimoidia&amp;quot;
## [21] &amp;quot;Coruscant&amp;quot;      &amp;quot;Toydaria&amp;quot;       &amp;quot;Malastare&amp;quot;      &amp;quot;Dathomir&amp;quot;      
## [25] &amp;quot;Ryloth&amp;quot;         &amp;quot;Vulpter&amp;quot;        &amp;quot;Troiken&amp;quot;        &amp;quot;Tund&amp;quot;          
## [29] &amp;quot;Haruun Kal&amp;quot;     &amp;quot;Cerea&amp;quot;          &amp;quot;Glee Anselm&amp;quot;    &amp;quot;Iridonia&amp;quot;      
## [33] &amp;quot;Iktotch&amp;quot;        &amp;quot;Quermia&amp;quot;        &amp;quot;Dorin&amp;quot;          &amp;quot;Champala&amp;quot;      
## [37] &amp;quot;Geonosis&amp;quot;       &amp;quot;Mirial&amp;quot;         &amp;quot;Serenno&amp;quot;        &amp;quot;Concord Dawn&amp;quot;  
## [41] &amp;quot;Zolan&amp;quot;          &amp;quot;Ojom&amp;quot;           &amp;quot;Aleen Minor&amp;quot;    &amp;quot;Skako&amp;quot;         
## [45] &amp;quot;Muunilinst&amp;quot;     &amp;quot;Shili&amp;quot;          &amp;quot;Kalee&amp;quot;          &amp;quot;Umbara&amp;quot;        
## [49] &amp;quot;Utapau&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# use filter to get a subset of all star wars characters from either Tatooine or Naboo

filter(df2, 
       homeworld == &amp;quot;Tatooine&amp;quot; | homeworld == &amp;quot;Naboo&amp;quot;) #recall that the vertical bar `|` is the logical operator &amp;#39;or&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 21 x 4
##    name               height species homeworld
##    &amp;lt;chr&amp;gt;               &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;    
##  1 Luke Skywalker        172 Human   Tatooine 
##  2 C-3PO                 167 Droid   Tatooine 
##  3 R2-D2                  96 Droid   Naboo    
##  4 Darth Vader           202 Human   Tatooine 
##  5 Owen Lars             178 Human   Tatooine 
##  6 Beru Whitesun lars    165 Human   Tatooine 
##  7 R5-D4                  97 Droid   Tatooine 
##  8 Biggs Darklighter     183 Human   Tatooine 
##  9 Anakin Skywalker      188 Human   Tatooine 
## 10 Palpatine             170 Human   Naboo    
## # ... with 11 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# this is read: filter the data frame &amp;quot;df2&amp;quot; to extract rows where the value of
# the variable homeworld is equal to &amp;quot;Tatooine&amp;quot; or homeworld is equal to &amp;quot;Naboo&amp;quot;

#in base R, one equivalent option would be:

df2[(df2$homeworld == &amp;quot;Tatooine&amp;quot; | df2$homeworld == &amp;quot;Naboo&amp;quot;), ]&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 31 x 4
##    name               height species homeworld
##    &amp;lt;chr&amp;gt;               &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;    
##  1 Luke Skywalker        172 Human   Tatooine 
##  2 C-3PO                 167 Droid   Tatooine 
##  3 R2-D2                  96 Droid   Naboo    
##  4 Darth Vader           202 Human   Tatooine 
##  5 Owen Lars             178 Human   Tatooine 
##  6 Beru Whitesun lars    165 Human   Tatooine 
##  7 R5-D4                  97 Droid   Tatooine 
##  8 Biggs Darklighter     183 Human   Tatooine 
##  9 Anakin Skywalker      188 Human   Tatooine 
## 10 &amp;lt;NA&amp;gt;                   NA &amp;lt;NA&amp;gt;    &amp;lt;NA&amp;gt;     
## # ... with 21 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# notice that the $ is not needed to specify which data set the variable
# &amp;quot;homeworld&amp;quot; is in for filter but it is if you are passing a logical vector to
# subset a data frame using `[]` in base R

# this is because R reads (df2$homeworld == &amp;quot;Tatooine&amp;quot; | df2$homeworld == &amp;quot;Naboo&amp;quot;)
# as a logical test and returns a logical vector, which is then used to specify
# which rows to extract (those with values == TRUE) and which to discard (those
# with values == FALSE). This becomes really clear if you just pull out the
# subsetting predicates and print the result

(df2$homeworld == &amp;quot;Tatooine&amp;quot; | df2$homeworld == &amp;quot;Naboo&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE
## [13] FALSE FALSE FALSE FALSE FALSE FALSE    NA  TRUE FALSE    NA FALSE FALSE
## [25] FALSE FALSE FALSE    NA FALSE FALSE    NA FALSE FALSE  TRUE  TRUE  TRUE
## [37]  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE
## [61] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [73]    NA FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE    NA    NA    NA
## [85]    NA    NA  TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# to get indices instead of logical values, you can wrap the above in which(), e.g.

ind &amp;lt;- which(df2$homeworld == &amp;quot;Tatooine&amp;quot; | df2$homeworld == &amp;quot;Naboo&amp;quot;) #returns the indices where the criteria are TRUE

ind #calling an object itself without applying any functions to it just prints it to the console&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1]  1  2  3  4  6  7  8  9 11 20 34 35 36 37 40 41 57 58 59 63 87&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#note that you could also pass a vector of integers to subset a df2 using `[]`
df2[ind, ]&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 21 x 4
##    name               height species homeworld
##    &amp;lt;chr&amp;gt;               &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;    
##  1 Luke Skywalker        172 Human   Tatooine 
##  2 C-3PO                 167 Droid   Tatooine 
##  3 R2-D2                  96 Droid   Naboo    
##  4 Darth Vader           202 Human   Tatooine 
##  5 Owen Lars             178 Human   Tatooine 
##  6 Beru Whitesun lars    165 Human   Tatooine 
##  7 R5-D4                  97 Droid   Tatooine 
##  8 Biggs Darklighter     183 Human   Tatooine 
##  9 Anakin Skywalker      188 Human   Tatooine 
## 10 Palpatine             170 Human   Naboo    
## # ... with 11 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#to negate a logical test, you can use `!` which means &amp;quot;not&amp;quot;
# in the context of subsetting, this negates a logical vector 

!(df2$homeworld == &amp;quot;Tatooine&amp;quot; | df2$homeworld == &amp;quot;Naboo&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE
## [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA FALSE  TRUE    NA  TRUE  TRUE
## [25]  TRUE  TRUE  TRUE    NA  TRUE  TRUE    NA  TRUE  TRUE FALSE FALSE FALSE
## [37] FALSE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE
## [61]  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [73]    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA    NA    NA
## [85]    NA    NA FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#this is why the logical test for not equal to is &amp;quot;!=&amp;quot;
identical(!(df2$homeworld == &amp;quot;Tatooine&amp;quot;), df2$homeworld != &amp;quot;Tatooine&amp;quot;) #use identical() or all.equal() to test for equality between entire R objects&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# extract rows for characters who are at least 100 cm tall and are from Naboo
filter(df2, height &amp;gt;= 100 &amp;amp; homeworld == &amp;quot;Naboo&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 10 x 4
##    name          height species homeworld
##    &amp;lt;chr&amp;gt;          &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;    
##  1 Palpatine        170 Human   Naboo    
##  2 Jar Jar Binks    196 Gungan  Naboo    
##  3 Roos Tarpals     224 Gungan  Naboo    
##  4 Rugor Nass       206 Gungan  Naboo    
##  5 Ric Olié         183 &amp;lt;NA&amp;gt;    Naboo    
##  6 Quarsh Panaka    183 &amp;lt;NA&amp;gt;    Naboo    
##  7 Gregar Typho     185 Human   Naboo    
##  8 Cordé            157 Human   Naboo    
##  9 Dormé            165 Human   Naboo    
## 10 Padmé Amidala    165 Human   Naboo&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# when using filter(), you can substitute a comma for `&amp;amp;` when specifying multiple criteria
identical(filter(df2, height &amp;gt;= 100 &amp;amp; homeworld == &amp;quot;Naboo&amp;quot;),
          
          filter(df2, height &amp;gt;= 100, homeworld == &amp;quot;Naboo&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# multiple or (`|`) clauses can instead be specified using the %in% infix operator
option1 &amp;lt;- filter(df2, homeworld == &amp;quot;Tatooine&amp;quot; | homeworld == &amp;quot;Naboo&amp;quot; | homeworld == &amp;quot;Alderaan&amp;quot;)

option2 &amp;lt;- filter(filter(df2, homeworld %in% c(&amp;quot;Tatooine&amp;quot;, &amp;quot;Naboo&amp;quot;, &amp;quot;Alderaan&amp;quot;)))

identical(option1, option2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# since %in% also returns a logical vector, it can also be negated using `!`, 
# although they give different results if the data contain missing values (NA)

a &amp;lt;- !(df2$homeworld == &amp;quot;Tatooine&amp;quot; | df2$homeworld == &amp;quot;Naboo&amp;quot; | df2$homeworld == &amp;quot;Alderaan&amp;quot;)

b &amp;lt;- !(df2$homeworld %in% c(&amp;quot;Tatooine&amp;quot;, &amp;quot;Naboo&amp;quot;, &amp;quot;Alderaan&amp;quot;))

all.equal(a, b)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;&amp;#39;is.NA&amp;#39; value mismatch: 0 in current 10 in target&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;b[is.na(a)] #these missing values were converted to TRUE by %in%&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# to avoid this and other problems many functions have with processing NA
# values, it is often best to either remove them or impute them, or use the
# na.rm argument for the function

x &amp;lt;- na.omit(df2$homeworld)

c &amp;lt;- !(x == &amp;quot;Tatooine&amp;quot; | x == &amp;quot;Naboo&amp;quot; | x == &amp;quot;Alderaan&amp;quot;)

# negating a set of `or` clauses for equality is the same as multiple `and`
# clauses for inequality

d &amp;lt;- x != &amp;quot;Tatooine&amp;quot; &amp;amp; x != &amp;quot;Naboo&amp;quot; &amp;amp; x != &amp;quot;Alderaan&amp;quot;

e &amp;lt;- !(x %in% c(&amp;quot;Tatooine&amp;quot;, &amp;quot;Naboo&amp;quot;, &amp;quot;Alderaan&amp;quot;))

all.equal(c, d, e)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# key point: you can use logical comparisons and vectors for subsetting in R&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;subset-rows-using-indices-with-slice&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.1&lt;/span&gt; Subset Rows using Indices with &lt;strong&gt;slice()&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Unlike &lt;code&gt;select()&lt;/code&gt;, &lt;code&gt;filter()&lt;/code&gt; doesn’t allow the use of indices for subsetting. Instead, dplyr has another funciton called &lt;a href=&#34;https://dplyr.tidyverse.org/reference/slice.html&#34;&gt;slice()&lt;/a&gt; for this purpose. &lt;code&gt;slice()&lt;/code&gt; doesn’t require you to enclose multiple index values in c() either and it can also operate on indices within groups (see the &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/#group_by&#34;&gt;section 7&lt;/a&gt; below for an example).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;slice(df2, 1:5, 9:14, 25:50)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 37 x 4
##    name              height species homeworld
##    &amp;lt;chr&amp;gt;              &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;    
##  1 Luke Skywalker       172 Human   Tatooine 
##  2 C-3PO                167 Droid   Tatooine 
##  3 R2-D2                 96 Droid   Naboo    
##  4 Darth Vader          202 Human   Tatooine 
##  5 Leia Organa          150 Human   Alderaan 
##  6 Biggs Darklighter    183 Human   Tatooine 
##  7 Obi-Wan Kenobi       182 Human   Stewjon  
##  8 Anakin Skywalker     188 Human   Tatooine 
##  9 Wilhuff Tarkin       180 Human   Eriadu   
## 10 Chewbacca            228 Wookiee Kashyyyk 
## # ... with 27 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;mutate&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;mutate()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;mutate()&lt;/code&gt; lets you modify and/or create new columns in a data frame.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#Say for example that you wanted to calculate the BMI of each character in the starwars data frame

df2 &amp;lt;- select(df, name, height, mass) #extract columns of interest

df3 &amp;lt;- mutate(df2,
       height_in_m  = height/100, #convert height from cm to m, store in new column &amp;quot;height_in_m&amp;quot;
       bmi = mass/(height_in_m^2), #add a column called bmi for the calculated body mass index of each character
       bmi = signif(bmi, 1)) #round it to one significant digit/decimal place &amp;amp; assign back to the same name.
df3&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 5
##    name               height  mass height_in_m   bmi
##    &amp;lt;chr&amp;gt;               &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt;       &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 Luke Skywalker        172    77        1.72    30
##  2 C-3PO                 167    75        1.67    30
##  3 R2-D2                  96    32        0.96    30
##  4 Darth Vader           202   136        2.02    30
##  5 Leia Organa           150    49        1.5     20
##  6 Owen Lars             178   120        1.78    40
##  7 Beru Whitesun lars    165    75        1.65    30
##  8 R5-D4                  97    32        0.97    30
##  9 Biggs Darklighter     183    84        1.83    30
## 10 Obi-Wan Kenobi        182    77        1.82    20
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# assigning a modified variable to the same name overwrites/modifies the column

# note in the above mutate statement I created a new variable then used it in the same function call. 
# this is possible because mutate() evaluates items from left to right

# the equivalent operations in base R would typically involve several steps
# requiring separate assignment of intermediate objects

df2$height_in_m &amp;lt;- df2$height/100

df2$bmi &amp;lt;- df2$mass/(df2$height_in_m^2)

df2$bmi &amp;lt;- signif(df2$bmi, 1)
  
all.equal(df2, df3)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# As shown above, mutate lets you combine these steps into a single function call and doesn&amp;#39;t
# require you to specify the dataframe$ component multiple times, you only have
# to supply the name of the data frame as the 1st argument.

# the transmute function (also in the dplyr package) is an alternative to mutate that
# only retains variables you specify (i.e. it combines select and mutate in a single step)
# You probably won&amp;#39;t use it as often as mutate, but it can be helpful occassionally

transmute(df2,
       height_in_m  = height/100, #convert height from cm to m, store in new column &amp;quot;height_in_m&amp;quot;
       bmi = mass/(height_in_m^2), #add a column called bmi for the calculated body mass index of each character
       bmi = signif(bmi, 1))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 2
##    height_in_m   bmi
##          &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1        1.72    30
##  2        1.67    30
##  3        0.96    30
##  4        2.02    30
##  5        1.5     20
##  6        1.78    40
##  7        1.65    30
##  8        0.97    30
##  9        1.83    30
## 10        1.82    20
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;recoding-or-creating-indicator-variables-using-if_else-case_when-or-recode&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.1&lt;/span&gt; Recoding or Creating Indicator Variables using &lt;strong&gt;if_else()&lt;/strong&gt;, &lt;strong&gt;case_when()&lt;/strong&gt;, or &lt;strong&gt;recode()&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;A common use of mutate (or transmute) is to encode a new variable (or overwrite an existing one) based on values of an existing variable in a data frame using the &lt;a href=&#34;https://dplyr.tidyverse.org/reference/recode.html&#34;&gt;recode()&lt;/a&gt;, &lt;a href=&#34;https://dplyr.tidyverse.org/reference/if_else.html&#34;&gt;if_else()&lt;/a&gt; or &lt;a href=&#34;https://dplyr.tidyverse.org/reference/case_when.html&#34;&gt;case_when()&lt;/a&gt; functions in the dplyr package.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;if_else()&lt;/code&gt; is a condensed version of a simple if/else statement with only 2 outcomes: one if the condition specified as the 1st argument evaluates to &lt;code&gt;TRUE&lt;/code&gt; and one if it evaluates to &lt;code&gt;FALSE&lt;/code&gt; (i.e. no &lt;code&gt;else if&lt;/code&gt; components). &lt;code&gt;case_when()&lt;/code&gt; lets you use multiple &lt;code&gt;if_else()&lt;/code&gt; calls together without having to nest them explicitly. General control flow operations using conditional statments (&lt;code&gt;if&lt;/code&gt;, &lt;code&gt;else&lt;/code&gt;, &lt;code&gt;else if&lt;/code&gt;, etc.) may be covered in a later blog post… For now I recommend &lt;a href=&#34;https://adv-r.hadley.nz/control-flow.html&#34;&gt;this section of the advanced R book&lt;/a&gt; for those who want to learn more about it before moving on.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# to create an indicator/dummy/2-level variable (e.g. 1/0, T/F) you can use
# if_else() (or ifelse()):

if_else(df$height &amp;gt; 180, #part 1. logical test
        &amp;quot;tall&amp;quot;, #part 2. value if TRUE
        &amp;quot;short&amp;quot;) #part 3. value if FALSE (should be same class as the value if TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;tall&amp;quot;  &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;tall&amp;quot; 
## [10] &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;short&amp;quot; &amp;quot;tall&amp;quot;  &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;short&amp;quot;
## [19] &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;short&amp;quot;
## [28] NA      &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;short&amp;quot; &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot; 
## [37] &amp;quot;tall&amp;quot;  &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;tall&amp;quot;  &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;short&amp;quot;
## [46] &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;short&amp;quot; &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot; 
## [55] &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;short&amp;quot; &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;short&amp;quot; &amp;quot;short&amp;quot; &amp;quot;short&amp;quot;
## [64] &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;short&amp;quot; &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;short&amp;quot; &amp;quot;short&amp;quot;
## [73] &amp;quot;short&amp;quot; &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;short&amp;quot; &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;tall&amp;quot;  &amp;quot;short&amp;quot; &amp;quot;tall&amp;quot; 
## [82] NA      NA      NA      NA      NA      &amp;quot;short&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# use mutate to add it to an existing data frame

mutate(select(df, name, height), #apply mutate to a subset of the data using a nested select call
       tall_or_short = if_else(height &amp;gt; 180, 
                              &amp;quot;tall&amp;quot;, 
                              &amp;quot;short&amp;quot;)) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 3
##    name               height tall_or_short
##    &amp;lt;chr&amp;gt;               &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;        
##  1 Luke Skywalker        172 short        
##  2 C-3PO                 167 short        
##  3 R2-D2                  96 short        
##  4 Darth Vader           202 tall         
##  5 Leia Organa           150 short        
##  6 Owen Lars             178 short        
##  7 Beru Whitesun lars    165 short        
##  8 R5-D4                  97 short        
##  9 Biggs Darklighter     183 tall         
## 10 Obi-Wan Kenobi        182 tall         
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# to specify more than 2 conditions/outputs you can use case_when():
mutate(select(df, name, height), 
       size_class = case_when(height &amp;gt; 200 ~ &amp;quot;tall&amp;quot;, #logical_test ~ value_if_TRUE,
                              height &amp;lt; 200 &amp;amp;  height &amp;gt; 100 ~ &amp;quot;medium&amp;quot;, 
                              height &amp;lt; 100 ~ &amp;quot;short&amp;quot;)
       ) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 3
##    name               height size_class
##    &amp;lt;chr&amp;gt;               &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;     
##  1 Luke Skywalker        172 medium    
##  2 C-3PO                 167 medium    
##  3 R2-D2                  96 short     
##  4 Darth Vader           202 tall      
##  5 Leia Organa           150 medium    
##  6 Owen Lars             178 medium    
##  7 Beru Whitesun lars    165 medium    
##  8 R5-D4                  97 short     
##  9 Biggs Darklighter     183 medium    
## 10 Obi-Wan Kenobi        182 medium    
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# you can recode a variable using recode():

recoded_using_recode &amp;lt;- mutate(select(df, name, hair_color),
       hair_color = recode(hair_color, #the variable you want to recode
                           &amp;quot;blond&amp;quot; = &amp;quot;BLOND&amp;quot;,#old_value = new_value
                           &amp;quot;brown&amp;quot; = &amp;quot;BROWN&amp;quot;) #you can recode any number of values this way
       #unspecified values are unaltered
       ) 

recoded_using_recode&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 2
##    name               hair_color   
##    &amp;lt;chr&amp;gt;              &amp;lt;chr&amp;gt;        
##  1 Luke Skywalker     BLOND        
##  2 C-3PO              &amp;lt;NA&amp;gt;         
##  3 R2-D2              &amp;lt;NA&amp;gt;         
##  4 Darth Vader        none         
##  5 Leia Organa        BROWN        
##  6 Owen Lars          brown, grey  
##  7 Beru Whitesun lars BROWN        
##  8 R5-D4              &amp;lt;NA&amp;gt;         
##  9 Biggs Darklighter  black        
## 10 Obi-Wan Kenobi     auburn, white
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# unforunately, unlike other dplyr functions, recode()-ed values are specified as
# &amp;quot;old_value&amp;quot; = &amp;quot;new_value&amp;quot; instead of the more common &amp;quot;new&amp;quot; = &amp;quot;old&amp;quot; scheme used
# by select() and rename()

# an alternative would be to use case_when(), e.g.:

recoded_using_case_when &amp;lt;- mutate(select(df, name, hair_color),
       hair_color = case_when(hair_color == &amp;quot;blond&amp;quot; ~ &amp;quot;BLOND&amp;quot;,
                              hair_color == &amp;quot;brown&amp;quot; ~ &amp;quot;BROWN&amp;quot;, 
                              TRUE ~ as.character(hair_color)))

identical(recoded_using_recode, recoded_using_case_when) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# This time we add in the &amp;quot;TRUE ~ as.character(hair_color)&amp;quot; part to signify that
# all other non-NA cases should be the existing value of hair color as a
# character string; otherwise non-matching values are coded as missing values (`NA`)

# note that recode, like most R functions, returns a copy of the data object, 
# that you have to assign to a name if you want to save it in the environment

#of course you can also recode variables in base R using the assingnment operator:

#`&amp;lt;-` (keyboard shortcut = )

df$hair_color[df$hair_color == &amp;quot;blond&amp;quot;] &amp;lt;- &amp;quot;BLOND&amp;quot;
df$hair_color[df$hair_color == &amp;quot;brown&amp;quot;] &amp;lt;- &amp;quot;BROWN&amp;quot;

#but this modifies the data frame in place, which isn&amp;#39;t always what you want
#e.g. if you are just experimenting with a coding scheme and then decide you
#want to change it back you&amp;#39;ll have to rerun earlier portions of your R script
#to recover the previous version&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;summarise&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;summarise()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;summarise()&lt;/code&gt; makes it easy to turn a data frame into a smaller data frame of summary statistics.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;summary1 &amp;lt;- summarise(df, #as for the other dplyr functions, the data source is specified as the 1st argument
                      n = n(), #n() is a special function for use in summarize that returns the number of values
                      mean_height = mean(height, na.rm = TRUE), #summary stat name in the output = function(column) in the input
                      median_mass = median(mass, na.rm = TRUE))

summary1&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1 x 3
##       n mean_height median_mass
##   &amp;lt;int&amp;gt;       &amp;lt;dbl&amp;gt;       &amp;lt;dbl&amp;gt;
## 1    87        174.          79&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#summarise() and summarize() do the same thing and just accommodate different user spelling preferences
summary2 &amp;lt;- summarize(df, #as for the other dplyr functions, the data source is specified as the 1st argument
                      n = n(), #n() is a special function for use in summarize that returns the number of values
                      mean_height = mean(height, na.rm = TRUE), #summary stat name in the output = function(column) in the input
                      median_mass = median(mass, na.rm = TRUE))


identical(summary1, summary2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;group_by&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;7&lt;/span&gt; &lt;strong&gt;group_by()&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;group_by()&lt;/code&gt; adds an explicit grouping structure to a data frame that can subsequently be used by other dplyr functions to perform operations within each level of the grouping variable or level combination of the grouping variables if you specify multiple grouping variables. This is particularly useful in conjunction with either &lt;code&gt;summarize()&lt;/code&gt; or &lt;code&gt;mutate()&lt;/code&gt;, enabling you to calculate summary statistics or transform variables separately for each of the groups defined by &lt;code&gt;group_by()&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#structure of the data before grouping
glimpse(df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 87
## Columns: 14
## $ name       &amp;lt;chr&amp;gt; &amp;quot;Luke Skywalker&amp;quot;, &amp;quot;C-3PO&amp;quot;, &amp;quot;R2-D2&amp;quot;, &amp;quot;Darth Vader&amp;quot;, &amp;quot;Leia Or~
## $ height     &amp;lt;int&amp;gt; 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180, 2~
## $ mass       &amp;lt;dbl&amp;gt; 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, 77.~
## $ hair_color &amp;lt;chr&amp;gt; &amp;quot;BLOND&amp;quot;, NA, NA, &amp;quot;none&amp;quot;, &amp;quot;BROWN&amp;quot;, &amp;quot;brown, grey&amp;quot;, &amp;quot;BROWN&amp;quot;, N~
## $ skin_color &amp;lt;chr&amp;gt; &amp;quot;fair&amp;quot;, &amp;quot;gold&amp;quot;, &amp;quot;white, blue&amp;quot;, &amp;quot;white&amp;quot;, &amp;quot;light&amp;quot;, &amp;quot;light&amp;quot;, &amp;quot;~
## $ eye_color  &amp;lt;chr&amp;gt; &amp;quot;blue&amp;quot;, &amp;quot;yellow&amp;quot;, &amp;quot;red&amp;quot;, &amp;quot;yellow&amp;quot;, &amp;quot;brown&amp;quot;, &amp;quot;blue&amp;quot;, &amp;quot;blue&amp;quot;,~
## $ birth_year &amp;lt;dbl&amp;gt; 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, NA, 24.0, 57.0, ~
## $ sex        &amp;lt;chr&amp;gt; &amp;quot;male&amp;quot;, &amp;quot;none&amp;quot;, &amp;quot;none&amp;quot;, &amp;quot;male&amp;quot;, &amp;quot;female&amp;quot;, &amp;quot;male&amp;quot;, &amp;quot;female&amp;quot;,~
## $ gender     &amp;lt;chr&amp;gt; &amp;quot;masculine&amp;quot;, &amp;quot;masculine&amp;quot;, &amp;quot;masculine&amp;quot;, &amp;quot;masculine&amp;quot;, &amp;quot;femini~
## $ homeworld  &amp;lt;chr&amp;gt; &amp;quot;Tatooine&amp;quot;, &amp;quot;Tatooine&amp;quot;, &amp;quot;Naboo&amp;quot;, &amp;quot;Tatooine&amp;quot;, &amp;quot;Alderaan&amp;quot;, &amp;quot;T~
## $ species    &amp;lt;chr&amp;gt; &amp;quot;Human&amp;quot;, &amp;quot;Droid&amp;quot;, &amp;quot;Droid&amp;quot;, &amp;quot;Human&amp;quot;, &amp;quot;Human&amp;quot;, &amp;quot;Human&amp;quot;, &amp;quot;Huma~
## $ films      &amp;lt;list&amp;gt; &amp;lt;&amp;quot;The Empire Strikes Back&amp;quot;, &amp;quot;Revenge of the Sith&amp;quot;, &amp;quot;Return~
## $ vehicles   &amp;lt;list&amp;gt; &amp;lt;&amp;quot;Snowspeeder&amp;quot;, &amp;quot;Imperial Speeder Bike&amp;quot;&amp;gt;, &amp;lt;&amp;gt;, &amp;lt;&amp;gt;, &amp;lt;&amp;gt;, &amp;quot;Imp~
## $ starships  &amp;lt;list&amp;gt; &amp;lt;&amp;quot;X-wing&amp;quot;, &amp;quot;Imperial shuttle&amp;quot;&amp;gt;, &amp;lt;&amp;gt;, &amp;lt;&amp;gt;, &amp;quot;TIE Advanced x1&amp;quot;,~&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df3 &amp;lt;- select(df, name, species, height, mass)#1st. extract just the columns of interest

grouped_data &amp;lt;- group_by(df3, species) #group the data frame &amp;quot;df3&amp;quot; by the variable &amp;quot;species&amp;quot;

class(grouped_data) #new additional class = &amp;quot;grouped_df&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;grouped_df&amp;quot; &amp;quot;tbl_df&amp;quot;     &amp;quot;tbl&amp;quot;        &amp;quot;data.frame&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;glimpse(grouped_data) #note that the structure now has a groups attribute&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 87
## Columns: 4
## Groups: species [38]
## $ name    &amp;lt;chr&amp;gt; &amp;quot;Luke Skywalker&amp;quot;, &amp;quot;C-3PO&amp;quot;, &amp;quot;R2-D2&amp;quot;, &amp;quot;Darth Vader&amp;quot;, &amp;quot;Leia Organ~
## $ species &amp;lt;chr&amp;gt; &amp;quot;Human&amp;quot;, &amp;quot;Droid&amp;quot;, &amp;quot;Droid&amp;quot;, &amp;quot;Human&amp;quot;, &amp;quot;Human&amp;quot;, &amp;quot;Human&amp;quot;, &amp;quot;Human&amp;quot;,~
## $ height  &amp;lt;int&amp;gt; 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180, 228,~
## $ mass    &amp;lt;dbl&amp;gt; 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, 77.0, ~&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;slice(grouped_data, 1) #look at the 1st row of each group&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 38 x 4
## # Groups:   species [38]
##    name                  species   height  mass
##    &amp;lt;chr&amp;gt;                 &amp;lt;chr&amp;gt;      &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt;
##  1 Ratts Tyerell         Aleena        79    15
##  2 Dexter Jettster       Besalisk     198   102
##  3 Ki-Adi-Mundi          Cerean       198    82
##  4 Mas Amedda            Chagrian     196    NA
##  5 Zam Wesell            Clawdite     168    55
##  6 C-3PO                 Droid        167    75
##  7 Sebulba               Dug          112    40
##  8 Wicket Systri Warrick Ewok          88    20
##  9 Poggle the Lesser     Geonosian    183    80
## 10 Jar Jar Binks         Gungan       196    66
## # ... with 28 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#next summarise calculates the specified summary statistics within species
summarise(grouped_data,
          n = n(), 
          mean_height = mean(height, na.rm = TRUE), 
          median_mass = median(mass, na.rm = TRUE))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## `summarise()` ungrouping output (override with `.groups` argument)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 38 x 4
##    species       n mean_height median_mass
##    &amp;lt;chr&amp;gt;     &amp;lt;int&amp;gt;       &amp;lt;dbl&amp;gt;       &amp;lt;dbl&amp;gt;
##  1 Aleena        1         79         15  
##  2 Besalisk      1        198        102  
##  3 Cerean        1        198         82  
##  4 Chagrian      1        196         NA  
##  5 Clawdite      1        168         55  
##  6 Droid         6        131.        53.5
##  7 Dug           1        112         40  
##  8 Ewok          1         88         20  
##  9 Geonosian     1        183         80  
## 10 Gungan        3        209.        74  
## # ... with 28 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#summarise and summarize do the same thing and just accommodate different user spelling preferences
identical(summary1, summary2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#to apply mutate() within each level of a grouping variable, simply use mutate
#on a grouped data frame:
mutated_grouped_data &amp;lt;- mutate(grouped_data, 
                               scaled_mass = scale(mass)) #convert raw masses into standardized masses (i.e. z-scores)

select(mutated_grouped_data, name, mass, scaled_mass) #just print the relevant parts&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Adding missing grouping variables: `species`&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 87 x 4
## # Groups:   species [38]
##    species name                mass scaled_mass[,1]
##    &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;              &amp;lt;dbl&amp;gt;           &amp;lt;dbl&amp;gt;
##  1 Human   Luke Skywalker        77         -0.298 
##  2 Droid   C-3PO                 75          0.103 
##  3 Droid   R2-D2                 32         -0.740 
##  4 Human   Darth Vader          136          2.75  
##  5 Human   Leia Organa           49         -1.74  
##  6 Human   Owen Lars            120          1.92  
##  7 Human   Beru Whitesun lars    75         -0.401 
##  8 Droid   R5-D4                 32         -0.740 
##  9 Human   Biggs Darklighter     84          0.0628
## 10 Human   Obi-Wan Kenobi        77         -0.298 
## # ... with 77 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#note that this is done within species, and the results differ from the same
#operation applied to the ungrouped data
identical(
mutated_grouped_data$scaled_mass,
mutate(df3, scaled_mass = scale(mass))$scaled_mass,
)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#it is recommended that you ungroup the data after you&amp;#39;re finished mutating it
#if you want subsequent operations to be applied to the entire data frame
#instead of within groups
ungrouped_data &amp;lt;- ungroup(mutated_grouped_data)

glimpse(ungrouped_data) #notice that the groups attribute is no longer there&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 87
## Columns: 5
## $ name        &amp;lt;chr&amp;gt; &amp;quot;Luke Skywalker&amp;quot;, &amp;quot;C-3PO&amp;quot;, &amp;quot;R2-D2&amp;quot;, &amp;quot;Darth Vader&amp;quot;, &amp;quot;Leia O~
## $ species     &amp;lt;chr&amp;gt; &amp;quot;Human&amp;quot;, &amp;quot;Droid&amp;quot;, &amp;quot;Droid&amp;quot;, &amp;quot;Human&amp;quot;, &amp;quot;Human&amp;quot;, &amp;quot;Human&amp;quot;, &amp;quot;Hum~
## $ height      &amp;lt;int&amp;gt; 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180, ~
## $ mass        &amp;lt;dbl&amp;gt; 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, 77~
## $ scaled_mass &amp;lt;dbl[,1]&amp;gt; &amp;lt;matrix[26 x 1]&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#and grouped_df3 is no longer one of the data frame&amp;#39;s classes
class(ungrouped_data)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;tbl_df&amp;quot;     &amp;quot;tbl&amp;quot;        &amp;quot;data.frame&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;chaining-functions-with-the-pipe-operator&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;8&lt;/span&gt; Chaining Functions with the &lt;strong&gt;pipe operator (%&amp;gt;%)&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Thanks to the &lt;a href=&#34;https://github.com/tidyverse/magrittr&#34;&gt;magrittr&lt;/a&gt; package, you can use the pipe operator, “%&amp;gt;%”, which allows you to apply a series of functions to an object using easily readable code without requiring you to save intermediate objects.&lt;/p&gt;
&lt;p&gt;Note that you don’t have to load the magrittr package in a separate call to the library() function since the pipe operator is imported from magrittr automatically when you load the dplyr package.&lt;/p&gt;
&lt;p&gt;The pipe operator takes the object on the left and passes it to the first argument of the function to the right. Functions in dplyr and other tidyverse packages take data as the 1st argument. Those function which output the same type of object that they accept as inputs (i.e. the data argument) can be chained using the “%&amp;gt;%” quite easily.&lt;/p&gt;
&lt;p&gt;For example,&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# %&amp;gt;% lets you turn this nested code (evaluated from the inside out)... 

arrange(summarize(group_by(select(starwars, species, mass), species), 
                  mean_mass = mean(mass, na.rm = T)), desc(mean_mass))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## `summarise()` ungrouping output (override with `.groups` argument)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 38 x 2
##    species      mean_mass
##    &amp;lt;chr&amp;gt;            &amp;lt;dbl&amp;gt;
##  1 Hutt            1358  
##  2 Kaleesh          159  
##  3 Wookiee          124  
##  4 Trandoshan       113  
##  5 Besalisk         102  
##  6 Neimodian         90  
##  7 Kaminoan          88  
##  8 Nautolan          87  
##  9 Mon Calamari      83  
## 10 Human             82.8
## # ... with 28 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# ...which could also be written more clearly like this:

arrange(#evaluated last
  
  summarize(#evaluated 3rd
    
    group_by(#evaluated 2nd
      
      select(#evaluated 1st
        
        starwars, species, mass), #1. from the starwars data frame, select() the columns species and mass
      
      species), #2. then use group_by() to group the data by species
    
    mean_mass = mean(mass, na.rm = T)),  #3. then use summarize() to calculate the mean() mass for each species
  
  desc(mean_mass)) #4. then arrange() the summary data frame by mean_mass in descending order&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## `summarise()` ungrouping output (override with `.groups` argument)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 38 x 2
##    species      mean_mass
##    &amp;lt;chr&amp;gt;            &amp;lt;dbl&amp;gt;
##  1 Hutt            1358  
##  2 Kaleesh          159  
##  3 Wookiee          124  
##  4 Trandoshan       113  
##  5 Besalisk         102  
##  6 Neimodian         90  
##  7 Kaminoan          88  
##  8 Nautolan          87  
##  9 Mon Calamari      83  
## 10 Human             82.8
## # ... with 28 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# ... into this tidy chain, which reads much more naturally

sorted_mass_by_sw_species_chained &amp;lt;- starwars %&amp;gt;% #take the starwars df  
  
  select(species, mass) %&amp;gt;% #pass it to the 1st agrument of select() (i.e. data), then extract species and mass
  
  group_by(species) %&amp;gt;% #output of select() becomes the input to the 1st argument of group_by(); group it by species
  
  summarise(mean_mass = mean(mass, na.rm = T)) %&amp;gt;% #summarise() the grouped data frame to get the mean mass per group
  
  arrange(desc(mean_mass)) # arrange the grouped summary by the mean mass column in descending order&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## `summarise()` ungrouping output (override with `.groups` argument)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sorted_mass_by_sw_species_chained&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 38 x 2
##    species      mean_mass
##    &amp;lt;chr&amp;gt;            &amp;lt;dbl&amp;gt;
##  1 Hutt            1358  
##  2 Kaleesh          159  
##  3 Wookiee          124  
##  4 Trandoshan       113  
##  5 Besalisk         102  
##  6 Neimodian         90  
##  7 Kaminoan          88  
##  8 Nautolan          87  
##  9 Mon Calamari      83  
## 10 Human             82.8
## # ... with 28 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# the order of operations using %&amp;gt;% is so much more obvious and produces code
# that can be read at a glance and doesn&amp;#39;t require intermediate objects which
# each occupy memory, e.g.

starwars_sub &amp;lt;- select(starwars, 
                       species, mass) 

grouped_starwars_sub &amp;lt;- group_by(starwars_sub, 
                                 species) 

mass_by_sw_species &amp;lt;- summarise(grouped_starwars_sub, 
                                mean_mass = mean(mass, na.rm = T))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## `summarise()` ungrouping output (override with `.groups` argument)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sorted_mass_by_sw_species_unchained &amp;lt;- arrange(mass_by_sw_species, 
                                               desc(mean_mass)) 

# and then have to be deleted afterwards to reclaim the memory 
rm(starwars_sub)
rm(grouped_starwars_sub)
rm(mass_by_sw_species)

identical(sorted_mass_by_sw_species_chained, sorted_mass_by_sw_species_unchained) #the output is the same&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# note: the keyboard shortcut for %&amp;gt;% is ctrl + shift + M (at least on Windows machines)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We’ve seen that the default behaviour of &lt;code&gt;%&amp;gt;%&lt;/code&gt; is to pass the output of the left hand side (LHS) to the 1st argument of the right hand side (RHS), i.e.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;x %&amp;gt;% f(y)&lt;/code&gt; is equivalent to &lt;code&gt;f(x, y)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This is great if you’re working with tidyverse functions that accept a data frame as the 1st argument, but what if you want to pass the LHS output to another argument or position in the function on the RHS (e.g. functions with data arguments in other positions)?&lt;/p&gt;
&lt;p&gt;&lt;code&gt;%&amp;gt;%&lt;/code&gt; enables you to do this by automatically assigning the LHS output to the special value “&lt;code&gt;.&lt;/code&gt;”. To change the argument you want to assign the LHS output to, you just have to set that argument to “&lt;code&gt;.&lt;/code&gt;”, e.g.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;x %&amp;gt;% f(y)&lt;/code&gt; is equivalent to &lt;code&gt;x %&amp;gt;% f(., y)&lt;/code&gt; and&lt;/p&gt;
&lt;p&gt;&lt;code&gt;y %&amp;gt;% f(x, .)&lt;/code&gt; is equivalent to &lt;code&gt;f(x, y)&lt;/code&gt; and&lt;/p&gt;
&lt;p&gt;&lt;code&gt;z %&amp;gt;% f(x, y, .)&lt;/code&gt; is equivalent to &lt;code&gt;f(x, y, z)&lt;/code&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;navigation&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;9&lt;/span&gt; Navigation&lt;/h1&gt;
&lt;p&gt;Click &lt;a href=&#34;https://craig.rbind.io/post/2019-08-06-asgr-2-0-basic-operations-and-data-structures/&#34;&gt;here&lt;/a&gt; to go back to the previous post or &lt;a href=&#34;https://craig.rbind.io/post/2020-01-25-asgr-2-1-data-transformation-part-2/&#34;&gt;here&lt;/a&gt; to go to the next one on reshaping data with the tidyr package.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;notes&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;10&lt;/span&gt; Notes&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;To explore dplyr and in more depth checkout &lt;a href=&#34;https://r4ds.had.co.nz/transform.html&#34;&gt;chapter 5 of R for data science&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;To learn more about subsetting using base R I highly recommend &lt;a href=&#34;https://adv-r.hadley.nz/subsetting.html&#34;&gt;chapter 4 of the Advanced R book&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;For more details on other data manipulation techniques in base R checkout the &lt;a href=&#34;https://cran.r-project.org/doc/manuals/r-release/R-intro.pdf&#34;&gt;official R introductory manual&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thank you for visiting my blog. I welcome any suggestions for future posts, comments or other feedback you might have. Feedback from beginners and science students/trainees (or with them in mind) is especially helpful in the interest of making this guide even better for them.&lt;/p&gt;
&lt;p&gt;This blog is something I do as a volunteer in my free time. If you’ve found it helpful and want to give back, &lt;a href=&#34;https://www.buymeacoffee.com/huttoncp&#34;&gt;coffee donations&lt;/a&gt; would be appreciated.&lt;/p&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js&#34; data-name=&#34;bmc-button&#34; data-slug=&#34;huttoncp&#34; data-color=&#34;#FF5F5F&#34; data-emoji=&#34;&#34;  data-font=&#34;Cookie&#34; data-text=&#34;Buy me a coffee&#34; data-outline-color=&#34;#000000&#34; data-font-color=&#34;#ffffff&#34; data-coffee-color=&#34;#FFDD00&#34; &gt;&lt;/script&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>A Scientist&#39;s Guide to R: Step 2.0. Basic Operations &amp; Data Structures</title>
      <link>https://craig.rbind.io/post/2019-08-06-asgr-2-0-basic-operations-and-data-structures/</link>
      <pubDate>Tue, 06 Aug 2019 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/post/2019-08-06-asgr-2-0-basic-operations-and-data-structures/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#tldr&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#introduction&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#basic-calculations&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;Basic Calculations&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#logical-operators&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;Logical Operators&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#object-assignment&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;Object Assignment&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#basic-summary-statistics&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;Basic Summary Statistics&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#data-structures-and-object-assignment&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7&lt;/span&gt; &lt;strong&gt;Data Structures and Object Assignment&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#numeric-and-character-vectors&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7.1&lt;/span&gt; Numeric and Character Vectors&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#logical-vectors&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7.2&lt;/span&gt; Logical Vectors&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#factors&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7.3&lt;/span&gt; Factors&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#matrices&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7.4&lt;/span&gt; Matrices&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#dataframes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7.5&lt;/span&gt; Dataframes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#tibbles&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7.6&lt;/span&gt; Tibbles&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#random-numbers-and-sampling&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;8&lt;/span&gt; &lt;strong&gt;Random Numbers and Sampling&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#functions-for-describing-the-structural-information-of-data-objects&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;9&lt;/span&gt; &lt;strong&gt;Functions for Describing the Structural Information of Data Objects&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#the-global-environment&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;10&lt;/span&gt; &lt;strong&gt;The Global Environment&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#the-working-directory&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;11&lt;/span&gt; &lt;strong&gt;The Working Directory&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#projects&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;12&lt;/span&gt; &lt;strong&gt;Projects&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#useful-keyboard-shortcuts-for-r-studio-users&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;13&lt;/span&gt; &lt;strong&gt;Useful Keyboard Shortcuts (for R studio users)&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#navigation&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;13.1&lt;/span&gt; Navigation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#notes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;13.2&lt;/span&gt; Notes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;tldr&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;As the third post in the Scientist’s Guide to R series (click &lt;a href=&#34;https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/&#34;&gt;here&lt;/a&gt; for the 1st post), we advance to the brink of the next major stage of the data analysis with R process: cleaning and transforming data. However, before we can clean or transform anything we will need to know how to do a few basic things and familiarize ourselves with some common data structures in R, which are the topics of this post.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;You’ve managed to import your data and are wondering what to do next? The way in which you &lt;em&gt;should&lt;/em&gt; proceed will critically depend upon the structure of your data, but before we get there you need to know which sorts of things you &lt;em&gt;can&lt;/em&gt; do in R. Accordingly, this post will introduce you to some basic operations and data structures. There is a lot of content here so feel free to skip sections you are already familiar with. If this is all new you should take the time to read it since we will continue building upon this foundation as we progress to more advanced topics. You need to understand how data are represented by R before you start manipulating those representations.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;basic-calculations&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;Basic Calculations&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Like any decent data analysis software, R can perform common mathematical and logical operations, as simply as you probably expect them to be.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#Basic calculations#####
5+6 #addition

89-28 #subtraction

7000*10 #multiplication

25/5 #division

2^20 #^ means to the power of

exp(8) #exponential

37 %% 2 #modulus. Returns the remainder after division.&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;logical-operators&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;Logical Operators&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Also very straightforward. These are mostly useful when selecting subsets of data or programming.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#use double equality symbols to check for equality since &amp;quot;=&amp;quot; is reserved for
#assignment or value specification

1 == 1 #LHS is equal to RHS

1 != 1 #LHS is not equal to RHS

10 &amp;gt; 8 #LHS greater than RHS

10 &amp;gt;= 8 #LHS greater than or equal to RHS

10 &amp;lt; 8 #LHS less than RHS

5 &amp;lt;= 5 #LHS less than or equal to RHS

(1 &amp;gt; 3) &amp;amp; (10 &amp;gt; 3) #are both 1 and 10 greater than 3?

(1 &amp;gt; 3) | (10 &amp;gt; 3) #is 1 or 10 greater than 3? 

#see https://www.statmethods.net/management/operators.html for more examples. &lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;object-assignment&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; &lt;strong&gt;Object Assignment&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;To save some values (or virtually anything else) to use again later you assign them to a variable. This can be done in R using either “&amp;lt;-” or “=”, but “&amp;lt;-” is typically recommended. See &lt;a href=&#34;https://stackoverflow.com/questions/1741820/what-are-the-differences-between-and-in-r&#34;&gt;here&lt;/a&gt; for the subtleties, e.g. “=” sometimes fails when you wouldn’t expect it to, but “&amp;lt;-” typically does not. R studio also provides a handy keyboard shortcut for inserting “&amp;lt;-”: [Alt] &amp;amp; [-]&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- 27 #this stores whatever is on the RHS in the arbitrarily named variable on the LHS
x #to print it to the console, just call the variable.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 27&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#you can assign something to a variable and print it at the same time by wrapping it in parentheses
(y &amp;lt;- 900)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 900&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#although doing so is uncommon, the use of arrows for assignment also enables
#you to assign things in the opposite direction, from left to right. Arrows also
#make it obvious which side is being assigned to which side of the operator

90 -&amp;gt; z
z&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 90&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#to remove a variable from your environment use the rm() function
rm(x)


#assigning something to a variable that is already in use will overwrite the variable
y &amp;lt;- 8
y&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 8&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#the only naming conventions are that a name should not begin with a
#number, and you should avoid using names that already exist as functions in R
#or special characters, e.g.:

1.m &amp;lt;- 7 #starting a variable name with a number produces an error

TRUE &amp;lt;- 9 #TRUE is a reserved keyword for the logical statement true, also results in an error

mean &amp;lt;- 99 #here I assign the number 99 to the same name as the mean function
#this is probably not what you want since it makes calling mean ambiguous.

mean
rm(mean)

#to check if a name is already reserved for something else, just try to look up
#the help page for it using ?name
?mean

#since pretty much anything can be assigned to a variable, you can also chain assignment operations
(y &amp;lt;- 900)
(z &amp;lt;- y &amp;lt;- 900) #store the RHS in 2 separate variables, called y and z

#usually you would store something slightly different in each of them, e.g. a
#modification of the 1st variable is stored in a 2nd variable
z &amp;lt;- y + 10 
z&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;basic-summary-statistics&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;6&lt;/span&gt; &lt;strong&gt;Basic Summary Statistics&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;R makes it incredibly easy to get simple summary statistics for numeric variables. So while we won’t dive too deeply into exploratory data analysis until later in the blog series we’ll get our toes wet here.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#R also provides a set of basic functions for conducting common summary
#statistic calculations
x &amp;lt;- c(0:10)

sum(x) #obtain the sum of the sequence of numbers from 1 to 100&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 55&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mean(x) #mean&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 5&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sd(x) #standard deviation&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 3.316625&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;median(x) #a shortcut for the 50th percentile AKA the median&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 5&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;min(x) #the minimum&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;max(x) #the maximum&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 10&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;data-structures-and-object-assignment&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;7&lt;/span&gt; &lt;strong&gt;Data Structures and Object Assignment&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Most of the things you will do in R operate upon a variety of objects.&lt;/p&gt;
&lt;p&gt;The common R data structures are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://stat.ethz.ch/R-manual/R-devel/library/base/html/vector.html&#34;&gt;Vectors&lt;/a&gt; = a one-dimensional array of data elements/values&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.rdocumentation.org/packages/base/versions/3.6.1/topics/factor&#34;&gt;Factors&lt;/a&gt; = R’s way of representing vectors as categorical variables for statistical testing and data visualization purposes.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://stat.ethz.ch/R-manual/R-devel/library/base/html/matrix.html&#34;&gt;Matrices&lt;/a&gt; = a two-dimensional array of vectors arranged in columns and rows. All data elements are typically of the same class. Columns are rows are numbered by position from left to right (columns) and top to bottom (rows).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.rdocumentation.org/packages/base/versions/3.6.1/topics/data.frame&#34;&gt;Data Frames&lt;/a&gt; = Also a 2D array but columns can be different classes. These are the most common data structure in R.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html&#34;&gt;Tibbles&lt;/a&gt; = an enhanced version of the data frame with improved display characteristics. Tibbles have gained popularity as the &lt;a href=&#34;https://www.tidyverse.org/&#34;&gt;tidyverse&lt;/a&gt; has become more prominent over the past few years.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.rdocumentation.org/packages/base/versions/3.6.1/topics/list&#34;&gt;Lists&lt;/a&gt;: a list of arbitrary objects, more flexible than data frames but less intuitive to work with. Lists elements can consist of multiple different data types, including the output of statistical tests and even entire data frames. Lists are a more advanced topic so they won’t be covered further for the time being. If you want to learn more about them now see &lt;a href=&#34;https://www.youtube.com/watch?v=Px9VNWHja4M&#34;&gt;this&lt;/a&gt; video.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.rdocumentation.org/packages/base/versions/3.6.1/topics/array&#34;&gt;Arrays&lt;/a&gt;: If you want to work with matrices that have more than 2 dimensions (remember that a matrix is a 2D array), checkout the array function. Arrays with more than 2 dimensions are not commonly used for the analysis of most forms of experimental data (e.g. I’ve never needed them), so I won’t be covering them in this blog series. Those who are interested in learning more about them can find a brief intro &lt;a href=&#34;http://adv-r.had.co.nz/Data-structures.html#matrices-and-arrays&#34;&gt;here&lt;/a&gt;. A more detailed treatment is provided in section 5 of the &lt;a href=&#34;https://cran.r-project.org/doc/manuals/r-release/R-intro.pdf&#34;&gt;official R introductory manual&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;N.B.&lt;/em&gt; One of the most important functions that base R provides is &lt;a href=&#34;https://www.rdocumentation.org/packages/utils/versions/3.6.1/topics/str&#34;&gt;str()&lt;/a&gt;, which enables you to inspect the structure of any object.&lt;/p&gt;
&lt;div id=&#34;numeric-and-character-vectors&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;7.1&lt;/span&gt; Numeric and Character Vectors&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#A vector is a one-dimensional array of numerical values or character strings.
#You can create one using the c() function in R, e.g.:

c(1, 3, 4, 5, 6)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 1 3 4 5 6&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#to save this vector for future use, you assign it to a variable using either &amp;quot;=&amp;quot; or &amp;quot;&amp;lt;-&amp;quot;
#it is generally recommended to use &amp;quot;&amp;lt;-&amp;quot; for assignment instead of &amp;quot;=&amp;quot;, although either will work 

#By wrapping the vector in str(), you gain structural information
str(c(1, 3, 4, 5, 6)) #a numeric vector of length 5, with values shown&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  num [1:5] 1 3 4 5 6&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;c(1:100) #all numbers between a range can be specified using number:number&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18
##  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36
##  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54
##  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72
##  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90
##  [91]  91  92  93  94  95  96  97  98  99 100&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str(c(1:100)) #a numeric vector of length 100, with the 1st 10 values shown&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  int [1:100] 1 2 3 4 5 6 7 8 9 10 ...&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;) #character values/strings need to be quoted to be parsed correctly&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;a&amp;quot; &amp;quot;b&amp;quot; &amp;quot;c&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#anything entered in quotation marks is read text/character, and if at least 1
#element is quoted, all elements of a vector are coerced to string format
c(&amp;quot;1&amp;quot;, 2, &amp;quot;3&amp;quot;) #prints as a character vector&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;1&amp;quot; &amp;quot;2&amp;quot; &amp;quot;3&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#if a string vector contains only numbers, you can reclassify it as numeric
#using as.numeric()
as.numeric(c(&amp;quot;1&amp;quot;, 2, &amp;quot;3&amp;quot;)) #now it prints as a numeric vector&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 1 2 3&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str(c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;)) #str tells us that this is a character vector of length 3&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  chr [1:3] &amp;quot;a&amp;quot; &amp;quot;b&amp;quot; &amp;quot;c&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;c(&amp;quot;apples&amp;quot;, &amp;quot;bananas&amp;quot;, &amp;quot;cherries&amp;quot;) #each entry is in quotations and separated by a comma&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;apples&amp;quot;   &amp;quot;bananas&amp;quot;  &amp;quot;cherries&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str(c(&amp;quot;apples&amp;quot;, &amp;quot;bananas&amp;quot;, &amp;quot;cherries&amp;quot;)) #also a character vector of length 3&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  chr [1:3] &amp;quot;apples&amp;quot; &amp;quot;bananas&amp;quot; &amp;quot;cherries&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;c_vect &amp;lt;- letters[seq(from = 1, to = 26)] #letters[] lets you quickly create a character vector of letters

#There are 2 subclasses of numeric vector: 
#&amp;quot;integer&amp;quot;, which contains only whole numbers, and &amp;quot;double&amp;quot;(also simply called
#numeric; both labels refer to the same thing), which has both integer and
#decimal components

#the class function returns the class of an object. see ?class for more info.
x &amp;lt;- c(1, 3, 4, 5, 6)
class(x) #by default, both integers and doubles are classified as &amp;quot;numeric&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;numeric&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- as.integer(x) #you can coerce a vector into a different class, if it is reasonable to do so.
class(x) #now R reads the number list as an integer vector&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;integer&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#to conduct a logical test to see if an object is a particular class use
#is.[class] (insert the class name), e.g.
is.integer(x)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;logical-vectors&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;7.2&lt;/span&gt; Logical Vectors&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;l &amp;lt;- c(TRUE, FALSE, TRUE, TRUE, FALSE, TRUE) #logical vector
l &amp;lt;- c(T, F, T, T, F, T) #equivalent short hand version
class(l)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;logical&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#&amp;quot;TRUE&amp;quot; and &amp;quot;FALSE&amp;quot;, which may be abbreviated as &amp;quot;T&amp;quot; and &amp;quot;F&amp;quot;, are also read by R as 1 and 0 respectively.
#this conveniently enables you to obtain the total number of TRUE elements using the sum() function
sum(l)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 4&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#you can also get the proportion of TRUE values using the mean function
mean(l)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0.6666667&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#both of these are very useful when conducting logical tests of a vector to see
#how many elements match the specified criteria, e.g.:
x &amp;lt;- c(1:10, 100:130)

x &amp;lt; 50 #returns a logical vector with True corresponding to elements matching the logical test, &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE
## [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [37] FALSE FALSE FALSE FALSE FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#in this case that the value is less than 50

sum(x &amp;lt; 50) #how many values in x are less than 50&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 10&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mean(x &amp;lt; 50) #what proportion of the values in x are less than 50&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0.2439024&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#using modulus 2 (divide by 2 and return the remainder) can tell you which
#elements of a numeric vector are odd or even, which is most useful for programming.

(x %% 2) == 0 #even values in x = TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE FALSE
## [13]  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE
## [25]  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE
## [37]  TRUE FALSE  TRUE FALSE  TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;(x %% 2) == 1 #odd values in x = TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1]  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE FALSE  TRUE
## [13] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE
## [25] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE
## [37] FALSE  TRUE FALSE  TRUE FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#you can do similar tests with character vectors
c_vect &amp;lt;- c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;a&amp;quot;, &amp;quot;c&amp;quot;, &amp;quot;d&amp;quot;)
mean(c_vect == &amp;quot;a&amp;quot;) #how many elements of c_vect are &amp;quot;a&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0.4&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sum(c_vect == &amp;quot;a&amp;quot;) #what proportion of the elements of c_vect are &amp;quot;a&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 2&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#logical tests are also used to subset or filter data, as demonstrated later on...&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;factors&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;7.3&lt;/span&gt; Factors&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#Factors are a modified form of either a characeter or numeric vector which
#facilitates their use as categorical variables. You can create a factor in R
#using either the factor() function, or by reclassifying another vector type
#using as.factor()

x &amp;lt;- c(1:3, 1:3, 1:3)
as.factor(x) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 1 2 3 1 2 3 1 2 3
## Levels: 1 2 3&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#Note the addition of levels to the output. What as.factor does is assign each
#unique value of the vector to a level of the factor. Under the hood this also
#involves constructing a set of 0/1 dummy variables for each level of the
#factor, which are needed to fit some models, like linear regession models (but
#don&amp;#39;t worry about this, because R will do it for you automatically).

#using the factor() function instead allows you to assign labels to the levels 
#you can also specify whether or not the factor is ordered
factor(x, levels = c(1, 2, 3), labels = c(&amp;quot;one&amp;quot;, &amp;quot;two&amp;quot;, &amp;quot;three&amp;quot;), ordered = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] one   two   three one   two   three one   two   three
## Levels: one &amp;lt; two &amp;lt; three&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;matrices&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;7.4&lt;/span&gt; Matrices&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#the matrix() function allows you to create a matrix

#create an empty matrix with row and column dimensions specified using nrow and
#ncol arguments. This can be useful if you plan to fill it in later (e.g. when
#writing loops).
mat1 &amp;lt;- matrix(nrow = 100, ncol = 10) 

str(mat1) #view the structure of the new matrix&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  logi [1:100, 1:10] NA NA NA NA NA NA ...&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#take a vector and distribute the values into 2 columns with 20 rows each
matrix(data = c(1:40), nrow = 20, ncol = 2) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##       [,1] [,2]
##  [1,]    1   21
##  [2,]    2   22
##  [3,]    3   23
##  [4,]    4   24
##  [5,]    5   25
##  [6,]    6   26
##  [7,]    7   27
##  [8,]    8   28
##  [9,]    9   29
## [10,]   10   30
## [11,]   11   31
## [12,]   12   32
## [13,]   13   33
## [14,]   14   34
## [15,]   15   35
## [16,]   16   36
## [17,]   17   37
## [18,]   18   38
## [19,]   19   39
## [20,]   20   40&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#you can combine vectors into a matrix using cbind(vector1, vector2) or
#rbind(vector1, vector2) depending on whether you want to combine elements as
#row vectors or column vectors. each must be the same lenght, otherwise some
#elements will be coded as NA for the shorter vector

x1 &amp;lt;- c(1:50)
x2 &amp;lt;- c(51:100)
x3 &amp;lt;- c(1:10)

(mat1 &amp;lt;- cbind(x1, x2)) #combined by column&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##       x1  x2
##  [1,]  1  51
##  [2,]  2  52
##  [3,]  3  53
##  [4,]  4  54
##  [5,]  5  55
##  [6,]  6  56
##  [7,]  7  57
##  [8,]  8  58
##  [9,]  9  59
## [10,] 10  60
## [11,] 11  61
## [12,] 12  62
## [13,] 13  63
## [14,] 14  64
## [15,] 15  65
## [16,] 16  66
## [17,] 17  67
## [18,] 18  68
## [19,] 19  69
## [20,] 20  70
## [21,] 21  71
## [22,] 22  72
## [23,] 23  73
## [24,] 24  74
## [25,] 25  75
## [26,] 26  76
## [27,] 27  77
## [28,] 28  78
## [29,] 29  79
## [30,] 30  80
## [31,] 31  81
## [32,] 32  82
## [33,] 33  83
## [34,] 34  84
## [35,] 35  85
## [36,] 36  86
## [37,] 37  87
## [38,] 38  88
## [39,] 39  89
## [40,] 40  90
## [41,] 41  91
## [42,] 42  92
## [43,] 43  93
## [44,] 44  94
## [45,] 45  95
## [46,] 46  96
## [47,] 47  97
## [48,] 48  98
## [49,] 49  99
## [50,] 50 100&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;class(mat1)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;matrix&amp;quot; &amp;quot;array&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;(mat2 &amp;lt;- rbind(x1, x2)) #combined by row&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]
## x1    1    2    3    4    5    6    7    8    9    10    11    12    13    14
## x2   51   52   53   54   55   56   57   58   59    60    61    62    63    64
##    [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]
## x1    15    16    17    18    19    20    21    22    23    24    25    26
## x2    65    66    67    68    69    70    71    72    73    74    75    76
##    [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38]
## x1    27    28    29    30    31    32    33    34    35    36    37    38
## x2    77    78    79    80    81    82    83    84    85    86    87    88
##    [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49] [,50]
## x1    39    40    41    42    43    44    45    46    47    48    49    50
## x2    89    90    91    92    93    94    95    96    97    98    99   100&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;class(mat2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;matrix&amp;quot; &amp;quot;array&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#combining vecotrs of unequal length produces NAs for the extra indices of the
#longer one

#common matrix operations work as expected with matrix objects in R

t(mat1) #transposition&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]
## x1    1    2    3    4    5    6    7    8    9    10    11    12    13    14
## x2   51   52   53   54   55   56   57   58   59    60    61    62    63    64
##    [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]
## x1    15    16    17    18    19    20    21    22    23    24    25    26
## x2    65    66    67    68    69    70    71    72    73    74    75    76
##    [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38]
## x1    27    28    29    30    31    32    33    34    35    36    37    38
## x2    77    78    79    80    81    82    83    84    85    86    87    88
##    [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49] [,50]
## x1    39    40    41    42    43    44    45    46    47    48    49    50
## x2    89    90    91    92    93    94    95    96    97    98    99   100&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;t(mat1) + mat2 #addition (both matrices need to have the same dimensions)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]
## x1    2    4    6    8   10   12   14   16   18    20    22    24    26    28
## x2  102  104  106  108  110  112  114  116  118   120   122   124   126   128
##    [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]
## x1    30    32    34    36    38    40    42    44    46    48    50    52
## x2   130   132   134   136   138   140   142   144   146   148   150   152
##    [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38]
## x1    54    56    58    60    62    64    66    68    70    72    74    76
## x2   154   156   158   160   162   164   166   168   170   172   174   176
##    [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49] [,50]
## x1    78    80    82    84    86    88    90    92    94    96    98   100
## x2   178   180   182   184   186   188   190   192   194   196   198   200&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;t(mat1) - mat2 #subtraction&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]
## x1    0    0    0    0    0    0    0    0    0     0     0     0     0     0
## x2    0    0    0    0    0    0    0    0    0     0     0     0     0     0
##    [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]
## x1     0     0     0     0     0     0     0     0     0     0     0     0
## x2     0     0     0     0     0     0     0     0     0     0     0     0
##    [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38]
## x1     0     0     0     0     0     0     0     0     0     0     0     0
## x2     0     0     0     0     0     0     0     0     0     0     0     0
##    [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49] [,50]
## x1     0     0     0     0     0     0     0     0     0     0     0     0
## x2     0     0     0     0     0     0     0     0     0     0     0     0&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;t(mat1) * mat2 #multiplication&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]
## x1    1    4    9   16   25   36   49   64   81   100   121   144   169   196
## x2 2601 2704 2809 2916 3025 3136 3249 3364 3481  3600  3721  3844  3969  4096
##    [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]
## x1   225   256   289   324   361   400   441   484   529   576   625   676
## x2  4225  4356  4489  4624  4761  4900  5041  5184  5329  5476  5625  5776
##    [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38]
## x1   729   784   841   900   961  1024  1089  1156  1225  1296  1369  1444
## x2  5929  6084  6241  6400  6561  6724  6889  7056  7225  7396  7569  7744
##    [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49] [,50]
## x1  1521  1600  1681  1764  1849  1936  2025  2116  2209  2304  2401  2500
## x2  7921  8100  8281  8464  8649  8836  9025  9216  9409  9604  9801 10000&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;t(mat1) / mat2 #division&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]
## x1    1    1    1    1    1    1    1    1    1     1     1     1     1     1
## x2    1    1    1    1    1    1    1    1    1     1     1     1     1     1
##    [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]
## x1     1     1     1     1     1     1     1     1     1     1     1     1
## x2     1     1     1     1     1     1     1     1     1     1     1     1
##    [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38]
## x1     1     1     1     1     1     1     1     1     1     1     1     1
## x2     1     1     1     1     1     1     1     1     1     1     1     1
##    [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49] [,50]
## x1     1     1     1     1     1     1     1     1     1     1     1     1
## x2     1     1     1     1     1     1     1     1     1     1     1     1&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;dataframes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;7.5&lt;/span&gt; Dataframes&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#data frames can be constructed using the dataframe function,
#or by converting a combination of vectors/matrix using as.data.frame()
x &amp;lt;- cbind(sample(1:6), rep(c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;), 2)) #create a 2-column

class(x) #a matrix&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;matrix&amp;quot; &amp;quot;array&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#if names are not associated with the columns the variables are labelled using
#V[index]

df &amp;lt;- as.data.frame(x) 
df&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##   V1 V2
## 1  4  a
## 2  1  b
## 3  2  c
## 4  5  a
## 5  6  b
## 6  3  c&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;class(df) #now a data frame&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;data.frame&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df &amp;lt;- as.data.frame(x) 

names(df) &amp;lt;- c(&amp;quot;var_1&amp;quot;, &amp;quot;var_2&amp;quot;) #change column names using the names() function

str(df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## &amp;#39;data.frame&amp;#39;:    6 obs. of  2 variables:
##  $ var_1: chr  &amp;quot;4&amp;quot; &amp;quot;1&amp;quot; &amp;quot;2&amp;quot; &amp;quot;5&amp;quot; ...
##  $ var_2: chr  &amp;quot;a&amp;quot; &amp;quot;b&amp;quot; &amp;quot;c&amp;quot; &amp;quot;a&amp;quot; ...&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#create the data frame directly and specify names
df &amp;lt;- data.frame(&amp;quot;var_1&amp;quot; = c(sample(1:6, 6)), 
                 &amp;quot;var_2&amp;quot; = rep(c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;), 2)) 
str(df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## &amp;#39;data.frame&amp;#39;:    6 obs. of  2 variables:
##  $ var_1: int  2 1 4 6 5 3
##  $ var_2: chr  &amp;quot;a&amp;quot; &amp;quot;b&amp;quot; &amp;quot;c&amp;quot; &amp;quot;a&amp;quot; ...&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#if you don&amp;#39;t want strings to be converted to factors automatically, set
#stringsAsFactors = FALSE
df &amp;lt;- data.frame(&amp;quot;var_1&amp;quot; = c(sample(1:6, 6)), 
                 &amp;quot;var_2&amp;quot; = rep(c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;), 2),
                 stringsAsFactors = FALSE) &lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;tibbles&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;7.6&lt;/span&gt; Tibbles&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#load the tidyverse packages, which contain the tibble and as_tibble functions
library(tidyverse)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## -- Attaching packages --------------------------------------- tidyverse 1.3.0 --&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## v ggplot2 3.3.3     v purrr   0.3.4
## v tibble  3.1.1     v dplyr   1.0.2
## v tidyr   1.1.2     v stringr 1.4.0
## v readr   1.4.0     v forcats 0.5.0&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: package &amp;#39;ggplot2&amp;#39; was built under R version 4.0.5&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: package &amp;#39;tibble&amp;#39; was built under R version 4.0.5&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#convert a df or matrix to a tibble using as_tibble()
df &amp;lt;- data.frame(&amp;quot;var_1&amp;quot; = c(sample(1:6, 6)), 
                 &amp;quot;var_2&amp;quot; = rep(c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;), 2)) 

tbl1 &amp;lt;- as_tibble(df)

tbl1 #printout also tells you the dimensions and class of each column&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 6 x 2
##   var_1 var_2
##   &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;
## 1     2 a    
## 2     6 b    
## 3     1 c    
## 4     5 a    
## 5     4 b    
## 6     3 c&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#When creating a tibble, strings are not automatically converted to factors. 
#This is better from a data manipulation standpoint, which will be covered in a
#future post on working with strings

tbl1 &amp;lt;- tibble(&amp;quot;var_1&amp;quot; = c(sample(1:6, 6)), 
               &amp;quot;var_2&amp;quot; = rep(c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;), 2)) 
tbl1&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 6 x 2
##   var_1 var_2
##   &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;
## 1     6 a    
## 2     5 b    
## 3     1 c    
## 4     3 a    
## 5     2 b    
## 6     4 c&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;random-numbers-and-sampling&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;8&lt;/span&gt; &lt;strong&gt;Random Numbers and Sampling&lt;/strong&gt;&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#sampling

#obtain a random sample 6 numbers with values ranging between 1 and 40 without replacement
sample(1:40, 6, replace=F) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1]  6 12 24 15 19 34&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- c(1:30)
x&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
## [26] 26 27 28 29 30&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;v &amp;lt;- sample(1:200, 100, replace=T) #sample with replacement, save it in a vector called &amp;quot;v&amp;quot;
v&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##   [1] 132 133  69 141 186 182 189 191 155  35  22  88  36 129  95  87  72 117
##  [19] 143  35 136 121  51  61 157 152  81  51  78 105  60  37  43 101  22 180
##  [37] 117  55 176 123  38 107  60 147  72 188  67   4 123  41  36 196  67  27
##  [55]  14 152 192 182  64 106  60 185 181  16 182 168 105 167 200  18  79 140
##  [73]  99   6  81 156 185   9  21 158 126  40 184 120  40 160  35 126 159 169
##  [91] 145  19 166 164   2 168 118 178  29  58&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;set.seed(seed = 934) #sets criteria for random sampling for variable creation if you want it to be repeatable

random.sample &amp;lt;- rnorm(1000, mean = 100, sd = 1) #create a dataset of random, normally distributed data

#generating sequences
seq(from = 1, to = 7, by = 1) #generate a sequence of numbers from 1 to 7, in 1 unit increments.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 1 2 3 4 5 6 7&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;seq(1, 7, 1) #specify arguments by position instead&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 1 2 3 4 5 6 7&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;rep(1:10, each = 2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1]  1  1  2  2  3  3  4  4  5  5  6  6  7  7  8  8  9  9 10 10&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- c(1:12) 

rep(x, each = 2) #create a numeric vector containing each element of x repeated twice&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1]  1  1  2  2  3  3  4  4  5  5  6  6  7  7  8  8  9  9 10 10 11 11 12 12&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;rep(seq(1, 7, 1), each = 3) #repeat a sequence&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5 6 6 6 7 7 7&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- seq(1, 7, 1)
rep(x, each = 3) #equivalent to the nested version&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5 6 6 6 7 7 7&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#creating a data frame from scratch
y &amp;lt;- c(rnorm(n = 60, mean = 100, sd = 20), rnorm(n = 10, mean = 110, sd = 20)) #creates variable y composed of 60 random scores from a normal distribution with a mean of 100 and sd of 20, along with 10 random scores from a normal distribution with a mean of 110 and sd of 20
g &amp;lt;- factor(rep(seq(1, 7, 1), each = 10), labels = &amp;quot;g&amp;quot;, ordered = FALSE) #groups the scores from &amp;#39;y&amp;#39; into 7 sets (g1,g2,etc) containing 10 scores each

z &amp;lt;- letters[1:5]

df &amp;lt;- as.data.frame(cbind(y, g, z))

class(df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;data.frame&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;class(df$y)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;character&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df$y &amp;lt;- as.numeric(df$y) #convert to numeric

class(df$z) #check the class of variable &amp;quot;Z&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;character&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;class(df$g) #check the class of variable &amp;quot;g&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;character&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;functions-for-describing-the-structural-information-of-data-objects&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;9&lt;/span&gt; &lt;strong&gt;Functions for Describing the Structural Information of Data Objects&lt;/strong&gt;&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;length(c(1:100)) #number of elements in a vector = the length of the vector&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 100&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data &amp;lt;- mtcars #we&amp;#39;ll use the built-in mtcars dataframe as an example again

length(data) #when used on a matrix or data frame, returns the number of columns&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 11&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;nrow(data) #number of rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 32&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ncol(data) #number of columns&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 11&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dim(data) #returns the number of rows and columns of the object&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 32 11&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;unique(data$cyl) #display the unique values of the specified variable&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 6 4 8&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#useful applications of the unique() function include making it easier to
#construct factors (since you need to know what the unique values are) and
#making it easier to identify data entry errors (to be demonstrated in a future
#post)

levels(as.factor(data$cyl)) #this is the same as unique but for factors. &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;4&amp;quot; &amp;quot;6&amp;quot; &amp;quot;8&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#It provides the added benefit of revealing the order of factor levels.

#show the unique values of a vector (top line) 
#as well as the count of each (bottom line)
table(data$cyl) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
##  4  6  8 
## 11  7 14&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#of course the str() function, which we&amp;#39;ve already covered is incredibly
#versatile and informative

str(data$cyl) #the structure of a variable within a dataframe&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  num [1:32] 6 6 4 6 8 6 8 4 4 6 ...&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str(data) #the structure of a whole dataframe&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## &amp;#39;data.frame&amp;#39;:    32 obs. of  11 variables:
##  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##  $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
##  $ disp: num  160 160 108 258 360 ...
##  $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
##  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
##  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
##  $ qsec: num  16.5 17 18.6 19.4 17 ...
##  $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
##  $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
##  $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
##  $ carb: num  4 4 1 1 2 1 4 2 2 4 ...&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str(table) #the structure of a function&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## function (..., exclude = if (useNA == &amp;quot;no&amp;quot;) c(NA, NaN), useNA = c(&amp;quot;no&amp;quot;, 
##     &amp;quot;ifany&amp;quot;, &amp;quot;always&amp;quot;), dnn = list.names(...), deparse.level = 1)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#the tidyverse alternative to str is the glimpse function(), which is
#specialized for displaying the structural info of dataframes and tibbles,
#providing a slightly nicer printout, and enabling you to peak at the structure
#of the data in the middle of a series of &amp;quot;piped&amp;quot; or &amp;quot;chained&amp;quot; operations
#without interrupting the sequence (more on this in the next post).

library(tidyverse)

df &amp;lt;- data.frame(&amp;quot;var_1&amp;quot; = c(sample(1:6, 6)), 
                 &amp;quot;var_2&amp;quot; = rep(c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;), 2)) 

glimpse(df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 6
## Columns: 2
## $ var_1 &amp;lt;int&amp;gt; 3, 5, 4, 1, 2, 6
## $ var_2 &amp;lt;chr&amp;gt; &amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;, &amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;the-global-environment&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;10&lt;/span&gt; &lt;strong&gt;The Global Environment&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;The functions you use in R operate within what is called the global environment, which consists of the functions and other objects that you have loaded in the current R session (this is what happens you load a package with the library function), as well as any variables, data objects, or functions you have created during the session.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#to get a list of the objects in your global environment, use the ls() function
ls()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;c_vect&amp;quot;        &amp;quot;data&amp;quot;          &amp;quot;df&amp;quot;            &amp;quot;g&amp;quot;            
##  [5] &amp;quot;l&amp;quot;             &amp;quot;mat1&amp;quot;          &amp;quot;mat2&amp;quot;          &amp;quot;random.sample&amp;quot;
##  [9] &amp;quot;tbl1&amp;quot;          &amp;quot;v&amp;quot;             &amp;quot;x&amp;quot;             &amp;quot;x1&amp;quot;           
## [13] &amp;quot;x2&amp;quot;            &amp;quot;x3&amp;quot;            &amp;quot;y&amp;quot;             &amp;quot;z&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;the-working-directory&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;11&lt;/span&gt; &lt;strong&gt;The Working Directory&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;R is always connected to a specific folder on your computer called the working directory, which is the default path for loading/importing files or saving/exporting them&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#to view your current working directory, use the getwd() function, or you can
#click on the &amp;quot;files&amp;quot; tab in the bottom right pane of R studio.
getwd()

#you can change your working directory using the setwd() function, 
#or you can use the &amp;quot;set working directory&amp;#39; menu under the &amp;quot;Session&amp;quot; drop down
#menu along the top of the R studio window, 
#or you can just use the keyboard shortcut Ctrl + Shift + H

setwd(&amp;quot;C:/Users/CPH/Documents/&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;projects&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;12&lt;/span&gt; &lt;strong&gt;Projects&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;The projects feature of R studio makes it much easier to keep your work organized, and using it is strongly recommended if you are working on anything that will take longer than one or two sessions to complete.&lt;/p&gt;
&lt;p&gt;You can create/start a project using the projects menu by clicking on this button:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAIn0lEQVR42u3XeVCTdxoHcLfdo91xZ9vpzHZntrPjdHU623HbznS3tW67axXXW6Siu2ireOG5utjWq4pWXREPjIIi9x0xQCCEhBACCYQAyZvkvXK8Od+c5A4kISEImn1fAqisWrXb/zYz33ln+Of55HmeX/i9M2b8//McH5oi9tPV5bx3FuSxUpcWcdftbkbepFljL8disR/9QBVpL35IqXvn05uMtMSK1lvLS5oNm2u7zKvrOgb3saX6NZUcbHkJi5tQyDq1oqxtxdcsxa+lsdhPnrve7Gvsn/3pOu29+TfoW5aVsEpWlXFUaYwe9WkRht9AHTqaKaSotwyjG/mg85YpjNZaIkih2qvO7DXq9jKlirVVXMWqUk7dkiLOoaSK9oUn+fgrT+zOguv8mQsKm+YtLGDuWFLMyltT2QbsYwPAebFeUar1ahttUbTJMQIz7CMwnShcbw6jVOMguqFD5qIagyjNNATTTBH4FhGqcQiuJpKv9KjPiIzo7maJNLmaByZWtJWvqWr/ZwpN8FF6j/XlqeLraPyZ/6jh89O5ct5FuambigcUbM9dmOO7C7E8RFyjcJNzBG6wRpA6Sxih4SEiQaTSMIis50pcZTo/Um0IIlX6IEIWnwRUGiPQZMr1Q3Au5FGcEGr7djElPRtuC8Rp+dL4iFIb+K8cbUd8WQDeX6zxGRqdIyjHdw8kACDLfRdkOkchuj0C7yqSeP5+WRj4Iqfbn3yxM/DXY62RWfvoYx8faYmkUIT+8x0mfbk2CFcahqBKQ4QMSKZsIgXYIHJJZjOcEGgc6Vwo8D7N/8upLqQLtKEa/YAmF7TYMjqVwXO9em8OardUGQNYQ/8IVGeNQJ/niPzzDrKjH6Szo0tP8UJ7KgDHn2+0BXdWSPvnf82OvLefGT3bbtSVaAagMm0ILCVyU+lTZknteIZQ5z7WoQxkSWyWPGVAvV+gD84ojb00BdgnwMLdvnuA0DcGdBJptoXRCo1Hf01ucpzv1Q1my3FntsRsyezUG/54gBXdUSR25qvcyEp2jzNP4UZuQE70w4OsyLIz7YGrkAu7ILHYzor0/kwx7qZAbrxYG0arTfeAanMMoBLZ1ILGnggQEOF7xyQ89x0J2xGRUfU+rBCxWSgS3Lu9Ujx2gA4GrsI27UqmyJWDOpQUeb9xX608vKdGeveK1OK8DrsMxdohuMIwBlSaxoDq8dwbz7MBPHckrc5hgGUfAhjmIFBn8Eo+ONAYTacC/lyiK8e7lSPZYlMoR261pRb2Dby/nxkuVAVkJdiQrEw/LH0UoPpJgO7/AoyNA9i2sIRhCQL1+IBk7rbbw1tyOu1FCqv0bwye4yJggrOEZnTONnp07cUuNwko04SlccCdZwXEu0ACBCTAOwkYfgiw5gzHc6gGMLxVUBtMutLhfHd3Y/jd3Yzw5R47UoiFHgMYe3pA5wSA7AKXBPTHAfQJwO+31gy/teXW8KsnK0Zn76BFl57meS8ILWg+6pcVkwDdBMAUH0Hl9wW0TANsyRHYyxQ2ySe1La65e+lhEpAHe2VPBSDySIBoGqBzOsA8MYLtcQC5AwkMrn1HFWCava0+eqAGwkkAuQOl00bwlIAY8OAi3geMAGx7ePwU0CcAW4klLFHZgYSmNvtFwAIvPd3mJffgksiKxE8B2YXhxy7idwAmukACPPcBTROAP5CA3C57CeYEEpgEQGolTwFCdmHZGZ63AB2Ij+EJi/hcgMttGs2RGhlOAhZ/wxxYly9w/66wNrKJDfaf7rWodpZLzXMIxMacXsfeStichwTkjxvDMwHaCAC5AylZ7f45226PvrGZOvraxqqx1zdVjb5x6dZIWrvKtJ4p8yyp7Q3NPdgUnpVaO0L+JlAAL0ICHvWD9EhADwGYXMTuCQDbEZVfU/ZrDwpVjk1c2QDxtGXKrFixxg/dUHvgT5kdrnNSlyIb9iNnZW7VHr7OksyEfMnNsPfLHpMxVxWEn7oDcUAMIFoO3lS5tEd7dc5dfMSfITFZc9UerMYSgWrMQ2C1KSQvNwbk+boBaCG7w5kp9yiykUHkwZySutU7BQZrUjPi/4Krdh0TO3VFuqj8PgB5GPCVUD9YoHbrToj1rv1Ctf/fxL9looiG6RqFGM5RkN4/AtbZovLb1ghItUbkFaaIvMAwAC1i853nIDdKQYPweFTkMwRfITL+VA3BGYAPS+PjtiSWYnArX+/4Vu7RHJc4bVOA+fTWX+3uQL0XYJuVioe0POIW1EqEQ96G4hcSsKF/FCxXe1FKnwE7xujDT7Bl+rNdauyTeo7nHET8nSh8trdftbdOgh/iaHRHuDothShOUUWmckUVQb6RerVb+bgjkaUIvEkzxC8kH1cLX13ZIOrJAExChj0K83z3HgI0E4BGInX2ETmZrC4Mo8gsqiI8AC5idzozQY8iQ2DUfMVC9RdkJIYs/GAmEVH4BNENYiToYroImXEy9sLUCFJ46OsrGkRpi+oEku0dcPdNzEMUH0XigLsPAXKJ4hSpSXUVsqF/YbS5v+QodRl8I3YJ9iEUVQieDshWhJHDYodmHRtUJjJ7apObJZ/lS2M/f+Tt+GQs9uNkJrBgeYOIktTUKzsuMciqzWEFCah3xAElmBchr10lRAcSiA6cg31oNuJHzhOngcxk4UwooNgvxPWJTWLss6a+K6lseN5TvyuQd/hd7ZrfJDb27FxC7wR3dEAQRelU15gjYDUeAsklfBBALiCJuEwcx29l5AnADKsbRZr1bPGhI734LFos9uJzv6SU4rGXPm8BFyQxenLXNveqjvYZ1Pm6QWQKQCwhefSOi23aVB6Ep7QAHSkt0s256uBrxBd54X/3dkZ8i8NC+2+JGe5Zz+rrTG2Taz9q4vr+JdSZUtiAaTNXSt3eii5mYLFf/HDviBPjobljMzdw5AlvU5tur2oUHT7aZX6b2f+YxfqOz38AYKkbNm3w3sgAAAAASUVORK5CYII=&#34; /&gt;&lt;/p&gt;
&lt;p&gt;You can find it in the top right corner of R studio, directly below the minimize/maximize/exit buttons. Creating (or loading) a package also sets the working directory to the project folder automatically.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;useful-keyboard-shortcuts-for-r-studio-users&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;13&lt;/span&gt; &lt;strong&gt;Useful Keyboard Shortcuts (for R studio users)&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;One of the great benefits of using R studio are the keyboard shortcuts that speed up the coding process. Here are some I’ve found to be useful:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;assignment operator &lt;em&gt;&amp;lt;-&lt;/em&gt;: [Alt] + [-]&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;extract variable: [Ctrl] + [Alt] + [v]. Highlight some code, use this shortcut, and enter the variable name&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;comment lines in/out: [Ctrl] + [Shift] + [c]&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;reflow comments: highlight/select comments and use [Ctrl] + [Shift] + [/] to reflow/wrap them for easier reading.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;reindent lines: use [Ctrl] + [i] to realign the indentation of your R code so it is easier to read.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;insert code section title: [Ctrl] + [Shift] + [r]. This can also be done by starting a line with # to comment it out, and ending it with &lt;em&gt;####&lt;/em&gt; or &lt;em&gt;—-&lt;/em&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;open/close the R script outline, which contains a list of the code sections you’ve defined using the code section titles that can be clicked on to quickly navigate through your script: [Ctrl] + [Shift] + [o]&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;view the definition of a function: press [F2] when the cursor is on a function name&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;N.B.&lt;/em&gt; To see all available keyboard shortcuts use [Alt] + [Shift] + [K] or click “keyboard shortcuts help” under the R studio help menu. Many of the more useful ones are also accessible under the R studio code menu.&lt;/p&gt;
&lt;div id=&#34;navigation&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;13.1&lt;/span&gt; Navigation&lt;/h2&gt;
&lt;p&gt;Click &lt;a href=&#34;https://craig.rbind.io/post/2019-06-22-asgr-1-getting-data-into-r/&#34;&gt;here&lt;/a&gt; to go back to the previous post or &lt;a href=&#34;https://craig.rbind.io/post/2019-12-30-asgr-2-1-data-transformation-part-1/&#34;&gt;here&lt;/a&gt; to go to the next one.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;notes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;13.2&lt;/span&gt; Notes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;For more details on the data structures and operations introduced in this post, you may find the &lt;a href=&#34;https://cran.r-project.org/doc/manuals/r-release/R-intro.pdf&#34;&gt;official R introductory manual&lt;/a&gt; or Michael Crawley’s &lt;a href=&#34;https://www.amazon.ca/R-Book-Michael-J-Crawley/dp/0470973927&#34;&gt;“The R Book”&lt;/a&gt; helpful.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thank you for visiting my blog. I welcome any suggestions for future posts, comments or other feedback you might have. Feedback from beginners and science students/trainees (or with them in mind) is especially helpful in the interest of making this guide even better for them.&lt;/p&gt;
&lt;p&gt;This blog is something I do as a volunteer in my free time. If you’ve found it helpful and want to give back, &lt;a href=&#34;https://www.buymeacoffee.com/huttoncp&#34;&gt;coffee donations&lt;/a&gt; would be appreciated.&lt;/p&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js&#34; data-name=&#34;bmc-button&#34; data-slug=&#34;huttoncp&#34; data-color=&#34;#FF5F5F&#34; data-emoji=&#34;&#34;  data-font=&#34;Cookie&#34; data-text=&#34;Buy me a coffee&#34; data-outline-color=&#34;#000000&#34; data-font-color=&#34;#ffffff&#34; data-coffee-color=&#34;#FFDD00&#34; &gt;&lt;/script&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Modulation of synaptic plasticity by exercise</title>
      <link>https://craig.rbind.io/publication/bettio-et-al-2019/</link>
      <pubDate>Tue, 06 Aug 2019 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/publication/bettio-et-al-2019/</guid>
      <description></description>
    </item>
    
    <item>
      <title>A rapid neurological assessment protocol for repeated mild traumatic brain injury in awake rats</title>
      <link>https://craig.rbind.io/publication/christie-et-al-2019/</link>
      <pubDate>Fri, 19 Jul 2019 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/publication/christie-et-al-2019/</guid>
      <description></description>
    </item>
    
    <item>
      <title>A Scientist&#39;s Guide to R: Step 1. Getting Data into R</title>
      <link>https://craig.rbind.io/post/2019-06-22-asgr-1-getting-data-into-r/</link>
      <pubDate>Sat, 22 Jun 2019 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/post/2019-06-22-asgr-1-getting-data-into-r/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#tldr&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#introduction&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#installing-and-loading-r-packages&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;Installing and Loading R Packages&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#how-to-get-your-data-into-r&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;How to Get Your Data Into R&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#comma-delimited-.csv-files&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.1&lt;/span&gt; Comma Delimited (.csv) Files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#tab-delimited-.txt-files&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.2&lt;/span&gt; Tab Delimited (.txt) Files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#files-with-other-delimiting-characters-also-.txt&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.3&lt;/span&gt; Files With Other Delimiting Characters (also .txt)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#microsoft-excel-files-.xlsx-.xls&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.4&lt;/span&gt; Microsoft Excel Files (.xlsx, .xls)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#files-from-spss-sas-or-stata&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.5&lt;/span&gt; Files from SPSS, SAS, or Stata&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#fixed-width-files-.txt-.gz-.bz2-.xz-.zip-etc.&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.6&lt;/span&gt; Fixed Width Files (.txt, .gz, .bz2, .xz, .zip, etc.)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#htmlxml-files&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.7&lt;/span&gt; html/xml files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#javascript-object-notation-json-files&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.8&lt;/span&gt; JavaScript Object Notation (&lt;span&gt;JSON&lt;/span&gt;) Files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#navigation&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.9&lt;/span&gt; Navigation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#notes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.10&lt;/span&gt; Notes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;tldr&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;TL;DR&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;As the second post in the Scientist’s Guide to R series (click &lt;a href=&#34;https://craig.rbind.io/post/2019-05-17-asgr-0-basic-workflow/&#34;&gt;here&lt;/a&gt; for the 1st post), this post will goes into the first step of the data analysis with R process: importing your data from a variety of common &lt;a href=&#34;https://en.wikipedia.org/wiki/Flat-file_database&#34;&gt;“flat file”&lt;/a&gt; sources (.csv, .txt, .xlsx, etc).&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;So you’ve spent weeks/months/years conducting a carefully planned research project and collected a bunch of data, and want to know how the study turned out using the advanced functionality of R? The first things you will need to do are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;i) Install R &amp;amp; R studio.&lt;/strong&gt; Install R using &lt;a href=&#34;https://cloud.r-project.org/&#34;&gt;this link&lt;/a&gt;. The R studio integrated development environment (IDE) is available &lt;a href=&#34;https://www.rstudio.com/products/rstudio/download/#download&#34;&gt;here&lt;/a&gt; (R studio is not necessary to use R but it is strongly recommended). For instructions on using R studio, see &lt;a href=&#34;https://resources.rstudio.com/&#34;&gt;these videos&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;ii) install and load R add-on packages.&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;iii) import your data.&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;After you’ve installed R studio, read on for a brief explanation of how to install and load R packages. These additional packages greatly expand the functionality of R (e.g. allow you to build webpages like this blog using the &lt;a href=&#34;https://bookdown.org/yihui/blogdown/&#34;&gt;blogdown&lt;/a&gt; package), making it much easier to learn and use. While there are many different ways to do things using R, this guide will cover the ways I have found in practice to have the right balance of effectiveness, efficiency, and accessibility/transparency. There are many excellent books and online resources for those wanting to learn more about alternative methods. However, to avoid confusing those attempting to learn data analysis with R for the 1st time, the scope of these tutorials will be limited to recommended methods only.&lt;/p&gt;
&lt;p&gt;After explaining how to install and load R packages, this post will cover how to easily import data from a variety of common sources ranging from comma-separated-variable (.csv) files, to excel spreadsheets, and fixed width files.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;installing-and-loading-r-packages&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; &lt;strong&gt;Installing and Loading R Packages&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Installing &amp;amp; loading packages into R is a very straightforward process. For packages hosted on &lt;a href=&#34;https://cran.r-project.org/web/packages/available_packages_by_name.html&#34;&gt;CRAN&lt;/a&gt; (which is where the “official” versions of most R packages reside), simply run the following:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#To include comments in R (like this), begin the comment with &amp;quot;#&amp;quot;, which will tell R
#to treat the following info as a comment and not try to run it as live R code.

#installation command
install.packages(&amp;quot;package_name&amp;quot;) #replace &amp;quot;package_name&amp;quot; with the name of the package 
# you want to install

#load the package when you want to use it using the base R library() function
library(package_name) #replace &amp;quot;package_name&amp;quot; with the name of the package 
#you&amp;#39;ve installed and want to use

# for example, some of the functions I recommend below for importing data use
# the readr package, which is part of the tidyverse suite of pacakges:

install.packages(&amp;quot;readr&amp;quot;) #replace &amp;quot;package_name&amp;quot; with the name of the package 

library(readr)

#or if you want all of the tidyverse packages (which we will be using throughout this guide)
install.packages(&amp;quot;tidyverse&amp;quot;)

library(tidyverse) #loads readr along with other helpful packages, like ggplot2 for graphing.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For packages hosted on GitHub, which are typically in development, the process is slightly more complicated but still requires only couple of lines of code:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#1. first install and load the devtools package

#install devtools from CRAN
install.packages(&amp;quot;devtools&amp;quot;)

#load the devtools package
library(devtools)

#2. install the package of interest from its github repository using 
# the install_github function()

install_github(&amp;quot;repository_name/package_name&amp;quot;)

# For example, to get the development version of the tidyr package, 
# which contains excellent new functions for converting between the long and wide 
# forms of data (there will be a later post on this), you would run:

install_github(&amp;quot;tidyverse/tidyr&amp;quot;) #contains more flexible 
# pivoting functions than the CRAN version of tidyr.

# Packages installed from GitHub can then also be loaded using the library() function 
# and the package name only:

library(tidyr)

#N.B. If you are using R studio, you can also install packages from CRAN 
# by clicking on the packages tab of the lower right panel and clicking the &amp;quot;Install&amp;quot; button&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;how-to-get-your-data-into-r&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; &lt;strong&gt;How to Get Your Data Into R&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Getting your data into R is also easy. Commands and packages specific to different data sources are listed below:&lt;/p&gt;
&lt;div id=&#34;comma-delimited-.csv-files&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.1&lt;/span&gt; Comma Delimited (.csv) Files&lt;/h2&gt;
&lt;p&gt;CSV files are the most common type of data file you’ll encounter as a data analyst. These can be imported using the &lt;strong&gt;read_csv()&lt;/strong&gt; function from the &lt;a href=&#34;https://readr.tidyverse.org/articles/readr.html&#34;&gt;&lt;strong&gt;readr&lt;/strong&gt;&lt;/a&gt; package.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#using the readr package:
library(readr)

read_csv(&amp;quot;directory_path/filename.csv&amp;quot;) #e.g. C:/Users/your_name/Desktop/documents/data.csv

# If you want to use the data after importing it, assign it to be stored in an object using 
# the assignment operator: &amp;quot;&amp;lt;-&amp;quot;

data &amp;lt;- read_csv(&amp;quot;directory_path/filename.csv&amp;quot;)

# N.B. If you are using R studio, you can use the keyboard shortcut 
# [&amp;quot;alt&amp;quot; + &amp;quot;-&amp;quot;] to insert &amp;quot;&amp;lt;-&amp;quot;  

# you can then examine the data by simply running the assigned name

data

# or clicking on it in the &amp;quot;environment&amp;quot; window in R studio (by default it is 
# in the top right panel)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;tab-delimited-.txt-files&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.2&lt;/span&gt; Tab Delimited (.txt) Files&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(readr)

data &amp;lt;- read_tsv(&amp;quot;directory_path/filename.txt&amp;quot;)

#yes, it is that easy ;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;files-with-other-delimiting-characters-also-.txt&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.3&lt;/span&gt; Files With Other Delimiting Characters (also .txt)&lt;/h2&gt;
&lt;p&gt;The read_csv() and read_tsv() functions are actually convienience wrappers for the workhorse function of the readr package, &lt;strong&gt;read_delim()&lt;/strong&gt;, which can be used to read in data files with any delimiting character (e.g. “-”, “$”, etc.). This is only slightly more complicated, in that you have to specify what the delimiting character is using the &lt;strong&gt;delim&lt;/strong&gt; argument.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(readr)

data &amp;lt;- read_delim(&amp;quot;directory_path/filename.txt&amp;quot;, delim = &amp;quot;|&amp;quot;) 
# specify the file path/name.txt and the delimiting character, 
# whatever it happens to be for your data file&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;microsoft-excel-files-.xlsx-.xls&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.4&lt;/span&gt; Microsoft Excel Files (.xlsx, .xls)&lt;/h2&gt;
&lt;p&gt;Excel files are fairly easy to import using the &lt;a href=&#34;https://readxl.tidyverse.org/&#34;&gt;&lt;strong&gt;readxl&lt;/strong&gt;&lt;/a&gt; package. Since these files may contain several speadsheets, you also have to specify the sheet that you want to use… unless it is the first one, which is assumed by default.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(readxl)

# If you want the first sheet then you can just specify the path
data &amp;lt;- read_excel(path = &amp;quot;path/file.xlsx&amp;quot;)

# If you want a different sheet then you have to specify which one using the sheet argument

data &amp;lt;- read_excel(path = &amp;quot;path/file.xlsx&amp;quot;,
                   sheet = &amp;quot;sheet_name&amp;quot;)

# Using the excel_sheets helper function makes things easier by showing you what the names 
# of each sheet are in the excel file.
excel_sheets(&amp;quot;path/file.xlsx&amp;quot;)

# You can also specify the sheet using an integer
data &amp;lt;- read_excel(path = &amp;quot;path/file.xlsx&amp;quot;,
                   sheet = 2) #to get the 2nd sheet&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;files-from-spss-sas-or-stata&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.5&lt;/span&gt; Files from SPSS, SAS, or Stata&lt;/h2&gt;
&lt;p&gt;If you’ve recently switched from working in SPSS, SAS, or Stata (or are collaborating with someone who uses these programs), you can also easily import your existing SPSS or SAS data files directly into R using the &lt;a href=&#34;https://cran.r-project.org/web/packages/haven/index.html&#34;&gt;haven&lt;/a&gt; package.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(haven)

#SAS files
data &amp;lt;- read_sas(&amp;quot;file_name.sas7bdat&amp;quot;) #if the file is in your working directory
#otherwise specify the file path as well, e.g. &amp;quot;path/file_name.sas7bdat&amp;quot;

#SPSS files
data &amp;lt;- read_sav(&amp;quot;file_name.sav&amp;quot;)

#Stata files
data &amp;lt;- read_dta(&amp;quot;file_name.dta&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;fixed-width-files-.txt-.gz-.bz2-.xz-.zip-etc.&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.6&lt;/span&gt; Fixed Width Files (.txt, .gz, .bz2, .xz, .zip, etc.)&lt;/h2&gt;
&lt;p&gt;Fixed width files are a less common type of data source where the values are separated not by tabs or specific characters but a set amount of white/empty space other than a tab. These can be loaded using the &lt;strong&gt;read_fwf()&lt;/strong&gt; function in &lt;strong&gt;readr&lt;/strong&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(readr)

# For these fixed width files, you can specify column positions (i.e. breaks between values)
# in multiple ways. See https://readr.tidyverse.org/reference/read_fwf.html, 
# which I used to obtain templates of the commands below, for further details.

# The main arguments you need to include are file = the file path/name.extension,
# col_positions, and col_names().

# the col_positions argument is different from the others we&amp;#39;ve see so far (e.g. delim) 
# in that it is primarily intended to be used by specifying a call to another function, 
# such as fwf_empty (see below), which tells read_fwf() how you want to specify the columns.
# some options are:

# 1. Guess based on position of empty columns using the fwf_empty helper function 
# as an argument(easiest):

file_path &amp;lt;- c(&amp;quot;directory_path/filename.txt&amp;quot;) #store the file path/name as &amp;quot;file_path&amp;quot;

data &amp;lt;- read_fwf(file = file_path,
                 col_positions = fwf_empty(file_path, 
                                           col_names = c(&amp;quot;col_1&amp;quot;, &amp;quot;col_2&amp;quot;, &amp;quot;col_3&amp;quot;)) 
                 #replace the above labels with column names you want to use.
                 #note that col_names is an argument supplied to the fwf_empty helper function
                 #which is then passed along to the read_fwf function.

# 2. Using a vector of field widths (a bit more tedious) with 
# the fwf_widths() helper function:

data &amp;lt;- read_fwf(file = file_path,
                 col_positions = fwf_widths(c(10, 7, 19, 290),
                 #replace the above with values appropriate to your data 
                           col_names = c(&amp;quot;col_1&amp;quot;, &amp;quot;col_2&amp;quot;, &amp;quot;col_3&amp;quot;))
                 
# 3. Specifying starting and ending positions of the columns with paired vectors
# using the fwf_positions() helper function

read_fwf(file = file_path, 
         fwf_positions(start = c(1, 50), #which positions do the columns start at
                       end = c(25, 75), #which positions do the columns end at
                       col_names = c(&amp;quot;col_1&amp;quot;, &amp;quot;col_2&amp;quot;))) #list of column names

# 4. Using named arguments for starting and ending positions with 
# the fwf_cols() helper function:

read_fwf(file = file_path, 
         col_positions = fwf_cols(name = c(1, 10), 
                                  birthdate = c(20, 50),
                                  age = c(60, 63)))

# 5. Via named arguments and column widths, also using the fwf_cols helper function:

read_fwf(file = file_path,
         fwf_cols(subject_id = 15, 
         #e.g. the subject_id column contains data in the 1st 15 characters of each row
                  test_score = 20))&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;htmlxml-files&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.7&lt;/span&gt; html/xml files&lt;/h2&gt;
&lt;p&gt;Those who need to scrape data from the web for their research can use the &lt;a href=&#34;https://rdrr.io/cran/rvest/&#34;&gt;rvest&lt;/a&gt; and &lt;a href=&#34;https://cran.r-project.org/web/packages/XML/index.html&#34;&gt;XML&lt;/a&gt; packages. Since this is not what most experimental scientists (at least among the many I’ve had the pleasure of meeting) will need to do, I have only provided the necessary functions below without a detailed explanation. See &lt;a href=&#34;http://bradleyboehmke.github.io/2015/12/scraping-html-tables.html&#34;&gt;this&lt;/a&gt; blog post for further details.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#HTML pages
library(rvest)

#store the url
url &amp;lt;- c(&amp;quot;http://www.webpagename.com&amp;quot;)

#read in the html data
web_page &amp;lt;- read_html(url)

#extract the html info for the target table
web_page_table &amp;lt;- html_nodes(web_page, &amp;quot;table&amp;quot;)

#parse the html table info into a data set that you can use in R 
data &amp;lt;- html_table(web_page_table, fill = TRUE)

#XML
library(XML)

#read in the html data
data &amp;lt;- readHTMLTable(url)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;javascript-object-notation-json-files&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.8&lt;/span&gt; JavaScript Object Notation (&lt;a href=&#34;https://www.json.org/&#34;&gt;JSON&lt;/a&gt;) Files&lt;/h2&gt;
&lt;p&gt;JSON files are way of storing JavaScript objects as text that can easily be imported in to R using the &lt;strong&gt;fromJSON()&lt;/strong&gt; function from the &lt;a href=&#34;https://cran.r-project.org/web/packages/jsonlite/vignettes/json-aaquickstart.html&#34;&gt;jsonlite&lt;/a&gt; package. Science trainees are unlikely to encounter this type of data unless they are working with web sources, e.g. twitter. See this &lt;a href=&#34;https://www.digitalocean.com/community/tutorials/an-introduction-to-json&#34;&gt;link&lt;/a&gt; for an accessible overview.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(jsonlite)
r_bloggers_data &amp;lt;- fromJSON(&amp;quot;~/Desktop/r-bloggers.json&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;navigation&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.9&lt;/span&gt; Navigation&lt;/h2&gt;
&lt;p&gt;Click &lt;a href=&#34;https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/&#34;&gt;here&lt;/a&gt; to go back to the previous post or &lt;a href=&#34;https://craig.rbind.io/post/2019-08-06-asgr-2-0-basic-operations-and-data-structures/&#34;&gt;here&lt;/a&gt; for the next post (on basic operations and data structures) in R.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;notes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.10&lt;/span&gt; Notes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Exporting data is also easy and will be covered in a later post. E.g. for readr functions this is usually done via the appropriately named &lt;em&gt;write_&lt;/em&gt; functions, like &lt;strong&gt;write_csv()&lt;/strong&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;By default, the above &lt;a href=&#34;https://readr.tidyverse.org/&#34;&gt;&lt;strong&gt;readr&lt;/strong&gt;&lt;/a&gt; functions will assume that the first row of your data file contains the variable names. For these functions, you can disable this by setting the &lt;strong&gt;col_names&lt;/strong&gt; argument to &lt;strong&gt;FALSE&lt;/strong&gt;, or you can provide a string/character vector of names to use instead by setting &lt;strong&gt;col_names&lt;/strong&gt; to the name of the string vector (see the next post for more on data vectors).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Arguments to a function can either be specified by name (which I have done here for the sake of transparency) or by position to save some typing. E.g. &lt;code&gt;read_fwf(file_path, fwf_cols(subject_id = 15, test_score = 20))&lt;/code&gt; is equivalent to the read_fwf syntax I provided above with argument names specified. There will be more on this in the next section of the blog.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;An R package only needs to be loaded once in an R session for the functions it contains to be available for use throughout the same session.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;There are also ways to import data from relational databases using SQL syntax. However, these methods go beyond the scope of this blog series since they are not relevant to most academic researchers and may be covered in the distant future if/when I write a second volume on R for machine learning and data science. An introduction to importing data from these sources can be found &lt;a href=&#34;https://datacarpentry.org/R-ecology-lesson/05-r-and-databases.html&#34;&gt;here&lt;/a&gt;. Those who are interested in starting to learn SQL (e.g. for work) would benefit from the free &lt;a href=&#34;https://www.datacamp.com/courses/intro-to-sql-for-data-science&#34;&gt;Introduction to SQL for Data Science&lt;/a&gt; course provided by datacamp.com, which is where I started learning how to use SQL.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Users working with large flat files (&amp;gt; 100 MB) may want to consider the &lt;a href=&#34;https://www.rdocumentation.org/packages/vroom/versions/1.0.2/topics/vroom&#34;&gt;&lt;strong&gt;vroom&lt;/strong&gt;&lt;/a&gt; function in the &lt;strong&gt;vroom&lt;/strong&gt; package or &lt;a href=&#34;https://www.rdocumentation.org/packages/data.table/versions/1.8.8/topics/fread&#34;&gt;&lt;strong&gt;fread&lt;/strong&gt;&lt;/a&gt; function in the &lt;strong&gt;data.table&lt;/strong&gt; package instead of &lt;strong&gt;readr&lt;/strong&gt; to import their data. You could use these for flat files of any size, but the speed difference probably won’t really be noticable for smaller files.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thank you for reading and I welcome any suggestions for future posts, comments or other feedback you might have. Feedback from beginners and science students/trainees (or with them in mind) is especially helpful in the interest of making this guide even better for them.&lt;/p&gt;
&lt;p&gt;This blog is something I do as a volunteer in my free time. If you’ve found it helpful and want to give back, &lt;a href=&#34;https://www.buymeacoffee.com/huttoncp&#34;&gt;coffee donations&lt;/a&gt; would be appreciated.&lt;/p&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js&#34; data-name=&#34;bmc-button&#34; data-slug=&#34;huttoncp&#34; data-color=&#34;#FF5F5F&#34; data-emoji=&#34;&#34;  data-font=&#34;Cookie&#34; data-text=&#34;Buy me a coffee&#34; data-outline-color=&#34;#000000&#34; data-font-color=&#34;#ffffff&#34; data-coffee-color=&#34;#FFDD00&#34; &gt;&lt;/script&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>A Scientist&#39;s Guide to R: Introduction and Basic Workflow</title>
      <link>https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/</link>
      <pubDate>Fri, 17 May 2019 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#introduction&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#workflow-outline&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Workflow Outline&lt;/strong&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#navigation&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; Navigation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#notes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.2&lt;/span&gt; Notes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; &lt;strong&gt;Introduction&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;This tutorial will be the first of many blog posts for new researchers and science program students/trainees on how to use R as an analytical and productivity tool in the process of conducting scientific research. Specifically, in this post I will explain why you might want to use R and provide a brief overview of the basic R workflow used in the analysis of experimentally obtained data.&lt;/p&gt;
&lt;p&gt;As someone who has spent many years analyzing data using a variety of technologies (e.g. SPSS, Excel, R), I know how intimidating and frustrating it can be to start learning R for the first time instead of using the simple point-and-click graphical user interfaces (GUIs) provided by commercial (i.e. paid) programs like SPSS. These programs work fine for implementing many simple and common analytical methods (e.g. t-tests, one-way ANOVAs to compare 2+ groups to one another on a single dependent measure) but as your research questions and data structures become more complicated (e.g. predictive modelling, working with non-normally distributed data), you will quickly find the functionality of these GUI-based programs to be rather limited. For me, this realization occured as a new graduate student at McMaster when I wanted to test a complex experimental hypothesis to see if there was a difference between one experimental group and several other groups (simultaneously, thereby avoiding the need to correct p-values for multiple comparisons) using a &lt;a href=&#34;http://www.utdallas.edu/~herve/abdi-contrasts2010-pretty.pdf&#34;&gt;linear contrast&lt;/a&gt; within a factorial ANOVA (the subject of a future blog post). You also have to pay to use commercial statistical packages, which can be a significant barrier for low-income students or even reseach labs struggling to maintain operating funds (which is most labs in Canada given the ~15% current funding rate).&lt;/p&gt;
&lt;p&gt;In contrast, R is constantly undergoing development by a large community of statisticians, scientific researchers, and other data science professionals, offering a way to use pretty much any analytical tool out there. Moreover, as long as researchers and statisticians continue preferring to develop novel analytical methods in R, it will continue to be the most advanced statistical software available. &lt;strong&gt;However, the fact that so many people are developing R also means that for any given analytical method of interest there will be multiple different ways of using it in R, each potentially requiring very different syntax.&lt;/strong&gt; Thus, knowing which of the many options to use can be a huge challenge for new useRs. As someone with experience training researchers to use R, and who has spent countless hours exploring the many options available to do different things in R, a major purpose of this blog will be to demonstrate how to use R for data analysis and boost your research productivity using methods that I have found to work best (from a scientific research perspective) in practice.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Once you know what you are doing (e.g. from reading these posts), R can arguably be even easier to use than commercial programs&lt;/strong&gt;. This is clearly demonstrated by the fact that one can accomplish a great deal with only a few lines of code, e.g. a simple &lt;a href=&#34;http://www.stat.yale.edu/Courses/1997-98/101/linreg.htm&#34;&gt;linear regression&lt;/a&gt; requires only a single line of code (to be covered in more detail in a future post):&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;summary(lm(Y ~ X, data = your_dataset)) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;With this line you ask R for a (regression) summary of a linear model (lm) where Y is a continuous outcome variable, X is a predictor, X and Y are contained in the dataframe “your_dataset”, and “~” means “as a function of”. You would have to click through seveal menus to obtain the same results in a GUI-based program.&lt;/p&gt;
&lt;p&gt;Perhaps the greatest benefit of using R is that once you have written a script to conduct an analysis, you can reproduce that analysis with new data simply by re-running the script (updating variable names as needed). When combined with &lt;a href=&#34;https://bookdown.org/yihui/rmarkdown/&#34;&gt;R Markdown&lt;/a&gt;, you can generate reproducible reports which make collaboration and communication of your results much easier. Think of just re-running a script a collaborator has written in R vs. following a set of step-by-step instructions to reproduce an analysis done via SPSS or Excel. The former usually takes less than a minute, while the latter could take hours and depends on how good your colleague’s instructions are. Since R is a fully functional programming language, things get even better when you start automating repetitive processess using loops.&lt;/p&gt;
&lt;p&gt;Another major advantage of using R is of course that it is free.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;workflow-outline&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; &lt;strong&gt;Workflow Outline&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Now that we know why you should use R, what are the main steps of analyzing data? My typical analytical workflow follows these 7 steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;0.&lt;a href=&#34;https://craig.rbind.io/post/2019-06-22-asgr-1-getting-data-into-r/#installing-and-loading-r-packages&#34;&gt;Install and load necessary packages&lt;/a&gt; (e.g. tidyverse)&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;1. &lt;a href=&#34;https://craig.rbind.io/post/2019-06-22-asgr-1-getting-data-into-r/#how-to-get-your-data-into-r&#34;&gt;Import&lt;/a&gt; data.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;2. &lt;a href=&#34;https://craig.rbind.io/post/2019-08-06-asgr-2-0-basic-operations-and-data-structures/&#34;&gt;Clean/Transform&lt;/a&gt; data.&lt;/strong&gt; This part usually takes longer than the analysis, but may not be necessary if you’ve entered the data yourself.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;3. &lt;a href=&#34;https://craig.rbind.io/post/2020-12-07-asgr-3-0-exploring-data-with-elucidate/&#34;&gt;Explore&lt;/a&gt; data&lt;/strong&gt; using descriptive summary statistics and visualisations.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;4. Resolve structural issues.&lt;/strong&gt; If any issues are detected in step 3, go back to step 2 and resolve them, restructuring data as needed.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;5. Model:&lt;/strong&gt; Fit an appropriate statistical model &amp;amp; check model assumptions (e.g. normality). Use a different model/test if assumptions are violated (e.g. a permutation test). Conduct follow-up or &lt;em&gt;post-hoc&lt;/em&gt; tests if desired.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;6. Analyze and Interpret&lt;/strong&gt; the results using appropriate graphics (e.g. tables/figures) and text summaries. These can easily be used as a foundation for building presentation slides or the results section of a manuscript.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;7. Communicate the results&lt;/strong&gt; to the target audience (e.g. other scientists) with a description of the methods used, relevant background/introduction and insightful discussion in a coherent and accessible report.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This represents the basic steps involved in the majority of data analysis tasks that one typically encounters in the social and behavioural sciences. As you might expect, for machine learning projects there are a few extra steps involved.&lt;/p&gt;
&lt;p&gt;Each of these sections will be covered in detail in future posts. Thanks for reading and I welcome any suggestions for future posts, comments or other feedback you might have.&lt;/p&gt;
&lt;div id=&#34;navigation&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; Navigation&lt;/h2&gt;
&lt;p&gt;Click &lt;a href=&#34;https://craig.rbind.io/post/2019-06-22-asgr-1-getting-data-into-r/&#34;&gt;here&lt;/a&gt; to continue to the next post on installing R, R packages, and importing data.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;notes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.2&lt;/span&gt; Notes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;This post has been peer-reviewed and approved by the University of Victoria &lt;a href=&#34;https://dss-ialh.rbind.io/#about&#34;&gt;Data Science Studio&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;The workflow I recommend above is very similar to the well-known data science workflow advocated by Grolemund and Wickham in their &lt;a href=&#34;https://r4ds.had.co.nz/explore-intro.html&#34;&gt;R for data science&lt;/a&gt; book. However, an important difference is that I recommend that most/all of the exploration and wrangling of the data be completed prior to advancing to the modelling stage. The idea is to sort out the structure of your final analytical dataset first and fit fewer models to save time.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thank you for reading and I welcome any suggestions for future posts, comments or other feedback you might have. Feedback from beginners and science students/trainees (or with them in mind) is especially helpful in the interest of making this guide even better for them.&lt;/p&gt;
&lt;p&gt;This blog is something I do as a volunteer in my free time. If you’ve found it helpful and want to give back, &lt;a href=&#34;https://www.buymeacoffee.com/huttoncp&#34;&gt;coffee donations&lt;/a&gt; would be appreciated.&lt;/p&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js&#34; data-name=&#34;bmc-button&#34; data-slug=&#34;huttoncp&#34; data-color=&#34;#FF5F5F&#34; data-emoji=&#34;&#34;  data-font=&#34;Cookie&#34; data-text=&#34;Buy me a coffee&#34; data-outline-color=&#34;#000000&#34; data-font-color=&#34;#ffffff&#34; data-coffee-color=&#34;#FFDD00&#34; &gt;&lt;/script&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Slides</title>
      <link>https://craig.rbind.io/slides/example/</link>
      <pubDate>Tue, 05 Feb 2019 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/slides/example/</guid>
      <description>

&lt;h1 id=&#34;welcome-to-slides&#34;&gt;Welcome to Slides&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;https://sourcethemes.com/academic/&#34; target=&#34;_blank&#34;&gt;Academic&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;features&#34;&gt;Features&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Efficiently write slides in Markdown&lt;/li&gt;
&lt;li&gt;3-in-1: Create, Present, and Publish your slides&lt;/li&gt;
&lt;li&gt;Supports speaker notes&lt;/li&gt;
&lt;li&gt;Mobile friendly slides&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;controls&#34;&gt;Controls&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Next: &lt;code&gt;Right Arrow&lt;/code&gt; or &lt;code&gt;Space&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Previous: &lt;code&gt;Left Arrow&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Start: &lt;code&gt;Home&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Finish: &lt;code&gt;End&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Overview: &lt;code&gt;Esc&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Speaker notes: &lt;code&gt;S&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Fullscreen: &lt;code&gt;F&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Zoom: &lt;code&gt;Alt + Click&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/hakimel/reveal.js#pdf-export&#34; target=&#34;_blank&#34;&gt;PDF Export&lt;/a&gt;: &lt;code&gt;E&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;code-highlighting&#34;&gt;Code Highlighting&lt;/h2&gt;

&lt;p&gt;Inline code: &lt;code&gt;variable&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Code block:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;porridge = &amp;quot;blueberry&amp;quot;
if porridge == &amp;quot;blueberry&amp;quot;:
    print(&amp;quot;Eating...&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;math&#34;&gt;Math&lt;/h2&gt;

&lt;p&gt;In-line math: $x + y = z$&lt;/p&gt;

&lt;p&gt;Block math:&lt;/p&gt;

&lt;p&gt;$$
f\left( x \right) = \;\frac{{2\left( {x + 4} \right)\left( {x - 4} \right)}}{{\left( {x + 4} \right)\left( {x + 1} \right)}}
$$&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;fragments&#34;&gt;Fragments&lt;/h2&gt;

&lt;p&gt;Make content appear incrementally&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{% fragment %}} One {{% /fragment %}}
{{% fragment %}} **Two** {{% /fragment %}}
{{% fragment %}} Three {{% /fragment %}}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Press &lt;code&gt;Space&lt;/code&gt; to play!&lt;/p&gt;

&lt;p&gt;&lt;span class=&#34;fragment &#34; &gt;
   One
&lt;/span&gt;
&lt;span class=&#34;fragment &#34; &gt;
   &lt;strong&gt;Two&lt;/strong&gt;
&lt;/span&gt;
&lt;span class=&#34;fragment &#34; &gt;
   Three
&lt;/span&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;A fragment can accept two optional parameters:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;class&lt;/code&gt;: use a custom style (requires definition in custom CSS)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;weight&lt;/code&gt;: sets the order in which a fragment appears&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;speaker-notes&#34;&gt;Speaker Notes&lt;/h2&gt;

&lt;p&gt;Add speaker notes to your presentation&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;{{% speaker_note %}}
- Only the speaker can read these notes
- Press `S` key to view
{{% /speaker_note %}}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Press the &lt;code&gt;S&lt;/code&gt; key to view the speaker notes!&lt;/p&gt;

&lt;aside class=&#34;notes&#34;&gt;
  &lt;ul&gt;
&lt;li&gt;Only the speaker can read these notes&lt;/li&gt;
&lt;li&gt;Press &lt;code&gt;S&lt;/code&gt; key to view&lt;/li&gt;
&lt;/ul&gt;
&lt;/aside&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;themes&#34;&gt;Themes&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;black: Black background, white text, blue links (default)&lt;/li&gt;
&lt;li&gt;white: White background, black text, blue links&lt;/li&gt;
&lt;li&gt;league: Gray background, white text, blue links&lt;/li&gt;
&lt;li&gt;beige: Beige background, dark text, brown links&lt;/li&gt;
&lt;li&gt;sky: Blue background, thin dark text, blue links&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;night: Black background, thick white text, orange links&lt;/li&gt;
&lt;li&gt;serif: Cappuccino background, gray text, brown links&lt;/li&gt;
&lt;li&gt;simple: White background, black text, blue links&lt;/li&gt;
&lt;li&gt;solarized: Cream-colored background, dark green text, blue links&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;


&lt;section data-noprocess data-shortcode-slide
  
      
      data-background-image=&#34;/img/boards.jpg&#34;
  &gt;


&lt;h2 id=&#34;custom-slide&#34;&gt;Custom Slide&lt;/h2&gt;

&lt;p&gt;Customize the slide style and background&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;{{&amp;lt; slide background-image=&amp;quot;/img/boards.jpg&amp;quot; &amp;gt;}}
{{&amp;lt; slide background-color=&amp;quot;#0000FF&amp;quot; &amp;gt;}}
{{&amp;lt; slide class=&amp;quot;my-style&amp;quot; &amp;gt;}}
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;custom-css-example&#34;&gt;Custom CSS Example&lt;/h2&gt;

&lt;p&gt;Let&amp;rsquo;s make headers navy colored.&lt;/p&gt;

&lt;p&gt;Create &lt;code&gt;assets/css/reveal_custom.css&lt;/code&gt; with:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-css&#34;&gt;.reveal section h1,
.reveal section h2,
.reveal section h3 {
  color: navy;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;h1 id=&#34;questions&#34;&gt;Questions?&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;https://discourse.gohugo.io&#34; target=&#34;_blank&#34;&gt;Ask&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://sourcethemes.com/academic/docs/&#34; target=&#34;_blank&#34;&gt;Documentation&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Early intervention with a multi-ingredient dietary supplement improves mood and spatial memory in a triple transgenic mouse model of Alzheimer&#39;s disease</title>
      <link>https://craig.rbind.io/publication/hutton-et-al-2018/</link>
      <pubDate>Wed, 09 May 2018 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/publication/hutton-et-al-2018/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Synergistic effects of diet and exercise on hippocampal function in chronically stressed mice or chronic stress</title>
      <link>https://craig.rbind.io/publication/hutton-et-al-2015/</link>
      <pubDate>Thu, 12 Nov 2015 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/publication/hutton-et-al-2015/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Assessing anxiety and reward-related behaviors following alcohol administration or chronic stress</title>
      <link>https://craig.rbind.io/publication/aujla-et-al-2013/</link>
      <pubDate>Tue, 01 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://craig.rbind.io/publication/aujla-et-al-2013/</guid>
      <description></description>
    </item>
    
  </channel>
</rss>
