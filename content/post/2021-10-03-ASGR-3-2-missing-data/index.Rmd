---
title: 'A Scientist''s Guide to R: Step 3.2 - missing data'
author: 'Craig Hutton'
date: '2021-10-03'
slug:
categories:
  - R
  - Reproducible Research
  - data exploration
  - missing data

tags:
  - R
header:
  image: ''
  caption: ''
  focal_point: ''
output: 
  blogdown::html_page:
    number_sections: true
    toc: true
  
---

```{r setup, include=FALSE, eval=TRUE}
knitr::opts_chunk$set(cache = TRUE)
```

# **TL;DR**

This post provides guidance on how to check for and handle missing data. 

# **Introduction**

This post in the [Scientist's Guide to R series](https://craig.rbind.io/post/2019-05-17-asgr-basic-workflow/) introduces you to the problem of missing data and offers several strategies for dealing with it. 

During world war two, American bomber planes were taking heavy fire from German air defenses. To protect their bombers as efficiently as possible, the American military asked the Statistical Research Group (SRG) at Columbia University for advice about where they should reinforce the armor of their planes to while adding minimal additional weight to avoid slowing the planes down too much. After inspecting bullet hole patterns from images of the damaged planes that had returned to base, mathematician Abraham Wald with the SRG [famously](https://www.youtube.com/watch?v=ENFWauAcEyg) recommended that the military reinforce the areas where no damage was observed on the planes that had survived being shot at, rather than the areas where the highest density of bullet holes were observed. His reasoning was that because the planes had survived the flight back to base, it would be better to reinforce the armor of certain areas without any visible damage, such as the engines, because damage to those areas would more likely lead to crashes. This is an example of survivorship bias, 

where missing data, such as bullet hole patterns on planes that didn't survive (and were therefore unobserved), can be as important as the observed data in guiding effective decision making.

## types of missing data

Missing info/data

  - missing completely at random
  
  - missing at random
  
  - missing not at random


## detecting missing values

 - `elucidate::describe_na_all()`
 
 - `elucidate::plot_na_all()`
 
 - combination of describe all and a graph.
 
How to tell if missingness might be non-random? Plot missingness in one variable against other variables. 

**to do:** gather a source of messy data with some missing values to examine

```{r}
library(elucidate)
pdata |> describe_na_all()

gapminder::gapminder_unfiltered |> plot_na_all() 

```

# **missing data imputation**

Check summary stats for variable before and after

- complete case analysis (drop rows with missing values)

- mean/mode imputation

- an extra category for categorical variables

- using a key value and missing indicator column

- model-based imputation

- PCA/FAMD/GLRM imputation

- multiple imputation by chained equations

- bayesian imputation

- using a model that can handle missing values (cart, XGBoost, keras MLP)

- should Y be used for imputing predictors?

- If Y is missing, this becomes a forecasting/prediction problem.

# **Navigation**

Click [here](https://craig.rbind.io/post/2021-05-17-asgr-3-1-data-visualization/) to go back to the previous post on data visualization with [ggplot2](https://ggplot2.tidyverse.org/). A link to the next one, on dealing with missing values, will be added as soon as I have time to write it.

# **Notes**

  * note 1
  
  * note 2

Thank you for visiting my blog. I welcome any suggestions for future posts, comments or other feedback you might have. Feedback from beginners and science students/trainees (or with them in mind) is especially helpful in the interest of making this guide even better for them.

This blog is something I do as a volunteer in my free time. If you've found it helpful and want to give back, [coffee donations](https://www.buymeacoffee.com/huttoncp) would be appreciated. 

<script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="huttoncp" data-color="#FF5F5F" data-emoji=""  data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#ffffff" data-coffee-color="#FFDD00" ></script>
